{"version":3,"sources":["pages/detail/controller/actions.ts","pages/detail/index.tsx"],"names":["bindActionCreators","requestDetail","dispatch","getState","console","log","setTimeout","data","type","t","payload","chnageDetail","store","Detail","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","this","call","skuid","onToNext","history","push","onToButton","setState","onChangeDetail","actions","state","match","params","_createClass","key","value","prevProps","prevState","_this2","snapshot","detailDemo","React","onClick","concat","connect","ownProps","detail"],"mappings":"6KAiCeA,cACb,CACEC,cAbkB,WAGpB,OAAO,SAACC,EAAeC,GACrBC,QAAQC,IAAI,mBACZC,WAAW,WAnBO,IAACC,EAoBjBL,GApBiBK,EAoBM,GApBS,CACpCC,KAAMC,IACNC,QAASH,MAmBJ,OAOHI,aAvBiB,WACnB,OAAO,SAACT,EAAeC,GACrBD,EAAS,CACPM,KAAMC,IACNC,QAAS,qBAqBbE,IAAMV,UCzBFW,EAAM,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,YAAAJ,GAEX,SAAAA,EAAYK,GAAe,IAAAC,EAAAC,YAAAC,KAAAR,IAC1BM,EAAAH,EAAAM,KAAAD,KAAMH,IAFPK,WAAK,EAAAJ,EA6CLK,SAAW,WACUL,EAAKD,MAAjBO,QACAC,KAAK,iBACbP,EACDQ,WAAa,WACZR,EAAKI,MAAQ,MACbJ,EAAKS,SAAS,CACbL,MAAO,SAERJ,EACDU,eAAiB,WAChBC,EAAQnB,gBArDRQ,EAAKY,MAAQ,CACZR,MAAO,WAER,IAAQS,EAAUb,EAAKD,MAAfc,MAE8C,OADtDb,EAAKI,MAAQS,EAAMC,OAAOV,MAC1BnB,QAAQC,IAAI,8BAA+Bc,EAAKI,OAAMJ,EAKtD,OAJAe,YAAArB,EAAA,EAAAsB,IAAA,oBAAAC,MAKD,WACChC,QAAQC,IAAI,2BAA4BgB,KAAKE,OAC7CO,EAAQ7B,kBACR,CAAAkC,IAAA,wBAAAC,MAED,WAEC,OADAhC,QAAQC,IAAI,wCAAyCgB,KAAKE,QACnD,IACP,CAAAY,IAAA,0BAAAC,MACD,SAAwBC,EAAmBC,GAAmB,IAAAC,EAAAlB,KAC7DjB,QAAQC,IAAI,2BAA4BgB,KAAKE,OAC7C,IACMA,EADYF,KAAKH,MAAfc,MACYC,OAAOV,MAU3B,OATIF,KAAKE,QAAUA,GAClBF,KAAKO,SAAS,SAACU,EAAWpB,GAEzB,OADAqB,EAAKhB,MAAQA,EACN,CACNA,WAKI,OACP,CAAAY,IAAA,qBAAAC,MACD,SAAmBC,EAAmBC,EAAmBE,GACxDpC,QAAQC,IAAI,+BAEZ,CAAA8B,IAAA,uBAAAC,MACD,WACChC,QAAQC,IAAI,uCAAwCgB,KAAKE,SACzD,CAAAY,IAAA,SAAAC,MAcD,WACChC,QAAQC,IAAI,yBAA0BgB,KAAKE,OAC3C,IAAQkB,EAAepB,KAAKH,MAApBuB,WACR,OACCC,gBAAA,WACCA,gBAAA,UAAQC,QAAStB,KAAKQ,gBAAgB,gBACtCa,gBAAA,UAAQC,QAAStB,KAAKG,UAAU,wCAGhCkB,gBAAA,WACAA,gBAAA,UAAQC,QAAStB,KAAKM,YAAY,gDAIjCN,KAAKU,MAAMR,MAEZmB,gBAAA,qBAAAE,OAEYH,QAKd,EAAAN,IAAA,2BAAAC,MAvED,SAAgClB,EAAea,GAE9C,OADA3B,QAAQC,IAAI,2CAA4Ca,GACjD,SACPL,EAdU,CAAS6B,aA2FNG,sBANf,SAAyBd,EAAYe,GAGpC,MAAO,CAAEC,OAFUhB,EAAXgB,SAK+B,KAAzBF,CAA+BhC","file":"static/js/19.62dd661c.chunk.js","sourcesContent":["import { bindActionCreators } from 'redux';\nimport store from '@/store';\nimport * as t from './type';\n\n// const detail = () => ({\n//     type: t.DETAIL\n// })\n\nconst detailSuccess = (data: any) => ({\n  type: t.DETAIL_SUCCESS,\n  payload: data\n});\n\nconst chnageDetail = () => {\n  return (dispatch: any, getState: any) => {\n    dispatch({\n      type: t.CHANGE_DETAIL,\n      payload: 'changedDetail'\n    });\n  };\n};\n\nconst requestDetail = () => {\n  // 这里的dispatch和getState都是redux-thunk注入进来的\n  // redux的dispatch只返回plain object，中间件会返回多样式数据包括异步\n  return (dispatch: any, getState: any) => {\n    console.log('dispatch-detail');\n    setTimeout(() => {\n      dispatch(detailSuccess({}));\n    }, 2000);\n  };\n};\n\nexport default bindActionCreators(\n  {\n    requestDetail,\n    chnageDetail\n  },\n  store.dispatch\n);\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport actions from './controller/actions'\n\ninterface IProps {\n\tmatch: any;\n\thistory: any;\n\tdetail: any;\n\tdetailDemo: string\n}\ninterface IState {\n\tskuid: string;\n}\nclass Detail extends React.Component<IProps, IState> {\n\tskuid: any\n\tconstructor(props: IProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tskuid: 'default'\n\t\t};\n\t\tconst { match } = this.props\n\t\tthis.skuid = match.params.skuid\n\t\tconsole.log('Detail===constructor======>', this.skuid)\n\t}\n\tstatic getDerivedStateFromProps(props: IProps, state: IState) {\n\t\tconsole.log('Detail===getderivedstatefromprops======>', props)\n\t\treturn null\n\t}\n\tcomponentDidMount() {\n\t\tconsole.log('Detail===didMount======>', this.skuid)\n\t\tactions.requestDetail()\n\t}\n\n\tshouldComponentUpdate() {\n\t\tconsole.log('Detail===shouldComponentUpdate======>', this.skuid)\n\t\treturn true;\n\t}\n\tgetSnapshotBeforeUpdate(prevProps: IProps, prevState: IState) {\n\t\tconsole.log('Detail===snapshot======>', this.skuid)\n\t\tconst { match } = this.props\n\t\tconst skuid = match.params.skuid\n\t\tif (this.skuid !== skuid) {\n\t\t\tthis.setState((prevState, props) => {\n\t\t\t\tthis.skuid = skuid\n\t\t\t\treturn {\n\t\t\t\t\tskuid\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn null\n\t}\n\tcomponentDidUpdate(prevProps: IProps, prevState: IState, snapshot: any) {\n\t\tconsole.log('Detail===didUpdate======>',)\n\t\t// 拿到skuid，可以更新页面\n\t}\n\tcomponentWillUnmount() {\n\t\tconsole.log('Detail===componentWillUnmount======>', this.skuid)\n\t}\n\tonToNext = () => {\n\t\tconst { history } = this.props\n\t\thistory.push('/detail/next')\n\t}\n\tonToButton = () => {\n\t\tthis.skuid = \"123\"\n\t\tthis.setState({\n\t\t\tskuid: \"123\"\n\t\t})\n\t}\n\tonChangeDetail = () => {\n\t\tactions.chnageDetail()\n\t}\n\trender() {\n\t\tconsole.log(\"Detail===render======>\", this.skuid)\n\t\tconst { detailDemo } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button onClick={this.onChangeDetail}>changeDetail</button>\n\t\t\t\t<button onClick={this.onToNext}>\n\t\t\t\t\t路由跳转重用\n\t\t\t\t</button>\n\t\t\t\t<br />\n\t\t\t\t<button onClick={this.onToButton}>\n\t\t\t\t\tsetState重用当前页面\n\t\t\t\t</button>\n\t\t\t\t{\n\t\t\t\t\tthis.state.skuid\n\t\t\t\t}\n\t\t\t\t<div>\n\t\t\t\t\t{\n\t\t\t\t\t\t`Detail:${detailDemo}`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state: any, ownProps: IProps) {\n\tconst { detail } = state\n\n\treturn { detail }\n}\n\nexport default connect(mapStateToProps, null)(Detail);"],"sourceRoot":""}