(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1479:function(e,t,n){e.exports={sidebar:"Stencil_sidebar__6-3NF",title:"Stencil_title__1rEvH",gtitle:"Stencil_gtitle__3We5B",search:"Stencil_search__1JJxM",container:"Stencil_container__1PAXR",tools:"Stencil_tools__3Sb1B",tool:"Stencil_tool__2aukW",noresult:"Stencil_noresult__jxg_x"}},1480:function(e,t,n){e.exports={droptarget:"DropTarget_droptarget__3BpH_"}},1481:function(e,t,n){e.exports={dragsource:"DragSource_dragsource__3Up37",default:"DragSource_default__37TDy",icon:"DragSource_icon__azWm1",name:"DragSource_name__3iYLy"}},1482:function(e,t,n){e.exports={background:"Background_background__3KzEz"}},1483:function(e,t,n){e.exports={alert:"Alert_alert__1YTmw"}},1486:function(e,t,n){e.exports={cmsworkbench:"CmsWorkbench_cmsworkbench__1oE2_",toolbar:"CmsWorkbench_toolbar__2loCb",active:"CmsWorkbench_active__J61_m",toollist:"CmsWorkbench_toollist__3X4S3",business:"CmsWorkbench_business__8Gubz",save:"CmsWorkbench_save__okfdQ",content:"CmsWorkbench_content__3fzNt",workbench:"CmsWorkbench_workbench__3-YoO",pc:"CmsWorkbench_pc__2rUXF",phone:"CmsWorkbench_phone__mqcmh",unit:"CmsWorkbench_unit__1kQU3",delete:"CmsWorkbench_delete__2IF-e",component:"CmsWorkbench_component__1_zDn",config:"CmsWorkbench_config__3KTNu",preview:"CmsWorkbench_preview__3Ofc_"}},1487:function(e,t,n){e.exports={container:"X6Workbench_container__2W2GH",toolbar:"X6Workbench_toolbar__38IAD",graph:"X6Workbench_graph___Ojbu",selected:"X6Workbench_selected__efbet",myport:"X6Workbench_myport__AQypD"}},1488:function(e,t,n){e.exports={root:"WfhRect_root__3qnWL"}},1489:function(e,t,n){e.exports={root:"WfhTriangle_root__q5VVR"}},1490:function(e,t,n){e.exports={container:"x6_container__1aBM4",mine:"x6_mine__3RLXB",dndframe:"x6_dndframe__380uv",sidebar:"x6_sidebar__3KL-I",content:"x6_content__YNsLB"}},1522:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n(4),l=n(6),r=n(3),c=n(7),i=n(5),u=n.n(i),s=n(1514),d=n(1078),m=n(1044),p=n(1479),g=n.n(p),v=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).onSearch=function(e){var t=e.target.value,o=n.state.allToolList,a=o;console.log("search===>",a),t&&(a=o.filter(function(e){var n,o;return(null===(n=e.name)||void 0===n?void 0:n.indexOf(t))>-1||(null===(o=e.id)||void 0===o?void 0:o.indexOf(t))>-1})),n.setState({toolList:a})},n.state={toolList:n.props.toolList.toJS(),allToolList:n.props.toolList.toJS(),prevToolList:n.props.toolList},n}return Object(c.a)(t,e),Object(a.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.toolList,o=t.prevToolList;return m.default.is(o,n)?null:{toolList:n.toJS(),allToolList:n.toJS(),prevToolList:n}}}]),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dragSource,n=e.bSearch,o=e.title,a=void 0===o?"\u5de5\u5177\u96c6":o,l=e.notFoundText,r=void 0===l?"\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684\u6a21\u677f":l,c=this.state.toolList;return i.createElement("div",{className:g.a.sidebar},a?i.createElement("div",{className:g.a.title},a):null,n?i.createElement("div",{className:g.a.search},i.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9",onChange:this.onSearch})):null,c.length>0?i.createElement("div",{className:g.a.container},i.createElement("div",{className:g.a.gtitle},"stencils"),i.createElement("div",{className:g.a.tools},c.map(function(e,n){return i.createElement("div",{className:g.a.tool,key:"".concat(e.id,"-").concat(n)},i.createElement(t,Object.assign({key:"".concat(e.id,"-").concat(n)},e)))}))):i.createElement("div",{className:g.a.noresult},r))}}]),t}(i.Component);v.defaultProps={toolList:[],bSearch:!0};var h,f,b=v,y=n(88),E=n(19),_=n(32),k=n(1496),T=n(1480),O=n.n(T),C=n(1531);!function(e){e.X6_DROP_TARGET="X6_DROP_TARGET"}(h||(h={})),function(e){e.DRAG_NODE_DATA="DRAG_NODE_DATA",e.COPY_EDGE_DATA="COPY_NODE_DATA",e.API_DATA="API_DATA",e.OTHER_DATA="OTHER_DATA"}(f||(f={}));var w={dataList:m.default.List([]),edgeList:m.default.List([]),current:m.default.Map({}),configs:m.default.Map({}),dataSource:f.DRAG_NODE_DATA};function j(e,t){var n=t.type,o=t.payload;switch(n){case"init":var a=o.dataList,l=void 0===a?[]:a,r=o.edgeList,c=void 0===r?[]:r,i=o.current,u=void 0===i?{}:i,s=o.configs,d=void 0===s?{}:s;return{dataList:m.default.List.isList(l)?l:m.default.List(l),edgeList:m.default.List.isList(c)?c:m.default.List(c),current:m.default.Map.isMap(u)?u:m.default.Map(u),configs:m.default.Map.isMap(d)?d:m.default.Map(d),dataSource:f.API_DATA};case"drop":var p=e.dataList,g=e.edgeList,v=e.configs;return{dataList:p.push(o),edgeList:g,current:m.default.Map(o),configs:v,dataSource:f.DRAG_NODE_DATA};case"deleteData":var h=e.current,b=e.configs,y=e.dataList,k=h.id,T=y.filter(function(e){return e.id!==k});delete b[k];var O=T[0];return Object(_.a)({},e,{dataList:T,current:O,configs:Object(_.a)({},b)});case"edge":case"deleteEdge":return e;case"current":return Object(_.a)({},e,{current:m.default.Map(o)});case"configs":var C=e.configs,w=o.id,j=o.config,x=C[w]||{};return Object(_.a)({},e,{configs:Object(_.a)({},C,Object(E.a)({},w,Object(_.a)({},x,j)))});default:return e}}var x,N=function(e){var t=i.useReducer(j,w),n=Object(y.a)(t,2),o=n[0],a=o.dataList,l=o.edgeList,r=o.current,c=o.configs,u=o.dataSource,s=n[1],d=i.useCallback(function(e){s({type:"init",payload:e})},[]),m=i.useCallback(function(){s({type:"deleteData"})},[]),p=i.useCallback(function(e){s({type:"edge",payload:e})},[]),g=i.useCallback(function(e){s({type:"deleteEdge",payload:e})},[]),v=i.useCallback(function(e){s({type:"current",payload:e})},[]),f=i.useCallback(function(e){s({type:"configs",payload:e})},[]);console.log("dropTarget=====configs====>",c);var b=e.workbench,E=e.accept,T=void 0===E?[h.X6_DROP_TARGET]:E,x=Object(k.a)(function(){return{accept:T,drop:function(e,t){var n=Object(C.a)({node:[1,35,69,103,137,171],clockseq:4660,msecs:(new Date).getTime(),nsecs:5678});return s({type:"drop",payload:Object(_.a)({id:n},e)}),{}},collect:function(e){return{demo:"xxxx"}}}}),N=Object(y.a)(x,2),D=N[0],L=N[1];return i.createElement("div",{ref:L,className:O.a.droptarget},i.createElement(b,Object.assign({init:d,dataList:a,dataSource:u,deleteData:m,edgeList:l,setEdge:p,deleteEdge:g,current:r,setCurrent:v,configs:c,setConfigs:f},D)))},D=n(1527),L=n(1481),S=n.n(L);function A(e){return i.createElement("div",{className:S.a.default},i.createElement("div",{className:S.a.icon}),i.createElement("div",{className:S.a.name},e.name))}(x||(x={})).X6_DROP_TARGET="X6_DROP_TARGET";var I=function(e){var t=e.type,n=void 0===t?x.X6_DROP_TARGET:t,o=e.name,a=e.toolComponent,l=e.data,r=void 0===l?{}:l,c=Object(D.a)(function(){return console.log("useDrag-----data=======>",r),{type:n,item:Object(_.a)({},r),end:function(){},collect:function(e){return{demo:"demo"}}}}),u=Object(y.a)(c,2)[1],s=i.createElement(A,{name:o});return a&&(s=a),i.createElement("div",{className:S.a.dragsource,ref:u},s)},M=n(1482),H=n.n(M);function R(e){if(e.componentType!==R.componentType)return null;var t={backgroundColor:e.color,backgroundImage:e.image};return i.createElement("div",{className:H.a.background,style:t})}function W(e){var t=e.color,n=e.setConfig,o=i.useState(t||""),a=Object(y.a)(o,2),l=a[0],r=a[1];return i.createElement("div",null,i.createElement("span",null,"Background"),i.createElement("input",{value:l,onChange:i.useCallback(function(e){n("color",e.target.value),r(e.target.value)},[]),placeholder:"\u8bf7\u8f93\u5165\u516d\u4f4d\u989c\u8272\u503c"}))}R.thumbnail="\u80cc\u666f\u8272",R.componentType="background",R.title="\u80cc\u666f\u8272",W.componentType="background";var P=n(1483),q=n.n(P);function G(e){var t=e.text;return i.createElement("div",{className:q.a.alert},t)}function X(e){var t=e.text,n=e.setConfig;if(e.componentType!==G.componentType)return null;return i.createElement("div",null,i.createElement("span",null,"Alert"),i.createElement("input",{value:t,onChange:function(e){n("text",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u8b66\u544a\u6587\u6863"}))}G.thumbnail="\u8b66\u544a\u4fe1\u606f",G.componentType="alert",G.title="\u8b66\u544a\u4fe1\u606f",X.componentType="alert";var J=n(1518),U=n(1526),V=n(1520),B=n(1525),F=n(1521);function Y(e){console.log("WfhInput====>",e);var t=e.label,n=e.param,o=e.required,a=void 0===o?{}:o,l=e.length,r=void 0===l?Number.MAX_SAFE_INTEGER:l,c=e.holder,u=void 0===c?void 0:c;return i.createElement(J.a.Item,{label:t,name:n||"name",rules:[{required:"\u662f"===a.value,message:"".concat(t,"\u662f\u5fc5\u586b\u5b57\u6bb5")}]},i.createElement(U.a,{maxLength:r,placeholder:u}))}Y.thumbnail="\u5355\u884c\u6587\u672c",Y.componentType="wfhinput",Y.title="\u5355\u884c\u6587\u672c";var z=[{label:"\u662f",value:"\u662f"},{label:"\u5426",value:"\u5426"}],K={title:"WfhInput\u7ec4\u4ef6\u5c5e\u6027",base:"\u57fa\u7840\u5c5e\u6027",label:"\u6807\u9898",labelHolder:"\u8bf7\u8f93\u5165\u6807\u9898",param:"\u5bf9\u5e94\u5165\u53c2",paramHolder:"\u8bf7\u9009\u62e9\u5bf9\u5e94\u5165\u53c2",holder:"\u5360\u4f4d\u63d0\u793a",holderHolder:"\u8bf7\u8f93\u5165\u5360\u4f4d\u63d0\u793a",spec:"\u6821\u9a8c\u5c5e\u6027",required:"\u5fc5\u586b",requiredHolder:"\u8bf7\u9009\u62e9\u662f\u5426\u5fc5\u586b",maxlength:"\u6700\u5927\u957f\u5ea6",maxlengthHolder:"\u8bf7\u8f93\u5165\u6700\u5927\u957f\u5ea6"};var Q=i.forwardRef(function(e,t){var n=J.a.useForm(),o=Object(y.a)(n,1)[0];i.useImperativeHandle(t,function(){return{form:o}});var a=i.useState([]),l=Object(y.a)(a,2),r=l[0],c=l[1];i.useEffect(function(){setTimeout(function(){c([{label:"uid",value:"uid",other:"1"},{label:"name",value:"name",other:"2"},{label:"age",value:"age",other:"3"}])},1e3)},[]);var u=e.config,s=e.setConfig;if(e.componentType!==Y.componentType)return null;var d=Object.keys(u).reduce(function(e,t){var n={name:[t],value:u[t]};return e.push(n),e},[]);return i.createElement(J.a,{fields:d,form:o,onValuesChange:function(e,t){var n=Object.keys(e)[0];s(n,e[n])},labelCol:{span:6}},i.createElement(V.a,{title:K.title},i.createElement("h3",null,K.base),i.createElement(J.a.Item,{label:K.label,name:"label",rules:[{required:!0,message:K.labelHolder}]},i.createElement(U.a,{maxLength:10,placeholder:K.labelHolder})),i.createElement(J.a.Item,{label:K.param,name:"param",rules:[{required:!0,message:K.paramHolder}]},i.createElement(B.a,{labelInValue:!0,placeholder:K.paramHolder},r.map(function(e){return i.createElement(B.a.Option,{key:e.value,value:e.value},e.label)}))),i.createElement(J.a.Item,{label:K.holder,name:"holder"},i.createElement(U.a,{maxLength:20,placeholder:K.holderHolder})),i.createElement("h3",null,K.spec),i.createElement(J.a.Item,{label:K.required,name:"required"},i.createElement(B.a,{labelInValue:!0,placeholder:K.requiredHolder},z.map(function(e){return i.createElement(B.a.Option,{key:e.value,value:e.value},e.label)}))),i.createElement(J.a.Item,{label:K.maxlength,name:"length"},i.createElement(F.a,{min:0,placeholder:K.maxlengthHolder}))))});function Z(e){var t=e.text;return i.createElement("div",null,t)}function $(e){var t=e.text,n=e.setConfig;if(e.componentType!==Z.componentType)return null;return i.createElement("div",null,i.createElement("span",null,"WfhInputNum"),i.createElement("input",{value:t,onChange:function(e){n("text",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u8b66\u544a\u6587\u6863"}))}function ee(e){var t=e.text;return i.createElement("div",null,t)}Z.thumbnail="\u6570\u503c\u8f93\u5165",Z.componentType="wfhinputnum",Z.title="\u6570\u503c\u8f93\u5165",$.componentType="input",ee.thumbnail="\u4e0b\u62c9\u6846",ee.componentType="wfhselect",ee.title="\u4e0b\u62c9\u6846";var te=[{label:"\u662f",value:"\u662f"},{label:"\u5426",value:"\u5426"}],ne={title:"WfhSelect\u7ec4\u4ef6\u5c5e\u6027",base:"\u57fa\u7840\u5c5e\u6027",label:"\u6807\u9898",labelHolder:"\u8bf7\u8f93\u5165\u6807\u9898",param:"\u5bf9\u5e94\u5165\u53c2",paramHolder:"\u8bf7\u9009\u62e9\u5bf9\u5e94\u5165\u53c2",holder:"\u5360\u4f4d\u63d0\u793a",holderHolder:"\u8bf7\u8f93\u5165\u5360\u4f4d\u63d0\u793a",search:"\u641c\u7d22",searchHolder:"\u8bf7\u914d\u7f6e\u662f\u5426\u652f\u6301\u641c\u7d22",spec:"\u6821\u9a8c\u5c5e\u6027",required:"\u662f\u5426\u5fc5\u586b",requiredHolder:"\u8bf7\u9009\u62e9\u662f\u5426\u5fc5\u586b",option:"\u9009\u9879\u5c5e\u6027",source:"\u6570\u636e\u6e90",sourceHolder:"\u8bf7\u8f93\u5165\u6570\u636e\u6e90",select:"\u9009\u9879\u5b57\u6bb5",selectHolder:"\u8bf7\u914d\u7f6e\u9009\u9879\u5b57\u6bb5",inparam:"\u5165\u53c2\u5b57\u6bb5",inparamHolder:"\u8bf7\u914d\u7f6e\u5165\u53c2\u5b57\u6bb5",type:"\u9009\u9879\u7c7b\u578b",typeHolder:"\u8bf7\u914d\u7f6e\u9009\u9879\u7c7b\u578b",remote:"\u8fdc\u7a0b\u6570\u636e\u6e90",remoteHolder:"\u8bf7\u914d\u7f6e\u8fdc\u7a0b\u6570\u636e\u6e90",multiple:"\u662f\u5426\u591a\u9009",multipleHolder:"\u8bf7\u914d\u7f6e\u662f\u5426\u652f\u6301\u591a\u9009"};var oe=i.forwardRef(function(e,t){var n=J.a.useForm(),o=Object(y.a)(n,1)[0],a=e.setConfig,l=e.componentType;i.useImperativeHandle(t,function(){return{form:o}});var r=i.useCallback(function(e,t){var n=Object.keys(e)[0];a(n,e[n])},[a]),c=i.useState([]),u=Object(y.a)(c,2),s=u[0],d=u[1];return i.useEffect(function(){setTimeout(function(){d([{label:"uid",value:"uid",other:"1"},{label:"name",value:"name",other:"2"},{label:"age",value:"age",other:"3"}])},1e3)},[]),l!==ee.componentType?null:i.createElement(J.a,{onValuesChange:r,labelCol:{span:6}},i.createElement(V.a,{title:ne.title},i.createElement("h3",null,ne.base),i.createElement(J.a.Item,{label:ne.label,name:"label",rules:[{required:!0,message:ne.multipleHolder}]},i.createElement(U.a,{maxLength:10,placeholder:ne.labelHolder})),i.createElement(J.a.Item,{label:ne.param,name:"param",rules:[{required:!0,message:ne.multipleHolder}]},i.createElement(B.a,{labelInValue:!0,placeholder:ne.paramHolder},s.map(function(e){return i.createElement(B.a.Option,{key:e.value,value:e.value},e.label)}))),i.createElement(J.a.Item,{label:ne.holder,name:"holder"},i.createElement(U.a,{maxLength:20,placeholder:ne.holderHolder})),i.createElement(J.a.Item,{label:ne.search},i.createElement(B.a,{labelInValue:!0,placeholder:ne.searchHolder})),i.createElement("h3",null,ne.spec),i.createElement(J.a.Item,{label:ne.source,name:"source",rules:[{required:!0,message:ne.sourceHolder}]},i.createElement(U.a,{placeholder:ne.sourceHolder})),i.createElement(J.a.Item,{label:ne.select,name:"select",rules:[{required:!0,message:ne.selectHolder}]},i.createElement(U.a,{placeholder:ne.selectHolder})),i.createElement(J.a.Item,{label:ne.inparam,name:"inparam",rules:[{required:!0,message:ne.inparamHolder}]},i.createElement(U.a,{placeholder:ne.inparamHolder})),i.createElement(J.a.Item,{label:ne.multiple,name:"multipe"},i.createElement(B.a,{labelInValue:!0,placeholder:ne.multipleHolder},te.map(function(e){return i.createElement(B.a.Option,{key:e.value,value:e.value},e.label)}))),i.createElement("h3",null,ne.spec),i.createElement(J.a.Item,{label:ne.required,name:"required",rules:[{required:!0,message:ne.requiredHolder}]},i.createElement(B.a,{labelInValue:!0,placeholder:ne.requiredHolder},te.map(function(e){return i.createElement(B.a.Option,{key:e.value,value:e.value},e.label)})))))});function ae(e){var t=e.text;return i.createElement("div",null,t)}function le(e){var t=e.text,n=e.setConfig;if(e.componentType!==ae.componentType)return null;return i.createElement("div",null,i.createElement("span",null,"WfhTable"),i.createElement("input",{value:t,onChange:function(e){n("text",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u8b66\u544a\u6587\u6863"}))}ae.thumbnail="\u8868\u683c",ae.componentType="wfhtable",ae.title="\u8868\u683c",le.componentType="input";var re=n(1486),ce=n.n(re),ie=["background"],ue=new Map([[R.componentType,R],[G.componentType,G],[Y.componentType,Y],[Z.componentType,Z],[ee.componentType,ee],[ae.componentType,ae]]),se=new Map([[R.componentType,W],[G.componentType,X],[Y.componentType,Q],[Z.componentType,$],[ee.componentType,oe],[ae.componentType,le]]);var de=function(e){var t=e.dataList,n=e.deleteData,o=e.current,a=e.setCurrent,l=e.configs,r=e.setConfigs,c=o.toJS(),u=c.id,s=c.componentType,d=c.displayName;console.log("cmsworkbench====>",e);var m=i.useReducer(function(e,t){var n=t.type,o=void 0===n?"":n,a=t.payload,l=void 0!==a&&a;switch(o){case"preview":return Object(_.a)({},e,{bPreview:l});case"phone":return Object(_.a)({},e,{bPhone:l});default:return e}},{bPreview:!1,bPhone:!1}),p=Object(y.a)(m,2),g=p[0],v=g.bPreview,h=g.bPhone,f=p[1],b=se.get(s),k=i.useRef(null),T=l.toJS()[u]||{},O={};function C(){n()}return T.color&&(O.backgroundColor=T.color),T.image&&(O.backgroundImage=T.image),i.createElement("div",{className:ce.a.cmsworkbench},i.createElement("div",{className:ce.a.toolbar},i.createElement("div",{className:ce.a.toollist},i.createElement("div",{onClick:function(){f({type:"phone",payload:!h})},className:h?ce.a.active:""},"\u624b\u673a"),i.createElement("div",{onClick:function(){f({type:"preview",payload:!0})}},"\u9884\u89c8")),i.createElement("div",{className:ce.a.business},i.createElement("div",{className:ce.a.save,onClick:function(){var e;k&&(null===(e=k.current)||void 0===e||e.form.validateFields(),console.log("workbench-config====>",T))}},"\u4fdd\u5b58"))),i.createElement("div",{className:ce.a.content},i.createElement("div",{className:ce.a.workbench,style:O},i.createElement("div",{className:h?ce.a.phone:ce.a.pc},t.toJS().map(function(e,t){var n=e.componentType,o=void 0===n?"":n,r=e.id;if(ie.includes(o))return null;var c=ue.get(o),s=l[r];return c?i.createElement("div",{className:ce.a.unit,key:"".concat(e.componentType,"-").concat(t),onClick:function(){return a(e)}},u===r?i.createElement("div",{className:ce.a.delete,onClick:C},"\u5220\u9664"):null,i.createElement("div",{className:ce.a.component},i.createElement(c,s))):null}))),i.createElement("div",{className:ce.a.config},b?i.createElement(b,Object.assign({key:u,ref:k,componentType:s,displayName:d,config:T},T,{setConfig:function(e,t){r({id:u,config:Object(E.a)({},e,t)})}})):null)),v?i.createElement("div",{className:ce.a.preview},"preview"):null)},me=n(81),pe=n.n(me),ge=n(40),ve=n(1114),he=n(1487),fe=n.n(he),be=n(415),ye=n(1488),Ee=n.n(ye),_e=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).count=void 0,n.onChangeData=function(){var e=n.props.node;console.log("node=======>",e),null===e||void 0===e||e.setData({name:"changeData-".concat(n.count++)})},n.onChangeName=function(){n.setState({name:666})},console.log("constructor"),n.state={name:"default"},n.count=0,n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.node,o=this.props.node;console.log("SCU=====>",n===o);var a=null===o||void 0===o?void 0:o.getData();return null!==o&&void 0!==o&&o.hasChanged("data")?(console.log("hasChange====>",a),!0):(console.log("data didnot change====>",a),!1)}},{key:"componentDidMount",value:function(){var e=Date.now(),t=Date.now()-e;console.log("begin===>",e,t)}},{key:"compoenntDidUpdate",value:function(){console.log("didUpdate",this.props)}},{key:"renderClassic",value:function(e){return u.a.createElement("div",{className:Ee.a.root},"id:".concat(e))}},{key:"renderSimplified",value:function(e){return u.a.createElement("div",null,"id: ".concat(e))}},{key:"render",value:function(){var e=this.props.node,t=((null===e||void 0===e?void 0:e.getData())||{}).type;return console.log("mode========>",t),"simplified"===t?this.renderSimplified(e.id):this.renderClassic(e.id)}}]),t}(i.Component);_e.componentType=void 0,_e.title=void 0,_e.componentType="wfh-rect",_e.title="rect";var ke=n(18),Te=n(1524),Oe=n(1534),Ce=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).knob=void 0,n.timer=void 0,n.contextMenu=void 0,n.onMenu=function(e){var t=n.contextMenu,o=t.cell,a=t.edge,l=e.key;if("1"===l){var r,c=a.getSourceNode(),i=a.getTargetNode(),u=null===c||void 0===c?void 0:c.position(),s=null===i||void 0===i?void 0:i.position();console.log("copy edge source and target=======>",c,i);var d=a.clone();d.setSource({x:u.x+50,y:u.y+50}),d.setTarget({x:s.x+50,y:s.y+50}),console.log("origin======>",a),console.log("clone=====>",d),null===(r=n.graph)||void 0===r||r.addEdge(d)}else if("2"===l){var m=n.contextMenu.e;if(o.isNode()){var p,g,v,h=null===(p=n.graph)||void 0===p?void 0:p.getOutgoingEdges(o),f=null===(g=n.graph)||void 0===g?void 0:g.getIncomingEdges(o),b=m.clientX,y=m.clientY,E=n.graph.clientToGraph(b,y);h&&h.forEach(function(e){e.setSource(E)}),f&&f.forEach(function(e){e.setTarget(E)}),null===(v=n.graph)||void 0===v||v.removeCells([o])}else if(o.isEdge()){var _;null===(_=n.graph)||void 0===_||_.removeEdge(o)}}},n.onMouseDown=function(){n.timer=window.setTimeout(function(){n.updatePosition(),n.toggleContextMenu(!1)},200)},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return this.knob||(this.knob=ge.l.createElement("div",!1),this.knob.style.position="absolute",this.container.appendChild(this.knob)),this}},{key:"renderMenu",value:function(){return u.a.createElement(Te.a,{onClick:this.onMenu},u.a.createElement(Te.a.Item,{key:"1"},"\u590d\u5236"),u.a.createElement(Te.a.Item,{key:"2"},"\u5220\u9664"),u.a.createElement(Te.a.Item,{key:"3"},"3"))}},{key:"toggleContextMenu",value:function(e){pe.a.unmountComponentAtNode(this.knob),document.removeEventListener("mousedown",this.onMouseDown),e&&(pe.a.render(u.a.createElement(Oe.a,{visible:!0,trigger:["contextMenu"],overlay:this.renderMenu()},u.a.createElement("span",null,"123")),this.knob),document.addEventListener("mousedown",this.onMouseDown))}},{key:"updatePosition",value:function(e){var t,n=(null===(t=this.knob)||void 0===t?void 0:t.style)||{};if(e){var o=this.graph.clientToGraph(e.clientX,e.clientY);n.left="".concat(o.x,"px"),n.top="".concat(o.y,"px")}else n.left="-1000px",n.top="-1000px"}},{key:"onContextMenu",value:function(e){var t=e.e;this.contextMenu=e,this.timer&&(clearTimeout(this.timer),this.timer=0),this.updatePosition(t),this.toggleContextMenu(!0)}},{key:"delegateEvents",value:function(){return this.cellView.on("cell:contextmenu",this.onContextMenu,this),Object(ke.a)(Object(r.a)(t.prototype),"delegateEvents",this).call(this)}},{key:"onRemove",value:function(){this.cellView.off("cell:contextmenu",this.onContextMenu,this)}}]),t}(ge.l.ToolItem);Ce.config({tagName:"div",isSVGElement:!1});var we=n(1489),je=n.n(we),xe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).count=void 0,n.onChangeData=function(){var e=n.props.node;console.log("node=======>",e),null===e||void 0===e||e.setData({name:"changeData-".concat(n.count++)})},n.onChangeName=function(){n.setState({name:666})},console.log("constructor"),n.state={name:"default"},n.count=0,n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.node,o=this.props.node;return console.log("SCU=====>",n===o),!(null===o||void 0===o||!o.hasChanged("data"))||(console.log("data didnot change"),!1)}},{key:"componentDidMount",value:function(){var e=Date.now(),t=Date.now()-e;console.log("begin===>",e,t)}},{key:"compoenntDidUpdate",value:function(){console.log("didUpdate",this.props)}},{key:"renderClassic",value:function(){var e,t;return u.a.createElement("div",{className:je.a.root},u.a.createElement("div",{onClick:this.onChangeData},"change data"),u.a.createElement("div",{onClick:this.onChangeName},"change name"),"Triangle-".concat(this.state.name,"-").concat(null===(e=this.props.node)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.name),"Triangle-")}},{key:"renderSimplified",value:function(){return u.a.createElement("div",null,"simplified")}},{key:"render",value:function(){var e=this.props.node,t=((null===e||void 0===e?void 0:e.getData())||{}).mode;return console.log("mode========>",t),"simplified"===t?this.renderSimplified():this.renderClassic()}}]),t}(i.Component);xe.componentType=void 0,xe.title=void 0,xe.componentType="wfh-triangle",xe.title="triangle",function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"getRegisterName",value:function(){return"wfh-DD"}},{key:"removeNode",value:function(e){return!0}},{key:"canConnect",value:function(e){return!["wfh-rect","wfh-triangle"].includes(e)}}]),t}(be.a).config({width:200,height:80,component:u.a.createElement("div",null,"wfhdd")});var Ne=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).mode="classic",n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"setMode",value:function(e){this.mode=e}},{key:"getRegisterName",value:function(){return"wfh-demo"}},{key:"removeNode",value:function(e){return!0}},{key:"canConnect",value:function(e){return!["wfh-rect","wfh-triangle"].includes(e)}}]),t}(be.a);Ne.config({width:200,height:80,component:u.a.createElement(_e,null)});var De=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"getRegisterName",value:function(){return"wfh-rect"}},{key:"removeNode",value:function(e){return!0}},{key:"canConnect",value:function(e){return!["wfh-rect"].includes(e)}}]),t}(be.a);De.config({width:160,height:30,portMarkup:[ge.e.getForeignObjectMarkup()],ports:{groups:{in:{position:{name:"top"},attrs:{fo:{width:10,height:10,x:-5,y:-5,magnet:"true"}},zIndex:1},out:{position:{name:"bottom"},attrs:{fo:{width:10,height:10,x:-5,y:-5,magnet:"true"}},zIndex:1}},items:[{group:"in",id:"in1"},{group:"in",id:"in2"},{group:"out",id:"out1"},{group:"out",id:"out2"}]}});var Le=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"getRegisterName",value:function(){return"wfh-triangle"}},{key:"removeNode",value:function(e){return!0}},{key:"canConnect",value:function(e){return!["wfh-triangle"].includes(e)}}]),t}(be.a);Le.config({width:160,height:30,component:u.a.createElement(xe,null),portMarkup:[ge.e.getForeignObjectMarkup()],ports:{groups:{in:{position:{name:"top"},attrs:{fo:{width:10,height:10,x:-5,y:-5,magnet:"true"}},zIndex:1},out:{position:{name:"bottom"},attrs:{fo:{width:10,height:10,x:-5,y:-5,magnet:"true"}},zIndex:1}},items:[{group:"in",id:"in1"},{group:"out",id:"out2"}]}}),ge.d.registerNode("wfh-demo",Ne,!0),ge.d.registerNode("wfh-rect",De,!0),ge.d.registerNode("wfh-triangle",Le,!0),ge.d.registerEdgeTool("contextmenu",Ce,!0),ge.d.registerNodeTool("contextmenu",Ce,!0);var Se={nodes:[{id:"node1",x:40,y:40,width:80,height:40,label:"node1"},{id:"node8",x:160,y:180,width:80,height:40,label:"node8"},{id:"node10",x:160,y:180,width:80,height:40,label:"node10",data:{name:"node10",age:123,info:{from:"china"}}}],edges:[{source:{cell:"node1",port:"right"},target:{cell:"node10",port:"top"},data:{age:1,info:{name:"\u8fb9"}}},{source:{cell:"node1",port:"right"},target:{cell:"node8",port:"top"}}]},Ae=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).container=null,n.graph=void 0,n.refContainer=function(e){n.container=e},n.onChange=function(){var e=n.props.setCurrent;console.log("setCurrent"),e({name:""})},n.onGetAllData=function(){var e,t,o,a=null===(e=n.graph)||void 0===e?void 0:e.toJSON(),l=null===(t=n.graph)||void 0===t?void 0:t.model,r=null===(o=n.graph)||void 0===o?void 0:o.view;console.log("allData====>",a,l,r)},n.onSwitchMode=function(){var e,t=null===(e=n.graph)||void 0===e?void 0:e.getNodes();null===t||void 0===t||t.forEach(function(e){e.setData({type:"simplified"})})},n.onLayout=function(){var e,t,o,a=(null===(e=n.graph)||void 0===e?void 0:e.getRootNodes())||[],l=(null===(t=n.graph)||void 0===t?void 0:t.getLeafNodes())||[],r=a;console.log("leaf========>",l.length),null===(o=n.graph)||void 0===o||o.batchUpdate(function(){for(var e=0;r.length>0;){console.log("6666666======>",r);var t=r.reduce(function(t,o,a){var l;o.position(0+130*e,0+48*a);var r=null===(l=n.graph)||void 0===l?void 0:l.getNeighbors(o,{outgoing:!0});return t=t.concat(r)},[]);e+=1,r=t}})},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,o,a,l,r,c,u,s,d,m,p,g;this.graph=new ge.d({container:this.container,grid:!0,panning:{enabled:!0,modifiers:["alt"]},clipboard:{enabled:!0},selecting:{enabled:!0,rubberband:!0,strict:!0,movable:!0,showNodeSelectionBox:!0,showEdgeSelectionBox:!0},snapline:{enabled:!0,sharp:!0},scroller:{enabled:!0,pageVisible:!1,pageBreak:!1},highlighting:{magnetAvailable:{name:"stroke",args:{padding:3,attrs:{strokeWidth:3,stroke:"#52c41a"}}}},connecting:{snap:!0,allowBlank:!0,allowLoop:!1,allowNode:!0,highlight:!0,validateMagnet:function(e){var t=e.magnet;return console.log("validateMagnet=====>",e),"in"!==t.getAttribute("port-group")},createEdge:function(e){return console.log("createEdge=====>",e),new ge.b({tools:[{name:"contextmenu"}]})},validateConnection:function(e){console.log("validateConnection======>",e);var t=e.targetCell,n=e.sourceCell;return"source"===e.type?console.log("sourceCell======>",n):console.log("targetCell======>",t),!0},validateEdge:function(e){var t=e.edge,n=e.type,o=t.getTarget(),a=t.getSource(),l=t.getSourceNode(),r=t.getTargetNode();if("source"===n){if(!l)return!1}else if("target"===n&&!r)return!1;var c=r.model.getIncomingEdges(r);return console.log("validateEdge====>",c,o,a,e),!0}},interacting:{},onPortRendered:function(e){var t=e.contentSelectors,n=t&&t.foContent;n&&pe.a.render(i.createElement(ve.a,{title:"port"},i.createElement("div",{className:fe.a.myport})),n)}}),null===(e=this.graph)||void 0===e||e.on("cell:removed",function(e){console.log("cell:removed====>",e)}),null===(t=this.graph)||void 0===t||t.on("node:removed",function(e){console.log("node:removed====>",e)}),null===(n=this.graph)||void 0===n||n.on("edge:removed",function(e){console.log("edge:removed====>",e)}),null===(o=this.graph)||void 0===o||o.on("cell:selected",function(e){console.log("cell:selected====>",e)}),null===(a=this.graph)||void 0===a||a.on("node:selected",function(e){console.log("node:selected====>",e)}),null===(l=this.graph)||void 0===l||l.on("edge:selected",function(e){var t=e.edge,n=t.target,o=t.source;console.log("edge:selected====>",n,o)}),null===(r=this.graph)||void 0===r||r.on("selection:changed",function(e){console.log("selection:changed======>",e);var t=e.selected,n=t[0];if(null!==n&&void 0!==n&&n.isNode()){var o=n.clone();console.log("cell=====>",n.shape,o.shape,n,o)}if(null!==n&&void 0!==n&&n.isEdge()){var a=n.clone();console.log("cell========>",n.getTargetCellId(),n.getSourceCellId()),console.log("clone========>",a.getTargetCellId(),a.getSourceCellId()),n.on("change:data",function(e){console.log("args======>",e)}),n.setData({configs:{name:123}}),setTimeout(function(){n.setData({configs:{name:"monkey"}})},5e3)}var l=t[0]||{},r=l.target,c=l.source;console.log("==========>",r,c)}),null===(c=this.graph)||void 0===c||c.on("edge:added",function(e){console.log("edge:added===>",e)}),null===(u=this.graph)||void 0===u||u.on("edge:removed",function(e){console.log("edge:removed=====>",e)}),null===(s=this.graph)||void 0===s||s.on("edge:connected",function(e){var t=e.edge,n=t.target,o=t.source;console.log("edge:connected====>",n,o)}),null===(d=this.graph)||void 0===d||d.on("node:mouseenter",function(e){e.cell.addTools([{name:"contextmenu"}])}),null===(m=this.graph)||void 0===m||m.on("node:mouseleave",function(e){e.cell.removeTools()}),null===(p=this.graph)||void 0===p||p.on("edge:mouseenter",function(e){e.cell.addTools([{name:"source-arrowhead"},{name:"target-arrowhead",args:{attrs:{fill:"red"}}},{name:"contextmenu"}])}),null===(g=this.graph)||void 0===g||g.on("edge:mouseleave",function(e){e.cell.removeTools()});var v=this.props.init;setTimeout(function(){var e=[{id:"top",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}},{id:"right",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}}],t=Se.nodes.map(function(t){return Object(_.a)({},t,{ports:e})}),n=Se.edges.map(function(e){return Object(_.a)({},e,{shape:"edge"})});v({dataList:t,edgeList:n,current:{},configs:{}})},1e3)}},{key:"componentWillUpdate",value:function(){console.log("will-update")}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.dataList,a=n.edgeList,l=n.dataSource,r=n.current,c=e.dataList,u=e.edgeList;if(!m.default.is(o,c)||!m.default.is(a,u)){console.log("didUpdate");var s=o.toJS();if("DRAG_NODE_DATA"===l){var d,p;console.log("\u62d6\u62fd\u4ea7\u751f\u7684\u6570\u636e=====>",r);var g=null===r||void 0===r?void 0:r.toJS(),v=g.id,h=g.componentType,f={id:v,label:g.title,x:20,y:80,shape:h,component:i.createElement(_e,null)};null===(d=this.graph)||void 0===d||d.addNode(f),null===(p=this.graph)||void 0===p||p.addEdge({target:{x:10,y:50},source:{x:70,y:50}})}else if("COPY_EDGE_DATA"===l)console.log("\u8fb9\u62f7\u8d1d\u6570\u636e");else{var b,y=s.map(function(e){var t=e.componentType;return t?{id:e.id,height:40,width:80,x:80,y:80,label:t}:Object(_.a)({},e,{shape:"wfh-demo"})});null===(b=this.graph)||void 0===b||b.fromJSON({nodes:y,edges:null===a||void 0===a?void 0:a.toJS()})}}}},{key:"computer",value:function(e){for(var t=this,n=e||[],o=[],a=0,l=0;n.length>=1;){o[a]=n.length,a++;var r=n.reduce(function(e,n){var o,a=(null===(o=t.graph)||void 0===o?void 0:o.getNeighbors(n,{outgoing:!0}))||[];return l=l>a.length?l:a.length,e=e.concat(a)},[]);n=r}return[o,l]}},{key:"render",value:function(){return console.log("x6------render====>",this.props),i.createElement("div",{className:fe.a.container},i.createElement("div",{className:fe.a.toolbar},i.createElement("button",{onClick:this.onChange},"dispatch"),i.createElement("button",{onClick:this.onGetAllData},"\u83b7\u53d6\u6570\u636e"),i.createElement("button",{onClick:this.onSwitchMode},"\u6539\u53d8\u6a21\u5f0f"),i.createElement("button",{onClick:this.onLayout},"\u81ea\u52a8\u5e03\u5c40")),i.createElement("div",{className:fe.a.graph,ref:this.refContainer}),i.createElement("div",{className:fe.a.config},"\u62bd\u5c49"))}}]),t}(i.PureComponent),Ie=n(1490),Me=n.n(Ie),He=["CMS_DND_ITEM_TYPE","X6_DND_ITEM_TYPE"],Re=[{id:_e.title,name:_e.title,type:He[0],data:{componentType:_e.componentType,config:{}}},{id:xe.title,name:xe.title,type:He[0],data:{componentType:xe.componentType,config:{}}},{id:G.title,name:G.title,type:He[0],data:{componentType:G.componentType,config:{}}},{id:R.title,name:R.title,type:He[0],data:{componentType:R.componentType,config:{}}},{id:Y.title,name:Y.title,type:He[0],data:{componentType:Y.componentType,config:{}}},{id:Z.title,name:Z.title,type:He[0],data:{componentType:Z.componentType,config:{}}},{id:ee.title,name:ee.title,type:He[0],data:{componentType:ee.componentType,config:{}}},{id:ae.title,name:ae.title,type:He[0],data:{componentType:ae.componentType,config:{}}}],We=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={stencilList:m.default.List([])},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState(function(e){return{stencilList:m.default.List(Re)}})},1e3)}},{key:"render",value:function(){var e,t=this.props.match,n=(null===(e=(void 0===t?{}:t).params)||void 0===e?void 0:e.type)||"x6",o=this.state.stencilList,a=void 0===o?[]:o;return i.createElement(s.a,{backend:d.a},i.createElement("div",{className:Me.a.dndframe},i.createElement("div",{className:Me.a.sidebar},i.createElement(b,{toolList:a,dragSource:I})),i.createElement("div",{className:Me.a.content},i.createElement(N,{accept:[He[0]],workbench:"cms"===n?de:Ae}))))}}]),t}(i.Component);t.default=We}}]);
//# sourceMappingURL=10.4539c14d.chunk.js.map