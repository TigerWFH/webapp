{"version":3,"sources":["utils/helper.ts","pages/antd/components/Editor/index.tsx","pages/antd/index.tsx"],"names":["__webpack_require__","d","__webpack_exports__","setCookie","getCookie","compressImage","key","value","domain","expire","expires","date","Date","days","setTime","getTime","toUTCString","cookie","concat","encodeURIComponent","console","log","document","arr","reg","RegExp","match","decodeURIComponent","JSON","parse","e","imgSrc","width","arguments","length","undefined","mimeType","quality","Promise","resolve","reject","img","Image","src","onload","scale","height","canvas","createElement","ctx","getContext","drawImage","toBlob","blob","Editor","onChange","onEditor","_this","props","react","card","title","dist_default","a","this","React","Antd","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onToHome","setState","dot","state","BraftEditor","createEditorState","onClick","toHTML","components_Editor"],"mappings":"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","file":"static/js/24.a4f8229f.chunk.js","sourcesContent":["// 最好后台全部包好，前端只根据错误码做交互的东西\nconst UNDEFINED_TEXT = \"未定义错误码\";\nconst ERROR_CODE_TO_MESSAGE: any = {\n  pegasus: {\n    1: \"1\",\n    2: \"2\",\n    3: \"3\",\n  },\n  unicorn: {\n    1: \"1\",\n    2: \"2\",\n    3: \"3\",\n  },\n};\n/*\n    一、cookie包装工具\n*/\n// cookie值不能存在逗号，分号，空格等特殊符号；\n// encodeURIComponent会编码这些特殊符号；但是JSON.stringify不会编码这些特殊符号\nexport function setCookie(\n  key: string,\n  value: string,\n  domain?: string,\n  expire?: number\n) {\n  let expires = \"\";\n  let date = new Date();\n  let days = expire || 30;\n  date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n  expires = \"; expires=\" + date.toUTCString();\n\n  let cookie = domain\n    ? `${key}=${encodeURIComponent(value)}${expires}; path=/; domain=${domain}`\n    : `${key}=${encodeURIComponent(value)}${expires}; path=/`;\n  console.log(\"cookie===>\", cookie);\n  document.cookie = cookie;\n}\n\nexport function setCookieWithout(key: string, value: string, path?: string) {\n  console.log(\"path===>\", path);\n\n  document.cookie = `${key}=${encodeURIComponent(value)};path=${\n    path ? path : \"/\"\n  }`;\n}\n\nexport function getCookie(key: string) {\n  let arr,\n    reg = new RegExp(\"(^| )\" + key + \"=([^;]*)(;|$)\");\n  arr = document.cookie.match(reg);\n\n  if (!arr) {\n    return null;\n  } else {\n    let value = decodeURIComponent(arr[2]);\n    try {\n      return value ? JSON.parse(value) : null;\n    } catch (e) {\n      return value;\n    }\n  }\n}\n/*\n    二、错误码处理工具\n */\nexport function getMsgWithCode(name: string = \"pegasus\", code: number) {\n  const code_to_msg = ERROR_CODE_TO_MESSAGE[name];\n  if (code_to_msg === undefined) {\n    return UNDEFINED_TEXT;\n  }\n\n  if (code_to_msg[code] === undefined) {\n    return UNDEFINED_TEXT;\n  }\n\n  return code_to_msg[code];\n}\n\n/*\n    三、LOG工具\n */\nexport function log(msg: any) {\n  console.log(\"%c \" + msg + \" \", \"background: #00a3fe;color: #fff\");\n}\n\nexport function warning(msg: any) {\n  console.log(\"%c \" + msg + \" \", \"background: #ffff00;color: #000\");\n}\n\nexport function error(msg: any) {\n  console.log(\"%c \" + msg + \" \", \"background: #ff0000;color: #fff\");\n}\n/*\n    四、URL工具\n */\nexport function getUrlParamByName(name: string, url?: string) {\n  const reg = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`);\n  if (!url) {\n    url = window.location.href;\n  }\n  let res = url.match(reg);\n  if (res != null && res[2]) {\n    return decodeURIComponent(res[2]);\n  }\n  return undefined;\n}\n\nexport function compressImage(\n  imgSrc: string,\n  width: number = 300,\n  mimeType: string = \"image/jpeg\",\n  quality: number = 0.8\n): Promise<Blob> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = imgSrc;\n    img.onload = function () {\n      const scale = img.height / img.width;\n      const canvas = document.createElement(\"canvas\");\n      // 使用目标图像大小指定画布大小，默认是300*150，会出现黑边\n      canvas.width = width;\n      canvas.height = width * scale;\n      const ctx = canvas.getContext(\"2d\");\n      // canvas画布大小\n      // drawImage将图片在画布上以width和width*scale为尺寸进行绘制\n      ctx && ctx.drawImage(img, 0, 0, width, width * scale);\n      canvas.toBlob(\n        function (blob: any) {\n          if (blob) {\n            resolve(blob);\n          } else {\n            reject();\n          }\n        },\n        mimeType,\n        quality\n      );\n    };\n  });\n}\n","import * as React from \"react\"\nimport BraftEditor from \"braft-editor\"\nimport { Card } from \"antd\"\nimport 'braft-editor/dist/index.css'\n\nclass Editor extends React.Component<any, any> {\n\n    onChange = (value: any) => {\n        const { onEditor } = this.props\n        if (typeof onEditor === \"function\") {\n            onEditor(value)\n        }\n    }\n    render() {\n        return (\n            <Card title=\"editor\">\n                <BraftEditor value={this.props.value} onChange={this.onChange} />\n            </Card>\n        )\n    }\n}\n\nexport default Editor","import * as React from 'react';\nimport { setCookie, getCookie } from 'Utils/helper';\nimport { Card } from 'antd';\nimport Editor from './components/Editor';\nimport BraftEditor from 'braft-editor';\n\nconst PAGE_TITLE = 'ANTD_UI';\n\nclass Antd extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props);\n    setCookie('home', 'antd');\n    let domain = getCookie('home');\n    let dot = getCookie('home');\n    console.log('domain===>', domain);\n    console.log('dot===>', dot);\n\n    console.log('antd');\n    this.state = {\n      value: BraftEditor.createEditorState('')\n    };\n  }\n\n  componentDidMount() {}\n\n  onToHome = () => {};\n\n  onEditor = (value: any) => {\n    this.setState({\n      value\n    });\n  };\n\n  render() {\n    return (\n      <Card title={PAGE_TITLE}>\n        <button onClick={this.onToHome}>toHome</button>\n        <div>{this.state.value.toHTML()}</div>\n        <Editor onEditor={this.onEditor} value={this.state.value} />\n      </Card>\n    );\n  }\n}\n\nexport default Antd;\n"],"sourceRoot":""}