(window.webpackJsonp=window.webpackJsonp||[]).push([[5],[function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"create",function(){return f}),n.d(r,"fromMat4",function(){return h}),n.d(r,"clone",function(){return d}),n.d(r,"copy",function(){return p}),n.d(r,"fromValues",function(){return g}),n.d(r,"set",function(){return v}),n.d(r,"identity",function(){return y}),n.d(r,"transpose",function(){return m}),n.d(r,"invert",function(){return b}),n.d(r,"adjoint",function(){return w}),n.d(r,"determinant",function(){return x}),n.d(r,"multiply",function(){return C}),n.d(r,"translate",function(){return k}),n.d(r,"rotate",function(){return E}),n.d(r,"scale",function(){return O}),n.d(r,"fromTranslation",function(){return S}),n.d(r,"fromRotation",function(){return A}),n.d(r,"fromScaling",function(){return T}),n.d(r,"fromMat2d",function(){return M}),n.d(r,"fromQuat",function(){return _}),n.d(r,"normalFromMat4",function(){return j}),n.d(r,"projection",function(){return P}),n.d(r,"str",function(){return N}),n.d(r,"frob",function(){return R}),n.d(r,"add",function(){return D}),n.d(r,"subtract",function(){return I}),n.d(r,"multiplyScalar",function(){return L}),n.d(r,"multiplyScalarAndAdd",function(){return F}),n.d(r,"exactEquals",function(){return B}),n.d(r,"equals",function(){return z}),n.d(r,"mul",function(){return V}),n.d(r,"sub",function(){return U});var i={};n.r(i),n.d(i,"create",function(){return G}),n.d(i,"clone",function(){return H}),n.d(i,"copy",function(){return W}),n.d(i,"fromValues",function(){return q}),n.d(i,"set",function(){return X}),n.d(i,"identity",function(){return $}),n.d(i,"transpose",function(){return Y}),n.d(i,"invert",function(){return K}),n.d(i,"adjoint",function(){return J}),n.d(i,"determinant",function(){return Z}),n.d(i,"multiply",function(){return Q}),n.d(i,"translate",function(){return ee}),n.d(i,"scale",function(){return te}),n.d(i,"rotate",function(){return ne}),n.d(i,"rotateX",function(){return re}),n.d(i,"rotateY",function(){return ie}),n.d(i,"rotateZ",function(){return oe}),n.d(i,"fromTranslation",function(){return ae}),n.d(i,"fromScaling",function(){return se}),n.d(i,"fromRotation",function(){return ue}),n.d(i,"fromXRotation",function(){return ce}),n.d(i,"fromYRotation",function(){return le}),n.d(i,"fromZRotation",function(){return fe}),n.d(i,"fromRotationTranslation",function(){return he}),n.d(i,"fromQuat2",function(){return de}),n.d(i,"getTranslation",function(){return pe}),n.d(i,"getScaling",function(){return ge}),n.d(i,"getRotation",function(){return ve}),n.d(i,"fromRotationTranslationScale",function(){return ye}),n.d(i,"fromRotationTranslationScaleOrigin",function(){return me}),n.d(i,"fromQuat",function(){return be}),n.d(i,"frustum",function(){return we}),n.d(i,"perspective",function(){return xe}),n.d(i,"perspectiveFromFieldOfView",function(){return Ce}),n.d(i,"ortho",function(){return ke}),n.d(i,"lookAt",function(){return Ee}),n.d(i,"targetTo",function(){return Oe}),n.d(i,"str",function(){return Se}),n.d(i,"frob",function(){return Ae}),n.d(i,"add",function(){return Te}),n.d(i,"subtract",function(){return Me}),n.d(i,"multiplyScalar",function(){return _e}),n.d(i,"multiplyScalarAndAdd",function(){return je}),n.d(i,"exactEquals",function(){return Pe}),n.d(i,"equals",function(){return Ne}),n.d(i,"mul",function(){return Re}),n.d(i,"sub",function(){return De});var o={};n.r(o),n.d(o,"create",function(){return Ie}),n.d(o,"clone",function(){return Le}),n.d(o,"length",function(){return Fe}),n.d(o,"fromValues",function(){return Be}),n.d(o,"copy",function(){return ze}),n.d(o,"set",function(){return Ve}),n.d(o,"add",function(){return Ue}),n.d(o,"subtract",function(){return Ge}),n.d(o,"multiply",function(){return He}),n.d(o,"divide",function(){return We}),n.d(o,"ceil",function(){return qe}),n.d(o,"floor",function(){return Xe}),n.d(o,"min",function(){return $e}),n.d(o,"max",function(){return Ye}),n.d(o,"round",function(){return Ke}),n.d(o,"scale",function(){return Je}),n.d(o,"scaleAndAdd",function(){return Ze}),n.d(o,"distance",function(){return Qe}),n.d(o,"squaredDistance",function(){return et}),n.d(o,"squaredLength",function(){return tt}),n.d(o,"negate",function(){return nt}),n.d(o,"inverse",function(){return rt}),n.d(o,"normalize",function(){return it}),n.d(o,"dot",function(){return ot}),n.d(o,"cross",function(){return at}),n.d(o,"lerp",function(){return st}),n.d(o,"hermite",function(){return ut}),n.d(o,"bezier",function(){return ct}),n.d(o,"random",function(){return lt}),n.d(o,"transformMat4",function(){return ft}),n.d(o,"transformMat3",function(){return ht}),n.d(o,"transformQuat",function(){return dt}),n.d(o,"rotateX",function(){return pt}),n.d(o,"rotateY",function(){return gt}),n.d(o,"rotateZ",function(){return vt}),n.d(o,"angle",function(){return yt}),n.d(o,"zero",function(){return mt}),n.d(o,"str",function(){return bt}),n.d(o,"exactEquals",function(){return wt}),n.d(o,"equals",function(){return xt}),n.d(o,"sub",function(){return Ct}),n.d(o,"mul",function(){return kt}),n.d(o,"div",function(){return Et}),n.d(o,"dist",function(){return Ot}),n.d(o,"sqrDist",function(){return St}),n.d(o,"len",function(){return At}),n.d(o,"sqrLen",function(){return Tt}),n.d(o,"forEach",function(){return Mt});var a={};n.r(a),n.d(a,"create",function(){return _t}),n.d(a,"clone",function(){return jt}),n.d(a,"fromValues",function(){return Pt}),n.d(a,"copy",function(){return Nt}),n.d(a,"set",function(){return Rt}),n.d(a,"add",function(){return Dt}),n.d(a,"subtract",function(){return It}),n.d(a,"multiply",function(){return Lt}),n.d(a,"divide",function(){return Ft}),n.d(a,"ceil",function(){return Bt}),n.d(a,"floor",function(){return zt}),n.d(a,"min",function(){return Vt}),n.d(a,"max",function(){return Ut}),n.d(a,"round",function(){return Gt}),n.d(a,"scale",function(){return Ht}),n.d(a,"scaleAndAdd",function(){return Wt}),n.d(a,"distance",function(){return qt}),n.d(a,"squaredDistance",function(){return Xt}),n.d(a,"length",function(){return $t}),n.d(a,"squaredLength",function(){return Yt}),n.d(a,"negate",function(){return Kt}),n.d(a,"inverse",function(){return Jt}),n.d(a,"normalize",function(){return Zt}),n.d(a,"dot",function(){return Qt}),n.d(a,"cross",function(){return en}),n.d(a,"lerp",function(){return tn}),n.d(a,"random",function(){return nn}),n.d(a,"transformMat4",function(){return rn}),n.d(a,"transformQuat",function(){return on}),n.d(a,"zero",function(){return an}),n.d(a,"str",function(){return sn}),n.d(a,"exactEquals",function(){return un}),n.d(a,"equals",function(){return cn}),n.d(a,"sub",function(){return ln}),n.d(a,"mul",function(){return fn}),n.d(a,"div",function(){return hn}),n.d(a,"dist",function(){return dn}),n.d(a,"sqrDist",function(){return pn}),n.d(a,"len",function(){return gn}),n.d(a,"sqrLen",function(){return vn}),n.d(a,"forEach",function(){return yn});var s={};n.r(s),n.d(s,"create",function(){return mn}),n.d(s,"identity",function(){return bn}),n.d(s,"setAxisAngle",function(){return wn}),n.d(s,"getAxisAngle",function(){return xn}),n.d(s,"getAngle",function(){return Cn}),n.d(s,"multiply",function(){return kn}),n.d(s,"rotateX",function(){return En}),n.d(s,"rotateY",function(){return On}),n.d(s,"rotateZ",function(){return Sn}),n.d(s,"calculateW",function(){return An}),n.d(s,"exp",function(){return Tn}),n.d(s,"ln",function(){return Mn}),n.d(s,"pow",function(){return _n}),n.d(s,"slerp",function(){return jn}),n.d(s,"random",function(){return Pn}),n.d(s,"invert",function(){return Nn}),n.d(s,"conjugate",function(){return Rn}),n.d(s,"fromMat3",function(){return Dn}),n.d(s,"fromEuler",function(){return In}),n.d(s,"str",function(){return Ln}),n.d(s,"clone",function(){return Fn}),n.d(s,"fromValues",function(){return Bn}),n.d(s,"copy",function(){return zn}),n.d(s,"set",function(){return Vn}),n.d(s,"add",function(){return Un}),n.d(s,"mul",function(){return Gn}),n.d(s,"scale",function(){return Hn}),n.d(s,"dot",function(){return Wn}),n.d(s,"lerp",function(){return qn}),n.d(s,"length",function(){return Xn}),n.d(s,"len",function(){return $n}),n.d(s,"squaredLength",function(){return Yn}),n.d(s,"sqrLen",function(){return Kn}),n.d(s,"normalize",function(){return Jn}),n.d(s,"exactEquals",function(){return Zn}),n.d(s,"equals",function(){return Qn}),n.d(s,"rotationTo",function(){return er}),n.d(s,"sqlerp",function(){return tr}),n.d(s,"setAxes",function(){return nr});var u=1e-6,c="undefined"!==typeof Float32Array?Float32Array:Array,l=Math.random;Math.PI;function f(){var e=new c(9);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function d(e){var t=new c(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g(e,t,n,r,i,o,a,s,u){var l=new c(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l[8]=u,l}function v(e,t,n,r,i,o,a,s,u,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e}function y(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function m(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function b(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*a-s*c,h=-l*o+s*u,d=c*o-a*u,p=n*f+r*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=h*p,e[4]=(l*n-i*u)*p,e[5]=(-s*n+i*o)*p,e[6]=d*p,e[7]=(-c*n+r*u)*p,e[8]=(a*n-r*o)*p,e):null}function w(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*a,e[3]=s*u-o*l,e[4]=n*l-i*u,e[5]=i*o-n*s,e[6]=o*c-a*u,e[7]=r*u-n*c,e[8]=n*a-r*o,e}function x(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function C(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=n[0],d=n[1],p=n[2],g=n[3],v=n[4],y=n[5],m=n[6],b=n[7],w=n[8];return e[0]=h*r+d*a+p*c,e[1]=h*i+d*s+p*l,e[2]=h*o+d*u+p*f,e[3]=g*r+v*a+y*c,e[4]=g*i+v*s+y*l,e[5]=g*o+v*u+y*f,e[6]=m*r+b*a+w*c,e[7]=m*i+b*s+w*l,e[8]=m*o+b*u+w*f,e}function k(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=h*r+d*a+c,e[7]=h*i+d*s+l,e[8]=h*o+d*u+f,e}function E(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*a,e[1]=d*i+h*s,e[2]=d*o+h*u,e[3]=d*a-h*r,e[4]=d*s-h*i,e[5]=d*u-h*o,e[6]=c,e[7]=l,e[8]=f,e}function O(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function S(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function A(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function T(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function _(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,p=i*u,g=o*a,v=o*s,y=o*u;return e[0]=1-f-p,e[3]=l-y,e[6]=h+v,e[1]=l+y,e[4]=1-c-p,e[7]=d-g,e[2]=h-v,e[5]=d+g,e[8]=1-c-f,e}function j(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],y=t[15],m=n*s-r*a,b=n*u-i*a,w=n*c-o*a,x=r*u-i*s,C=r*c-o*s,k=i*c-o*u,E=l*g-f*p,O=l*v-h*p,S=l*y-d*p,A=f*v-h*g,T=f*y-d*g,M=h*y-d*v,_=m*M-b*T+w*A+x*S-C*O+k*E;return _?(_=1/_,e[0]=(s*M-u*T+c*A)*_,e[1]=(u*S-a*M-c*O)*_,e[2]=(a*T-s*S+c*E)*_,e[3]=(i*T-r*M-o*A)*_,e[4]=(n*M-i*S+o*O)*_,e[5]=(r*S-n*T-o*E)*_,e[6]=(g*k-v*C+y*x)*_,e[7]=(v*w-p*k-y*b)*_,e[8]=(p*C-g*w+y*m)*_,e):null}function P(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function N(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function R(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function D(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function I(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function L(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function F(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function B(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function z(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=t[0],d=t[1],p=t[2],g=t[3],v=t[4],y=t[5],m=t[6],b=t[7],w=t[8];return Math.abs(n-h)<=u*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=u*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-p)<=u*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-g)<=u*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-v)<=u*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-y)<=u*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-m)<=u*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-b)<=u*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-w)<=u*Math.max(1,Math.abs(f),Math.abs(w))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var V=C,U=I;function G(){var e=new c(16);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function H(e){var t=new c(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function W(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function q(e,t,n,r,i,o,a,s,u,l,f,h,d,p,g,v){var y=new c(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=r,y[4]=i,y[5]=o,y[6]=a,y[7]=s,y[8]=u,y[9]=l,y[10]=f,y[11]=h,y[12]=d,y[13]=p,y[14]=g,y[15]=v,y}function X(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=f,e[11]=h,e[12]=d,e[13]=p,e[14]=g,e[15]=v,e}function $(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function K(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],y=t[15],m=n*s-r*a,b=n*u-i*a,w=n*c-o*a,x=r*u-i*s,C=r*c-o*s,k=i*c-o*u,E=l*g-f*p,O=l*v-h*p,S=l*y-d*p,A=f*v-h*g,T=f*y-d*g,M=h*y-d*v,_=m*M-b*T+w*A+x*S-C*O+k*E;return _?(_=1/_,e[0]=(s*M-u*T+c*A)*_,e[1]=(i*T-r*M-o*A)*_,e[2]=(g*k-v*C+y*x)*_,e[3]=(h*C-f*k-d*x)*_,e[4]=(u*S-a*M-c*O)*_,e[5]=(n*M-i*S+o*O)*_,e[6]=(v*w-p*k-y*b)*_,e[7]=(l*k-h*w+d*b)*_,e[8]=(a*T-s*S+c*E)*_,e[9]=(r*S-n*T-o*E)*_,e[10]=(p*C-g*w+y*m)*_,e[11]=(f*w-l*C-d*m)*_,e[12]=(s*O-a*A-u*E)*_,e[13]=(n*A-r*O+i*E)*_,e[14]=(g*b-p*x-v*m)*_,e[15]=(l*x-f*b+h*m)*_,e):null}function J(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],y=t[15];return e[0]=s*(h*y-d*v)-f*(u*y-c*v)+g*(u*d-c*h),e[1]=-(r*(h*y-d*v)-f*(i*y-o*v)+g*(i*d-o*h)),e[2]=r*(u*y-c*v)-s*(i*y-o*v)+g*(i*c-o*u),e[3]=-(r*(u*d-c*h)-s*(i*d-o*h)+f*(i*c-o*u)),e[4]=-(a*(h*y-d*v)-l*(u*y-c*v)+p*(u*d-c*h)),e[5]=n*(h*y-d*v)-l*(i*y-o*v)+p*(i*d-o*h),e[6]=-(n*(u*y-c*v)-a*(i*y-o*v)+p*(i*c-o*u)),e[7]=n*(u*d-c*h)-a*(i*d-o*h)+l*(i*c-o*u),e[8]=a*(f*y-d*g)-l*(s*y-c*g)+p*(s*d-c*f),e[9]=-(n*(f*y-d*g)-l*(r*y-o*g)+p*(r*d-o*f)),e[10]=n*(s*y-c*g)-a*(r*y-o*g)+p*(r*c-o*s),e[11]=-(n*(s*d-c*f)-a*(r*d-o*f)+l*(r*c-o*s)),e[12]=-(a*(f*v-h*g)-l*(s*v-u*g)+p*(s*h-u*f)),e[13]=n*(f*v-h*g)-l*(r*v-i*g)+p*(r*h-i*f),e[14]=-(n*(s*v-u*g)-a*(r*v-i*g)+p*(r*u-i*s)),e[15]=n*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),e}function Z(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],g=e[14],v=e[15];return(t*a-n*o)*(f*v-h*g)-(t*s-r*o)*(l*v-h*p)+(t*u-i*o)*(l*g-f*p)+(n*s-r*a)*(c*v-h*d)-(n*u-i*a)*(c*g-f*d)+(r*u-i*s)*(c*p-l*d)}function Q(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],g=t[12],v=t[13],y=t[14],m=t[15],b=n[0],w=n[1],x=n[2],C=n[3];return e[0]=b*r+w*s+x*f+C*g,e[1]=b*i+w*u+x*h+C*v,e[2]=b*o+w*c+x*d+C*y,e[3]=b*a+w*l+x*p+C*m,b=n[4],w=n[5],x=n[6],C=n[7],e[4]=b*r+w*s+x*f+C*g,e[5]=b*i+w*u+x*h+C*v,e[6]=b*o+w*c+x*d+C*y,e[7]=b*a+w*l+x*p+C*m,b=n[8],w=n[9],x=n[10],C=n[11],e[8]=b*r+w*s+x*f+C*g,e[9]=b*i+w*u+x*h+C*v,e[10]=b*o+w*c+x*d+C*y,e[11]=b*a+w*l+x*p+C*m,b=n[12],w=n[13],x=n[14],C=n[15],e[12]=b*r+w*s+x*f+C*g,e[13]=b*i+w*u+x*h+C*v,e[14]=b*o+w*c+x*d+C*y,e[15]=b*a+w*l+x*p+C*m,e}function ee(e,t,n){var r,i,o,a,s,u,c,l,f,h,d,p,g=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*y+t[12],e[13]=t[1]*g+t[5]*v+t[9]*y+t[13],e[14]=t[2]*g+t[6]*v+t[10]*y+t[14],e[15]=t[3]*g+t[7]*v+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*g+s*v+f*y+t[12],e[13]=i*g+u*v+h*y+t[13],e[14]=o*g+c*v+d*y+t[14],e[15]=a*g+l*v+p*y+t[15]),e}function te(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ne(e,t,n,r){var i,o,a,s,c,l,f,h,d,p,g,v,y,m,b,w,x,C,k,E,O,S,A,T,M=r[0],_=r[1],j=r[2],P=Math.hypot(M,_,j);return P<u?null:(M*=P=1/P,_*=P,j*=P,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],c=t[1],l=t[2],f=t[3],h=t[4],d=t[5],p=t[6],g=t[7],v=t[8],y=t[9],m=t[10],b=t[11],w=M*M*a+o,x=_*M*a+j*i,C=j*M*a-_*i,k=M*_*a-j*i,E=_*_*a+o,O=j*_*a+M*i,S=M*j*a+_*i,A=_*j*a-M*i,T=j*j*a+o,e[0]=s*w+h*x+v*C,e[1]=c*w+d*x+y*C,e[2]=l*w+p*x+m*C,e[3]=f*w+g*x+b*C,e[4]=s*k+h*E+v*O,e[5]=c*k+d*E+y*O,e[6]=l*k+p*E+m*O,e[7]=f*k+g*E+b*O,e[8]=s*S+h*A+v*T,e[9]=c*S+d*A+y*T,e[10]=l*S+p*A+m*T,e[11]=f*S+g*A+b*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function re(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}function ie(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-f*r,e[3]=u*i-h*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+f*i,e[11]=u*r+h*i,e}function oe(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e}function ae(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function se(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ue(e,t,n){var r,i,o,a=n[0],s=n[1],c=n[2],l=Math.hypot(a,s,c);return l<u?null:(a*=l=1/l,s*=l,c*=l,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=s*a*o+c*r,e[2]=c*a*o-s*r,e[3]=0,e[4]=a*s*o-c*r,e[5]=s*s*o+i,e[6]=c*s*o+a*r,e[7]=0,e[8]=a*c*o+s*r,e[9]=s*c*o-a*r,e[10]=c*c*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ce(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function le(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fe(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function he(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,d=i*u,p=i*c,g=o*c,v=a*s,y=a*u,m=a*c;return e[0]=1-(d+g),e[1]=f+m,e[2]=h-y,e[3]=0,e[4]=f-m,e[5]=1-(l+g),e[6]=p+v,e[7]=0,e[8]=h+y,e[9]=p-v,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function de(e,t){var n=new c(3),r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],u=t[5],l=t[6],f=t[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+f*r+u*o-l*i)/h,n[1]=2*(u*a+f*i+l*r-s*o)/h,n[2]=2*(l*a+f*o+s*i-u*r)/h):(n[0]=2*(s*a+f*r+u*o-l*i),n[1]=2*(u*a+f*i+l*r-s*o),n[2]=2*(l*a+f*o+s*i-u*r)),he(e,t,n),e}function pe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ge(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(u,c,l),e}function ve(e,t){var n=new c(3);ge(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],a=t[0]*r,s=t[1]*i,u=t[2]*o,l=t[4]*r,f=t[5]*i,h=t[6]*o,d=t[8]*r,p=t[9]*i,g=t[10]*o,v=a+f+g,y=0;return v>0?(y=2*Math.sqrt(v+1),e[3]=.25*y,e[0]=(h-p)/y,e[1]=(d-u)/y,e[2]=(s-l)/y):a>f&&a>g?(y=2*Math.sqrt(1+a-f-g),e[3]=(h-p)/y,e[0]=.25*y,e[1]=(s+l)/y,e[2]=(d+u)/y):f>g?(y=2*Math.sqrt(1+f-a-g),e[3]=(d-u)/y,e[0]=(s+l)/y,e[1]=.25*y,e[2]=(h+p)/y):(y=2*Math.sqrt(1+g-a-f),e[3]=(s-l)/y,e[0]=(d+u)/y,e[1]=(h+p)/y,e[2]=.25*y),e}function ye(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,d=i*l,p=o*c,g=o*l,v=a*l,y=s*u,m=s*c,b=s*l,w=r[0],x=r[1],C=r[2];return e[0]=(1-(p+v))*w,e[1]=(h+b)*w,e[2]=(d-m)*w,e[3]=0,e[4]=(h-b)*x,e[5]=(1-(f+v))*x,e[6]=(g+y)*x,e[7]=0,e[8]=(d+m)*C,e[9]=(g-y)*C,e[10]=(1-(f+p))*C,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function me(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],u=t[3],c=o+o,l=a+a,f=s+s,h=o*c,d=o*l,p=o*f,g=a*l,v=a*f,y=s*f,m=u*c,b=u*l,w=u*f,x=r[0],C=r[1],k=r[2],E=i[0],O=i[1],S=i[2],A=(1-(g+y))*x,T=(d+w)*x,M=(p-b)*x,_=(d-w)*C,j=(1-(h+y))*C,P=(v+m)*C,N=(p+b)*k,R=(v-m)*k,D=(1-(h+g))*k;return e[0]=A,e[1]=T,e[2]=M,e[3]=0,e[4]=_,e[5]=j,e[6]=P,e[7]=0,e[8]=N,e[9]=R,e[10]=D,e[11]=0,e[12]=n[0]+E-(A*E+_*O+N*S),e[13]=n[1]+O-(T*E+j*O+R*S),e[14]=n[2]+S-(M*E+P*O+D*S),e[15]=1,e}function be(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,p=i*u,g=o*a,v=o*s,y=o*u;return e[0]=1-f-p,e[1]=l+y,e[2]=h-v,e[3]=0,e[4]=l-y,e[5]=1-c-p,e[6]=d+g,e[7]=0,e[8]=h+v,e[9]=d-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function we(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function xe(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Ce(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function ke(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e}function Ee(e,t,n,r){var i,o,a,s,c,l,f,h,d,p,g=t[0],v=t[1],y=t[2],m=r[0],b=r[1],w=r[2],x=n[0],C=n[1],k=n[2];return Math.abs(g-x)<u&&Math.abs(v-C)<u&&Math.abs(y-k)<u?$(e):(f=g-x,h=v-C,d=y-k,i=b*(d*=p=1/Math.hypot(f,h,d))-w*(h*=p),o=w*(f*=p)-m*d,a=m*h-b*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=h*a-d*o,c=d*i-f*a,l=f*o-h*i,(p=Math.hypot(s,c,l))?(s*=p=1/p,c*=p,l*=p):(s=0,c=0,l=0),e[0]=i,e[1]=s,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=h,e[7]=0,e[8]=a,e[9]=l,e[10]=d,e[11]=0,e[12]=-(i*g+o*v+a*y),e[13]=-(s*g+c*v+l*y),e[14]=-(f*g+h*v+d*y),e[15]=1,e)}function Oe(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],h=a-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var p=u*h-c*f,g=c*l-s*h,v=s*f-u*l;return(d=p*p+g*g+v*v)>0&&(p*=d=1/Math.sqrt(d),g*=d,v*=d),e[0]=p,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-h*g,e[5]=h*p-l*v,e[6]=l*g-f*p,e[7]=0,e[8]=l,e[9]=f,e[10]=h,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function Se(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ae(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Te(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Me(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function _e(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function je(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Pe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ne(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],g=e[12],v=e[13],y=e[14],m=e[15],b=t[0],w=t[1],x=t[2],C=t[3],k=t[4],E=t[5],O=t[6],S=t[7],A=t[8],T=t[9],M=t[10],_=t[11],j=t[12],P=t[13],N=t[14],R=t[15];return Math.abs(n-b)<=u*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-w)<=u*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(i-x)<=u*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-C)<=u*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-k)<=u*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(s-E)<=u*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-O)<=u*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-S)<=u*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-A)<=u*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(h-T)<=u*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-M)<=u*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-_)<=u*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(g-j)<=u*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(v-P)<=u*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(y-N)<=u*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(m-R)<=u*Math.max(1,Math.abs(m),Math.abs(R))}var Re=Q,De=Me;function Ie(){var e=new c(3);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Le(e){var t=new c(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Fe(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Be(e,t,n){var r=new c(3);return r[0]=e,r[1]=t,r[2]=n,r}function ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ve(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Ue(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ge(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function He(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function We(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function qe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Xe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function $e(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ye(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ke(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Je(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ze(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Qe(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function et(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function tt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function nt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function rt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function it(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function ot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function at(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function st(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function ut(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return e[0]=t[0]*s+n[0]*u+r[0]*c+i[0]*l,e[1]=t[1]*s+n[1]*u+r[1]*c+i[1]*l,e[2]=t[2]*s+n[2]*u+r[2]*c+i[2]*l,e}function ct(e,t,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return e[0]=t[0]*c+n[0]*l+r[0]*f+i[0]*h,e[1]=t[1]*c+n[1]*l+r[1]*f+i[1]*h,e[2]=t[2]*c+n[2]*l+r[2]*f+i[2]*h,e}function lt(e,t){t=t||1;var n=2*l()*Math.PI,r=2*l()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function ft(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function ht(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function dt(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],c=t[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,d=i*h-o*f,p=o*l-r*h,g=r*f-i*l,v=2*a;return l*=v,f*=v,h*=v,d*=2,p*=2,g*=2,e[0]=s+l+d,e[1]=u+f+p,e[2]=c+h+g,e}function pt(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function gt(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function vt(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function yt(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&ot(e,t)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function mt(e){return e[0]=0,e[1]=0,e[2]=0,e}function bt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function wt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function xt(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=u*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=u*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=u*Math.max(1,Math.abs(i),Math.abs(s))}var Ct=Ge,kt=He,Et=We,Ot=Qe,St=et,At=Fe,Tt=tt,Mt=function(){var e=Ie();return function(t,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();function _t(){var e=new c(4);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function jt(e){var t=new c(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Pt(e,t,n,r){var i=new c(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Nt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Rt(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Dt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function It(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Lt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Ft(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Bt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function zt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Vt(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Ut(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Gt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Ht(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Wt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function qt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.hypot(n,r,i,o)}function Xt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function $t(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function Yt(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function Kt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Jt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Zt(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function Qt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function en(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=t[0],f=t[1],h=t[2],d=t[3];return e[0]=f*c-h*u+d*s,e[1]=-l*c+h*a-d*o,e[2]=l*u-f*a+d*i,e[3]=-l*s+f*o-h*i,e}function tn(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function nn(e,t){var n,r,i,o,a,s;t=t||1;do{a=(n=2*l()-1)*n+(r=2*l()-1)*r}while(a>=1);do{s=(i=2*l()-1)*i+(o=2*l()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*o*u,e}function rn(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function on(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,d=-a*r-s*i-u*o;return e[0]=l*c+d*-a+f*-u-h*-s,e[1]=f*c+d*-s+h*-a-l*-u,e[2]=h*c+d*-u+l*-s-f*-a,e[3]=t[3],e}function an(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function sn(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function un(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function cn(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-a)<=u*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=u*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-c)<=u*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=u*Math.max(1,Math.abs(o),Math.abs(l))}var ln=It,fn=Lt,hn=Ft,dn=qt,pn=Xt,gn=$t,vn=Yt,yn=function(){var e=_t();return function(t,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function mn(){var e=new c(4);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function bn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function wn(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function xn(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>u?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Cn(e,t){var n=Wn(e,t);return Math.acos(2*n*n-1)}function kn(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-r*c,e[2]=o*l+a*c+r*u-i*s,e[3]=a*l-r*s-i*u-o*c,e}function En(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}function On(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}function Sn(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e}function An(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Tn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return e[0]=n*u,e[1]=r*u,e[2]=i*u,e[3]=s*Math.cos(a),e}function Mn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=.5*Math.log(n*n+r*r+i*i+o*o),e}function _n(e,t,n){return Mn(e,t),Hn(e,e,n),Tn(e,e),e}function jn(e,t,n,r){var i,o,a,s,c,l=t[0],f=t[1],h=t[2],d=t[3],p=n[0],g=n[1],v=n[2],y=n[3];return(o=l*p+f*g+h*v+d*y)<0&&(o=-o,p=-p,g=-g,v=-v,y=-y),1-o>u?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,c=Math.sin(r*i)/a):(s=1-r,c=r),e[0]=s*l+c*p,e[1]=s*f+c*g,e[2]=s*h+c*v,e[3]=s*d+c*y,e}function Pn(e){var t=l(),n=l(),r=l(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e}function Nn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}function Rn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Dn(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}function In(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return e[0]=o*u*l-a*s*c,e[1]=a*s*l+o*u*c,e[2]=a*u*c-o*s*l,e[3]=a*u*l+o*s*c,e}function Ln(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Fn=jt,Bn=Pt,zn=Nt,Vn=Rt,Un=Dt,Gn=kn,Hn=Ht,Wn=Qt,qn=tn,Xn=$t,$n=Xn,Yn=Yt,Kn=Yn,Jn=Zt,Zn=un,Qn=cn,er=function(){var e=Ie(),t=Be(1,0,0),n=Be(0,1,0);return function(r,i,o){var a=ot(i,o);return a<-.999999?(at(e,t,i),At(e)<1e-6&&at(e,n,i),it(e,e),wn(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(at(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,Jn(r,r))}}(),tr=function(){var e=mn(),t=mn();return function(n,r,i,o,a,s){return jn(e,r,a,s),jn(t,i,o,s),jn(n,e,t,2*s*(1-s)),n}}(),nr=function(){var e=f();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Jn(t,Dn(t,e))}}();n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return a})},function(e,t,n){"use strict";n.d(t,"AST_TOKEN_TYPES",function(){return f}),n.d(t,"STORAGE_CLASS",function(){return d}),n.d(t,"Target",function(){return p}),n.d(t,"DefineValuePlaceholder",function(){return v});n(367),n(34),n(211),n(213),n(195),n(196),n(197),n(198),n(199),n(200),n(125),n(202),n(203),n(204),n(205);var r=n(194);n.d(t,"createEntity",function(){return r.b});var i=n(17);n.d(t,"IDENTIFIER",function(){return i.a});var o=n(164);n.d(t,"createWorldContainer",function(){return o.a});var a=n(376);n.d(t,"generateAABBFromVertices",function(){return a.a});var s=n(377);n.d(t,"isSafari",function(){return s.a});n(405);var u=n(406);n.d(t,"AABB",function(){return u.a}),n.d(t,"Frustum",function(){return u.b});var c=n(193);n.o(c,"gl")&&n.d(t,"gl",function(){return c.gl});var l=n(389);n.o(l,"gl")&&n.d(t,"gl",function(){return l.gl});var f,h,d,p,g=n(390);n.o(g,"gl")&&n.d(t,"gl",function(){return g.gl}),n.o(c,"gl")&&n.d(t,"gl",function(){return c.gl}),function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"}(f||(f={})),function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"}(h||(h={})),function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"}(d||(d={})),function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"}(p||(p={}));var v="__DefineValuePlaceholder__"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";e.exports=n(747)},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o=n(25);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return i})},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var r=n(49);t.METADATA_KEY=r;var i=n(929);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n(101);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n(945);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n(946);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n(947);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n(948);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return c.named}});var l=n(372);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var f=n(949);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return f.optional}});var h=n(950);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(951);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(952);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return p.targetName}});var g=n(953);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return g.postConstruct}});var v=n(370);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return v.MetadataReader}});var y=n(124);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return y.id}});var m=n(108);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return m.decorate}});var b=n(375);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var w=n(163);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return w.getServiceIdentifierAsString}});var x=n(954);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TextureCompressionBC="texture-compression-bc"}(t.ExtensionName||(t.ExtensionName={})),function(e){e.ClampToEdge="clamp-to-edge",e.Repeat="repeat",e.MirrorRepeat="mirror-repeat"}(t.AddressMode||(t.AddressMode={})),function(e){e.UniformBuffer="uniform-buffer",e.StorageBuffer="storage-buffer",e.ReadonlyStorageBuffer="readonly-storage-buffer",e.Sampler="sampler",e.ComparisonSampler="comparison-sampler",e.SampledTexture="sampled-texture",e.ReadonlyStorageTexture="readonly-storage-texture",e.WriteonlyStorageTexture="writeonly-storage-texture"}(t.BindingType||(t.BindingType={})),function(e){e.Zero="zero",e.One="one",e.SrcColor="src-color",e.OneMinusSrcColor="one-minus-src-color",e.SrcAlpha="src-alpha",e.OneMinusSrcAlpha="one-minus-src-alpha",e.DstColor="dst-color",e.OneMinusDstColor="one-minus-dst-color",e.DstAlpha="dst-alpha",e.OneMinusDstAlpha="one-minus-dst-alpha",e.SrcAlphaSaturated="src-alpha-saturated",e.BlendColor="blend-color",e.OneMinusBlendColor="one-minus-blend-color"}(t.BlendFactor||(t.BlendFactor={})),function(e){e.Add="add",e.Subtract="subtract",e.ReverseSubtract="reverse-subtract",e.Min="min",e.Max="max"}(t.BlendOperation||(t.BlendOperation={})),function(e){e.Never="never",e.Less="less",e.Equal="equal",e.LessEqual="less-equal",e.Greater="greater",e.NotEqual="not-equal",e.GreaterEqual="greater-equal",e.Always="always"}(t.CompareFunction||(t.CompareFunction={})),function(e){e.None="none",e.Front="front",e.Back="back"}(t.CullMode||(t.CullMode={})),function(e){e.Nearest="nearest",e.Linear="linear"}(t.FilterMode||(t.FilterMode={})),function(e){e.CCW="ccw",e.CW="cw"}(t.FrontFace||(t.FrontFace={})),function(e){e.Uint16="uint16",e.Uint32="uint32"}(t.IndexFormat||(t.IndexFormat={})),function(e){e.Vertex="vertex",e.Instance="instance"}(t.InputStepMode||(t.InputStepMode={})),function(e){e.Load="load"}(t.LoadOp||(t.LoadOp={})),function(e){e.PointList="point-list",e.LineList="line-list",e.LineStrip="line-strip",e.TriangleList="triangle-list",e.TriangleStrip="triangle-strip"}(t.PrimitiveTopology||(t.PrimitiveTopology={})),function(e){e.Keep="keep",e.Zero="zero",e.Replace="replace",e.Invert="invert",e.IncrementClamp="increment-clamp",e.DecrementClamp="decrement-clamp",e.IncrementWrap="increment-wrap",e.DecrementWrap="decrement-wrap"}(t.StencilOperation||(t.StencilOperation={})),function(e){e.Store="store",e.Clear="clear"}(t.StoreOp||(t.StoreOp={})),function(e){e.E1d="1d",e.E2d="2d",e.E3d="3d"}(t.TextureDimension||(t.TextureDimension={})),function(e){e.R8Unorm="r8unorm",e.R8Snorm="r8snorm",e.R8Uint="r8uint",e.R8Sint="r8sint",e.R16Uint="r16uint",e.R16Sint="r16sint",e.R16Float="r16float",e.RG8Unorm="rg8unorm",e.RG8Snorm="rg8snorm",e.RG8Uint="rg8uint",e.RG8Sint="rg8sint",e.R32Uint="r32uint",e.R32Sint="r32sint",e.R32Float="r32float",e.RG16Uint="rg16uint",e.RG16Sint="rg16sint",e.RG16Float="rg16float",e.RGBA8Unorm="rgba8unorm",e.RGBA8UnormSRGB="rgba8unorm-srgb",e.RGBA8Snorm="rgba8snorm",e.RGBA8Uint="rgba8uint",e.RGBA8Sint="rgba8sint",e.BGRA8Unorm="bgra8unorm",e.BGRA8UnormSRGB="bgra8unorm-srgb",e.RGB10A2Unorm="rgb10a2unorm",e.RG11B10Float="rg11b10float",e.RG32Uint="rg32uint",e.RG32Sint="rg32sint",e.RG32Float="rg32float",e.RGBA16Uint="rgba16uint",e.RGBA16Sint="rgba16sint",e.RGBA16Float="rgba16float",e.RGBA32Uint="rgba32uint",e.RGBA32Sint="rgba32sint",e.RGBA32Float="rgba32float",e.Depth32Float="depth32float",e.Depth24Plus="depth24plus",e.Depth24PlusStencil8="depth24plus-stencil8"}(t.TextureFormat||(t.TextureFormat={})),function(e){e.Float="float",e.Sint="sint",e.Uint="uint"}(t.TextureComponentType||(t.TextureComponentType={})),function(e){e.E1d="1d",e.E2d="2d",e.E2dArray="2d-array",e.Cube="cube",e.CubeArray="cube-array",e.E3d="3d"}(t.TextureViewDimension||(t.TextureViewDimension={})),function(e){e.Uchar2="uchar2",e.Uchar4="uchar4",e.Char2="char2",e.Char4="char4",e.Uchar2Norm="uchar2norm",e.Uchar4Norm="uchar4norm",e.Char2Norm="char2norm",e.Char4Norm="char4norm",e.Ushort2="ushort2",e.Ushort4="ushort4",e.Short2="short2",e.Short4="short4",e.Ushort2Norm="ushort2norm",e.Ushort4Norm="ushort4norm",e.Short2Norm="short2norm",e.Short4Norm="short4norm",e.Half2="half2",e.Half4="half4",e.Float="float",e.Float2="float2",e.Float3="float3",e.Float4="float4",e.Uint="uint",e.Uint2="uint2",e.Uint3="uint3",e.Uint4="uint4",e.Int="int",e.Int2="int2",e.Int3="int3",e.Int4="int4"}(t.VertexFormat||(t.VertexFormat={})),function(e){e.All="all",e.StencilOnly="stencil-only",e.DepthOnly="depth-only"}(t.TextureAspect||(t.TextureAspect={})),function(e){e.Error="error",e.Warning="warning",e.Info="info"}(t.CompilationMessageType||(t.CompilationMessageType={})),function(e){e.Occlusion="occlusion"}(t.QueryType||(t.QueryType={})),function(e){e[e.MapRead=1]="MapRead",e[e.MapWrite=2]="MapWrite",e[e.CopySrc=4]="CopySrc",e[e.CopyDst=8]="CopyDst",e[e.Index=16]="Index",e[e.Vertex=32]="Vertex",e[e.Uniform=64]="Uniform",e[e.Storage=128]="Storage",e[e.Indirect=256]="Indirect",e[e.QueryResolve=512]="QueryResolve"}(t.BufferUsage||(t.BufferUsage={})),function(e){e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Blue=4]="Blue",e[e.Alpha=8]="Alpha",e[e.All=15]="All"}(t.ColorWrite||(t.ColorWrite={})),function(e){e[e.Vertex=1]="Vertex",e[e.Fragment=2]="Fragment",e[e.Compute=4]="Compute"}(t.ShaderStage||(t.ShaderStage={})),function(e){e[e.CopySrc=1]="CopySrc",e[e.CopyDst=2]="CopyDst",e[e.Sampled=4]="Sampled",e[e.Storage=8]="Storage",e[e.OutputAttachment=16]="OutputAttachment"}(t.TextureUsage||(t.TextureUsage={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.MapMode||(t.MapMode={}))},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){e.exports=n(366)},function(e,t){e.exports=function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(e,t){e.exports=function(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},function(e,t,n){"use strict";var r=n(3);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)})}}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(54),i=n(236).f,o=n(106),a=n(131),s=n(239),u=n(286),c=n(289);e.exports=function(e,t){var n,l,f,h,d,p=e.target,g=e.global,v=e.stat;if(n=g?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(h=t[l],f=e.noTargetGet?(d=i(n,l))&&d.value:n[l],!c(g?l:p+(v?".":"#")+l,e.forced)&&void 0!==f){if(typeof h===typeof f)continue;u(h,f)}(e.sham||f&&f.sham)&&o(h,"sham",!0),a(n,l,h,e)}}},function(e,t,n){var r=n(75);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){e.exports=!1},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=Array.isArray;t.a=r},function(e,t,n){"use strict";t.a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(955);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(69),i=n(28);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t,n){var r=n(23),i=n(301),o=n(155),a=n(53),s=n(250),u=n(300),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,f){var h,d,p,g,v,y,m,b=a(t,n,l?2:1);if(f)h=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(p=0,g=o(e.length);g>p;p++)if((v=l?b(r(m=e[p])[0],m[1]):b(e[p]))&&v instanceof c)return v;return new c(!1)}h=d.call(e)}for(y=h.next;!(m=y.call(h)).done;)if("object"==typeof(v=u(h,b,m.value,l))&&v&&v instanceof c)return v;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(19);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Object(r.a)(e,t,n[t])})}return e}},function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return d});var r=n(14),i=n.n(r),o=n(20),a=n.n(o),s=n(11),u=n.n(s),c=n(10),l=n.n(c),f=n(194),h=function e(t){l()(this,e)},d=function(){function e(t){l()(this,e),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}return u()(e,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return this.lookup[e]>-1}},{key:"create",value:function(e,t){this.lookup[e]=this.components.length;var n=new this.clazz(t||{});return this.components.push(n),this.entities.push(e),n}},{key:"remove",value:function(e){var t=this.lookup[e];t>-1&&t<this.components.length-1&&(this.components[t]=this.components[this.components.length-1],this.entities[t]=this.entities[this.entities.length-1],this.lookup[this.entities[t]]=t),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){var t=this.lookup[e];if(t>-1){var n=this.entities[t];if(t<this.components.length-1){for(var r=t+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var i=t+1;i<this.entities.length;++i)this.entities[i-1]=this.entities[i],this.lookup[this.entities[i-1]]=i-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(e,t){if(e!==t){for(var n=this.components[e],r=this.entities[e],i=e<t?1:-1,o=e;o!==t;o+=i){var a=o+i;this.components[o]=this.components[a],this.entities[o]=this.entities[a],this.lookup[this.entities[o]]=o}this.components[t]=n,this.entities[t]=r,this.lookup[r]=t}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){var t=this.lookup[e];return t>-1?this.components[t]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],i=Number(r);if(this.lookup[i]===e)return i}return f.a}},{key:"find",value:function(e){for(var t=0;t<this.getCount();t++){var n=this.getComponent(t);if(e(n,t))return n}return null}},{key:"findIndex",value:function(e){for(var t=0;t<this.getCount();t++){if(e(this.getComponent(t),t))return t}return-1}},{key:"forEach",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],i=Number(r),o=this.lookup[i];e(i,this.getComponent(o))}}},{key:"forEachAsync",value:function(){var e=a()(i.a.mark(function e(t){var n,r,o,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){e.next=10;break}return o=r[n],a=Number(o),s=this.lookup[a],e.next=7,t(a,this.getComponent(s));case 7:n++,e.next=1;break;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){for(var t=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var i=r[n],o=Number(i),a=this.lookup[o];t.push(e(o,this.getComponent(a)))}return t}}]),e}()},function(e,t,n){var r=n(957),i=n(958),o=n(368),a=n(959);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t,n){"use strict";var r=n(216),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){"use strict";var r=n(5),i=n.n(r),o=n(92),a=n(66),s=n(229),u=n(166),c=n(129),l=n(126),f=n.n(l);function h(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}var d=i.a.createContext();var p={initialChunks:{}},g="PENDING",v="RESOLVED",y="REJECTED";var m=function(e){var t=function(t){return i.a.createElement(d.Consumer,null,function(n){return i.a.createElement(e,Object.assign({__chunkExtractor:n},t))})};return e.displayName&&(t.displayName=e.displayName+"WithChunkExtractor"),t},b=function(e){return e};function w(e){var t=e.defaultResolveComponent,n=void 0===t?b:t,r=e.render,l=e.onLoad;function d(e,t){void 0===t&&(t={});var d=function(e){return"function"===typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),b={};function w(e){return t.cacheKey?t.cacheKey(e):d.resolve?d.resolve(e):"static"}function x(e,r,i){var o=t.resolveComponent?t.resolveComponent(e,r):n(e);if(t.resolveComponent&&!Object(c.isValidElementType)(o))throw new Error("resolveComponent returned something that is not a React component!");return f()(i,o,{preload:!0}),o}var C=function(e){function n(n){var r;return(r=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:w(n)},h(!n.__chunkExtractor||d.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?!1===t.ssr?Object(s.a)(r):(d.requireAsync(n).catch(function(){return null}),r.loadSync(),n.__chunkExtractor.addChunk(d.chunkName(n)),Object(s.a)(r)):(!1!==t.ssr&&(d.isReady&&d.isReady(n)||d.chunkName&&p.initialChunks[d.chunkName(n)])&&r.loadSync(),r)}Object(u.a)(n,e),n.getDerivedStateFromProps=function(e,t){var n=w(e);return Object(a.a)({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===y&&this.setCache(),this.state.loading&&this.loadAsync()},i.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},i.componentWillUnmount=function(){this.mounted=!1},i.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},i.getCacheKey=function(){return w(this.props)},i.getCache=function(){return b[this.getCacheKey()]},i.setCache=function(e){void 0===e&&(e=void 0),b[this.getCacheKey()]=e},i.triggerOnLoad=function(){var e=this;l&&setTimeout(function(){l(e.state.result,e.props)})},i.loadSync=function(){if(this.state.loading)try{var e=x(d.requireSync(this.props),this.props,E);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:d.resolve(this.props),chunkName:d.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},i.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then(function(t){var n=x(t,e.props,{Loadable:E});e.safeSetState({result:n,loading:!1},function(){return e.triggerOnLoad()})}).catch(function(t){return e.safeSetState({error:t,loading:!1})}),t},i.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,Object(o.a)(t,["__chunkExtractor","forwardedRef"])),r=this.getCache();return r||((r=d.requireAsync(n)).status=g,this.setCache(r),r.then(function(){r.status=v},function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:d.resolve(e.props),chunkName:d.chunkName(e.props),error:t?t.message:t}),r.status=y})),r},i.render=function(){var e=this.props,n=e.forwardedRef,i=e.fallback,s=(e.__chunkExtractor,Object(o.a)(e,["forwardedRef","fallback","__chunkExtractor"])),u=this.state,c=u.error,l=u.loading,f=u.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===g)throw this.loadAsync();if(c)throw c;var h=i||t.fallback||null;return l?h:r({fallback:h,result:f,options:t,props:Object(a.a)({},s,{ref:n})})},n}(i.a.Component),k=m(C),E=i.a.forwardRef(function(e,t){return i.a.createElement(k,Object.assign({forwardedRef:t},e))});return E.displayName="Loadable",E.preload=function(e){d.requireAsync(e)},E.load=function(e){return d.requireAsync(e)},E}return{loadable:d,lazy:function(e,t){return d(e,Object(a.a)({},t,{suspense:!0}))}}}var x=w({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return i.a.createElement(t,n)}}),C=x.loadable,k=x.lazy,E=w({onLoad:function(e,t){e&&t.forwardedRef&&("function"===typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),O=E.loadable,S=E.lazy;var A=C;A.lib=O,k.lib=S;t.a=A},function(e,t,n){var r;try{r={cloneDeep:n(866),constant:n(262),defaults:n(867),each:n(331),filter:n(334),find:n(868),flatten:n(361),forEach:n(332),forIn:n(873),has:n(345),isUndefined:n(346),last:n(874),map:n(347),mapValues:n(875),max:n(876),merge:n(878),min:n(884),minBy:n(885),now:n(886),pick:n(887),range:n(892),reduce:n(349),sortBy:n(895),uniqueId:n(900),values:n(354),zipObject:n(901)}}catch(i){}r||(r=window._),e.exports=r},function(e,t,n){var r;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,function(n,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},c=o.push,l=o.indexOf,f={},h=f.toString,d=f.hasOwnProperty,p=d.toString,g=p.call(Object),v={},y=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},m=function(e){return null!=e&&e===e.window},b=n.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,i,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in w)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function C(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?f[h.call(e)]||"object":typeof e}var k=function e(t,n){return new e.fn.init(t,n)};function E(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!y(e)&&!m(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}k.fn=k.prototype={jquery:"3.6.0",constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof a&&(c=a,a=arguments[s]||{},s++),"object"===typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=a(e))||"function"===typeof(n=d.call(t,"constructor")&&t.constructor)&&p.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?k.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(E(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return u(a)},guid:1,support:v}),"function"===typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()});var O=function(e){var t,n,r,i,o,a,s,u,c,l,f,h,d,p,g,v,y,m,b,w="sizzle"+1*new Date,x=e.document,C=0,k=0,E=ue(),O=ue(),S=ue(),A=ue(),T=function(e,t){return e===t&&(f=!0),0},M={}.hasOwnProperty,_=[],j=_.pop,P=_.push,N=_.push,R=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",z=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(L+"+","g"),U=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),G=new RegExp("^"+L+"*,"+L+"*"),H=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),q=new RegExp(z),X=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){h()},ae=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{N.apply(_=R.call(x.childNodes),x.childNodes),_[x.childNodes.length].nodeType}catch(Oe){N={apply:_.length?function(e,t){P.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,c,l,f,p,y,m=t&&t.ownerDocument,x=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==x&&9!==x&&11!==x)return r;if(!i&&(h(t),t=t||d,g)){if(11!==x&&(f=Q.exec(e)))if(o=f[1]){if(9===x){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(m&&(c=m.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(f[2])return N.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!A[e+" "]&&(!v||!v.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(y=e,m=t,1===x&&(W.test(e)||H.test(e))){for((m=ee.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=w)),s=(p=a(e)).length;s--;)p[s]=(l?"#"+l:":scope")+" "+be(p[s]);y=p.join(",")}try{return N.apply(r,m.querySelectorAll(y)),r}catch(C){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return u(e.replace(U,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(Oe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce(function(t){return t=+t,ce(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ye(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},h=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:x;return a!=d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,g=!o(d),x!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=le(function(e){return p.appendChild(e).appendChild(d.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+w+"-]").length||v.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Z.test(m=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),y.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=Z.test(p.compareDocumentPosition),b=t||Z.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==x&&b(x,e)?-1:t==d||t.ownerDocument==x&&b(x,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:l?D(l,e)-D(l,t):0;if(i===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?he(a[r],s[r]):a[r]==x?-1:s[r]==x?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&g&&!A[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Oe){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&h(e);var i=r.attrHandle[t.toLowerCase()],o=i&&M.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(T),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ce,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&E(e,function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,h,d,p,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,b=!1;if(v){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&m){for(b=(d=(c=(l=(f=(h=v)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===C&&c[1])&&c[2],h=d&&v.childNodes[d];h=++d&&h&&h[g]||(b=d=0)||p.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[C,d,b];break}}else if(m&&(b=d=(c=(l=(f=(h=t)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===C&&c[1]),!1===b)for(;(h=++d&&h&&h[g]||(b=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++b||(m&&((l=(f=h[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]=[C,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=D(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ce(function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[w]?ce(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:ce(function(e){return function(t){return se(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ce(function(e){return X.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function me(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=k++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var c,l,f,h=[C,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(l=(f=t[w]||(t[w]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===C&&c[1]===s)return h[2]=c[2];if(l[o]=h,h[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ce(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function ke(e,t,n,r,i,o){return r&&!r[w]&&(r=ke(r)),i&&!i[w]&&(i=ke(i,o)),ce(function(o,a,s,u){var c,l,f,h=[],d=[],p=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:Ce(g,h,e,s,u),y=n?i||(o?e:p||r)?[]:a:v;if(n&&n(v,y,s,u),r)for(c=Ce(y,d),r(c,[],s,u),l=c.length;l--;)(f=c[l])&&(y[d[l]]=!(v[d[l]]=f));if(o){if(i||e){if(i){for(c=[],l=y.length;l--;)(f=y[l])&&c.push(v[l]=f);i(null,y=[],c,u)}for(l=y.length;l--;)(f=y[l])&&(c=i?D(o,f):h[l])>-1&&(o[c]=!(a[c]=f))}}else y=Ce(y===a?y.splice(p,y.length):y),i?i(null,a,y,u):N.apply(a,y)})}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,l=we(function(e){return e===t},s,!0),f=we(function(e){return D(t,e)>-1},s,!0),h=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?l(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])h=[we(xe(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return ke(u>1&&xe(h),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(U,"$1"),n,u<i&&Ee(e.slice(u,i)),i<o&&Ee(e=e.slice(i)),i<o&&be(e))}h.push(n)}return xe(h)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=se.tokenize=function(e,t){var n,i,o,a,s,u,c,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(a in n&&!(i=G.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=$[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,u).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=S[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[w]?i.push(s):o.push(s);(s=S(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,l){var f,p,v,y=0,m="0",b=o&&[],w=[],x=c,k=o||i&&r.find.TAG("*",l),E=C+=null==x?1:Math.random()||.1,O=k.length;for(l&&(c=a==d||a||l);m!==O&&null!=(f=k[m]);m++){if(i&&f){for(p=0,a||f.ownerDocument==d||(h(f),s=!g);v=e[p++];)if(v(f,a||d,s)){u.push(f);break}l&&(C=E)}n&&((f=!v&&f)&&y--,o&&b.push(f))}if(y+=m,n&&m!==y){for(p=0;v=t[p++];)v(b,w,a,s);if(o){if(y>0)for(;m--;)b[m]||w[m]||(w[m]=j.call(u));w=Ce(w)}N.apply(u,w),l&&!o&&w.length>0&&y+t.length>1&&se.uniqueSort(u)}return l&&(C=E,c=x),b};return n?ce(o):o}(o,i))).selector=e}return s},u=se.select=function(e,t,n,i){var o,u,c,l,f,h="function"===typeof e&&e,d=!i&&a(e=h.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=$.needsContext.test(e)?0:u.length;o--&&(c=u[o],!r.relative[l=c.type]);)if((f=r.find[l])&&(i=f(c.matches[0].replace(te,ne),ee.test(u[0].type)&&ye(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&be(u)))return N.apply(n,i),n;break}}return(h||s(e,d))(i,t,!g,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=w.split("").sort(T).join("")===w,n.detectDuplicates=!!f,h(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||fe(I,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(n);k.find=O,k.expr=O.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=O.uniqueSort,k.text=O.getText,k.isXMLDoc=O.isXML,k.contains=O.contains,k.escapeSelector=O.escape;var S=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=k.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return y(t)?k.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?k.grep(e,function(e){return e===t!==n}):"string"!==typeof t?k.grep(e,function(e){return l.call(t,e)>-1!==n}):k.filter(t,e,n)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return r>1?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"===typeof e&&T.test(e)?k(e):e||[],!1).length}});var P,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||P,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),_.test(r[1])&&k.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,P=k(b);var R=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!==typeof e&&k(e);if(!T.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?l.call(k(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(M(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(e,t){k.fn[e]=function(n,r){var i=k.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=k.filter(r,i)),this.length>1&&(D[e]||k.uniqueSort(i),R.test(e)&&i.reverse()),this.pushStack(i)}});var L=/[^\x20\t\r\n\f]+/g;function F(e){return e}function B(e){throw e}function z(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return k.each(e.match(L)||[],function(e,n){t[n]=!0}),t}(e):k.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){k.each(n,function(n,r){y(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return k.each(arguments,function(e,t){for(var n;(n=k.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?k.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred(function(n){k.each(t,function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(e<o)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"===typeof n||"function"===typeof n)&&n.then,y(c)?i?c.call(n,a(o,t,F,i),a(o,t,B,i)):(o++,c.call(n,a(o,t,F,i),a(o,t,B,i),a(o,t,F,t.notifyWith))):(r!==F&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(n,l.stackTrace),e+1>=o&&(r!==B&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?l():(k.Deferred.getStackHook&&(l.stackTrace=k.Deferred.getStackHook()),n.setTimeout(l))}}return k.Deferred(function(n){t[0][3].add(a(0,n,y(i)?i:F,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:F)),t[2][3].add(a(0,n,y(r)?r:B))}).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},o={};return k.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=k.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(z(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)z(i[n],a(n),o.reject);return o.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&V.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){n.setTimeout(function(){throw e})};var U=k.Deferred();function G(){b.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),k.ready()}k.fn.ready=function(e){return U.then(e).catch(function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||U.resolveWith(b,[k]))}}),k.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(k.ready):(b.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var H=function e(t,n,r,i,o,a,s){var u=0,c=t.length,l=null==r;if("object"===C(r))for(u in o=!0,r)e(t,n,u,r[u],!0,a,s);else if(void 0!==i&&(o=!0,y(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(k(e),n)})),n))for(;u<c;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return o?t:l?n.call(t):c?n(t[0],r):a},W=/^-ms-/,q=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function $(e){return e.replace(W,"ms-").replace(q,X)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=k.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[$(t)]=n;else for(r in t)i[$(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map($):(t=$(t))in r?[t]:t.match(L)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var J=new K,Z=new K,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(n)}catch(i){}Z.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),k.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=$(r.slice(5)),te(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each(function(){Z.set(this,e)}):H(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Z.get(o,e))?n:void 0!==(n=te(o,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:k.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?k.queue(this[0],e):void 0===t?this:this.each(function(){var n=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&k.dequeue(this,e)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],oe=b.documentElement,ae=function(e){return k.contains(e.ownerDocument,e)},se={composed:!0};oe.getRootNode&&(ae=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===k.css(e,"display")};function ce(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),c=n&&n[3]||(k.cssNumber[t]?"":"px"),l=e.nodeType&&(k.cssNumber[t]||"px"!==c&&+u)&&re.exec(k.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)k.style(e,t,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,k.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var le={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function he(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ue(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}k.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each(function(){ue(this)?k(this).show():k(this).hide()})}});var de=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",v.option=!!e.lastChild}();var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?k.merge([e],n):n}function me(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,v.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,c,l,f=t.createDocumentFragment(),h=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===C(o))k.merge(h,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(pe.exec(o)||["",""])[1].toLowerCase(),u=ve[s]||ve._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;k.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(c=ae(o),a=ye(f.appendChild(o),"script"),c&&me(a),n)for(l=0;o=a[l++];)ge.test(o.type||"")&&n.push(o);return f}var xe=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function ke(){return!1}function Ee(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function Oe(e,t,n,r,i,o){var a,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Oe(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function Se(e,t,n){n?(J.set(e,t,!1),k.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=J.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(k.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),J.set(this,t,o),r=n(this,t),this[t](),o!==(i=J.get(this,t))||r?J.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(J.set(this,t,{value:k.event.trigger(k.extend(o[0],k.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&k.event.add(e,t,Ce)}k.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,f,h,d,p,g,v=J.get(e);if(Y(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(oe,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return"undefined"!==typeof k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(L)||[""]).length;c--;)d=g=(s=xe.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},l=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=u[d])||((h=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),k.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,f,h,d,p,g,v=J.hasData(e)&&J.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(L)||[""]).length;c--;)if(d=g=(s=xe.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=k.event.special[d]||{},h=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)l=h[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(o,1),l.selector&&h.delegateCount--,f.remove&&f.remove.call(e,l));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,p,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[c],n,r,!0);k.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=k.event.fix(e),c=(J.get(this,"events")||Object.create(null))[u.type]||[],l=k.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(a=k.event.handlers.call(this,u,c),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return de.test(t.type)&&t.click&&M(t,"input")&&Se(t,"click",Ce),!1},trigger:function(e){var t=this||e;return de.test(t.type)&&t.click&&M(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return de.test(t.type)&&t.click&&M(t,"input")&&J.get(t,"click")||M(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return Se(this,e,Ee),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||k.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),k.fn.extend({on:function(e,t,n,r){return Oe(this,e,t,n,r)},one:function(e,t,n,r){return Oe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){k.event.remove(this,e,n,t)})}});var Ae=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function _e(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(J.hasData(e)&&(s=J.get(e).events))for(i in J.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)k.event.add(t,i,s[i][n]);Z.hasData(e)&&(o=Z.access(e),a=k.extend({},o),Z.set(t,a))}}function Re(e,t){var n=t.nodeName.toLowerCase();"input"===n&&de.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function De(e,t,n,r){t=u(t);var i,o,a,s,c,l,f=0,h=e.length,d=h-1,p=t[0],g=y(p);if(g||h>1&&"string"===typeof p&&!v.checkClone&&Te.test(p))return e.each(function(i){var o=e.eq(i);g&&(t[0]=p.call(this,i,o.html())),De(o,t,n,r)});if(h&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=k.map(ye(i,"script"),je)).length;f<h;f++)c=i,f!==d&&(c=k.clone(c,!0,!0),s&&k.merge(a,ye(c,"script"))),n.call(e[f],c,f);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Pe),f=0;f<s;f++)c=a[f],ge.test(c.type||"")&&!J.access(c,"globalEval")&&k.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):x(c.textContent.replace(Me,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ye(r)),r.parentNode&&(n&&ae(r)&&me(ye(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=ae(e);if(!v.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!k.isXMLDoc(e))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Re(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Ne(o[r],a[r]);else Ne(e,s);return(a=ye(s,"script")).length>0&&me(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return H(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_e(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_e(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ae.test(e)&&!ve[(pe.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){k.fn[e]=function(e){for(var n,r=[],i=k(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),k(i[a])[t](n),c.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Be=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},ze=new RegExp(ie.join("|"),"i");function Ve(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ae(e)||(a=k.style(e,t)),!v.pixelBoxStyles()&&Le.test(a)&&ze.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),oe.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,k.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),r=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",oe.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),s}}))}();var Ge=["Webkit","Moz","ms"],He=b.createElement("div").style,We={};function qe(e){var t=k.cssProps[e]||We[e];return t||(e in He?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;n--;)if((e=Ge[n]+t)in He)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,$e=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=re.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+ie[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+ie[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+ie[a]+"Width",!0,i))):(u+=k.css(e,"padding"+ie[a],!0,i),"padding"!==n?u+=k.css(e,"border"+ie[a]+"Width",!0,i):s+=k.css(e,"border"+ie[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Qe(e,t,n){var r=Fe(e),i=(!v.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=Ve(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&M(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ze(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ve(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=$(t),u=$e.test(t),c=e.style;if(u||(t=qe(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"===(o=typeof n)&&(i=re.exec(n))&&i[1]&&(n=ce(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=$(t);return $e.test(t)||(t=qe(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ve(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,t){k.cssHooks[t]={get:function(e,n,r){if(n)return!Xe.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):Be(e,Ye,function(){return Qe(e,t,r)})},set:function(e,n,r){var i,o=Fe(e),a=!v.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===k.css(e,"boxSizing",!1,o),u=r?Ze(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),u&&(i=re.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=k.css(e,t)),Je(0,n,u)}}}),k.cssHooks.marginLeft=Ue(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(e,t){k.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+ie[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=Je)}),k.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,arguments.length>1)}}),k.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[qe(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=et.prototype.init,k.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){nt&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ot):n.setTimeout(ot,k.fx.interval),k.fx.tick())}function at(){return n.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ie[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o=0,a=ct.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=tt||at(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=k.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=$(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=ct.prefilters[o].call(c,e,l,c.opts))return y(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(l,ut,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(L);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,c,l,f="width"in t||"height"in t,h=this,d={},p=e.style,g=e.nodeType&&ue(e),v=J.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=J.get(e,"display")),"none"===(l=k.css(e,"display"))&&(c?l=c:(he([e],!0),c=e.style.display||c,l=k.css(e,"display"),he([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===k.css(e,"float")&&(u||(h.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=J.access(e,"fxshow",{display:c}),o&&(v.hidden=!g),g&&he([e],!0),h.done(function(){for(r in g||he([e]),J.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=ut(g?v[r]:0,r,h),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"===typeof e?k.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return k.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=k.isEmptyObject(e),o=k.speed(t,n,r),a=function(){var t=ct(this,k.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=k.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&it.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||k.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=k.timers,a=r?r.length:0;for(n.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),k.each(["toggle","show","hide"],function(e,t){var n=k.fn[t];k.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}}),k.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){k.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),tt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){nt||(nt=!0,ot())},k.fx.stop=function(){nt=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var lt,ft=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return H(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(L);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ft[t]||k.find.attr;ft[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ft[a],ft[a]=i,i=null!=n(e,t,r)?a:null,ft[a]=o),i}});var ht=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function pt(e){return(e.match(L)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(L)||[]}k.fn.extend({prop:function(e,t){return H(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(y(e))return this.each(function(t){k(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+pt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=pt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(y(e))return this.each(function(t){k(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+pt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=pt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"===typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){k(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=k(this),a=vt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+pt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;k.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,k(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=k.map(i,function(e){return null==e?"":e+""})),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(yt,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:pt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=k.makeArray(t),a=i.length;a--;)((r=i[a]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},v.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var mt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,r,i){var o,a,s,u,c,l,f,h,p=[r||b],g=d.call(e,"type")?e.type:e,v=d.call(e,"namespace")?e.namespace.split("."):[];if(a=h=s=r=r||b,3!==r.nodeType&&8!==r.nodeType&&!mt.test(g+k.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[k.expando]?e:new k.Event(g,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:k.makeArray(t,[e]),f=k.event.special[g]||{},i||!f.trigger||!1!==f.trigger.apply(r,t))){if(!i&&!f.noBubble&&!m(r)){for(u=f.delegateType||g,mt.test(u+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=p[o++])&&!e.isPropagationStopped();)h=a,e.type=o>1?u:f.bindType||g,(l=(J.get(a,"events")||Object.create(null))[e.type]&&J.get(a,"handle"))&&l.apply(a,t),(l=c&&a[c])&&l.apply&&Y(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),t)||!Y(r)||c&&y(r[g])&&!m(r)&&((s=r[c])&&(r[c]=null),k.event.triggered=g,e.isPropagationStopped()&&h.addEventListener(g,bt),r[g](),e.isPropagationStopped()&&h.removeEventListener(g,bt),k.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),v.focusin||k.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){k.event.simulate(t,e.target,k.event.fix(e))};k.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var wt=n.location,xt={guid:Date.now()},Ct=/\?/;k.parseXML=function(e){var t,r;if(!e||"string"!==typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||k.error("Invalid XML: "+(r?k.map(r.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var kt=/\[\]$/,Et=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var i;if(Array.isArray(t))k.each(t,function(t,i){n||kt.test(e)?r(e,i):At(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==C(t))r(e,t);else for(i in t)At(e+"["+i+"]",t[i],n,r)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&St.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Tt=/%20/g,Mt=/#.*$/,_t=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Nt=/^\/\//,Rt={},Dt={},It="*/".concat("*"),Lt=b.createElement("a");function Ft(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(L)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Bt(e,t,n,r){var i={},o=e===Dt;function a(s){var u;return i[s]=!0,k.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!==typeof c||o||i[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Lt.href=wt.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Dt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,c,l,f,h,d=k.ajaxSetup({},t),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?k(p):k.event,v=k.Deferred(),y=k.Callbacks("once memory"),m=d.statusCode||{},w={},x={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=jt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)m[t]=[m[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),O(0,t),this}};if(v.promise(E),d.url=((e||d.url||wt.href)+"").replace(Nt,wt.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(L)||[""],null==d.crossDomain){u=b.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Lt.protocol+"//"+Lt.host!==u.protocol+"//"+u.host}catch(S){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!==typeof d.data&&(d.data=k.param(d.data,d.traditional)),Bt(Rt,d,t,E),c)return E;for(f in(l=k.event&&d.global)&&0===k.active++&&k.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),i=d.url.replace(Mt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Tt,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"===typeof d.data)&&(i+=(Ct.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(_t,"$1"),h=(Ct.test(i)?"&":"?")+"_="+xt.guid+++h),d.url=i+h),d.ifModified&&(k.lastModified[i]&&E.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&E.setRequestHeader("If-None-Match",k.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+It+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(p,E,d)||c))return E.abort();if(C="abort",y.add(d.complete),E.done(d.success),E.fail(d.error),r=Bt(Dt,d,t,E)){if(E.readyState=1,l&&g.trigger("ajaxSend",[E,d]),c)return E;d.async&&d.timeout>0&&(s=n.setTimeout(function(){E.abort("timeout")},d.timeout));try{c=!1,r.send(w,O)}catch(S){if(c)throw S;O(-1,S)}}else O(-1,"No Transport");function O(e,t,a,u){var f,h,b,w,x,C=t;c||(c=!0,s&&n.clearTimeout(s),r=void 0,o=u||"",E.readyState=e>0?4:0,f=e>=200&&e<300||304===e,a&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,E,a)),!f&&k.inArray("script",d.dataTypes)>-1&&k.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),w=function(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(S){return{state:"parsererror",error:a?S:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(d,w,E,f),f?(d.ifModified&&((x=E.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=x),(x=E.getResponseHeader("etag"))&&(k.etag[i]=x)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=w.state,h=w.data,f=!(b=w.error))):(b=C,!e&&C||(C="error",e<0&&(e=0))),E.status=e,E.statusText=(t||C)+"",f?v.resolveWith(p,[h,C,E]):v.rejectWith(p,[E,C,b]),E.statusCode(m),m=void 0,l&&g.trigger(f?"ajaxSuccess":"ajaxError",[E,d,f?h:b]),y.fireWith(p,[E,C]),l&&(g.trigger("ajaxComplete",[E,d]),--k.active||k.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,t){k[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:n,success:r},k.isPlainObject(e)&&e))}}),k.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),k._evalUrl=function(e,t,n){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t,n)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){k(this).wrapInner(e.call(this,t))}):this.each(function(){var t=k(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){k(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Ut=k.ajaxSettings.xhr();v.cors=!!Ut&&"withCredentials"in Ut,v.ajax=Ut=!!Ut,k.ajaxTransport(function(e){var t,r;if(v.cors||Ut&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=k("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}});var Gt=[],Ht=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+xt.guid++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Ht.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ht,"$1"+i):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||k.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?k(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),v.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),k.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(i=_.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=pt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.expr.pseudos.animated=function(e){return k.grep(k.timers,function(t){return e===t.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c=k.css(e,"position"),l=k(e),f={};"static"===c&&(e.style.position="relative"),s=l.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):l.css(f)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){k.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||oe})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;k.fn[e]=function(r){return H(this,function(e,r,i){var o;if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),k.each(["top","left"],function(e,t){k.cssHooks[t]=Ue(v.pixelPosition,function(e,n){if(n)return n=Ve(e,t),Le.test(n)?k(e).position()[t]+"px":n})}),k.each({Height:"height",Width:"width"},function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){k.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return H(this,function(t,n,i){var o;return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?k.css(t,n,s):k.style(t,n,i,s)},t,a?i:void 0,a)}})}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){k.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Wt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),y(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=M,k.isFunction=y,k.isWindow=m,k.camelCase=$,k.type=C,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},k.trim=function(e){return null==e?"":(e+"").replace(Wt,"")},void 0===(r=function(){return k}.apply(t,[]))||(e.exports=r);var qt=n.jQuery,Xt=n.$;return k.noConflict=function(e){return n.$===k&&(n.$=Xt),e&&n.jQuery===k&&(n.jQuery=qt),k},"undefined"===typeof i&&(n.jQuery=n.$=k),k})},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"isArray",function(){return L.a}),n.d(r,"isArrayLike",function(){return Qe.a}),n.d(r,"uniq",function(){return ms}),n.d(r,"union",function(){return ys}),n.d(r,"sortedIndex",function(){return Sa}),n.d(r,"sortedIndexBy",function(){return Aa}),n.d(r,"sortBy",function(){return ba}),n.d(r,"groupBy",function(){return ro}),n.d(r,"difference",function(){return Cr}),n.d(r,"diff",function(){return xs});var i={};n.r(i),n.d(i,"has",function(){return ao}),n.d(i,"pick",function(){return ha}),n.d(i,"forIn",function(){return Ir}),n.d(i,"merge",function(){return _o.a}),n.d(i,"extend",function(){return Pr}),n.d(i,"isEqual",function(){return vo}),n.d(i,"isEmpty",function(){return go}),n.d(i,"isObject",function(){return xn.a}),n.d(i,"isPlainObject",function(){return Eo.a}),n.d(i,"clone",function(){return In}),n.d(i,"cloneDeep",function(){return Bn}),n.d(i,"defaults",function(){return qn}),n.d(i,"defaultsDeep",function(){return Zn}),n.d(i,"ensure",function(){return Ms}),n.d(i,"getValue",function(){return _s}),n.d(i,"getNumber",function(){return js}),n.d(i,"getBoolean",function(){return Ps}),n.d(i,"getByPath",function(){return Ns}),n.d(i,"setByPath",function(){return Rs}),n.d(i,"unsetByPath",function(){return Ds}),n.d(i,"flatten",function(){return Is}),n.d(i,"applyMixins",function(){return ks}),n.d(i,"inherit",function(){return Ss}),n.d(i,"createClass",function(){return Ts});var o={};n.r(o),n.d(o,"isString",function(){return To}),n.d(o,"toString",function(){return G}),n.d(o,"escape",function(){return jr}),n.d(o,"unescape",function(){return ds}),n.d(o,"startsWith",function(){return Ra}),n.d(o,"endsWith",function(){return Ar}),n.d(o,"split",function(){return Na}),n.d(o,"repeat",function(){return da}),n.d(o,"pad",function(){return ea}),n.d(o,"padEnd",function(){return ta}),n.d(o,"padStart",function(){return na}),n.d(o,"truncate",function(){return cs}),n.d(o,"template",function(){return rs}),n.d(o,"uniqueId",function(){return ws}),n.d(o,"eval",function(){return Ls}),n.d(o,"lowerFirst",function(){return Mo}),n.d(o,"upperFirst",function(){return ue}),n.d(o,"camelCase",function(){return Be}),n.d(o,"kebabCase",function(){return Us}),n.d(o,"pascalCase",function(){return Gs}),n.d(o,"constantCase",function(){return Hs}),n.d(o,"dotCase",function(){return Ws}),n.d(o,"pathCase",function(){return qs}),n.d(o,"sentenceCase",function(){return Xs}),n.d(o,"titleCase",function(){return $s}),n.d(o,"hashcode",function(){return Ys}),n.d(o,"uuid",function(){return Ks}),n.d(o,"sanitizeHTML",function(){return Js}),n.d(o,"getSpellingSuggestion",function(){return eu});var a={};n.r(a),n.d(a,"isNaN",function(){return ko}),n.d(a,"isNumber",function(){return Co}),n.d(a,"isFinite",function(){return mo}),n.d(a,"isInteger",function(){return wo}),n.d(a,"isSafeInteger",function(){return So}),n.d(a,"clamp",function(){return Ue}),n.d(a,"inRange",function(){return lo}),n.d(a,"toFinite",function(){return Or}),n.d(a,"toNumber",function(){return Ve.a}),n.d(a,"toInteger",function(){return Sr}),n.d(a,"toSafeInteger",function(){return os}),n.d(a,"parseInt",function(){return oa}),n.d(a,"isNumeric",function(){return R}),n.d(a,"mod",function(){return nu}),n.d(a,"random",function(){return ru}),n.d(a,"isPercentage",function(){return iu}),n.d(a,"normalizePercentage",function(){return ou}),n.d(a,"parseCssNumeric",function(){return au}),n.d(a,"normalizeSides",function(){return su});var s={};n.r(s),n.d(s,"isFunction",function(){return bo.a}),n.d(s,"once",function(){return Ro}),n.d(s,"noop",function(){return jo}),n.d(s,"debounce",function(){return zn.a}),n.d(s,"defer",function(){return tr}),n.d(s,"apply",function(){return uu}),n.d(s,"call",function(){return cu}),n.d(s,"cacher",function(){return lu}),n.d(s,"isAsyncLike",function(){return hu}),n.d(s,"isAsync",function(){return du}),n.d(s,"toAsyncBoolean",function(){return pu}),n.d(s,"toDeferredBoolean",function(){return gu});var u={};n.r(u),n.d(u,"annotate",function(){return ac}),n.d(u,"findAnnotationsAtIndex",function(){return sc}),n.d(u,"findAnnotationsBetweenIndexes",function(){return uc}),n.d(u,"shiftAnnotations",function(){return cc}),n.d(u,"sanitize",function(){return lc});var c={};n.r(c),n.d(c,"requestAnimationFrame",function(){return dc}),n.d(c,"cancelAnimationFrame",function(){return pc}),n.d(c,"getAttribute",function(){return Ju}),n.d(c,"removeAttribute",function(){return Zu}),n.d(c,"setAttribute",function(){return Qu}),n.d(c,"setAttributes",function(){return ec}),n.d(c,"attr",function(){return tc}),n.d(c,"qualifyAttr",function(){return nc}),n.d(c,"kebablizeAttrs",function(){return rc}),n.d(c,"styleToObject",function(){return ic}),n.d(c,"mergeAttrs",function(){return oc}),n.d(c,"uniqueId",function(){return Ou}),n.d(c,"ensureId",function(){return Su}),n.d(c,"isSVGGraphicsElement",function(){return Au}),n.d(c,"ns",function(){return ju}),n.d(c,"svgVersion",function(){return Pu}),n.d(c,"createElement",function(){return Nu}),n.d(c,"createElementNS",function(){return Ru}),n.d(c,"createSvgElement",function(){return Du}),n.d(c,"createSvgDocument",function(){return Iu}),n.d(c,"parseXML",function(){return Lu}),n.d(c,"tagName",function(){return Fu}),n.d(c,"index",function(){return Bu}),n.d(c,"find",function(){return zu}),n.d(c,"findOne",function(){return Vu}),n.d(c,"findParentByClass",function(){return Uu}),n.d(c,"contains",function(){return Gu}),n.d(c,"remove",function(){return Hu}),n.d(c,"empty",function(){return Wu}),n.d(c,"append",function(){return qu}),n.d(c,"prepend",function(){return Xu}),n.d(c,"before",function(){return $u}),n.d(c,"appendTo",function(){return Yu}),n.d(c,"isHTMLElement",function(){return Ku}),n.d(c,"getClass",function(){return bu}),n.d(c,"hasClass",function(){return wu}),n.d(c,"addClass",function(){return xu}),n.d(c,"removeClass",function(){return Cu}),n.d(c,"toggleClass",function(){return ku}),n.d(c,"setPrefixedStyle",function(){return wc}),n.d(c,"getComputedStyle",function(){return xc}),n.d(c,"hasScrollbars",function(){return Cc}),n.d(c,"getVendorPrefixedName",function(){return bc}),n.d(c,"clearSelection",function(){return Ec}),n.d(c,"text",function(){return ll}),n.d(c,"breakText",function(){return fl}),n.d(c,"KAPPA",function(){return hl}),n.d(c,"sample",function(){return pl}),n.d(c,"lineToPathData",function(){return gl}),n.d(c,"polygonToPathData",function(){return vl}),n.d(c,"polylineToPathData",function(){return yl}),n.d(c,"getPointsFromSvgElement",function(){return bl}),n.d(c,"circleToPathData",function(){return wl}),n.d(c,"ellipseToPathData",function(){return xl}),n.d(c,"rectangleToPathData",function(){return Cl}),n.d(c,"rectToPathData",function(){return kl}),n.d(c,"toPath",function(){return El}),n.d(c,"toPathData",function(){return Ol}),n.d(c,"createSlicePathData",function(){return Sl}),n.d(c,"bbox",function(){return Xl}),n.d(c,"getBBox",function(){return $l}),n.d(c,"getBBoxByElementAttr",function(){return Yl}),n.d(c,"getMatrixByElementAttr",function(){return Kl}),n.d(c,"getTransformToElement",function(){return Jl}),n.d(c,"toLocalPoint",function(){return Zl}),n.d(c,"toGeometryShape",function(){return Ql}),n.d(c,"getIntersection",function(){return ef}),n.d(c,"animate",function(){return tf}),n.d(c,"animateTransform",function(){return nf}),n.d(c,"animateAlongPath",function(){return af}),n.d(c,"getBoundingOffsetRect",function(){return sf}),n.d(c,"createSVGPoint",function(){return jl}),n.d(c,"createSVGMatrix",function(){return Pl}),n.d(c,"createSVGTransform",function(){return Nl}),n.d(c,"transformStringToMatrix",function(){return Rl}),n.d(c,"matrixToTransformString",function(){return Dl}),n.d(c,"parseTransformString",function(){return Il}),n.d(c,"decomposeMatrix",function(){return Fl}),n.d(c,"matrixToScale",function(){return Bl}),n.d(c,"matrixToRotation",function(){return zl}),n.d(c,"matrixToTranslation",function(){return Vl}),n.d(c,"transformPoint",function(){return Ul}),n.d(c,"transformLine",function(){return Gl}),n.d(c,"transformPolyline",function(){return Hl}),n.d(c,"transformRectangle",function(){return Wl}),n.d(c,"transform",function(){return uf}),n.d(c,"translate",function(){return cf}),n.d(c,"rotate",function(){return lf}),n.d(c,"scale",function(){return ff}),n.d(c,"translateAndAutoOrient",function(){return hf}),n.d(c,"MouseWheelHandle",function(){return df}),n.d(c,"isVector",function(){return pf}),n.d(c,"createVector",function(){return gf}),n.d(c,"createVectors",function(){return vf});var l={};n.r(l),n.d(l,"block",function(){return xh}),n.d(l,"classic",function(){return Ch}),n.d(l,"diamond",function(){return Ah}),n.d(l,"path",function(){return Mh}),n.d(l,"cross",function(){return jh}),n.d(l,"async",function(){return Nh}),n.d(l,"circle",function(){return Dh}),n.d(l,"circlePlus",function(){return Ih}),n.d(l,"ellipse",function(){return Fh});var f={};n.r(f),n.d(f,"ref",function(){return Ef}),n.d(f,"refX",function(){return Of}),n.d(f,"refY",function(){return Sf}),n.d(f,"refDx",function(){return Af}),n.d(f,"refDy",function(){return Tf}),n.d(f,"refWidth",function(){return Mf}),n.d(f,"refHeight",function(){return _f}),n.d(f,"refRx",function(){return jf}),n.d(f,"refRy",function(){return Pf}),n.d(f,"refRInscribed",function(){return Nf}),n.d(f,"refRCircumscribed",function(){return Rf}),n.d(f,"refCx",function(){return Df}),n.d(f,"refCy",function(){return If}),n.d(f,"refDResetOffset",function(){return Lf}),n.d(f,"refDKeepOffset",function(){return Ff}),n.d(f,"refPointsResetOffset",function(){return Bf}),n.d(f,"refPointsKeepOffset",function(){return zf}),n.d(f,"refR",function(){return Vf}),n.d(f,"refD",function(){return Uf}),n.d(f,"refPoints",function(){return Gf}),n.d(f,"refX2",function(){return Hf}),n.d(f,"refY2",function(){return Wf}),n.d(f,"refWidth2",function(){return qf}),n.d(f,"refHeight2",function(){return Xf}),n.d(f,"fill",function(){return Qf}),n.d(f,"stroke",function(){return eh}),n.d(f,"text",function(){return th}),n.d(f,"textWrap",function(){return nh}),n.d(f,"lineHeight",function(){return ih}),n.d(f,"textVerticalAnchor",function(){return oh}),n.d(f,"textPath",function(){return ah}),n.d(f,"annotations",function(){return sh}),n.d(f,"eol",function(){return uh}),n.d(f,"displayEmpty",function(){return ch}),n.d(f,"title",function(){return lh}),n.d(f,"xAlign",function(){return fh}),n.d(f,"yAlign",function(){return hh}),n.d(f,"resetOffset",function(){return dh}),n.d(f,"style",function(){return gh}),n.d(f,"html",function(){return vh}),n.d(f,"filter",function(){return yh}),n.d(f,"port",function(){return mh}),n.d(f,"sourceMarker",function(){return Vh}),n.d(f,"targetMarker",function(){return Uh}),n.d(f,"vertexMarker",function(){return Gh}),n.d(f,"connection",function(){return $h}),n.d(f,"atConnectionLengthKeepGradient",function(){return Yh}),n.d(f,"atConnectionLengthIgnoreGradient",function(){return Kh}),n.d(f,"atConnectionRatioKeepGradient",function(){return Jh}),n.d(f,"atConnectionRatioIgnoreGradient",function(){return Zh}),n.d(f,"atConnectionLength",function(){return Qh}),n.d(f,"atConnectionRatio",function(){return ed});var h={};n.r(h),n.d(h,"dot",function(){return od}),n.d(h,"fixedDot",function(){return ad}),n.d(h,"mesh",function(){return sd}),n.d(h,"doubleMesh",function(){return ud});var d={};n.r(d),n.d(d,"outline",function(){return hd}),n.d(d,"highlight",function(){return dd}),n.d(d,"blur",function(){return pd}),n.d(d,"dropShadow",function(){return gd}),n.d(d,"grayScale",function(){return vd}),n.d(d,"sepia",function(){return yd}),n.d(d,"saturate",function(){return md}),n.d(d,"hueRotate",function(){return bd}),n.d(d,"invert",function(){return wd}),n.d(d,"brightness",function(){return xd}),n.d(d,"contrast",function(){return Cd});var p={};n.r(p),n.d(p,"flipX",function(){return Od}),n.d(p,"flipY",function(){return Sd}),n.d(p,"flipXY",function(){return Ad}),n.d(p,"watermark",function(){return Td});var g={};n.r(g),n.d(g,"className",function(){return Id}),n.d(g,"opacity",function(){return Fd}),n.d(g,"stroke",function(){return zd});var v={};n.r(v),n.d(v,"absolute",function(){return Gd}),n.d(v,"ellipse",function(){return Hd}),n.d(v,"ellipseSpread",function(){return Wd}),n.d(v,"line",function(){return Kd}),n.d(v,"left",function(){return Jd}),n.d(v,"right",function(){return Zd}),n.d(v,"top",function(){return Qd}),n.d(v,"bottom",function(){return ep});var y={};n.r(y),n.d(y,"manual",function(){return ip}),n.d(y,"left",function(){return op}),n.d(y,"right",function(){return ap}),n.d(y,"top",function(){return sp}),n.d(y,"bottom",function(){return up}),n.d(y,"outside",function(){return cp}),n.d(y,"outsideOriented",function(){return lp}),n.d(y,"inside",function(){return fp}),n.d(y,"insideOriented",function(){return hp}),n.d(y,"radial",function(){return mp}),n.d(y,"radialOriented",function(){return bp});var m={};n.r(m),n.d(m,"noop",function(){return Bp}),n.d(m,"pinRelative",function(){return Hp}),n.d(m,"pinAbsolute",function(){return Wp});var b={};n.r(b),n.d(b,"center",function(){return Eg}),n.d(b,"top",function(){return Og}),n.d(b,"bottom",function(){return Sg}),n.d(b,"left",function(){return Ag}),n.d(b,"right",function(){return Tg}),n.d(b,"topLeft",function(){return Mg}),n.d(b,"topRight",function(){return _g}),n.d(b,"bottomLeft",function(){return jg}),n.d(b,"bottomRight",function(){return Pg}),n.d(b,"orth",function(){return Fg}),n.d(b,"nodeCenter",function(){return Bg}),n.d(b,"midSide",function(){return zg});var w={};n.r(w),n.d(w,"closest",function(){return qg}),n.d(w,"ratio",function(){return Gg}),n.d(w,"length",function(){return Hg}),n.d(w,"orth",function(){return Xg});var x={};n.r(x),n.d(x,"bbox",function(){return Kg}),n.d(x,"rect",function(){return Jg}),n.d(x,"boundary",function(){return Zg}),n.d(x,"anchor",function(){return tv});var C={};n.r(C),n.d(C,"normal",function(){return nv}),n.d(C,"oneSide",function(){return rv}),n.d(C,"orth",function(){return cv}),n.d(C,"metro",function(){return jv}),n.d(C,"manhattan",function(){return Mv}),n.d(C,"er",function(){return Pv}),n.d(C,"loop",function(){return Iv});var k={};n.r(k),n.d(k,"normal",function(){return Bv}),n.d(k,"loop",function(){return zv}),n.d(k,"rounded",function(){return Vv}),n.d(k,"smooth",function(){return Uv}),n.d(k,"jumpover",function(){return Jv});var E={};n.r(E),n.d(E,"create",function(){return Zv}),n.d(E,"Attr",function(){return Wh}),n.d(E,"Grid",function(){return cd}),n.d(E,"Filter",function(){return rd}),n.d(E,"Background",function(){return kd}),n.d(E,"Highlighter",function(){return Pd}),n.d(E,"PortLayout",function(){return Xd}),n.d(E,"PortLabelLayout",function(){return vp}),n.d(E,"NodeTool",function(){return bg}),n.d(E,"EdgeTool",function(){return xg}),n.d(E,"Marker",function(){return Eh}),n.d(E,"NodeAnchor",function(){return Ig}),n.d(E,"EdgeAnchor",function(){return Vg}),n.d(E,"ConnectionPoint",function(){return Qg}),n.d(E,"Router",function(){return Rv}),n.d(E,"Connector",function(){return Yv}),n.d(E,"ConnectionStrategy",function(){return Up}),n.d(E,"Registry",function(){return Cf});var O={};n.r(O),n.d(O,"Empty",function(){return Ny}),n.d(O,"Rect",function(){return Iy}),n.d(O,"HeaderedRect",function(){return Ly}),n.d(O,"Circle",function(){return Fy}),n.d(O,"Cylinder",function(){return By}),n.d(O,"Ellipse",function(){return zy}),n.d(O,"Polygon",function(){return Hy}),n.d(O,"Polyline",function(){return Wy}),n.d(O,"Path",function(){return Xy}),n.d(O,"TextBlock",function(){return Yy}),n.d(O,"Image",function(){return Ky}),n.d(O,"BorderedImage",function(){return Jy}),n.d(O,"EmbeddedImage",function(){return Zy}),n.d(O,"InscribedImage",function(){return Qy}),n.d(O,"Edge",function(){return em}),n.d(O,"ShadowEdge",function(){return tm}),n.d(O,"DoubleEdge",function(){return nm}),n.d(O,"HTML",function(){return rm});var S={};n.r(S),n.d(S,"AutoSave",function(){return om}),n.d(S,"Clipboard",function(){return Ub}),n.d(S,"Halo",function(){return qb}),n.d(S,"MiniMap",function(){return Am}),n.d(S,"Scroller",function(){return Bm}),n.d(S,"Selection",function(){return Gm}),n.d(S,"Snapline",function(){return _m}),n.d(S,"Transform",function(){return Wm}),n.d(S,"Knob",function(){return Cm}),n.d(S,"Dnd",function(){return Kb}),n.d(S,"Stencil",function(){return Qb});var A,T=n(19),M=n(39),_=n.n(M),j=(n(991),navigator.userAgent);if(function(e){e.IS_MAC=navigator.appVersion.indexOf("Mac")>0,e.IS_IOS=!!j.match(/(iPad|iPhone|iPod)/g),e.IS_WINDOWS=navigator.appVersion.indexOf("Win")>0,e.IS_IE=j.indexOf("MSIE")>=0,e.IS_IE11=!!j.match(/Trident\/7\./),e.IS_EDGE=!!j.match(/Edge\//),e.IS_NETSCAPE=j.indexOf("Mozilla/")>=0&&j.indexOf("MSIE")<0&&j.indexOf("Edge/")<0,e.IS_CHROME_APP=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,e.IS_CHROME=j.indexOf("Chrome/")>=0&&j.indexOf("Edge/")<0,e.IS_OPERA=j.indexOf("Opera/")>=0||j.indexOf("OPR/")>=0,e.IS_FIREFOX=j.indexOf("Firefox/")>=0,e.IS_SAFARI=j.indexOf("AppleWebKit/")>=0&&j.indexOf("Chrome/")<0&&j.indexOf("Edge/")<0,e.SUPPORT_TOUCH="ontouchstart"in document.documentElement,e.SUPPORT_POINTER=null!=window.PointerEvent&&!e.IS_MAC,e.SUPPORT_PASSIVE=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.SUPPORT_PASSIVE=!0}}),n=document.createElement("div");n.addEventListener&&n.addEventListener("click",function(){},t)}catch(r){}e.NO_FOREIGNOBJECT=!document.createElementNS||"[object SVGForeignObjectElement]"!=="".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))||j.indexOf("Opera/")>=0,e.SUPPORT_FOREIGNOBJECT=!e.NO_FOREIGNOBJECT}(A||(A={})),function(e){function t(){var e=window.module;return null!=e&&null!=e.hot&&null!=e.hot.status?e.hot.status():"unkonwn"}e.getHMRStatus=t,e.isApplyingHMR=function(){return"apply"===t()};var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};e.isEventSupported=function(e){var t=document.createElement(n[e]||"div"),r="on".concat(e),i=r in t;return i||(t.setAttribute(r,"return;"),i="function"===typeof t[r]),i}}(A||(A={})),A.SUPPORT_PASSIVE){_.a.event.special.touchstart={setup:function(e,t,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};var P=_.a.event.special.mousewheel;if(P){var N=P.setup;P.setup=function(){var e=this,t=this.addEventListener;if(!t)return!1;this.addEventListener=function(n,r){t.call(e,n,r,{passive:!0})},N.call(this),this.addEventListener=t}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var e=document.createDocumentFragment(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))}),this.appendChild(e)}})});var R=function(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0},D=n(51);var I=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},L=n(26),F=n(50),B=1/0,z=D.a?D.a.prototype:void 0,V=z?z.toString:void 0;var U=function e(t){if("string"==typeof t)return t;if(Object(L.a)(t))return I(t,e)+"";if(Object(F.a)(t))return V?V.call(t):"";var n=t+"";return"0"==n&&1/t==-B?"-0":n};var G=function(e){return null==e?"":U(e)};var H=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var W=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:H(e,t,n)},q=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var X=function(e){return q.test(e)};var $=function(e){return e.split("")},Y="[\\ud800-\\udfff]",K="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",J="\\ud83c[\\udffb-\\udfff]",Z="[^\\ud800-\\udfff]",Q="(?:\\ud83c[\\udde6-\\uddff]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",te="(?:"+K+"|"+J+")"+"?",ne="[\\ufe0e\\ufe0f]?"+te+("(?:\\u200d(?:"+[Z,Q,ee].join("|")+")[\\ufe0e\\ufe0f]?"+te+")*"),re="(?:"+[Z+K+"?",K,Q,ee,Y].join("|")+")",ie=RegExp(J+"(?="+J+")|"+re+ne,"g");var oe=function(e){return e.match(ie)||[]};var ae=function(e){return X(e)?oe(e):$(e)};var se=function(e){return function(t){t=G(t);var n=X(t)?ae(t):void 0,r=n?n[0]:t.charAt(0),i=n?W(n,1).join(""):t.slice(1);return r[e]()+i}},ue=se("toUpperCase");var ce=function(e){return ue(G(e).toLowerCase())};var le=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};var fe=function(e){return function(t){return null==e?void 0:e[t]}},he=fe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),de=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pe=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var ge=function(e){return(e=G(e))&&e.replace(de,he).replace(pe,"")},ve=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var ye=function(e){return e.match(ve)||[]},me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var be=function(e){return me.test(e)},we="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xe="["+we+"]",Ce="\\d+",ke="[\\u2700-\\u27bf]",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",Oe="[^\\ud800-\\udfff"+we+Ce+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",Ae="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Me="(?:"+Ee+"|"+Oe+")",_e="(?:"+Te+"|"+Oe+")",je="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Pe="[\\ufe0e\\ufe0f]?"+je+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Se,Ae].join("|")+")[\\ufe0e\\ufe0f]?"+je+")*"),Ne="(?:"+[ke,Se,Ae].join("|")+")"+Pe,Re=RegExp([Te+"?"+Ee+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[xe,Te,"$"].join("|")+")",_e+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[xe,Te+Me,"$"].join("|")+")",Te+"?"+Me+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Te+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ce,Ne].join("|"),"g");var De=function(e){return e.match(Re)||[]};var Ie=function(e,t,n){return e=G(e),void 0===(t=n?void 0:t)?be(e)?De(e):ye(e):e.match(t)||[]},Le=RegExp("['\u2019]","g");var Fe=function(e){return function(t){return le(Ie(ge(t).replace(Le,"")),e,"")}},Be=Fe(function(e,t,n){return t=t.toLowerCase(),e+(n?ce(t):t)});var ze=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},Ve=n(73);var Ue=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Object(Ve.a)(n))===n?n:0),void 0!==t&&(t=(t=Object(Ve.a)(t))===t?t:0),ze(Object(Ve.a)(e),t,n)},Ge=n(94);var He=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},We=n(143),qe=n(63),Xe=n(223),$e=n(112),Ye=n(219),Ke=Object(Ye.a)(Object.keys,Object),Je=Object.prototype.hasOwnProperty;var Ze=function(e){if(!Object($e.a)(e))return Ke(e);var t=[];for(var n in Object(e))Je.call(e,n)&&"constructor"!=n&&t.push(n);return t},Qe=n(56);var et=function(e){return Object(Qe.a)(e)?Object(Xe.a)(e):Ze(e)};var tt=function(e,t){return e&&Object(qe.a)(t,et(t),e)},nt=n(46);var rt=function(e,t){return e&&Object(qe.a)(t,Object(nt.a)(t),e)},it=n(218),ot=n(217);var at=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var st=function(){return[]},ut=Object.prototype.propertyIsEnumerable,ct=Object.getOwnPropertySymbols,lt=ct?function(e){return null==e?[]:(e=Object(e),at(ct(e),function(t){return ut.call(e,t)}))}:st;var ft=function(e,t){return Object(qe.a)(e,lt(e),t)};var ht=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},dt=n(142),pt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ht(t,lt(e)),e=Object(dt.a)(e);return t}:st;var gt=function(e,t){return Object(qe.a)(e,pt(e),t)};var vt=function(e,t,n){var r=t(e);return Object(L.a)(e)?r:ht(r,n(e))};var yt=function(e){return vt(e,et,lt)};var mt=function(e){return vt(e,nt.a,pt)},bt=n(64),wt=n(36),xt=Object(bt.a)(wt.a,"DataView"),Ct=n(117),kt=Object(bt.a)(wt.a,"Promise"),Et=Object(bt.a)(wt.a,"Set"),Ot=Object(bt.a)(wt.a,"WeakMap"),St=n(44),At=n(104),Tt=Object(At.a)(xt),Mt=Object(At.a)(Ct.a),_t=Object(At.a)(kt),jt=Object(At.a)(Et),Pt=Object(At.a)(Ot),Nt=St.a;(xt&&"[object DataView]"!=Nt(new xt(new ArrayBuffer(1)))||Ct.a&&"[object Map]"!=Nt(new Ct.a)||kt&&"[object Promise]"!=Nt(kt.resolve())||Et&&"[object Set]"!=Nt(new Et)||Ot&&"[object WeakMap]"!=Nt(new Ot))&&(Nt=function(e){var t=Object(St.a)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(At.a)(n):"";if(r)switch(r){case Tt:return"[object DataView]";case Mt:return"[object Map]";case _t:return"[object Promise]";case jt:return"[object Set]";case Pt:return"[object WeakMap]"}return t});var Rt=Nt,Dt=Object.prototype.hasOwnProperty;var It=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Dt.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Lt=n(144);var Ft=function(e,t){var n=t?Object(Lt.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Bt=/\w*$/;var zt=function(e){var t=new e.constructor(e.source,Bt.exec(e));return t.lastIndex=e.lastIndex,t},Vt=D.a?D.a.prototype:void 0,Ut=Vt?Vt.valueOf:void 0;var Gt=function(e){return Ut?Object(Ut.call(e)):{}},Ht=n(220),Wt="[object Boolean]",qt="[object Date]",Xt="[object Map]",$t="[object Number]",Yt="[object RegExp]",Kt="[object Set]",Jt="[object String]",Zt="[object Symbol]",Qt="[object ArrayBuffer]",en="[object DataView]",tn="[object Float32Array]",nn="[object Float64Array]",rn="[object Int8Array]",on="[object Int16Array]",an="[object Int32Array]",sn="[object Uint8Array]",un="[object Uint8ClampedArray]",cn="[object Uint16Array]",ln="[object Uint32Array]";var fn=function(e,t,n){var r=e.constructor;switch(t){case Qt:return Object(Lt.a)(e);case Wt:case qt:return new r(+e);case en:return Ft(e,n);case tn:case nn:case rn:case on:case an:case sn:case un:case cn:case ln:return Object(Ht.a)(e,n);case Xt:return new r;case $t:case Jt:return new r(e);case Yt:return zt(e);case Kt:return new r;case Zt:return Gt(e)}},hn=n(225),dn=n(70),pn=n(33),gn="[object Map]";var vn=function(e){return Object(pn.a)(e)&&Rt(e)==gn},yn=n(79),mn=n(80),bn=mn.a&&mn.a.isMap,wn=bn?Object(yn.a)(bn):vn,xn=n(27),Cn="[object Set]";var kn=function(e){return Object(pn.a)(e)&&Rt(e)==Cn},En=mn.a&&mn.a.isSet,On=En?Object(yn.a)(En):kn,Sn=1,An=2,Tn=4,Mn="[object Arguments]",_n="[object Function]",jn="[object GeneratorFunction]",Pn="[object Object]",Nn={};Nn[Mn]=Nn["[object Array]"]=Nn["[object ArrayBuffer]"]=Nn["[object DataView]"]=Nn["[object Boolean]"]=Nn["[object Date]"]=Nn["[object Float32Array]"]=Nn["[object Float64Array]"]=Nn["[object Int8Array]"]=Nn["[object Int16Array]"]=Nn["[object Int32Array]"]=Nn["[object Map]"]=Nn["[object Number]"]=Nn[Pn]=Nn["[object RegExp]"]=Nn["[object Set]"]=Nn["[object String]"]=Nn["[object Symbol]"]=Nn["[object Uint8Array]"]=Nn["[object Uint8ClampedArray]"]=Nn["[object Uint16Array]"]=Nn["[object Uint32Array]"]=!0,Nn["[object Error]"]=Nn[_n]=Nn["[object WeakMap]"]=!1;var Rn=function e(t,n,r,i,o,a){var s,u=n&Sn,c=n&An,l=n&Tn;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!Object(xn.a)(t))return t;var f=Object(L.a)(t);if(f){if(s=It(t),!u)return Object(ot.a)(t,s)}else{var h=Rt(t),d=h==_n||h==jn;if(Object(dn.a)(t))return Object(it.a)(t,u);if(h==Pn||h==Mn||d&&!o){if(s=c||d?{}:Object(hn.a)(t),!u)return c?gt(t,rt(s,t)):ft(t,tt(s,t))}else{if(!Nn[h])return o?t:{};s=fn(t,h,u)}}a||(a=new Ge.a);var p=a.get(t);if(p)return p;a.set(t,s),On(t)?t.forEach(function(i){s.add(e(i,n,r,i,t,a))}):wn(t)&&t.forEach(function(i,o){s.set(o,e(i,n,r,o,t,a))});var g=l?c?mt:yt:c?nt.a:et,v=f?void 0:g(t);return He(v||t,function(i,o){v&&(i=t[o=i]),Object(We.a)(s,o,e(i,n,r,o,t,a))}),s},Dn=4;var In=function(e){return Rn(e,Dn)},Ln=1,Fn=4;var Bn=function(e){return Rn(e,Ln|Fn)},zn=n(403),Vn=n(57),Un=n(55),Gn=n(72),Hn=Object.prototype,Wn=Hn.hasOwnProperty,qn=Object(Vn.a)(function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Object(Gn.a)(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Object(nt.a)(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(void 0===l||Object(Un.a)(l,Hn[c])&&!Wn.call(e,c))&&(e[c]=o[c])}return e}),Xn=n(146),$n=n(147);var Yn=function e(t,n,r,i,o,a){return Object(xn.a)(t)&&Object(xn.a)(n)&&(a.set(n,t),Object($n.a)(t,n,void 0,e,a),a.delete(n)),t},Kn=n(115),Jn=Object(Kn.a)(function(e,t,n,r){Object($n.a)(e,t,n,r)}),Zn=Object(Vn.a)(function(e){return e.push(void 0,Yn),Object(Xn.a)(Jn,void 0,e)}),Qn="Expected a function";var er=function(e,t,n){if("function"!=typeof e)throw new TypeError(Qn);return setTimeout(function(){e.apply(void 0,n)},t)},tr=Object(Vn.a)(function(e,t){return er(e,1,t)}),nr=n(127),rr="__lodash_hash_undefined__";var ir=function(e){return this.__data__.set(e,rr),this};var or=function(e){return this.__data__.has(e)};function ar(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nr.a;++t<n;)this.add(e[t])}ar.prototype.add=ar.prototype.push=ir,ar.prototype.has=or;var sr=ar;var ur=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var cr=function(e){return e!==e};var lr=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var fr=function(e,t,n){return t===t?lr(e,t,n):ur(e,cr,n)};var hr=function(e,t){return!(null==e||!e.length)&&fr(e,t,0)>-1};var dr=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var pr=function(e,t){return e.has(t)},gr=200;var vr=function(e,t,n,r){var i=-1,o=hr,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=I(t,Object(yn.a)(n))),r?(o=dr,a=!1):t.length>=gr&&(o=pr,a=!1,t=new sr(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u},yr=n(71),mr=D.a?D.a.isConcatSpreadable:void 0;var br=function(e){return Object(L.a)(e)||Object(yr.a)(e)||!!(mr&&e&&e[mr])};var wr=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=br),o||(o=[]);++a<s;){var u=t[a];n>0&&r(u)?n>1?e(u,n-1,r,i,o):ht(o,u):i||(o[o.length]=u)}return o},xr=n(102),Cr=Object(Vn.a)(function(e,t){return Object(xr.a)(e)?vr(e,wr(t,1,xr.a,!0)):[]}),kr=1/0,Er=1.7976931348623157e308;var Or=function(e){return e?(e=Object(Ve.a)(e))===kr||e===-kr?(e<0?-1:1)*Er:e===e?e:0:0===e?e:0};var Sr=function(e){var t=Or(e),n=t%1;return t===t?n?t-n:t:0};var Ar=function(e,t,n){e=G(e),t=U(t);var r=e.length,i=n=void 0===n?r:ze(Sr(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Tr=fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Mr=/[&<>"']/g,_r=RegExp(Mr.source);var jr=function(e){return(e=G(e))&&_r.test(e)?e.replace(Mr,Tr):e},Pr=Object(Kn.a)(function(e,t){Object(qe.a)(t,Object(nt.a)(t),e)}),Nr=n(148),Rr=n(62);var Dr=function(e){return"function"==typeof e?e:Rr.a};var Ir=function(e,t){return null==e?e:Object(Nr.a)(e,Dr(t),nt.a)},Lr=n(113);var Fr=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r};var Br=function(e,t){return function(n,r){if(null==n)return n;if(!Object(Qe.a)(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(function(e,t){return e&&Object(Nr.a)(e,t,et)});var zr=function(e,t,n,r){return Br(e,function(e,i,o){t(r,e,n(e),o)}),r};var Vr=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Ur=1,Gr=2;var Hr=function(e,t,n,r,i,o){var a=n&Ur,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=n&Gr?new sr:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],g=t[f];if(r)var v=a?r(g,p,f,t,e,o):r(p,g,f,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(d){if(!Vr(t,function(e,t){if(!pr(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)})){h=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h},Wr=n(151);var qr=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n};var Xr=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},$r=1,Yr=2,Kr="[object Boolean]",Jr="[object Date]",Zr="[object Error]",Qr="[object Map]",ei="[object Number]",ti="[object RegExp]",ni="[object Set]",ri="[object String]",ii="[object Symbol]",oi="[object ArrayBuffer]",ai="[object DataView]",si=D.a?D.a.prototype:void 0,ui=si?si.valueOf:void 0;var ci=function(e,t,n,r,i,o,a){switch(n){case ai:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oi:return!(e.byteLength!=t.byteLength||!o(new Wr.a(e),new Wr.a(t)));case Kr:case Jr:case ei:return Object(Un.a)(+e,+t);case Zr:return e.name==t.name&&e.message==t.message;case ti:case ri:return e==t+"";case Qr:var s=qr;case ni:var u=r&$r;if(s||(s=Xr),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=Yr,a.set(e,t);var l=Hr(s(e),s(t),r,i,o,a);return a.delete(e),l;case ii:if(ui)return ui.call(e)==ui.call(t)}return!1},li=1,fi=Object.prototype.hasOwnProperty;var hi=function(e,t,n,r,i,o){var a=n&li,s=yt(e),u=s.length;if(u!=yt(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:fi.call(t,l)))return!1}var f=o.get(e),h=o.get(t);if(f&&h)return f==t&&h==e;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var g=e[l=s[c]],v=t[l];if(r)var y=a?r(v,g,l,t,e,o):r(g,v,l,e,t,o);if(!(void 0===y?g===v||i(g,v,n,r,o):y)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=e.constructor,b=t.constructor;m!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(d=!1)}return o.delete(e),o.delete(t),d},di=n(91),pi=1,gi="[object Arguments]",vi="[object Array]",yi="[object Object]",mi=Object.prototype.hasOwnProperty;var bi=function(e,t,n,r,i,o){var a=Object(L.a)(e),s=Object(L.a)(t),u=a?vi:Rt(e),c=s?vi:Rt(t),l=(u=u==gi?yi:u)==yi,f=(c=c==gi?yi:c)==yi,h=u==c;if(h&&Object(dn.a)(e)){if(!Object(dn.a)(t))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new Ge.a),a||Object(di.a)(e)?Hr(e,t,n,r,i,o):ci(e,t,u,n,r,i,o);if(!(n&pi)){var d=l&&mi.call(e,"__wrapped__"),p=f&&mi.call(t,"__wrapped__");if(d||p){var g=d?e.value():e,v=p?t.value():t;return o||(o=new Ge.a),i(g,v,n,r,o)}}return!!h&&(o||(o=new Ge.a),hi(e,t,n,r,i,o))};var wi=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Object(pn.a)(t)&&!Object(pn.a)(n)?t!==t&&n!==n:bi(t,n,r,i,e,o))},xi=1,Ci=2;var ki=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Ge.a;if(r)var h=r(c,l,u,e,t,f);if(!(void 0===h?wi(l,c,xi|Ci,r,f):h))return!1}}return!0};var Ei=function(e){return e===e&&!Object(xn.a)(e)};var Oi=function(e){for(var t=et(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ei(i)]}return t};var Si=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}};var Ai=function(e){var t=Oi(e);return 1==t.length&&t[0][2]?Si(t[0][0],t[0][1]):function(n){return n===e||ki(n,e,t)}},Ti=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mi=/^\w*$/;var _i=function(e,t){if(Object(L.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(F.a)(e))||Mi.test(e)||!Ti.test(e)||null!=t&&e in Object(t)},ji="Expected a function";function Pi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ji);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Pi.Cache||nr.a),n}Pi.Cache=nr.a;var Ni=Pi,Ri=500;var Di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/\\(\\)?/g,Li=function(e){var t=Ni(e,function(e){return n.size===Ri&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Di,function(e,n,r,i){t.push(r?i.replace(Ii,"$1"):n||e)}),t});var Fi=function(e,t){return Object(L.a)(e)?e:_i(e,t)?[e]:Li(G(e))},Bi=1/0;var zi=function(e){if("string"==typeof e||Object(F.a)(e))return e;var t=e+"";return"0"==t&&1/e==-Bi?"-0":t};var Vi=function(e,t){for(var n=0,r=(t=Fi(t,e)).length;null!=e&&n<r;)e=e[zi(t[n++])];return n&&n==r?e:void 0};var Ui=function(e,t,n){var r=null==e?void 0:Vi(e,t);return void 0===r?n:r};var Gi=function(e,t){return null!=e&&t in Object(e)},Hi=n(114),Wi=n(110);var qi=function(e,t,n){for(var r=-1,i=(t=Fi(t,e)).length,o=!1;++r<i;){var a=zi(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Object(Wi.a)(i)&&Object(Hi.a)(a,i)&&(Object(L.a)(e)||Object(yr.a)(e))};var Xi=function(e,t){return null!=e&&qi(e,t,Gi)},$i=1,Yi=2;var Ki=function(e,t){return _i(e)&&Ei(t)?Si(zi(e),t):function(n){var r=Ui(n,e);return void 0===r&&r===t?Xi(n,e):wi(t,r,$i|Yi)}};var Ji=function(e){return function(t){return null==t?void 0:t[e]}};var Zi=function(e){return function(t){return Vi(t,e)}};var Qi=function(e){return _i(e)?Ji(zi(e)):Zi(e)};var eo=function(e){return"function"==typeof e?e:null==e?Rr.a:"object"==typeof e?Object(L.a)(e)?Ki(e[0],e[1]):Ai(e):Qi(e)};var to=function(e,t){return function(n,r){var i=Object(L.a)(n)?Fr:zr,o=t?t():{};return i(n,e,eo(r,2),o)}},no=Object.prototype.hasOwnProperty,ro=to(function(e,t,n){no.call(e,n)?e[n].push(t):Object(Lr.a)(e,n,[t])}),io=Object.prototype.hasOwnProperty;var oo=function(e,t){return null!=e&&io.call(e,t)};var ao=function(e,t){return null!=e&&qi(e,t,oo)},so=Math.max,uo=Math.min;var co=function(e,t,n){return e>=uo(t,n)&&e<so(t,n)};var lo=function(e,t,n){return t=Or(t),void 0===n?(n=t,t=0):n=Or(n),e=Object(Ve.a)(e),co(e,t,n)},fo="[object Map]",ho="[object Set]",po=Object.prototype.hasOwnProperty;var go=function(e){if(null==e)return!0;if(Object(Qe.a)(e)&&(Object(L.a)(e)||"string"==typeof e||"function"==typeof e.splice||Object(dn.a)(e)||Object(di.a)(e)||Object(yr.a)(e)))return!e.length;var t=Rt(e);if(t==fo||t==ho)return!e.size;if(Object($e.a)(e))return!Ze(e).length;for(var n in e)if(po.call(e,n))return!1;return!0};var vo=function(e,t){return wi(e,t)},yo=wt.a.isFinite;var mo=function(e){return"number"==typeof e&&yo(e)},bo=n(109);var wo=function(e){return"number"==typeof e&&e==Sr(e)},xo="[object Number]";var Co=function(e){return"number"==typeof e||Object(pn.a)(e)&&Object(St.a)(e)==xo};var ko=function(e){return Co(e)&&e!=+e},Eo=n(141),Oo=9007199254740991;var So=function(e){return wo(e)&&e>=-Oo&&e<=Oo},Ao="[object String]";var To=function(e){return"string"==typeof e||!Object(L.a)(e)&&Object(pn.a)(e)&&Object(St.a)(e)==Ao},Mo=se("toLowerCase"),_o=n(404);var jo=function(){},Po="Expected a function";var No=function(e,t){var n;if("function"!=typeof t)throw new TypeError(Po);return e=Sr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}};var Ro=function(e){return No(2,e)},Do=9007199254740991,Io=Math.floor;var Lo=function(e,t){var n="";if(!e||t<1||t>Do)return n;do{t%2&&(n+=e),(t=Io(t/2))&&(e+=e)}while(t);return n},Fo=Ji("length"),Bo="[\\ud800-\\udfff]",zo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vo="[^\\ud800-\\udfff]",Uo="(?:\\ud83c[\\udde6-\\uddff]){2}",Go="[\\ud800-\\udbff][\\udc00-\\udfff]",Ho="(?:"+zo+"|\\ud83c[\\udffb-\\udfff])"+"?",Wo="[\\ufe0e\\ufe0f]?"+Ho+("(?:\\u200d(?:"+[Vo,Uo,Go].join("|")+")[\\ufe0e\\ufe0f]?"+Ho+")*"),qo="(?:"+[Vo+zo+"?",zo,Uo,Go,Bo].join("|")+")",Xo=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+qo+Wo,"g");var $o=function(e){for(var t=Xo.lastIndex=0;Xo.test(e);)++t;return t};var Yo=function(e){return X(e)?$o(e):Fo(e)},Ko=Math.ceil;var Jo=function(e,t){var n=(t=void 0===t?" ":U(t)).length;if(n<2)return n?Lo(t,e):t;var r=Lo(t,Ko(e/Yo(t)));return X(t)?W(ae(r),0,e).join(""):r.slice(0,e)},Zo=Math.ceil,Qo=Math.floor;var ea=function(e,t,n){e=G(e);var r=(t=Sr(t))?Yo(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Jo(Qo(i),n)+e+Jo(Zo(i),n)};var ta=function(e,t,n){e=G(e);var r=(t=Sr(t))?Yo(e):0;return t&&r<t?e+Jo(t-r,n):e};var na=function(e,t,n){e=G(e);var r=(t=Sr(t))?Yo(e):0;return t&&r<t?Jo(t-r,n)+e:e},ra=/^\s+/,ia=wt.a.parseInt;var oa=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ia(G(e).replace(ra,""),t||0)};var aa=function(e,t,n,r){if(!Object(xn.a)(e))return e;for(var i=-1,o=(t=Fi(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=zi(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Object(xn.a)(l)?l:Object(Hi.a)(t[i+1])?[]:{})}Object(We.a)(s,u,c),s=s[u]}return e};var sa=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Vi(e,a);n(s,a)&&aa(o,Fi(a,e),s)}return o};var ua=function(e,t){return sa(e,t,function(t,n){return Xi(e,n)})};var ca=function(e){return null!=e&&e.length?wr(e,1):[]},la=n(221),fa=n(222);var ha=function(e){return Object(fa.a)(Object(la.a)(e,void 0,ca),e+"")}(function(e,t){return null==e?{}:ua(e,t)});var da=function(e,t,n){return t=(n?Object(Gn.a)(e,t,n):void 0===t)?1:Sr(t),Lo(G(e),t)};var pa=function(e,t){var n=-1,r=Object(Qe.a)(e)?Array(e.length):[];return Br(e,function(e,i,o){r[++n]=t(e,i,o)}),r};var ga=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e};var va=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=Object(F.a)(e),a=void 0!==t,s=null===t,u=t===t,c=Object(F.a)(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0};var ya=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=va(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index};var ma=function(e,t,n){t=t.length?I(t,function(e){return Object(L.a)(e)?function(t){return Vi(t,1===e.length?e[0]:e)}:e}):[Rr.a];var r=-1;t=I(t,Object(yn.a)(eo));var i=pa(e,function(e,n,i){return{criteria:I(t,function(t){return t(e)}),index:++r,value:e}});return ga(i,function(e,t){return ya(e,t,n)})},ba=Object(Vn.a)(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Object(Gn.a)(e,t[0],t[1])?t=[]:n>2&&Object(Gn.a)(t[0],t[1],t[2])&&(t=[t[0]]),ma(e,wr(t,1),[])}),wa=4294967294,xa=Math.floor,Ca=Math.min;var ka=function(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,s=null===t,u=Object(F.a)(t),c=void 0===t;i<o;){var l=xa((i+o)/2),f=n(e[l]),h=void 0!==f,d=null===f,p=f===f,g=Object(F.a)(f);if(a)var v=r||p;else v=c?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!g):!d&&!g&&(r?f<=t:f<t);v?i=l+1:o=l}return Ca(o,wa)},Ea=2147483647;var Oa=function(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Ea){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Object(F.a)(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ka(e,t,Rr.a,n)};var Sa=function(e,t){return Oa(e,t)};var Aa=function(e,t,n){return ka(e,t,eo(n,2))},Ta="[object RegExp]";var Ma=function(e){return Object(pn.a)(e)&&Object(St.a)(e)==Ta},_a=mn.a&&mn.a.isRegExp,ja=_a?Object(yn.a)(_a):Ma,Pa=4294967295;var Na=function(e,t,n){return n&&"number"!=typeof n&&Object(Gn.a)(e,t,n)&&(t=n=void 0),(n=void 0===n?Pa:n>>>0)?(e=G(e))&&("string"==typeof t||null!=t&&!ja(t))&&!(t=U(t))&&X(e)?W(ae(e),0,n):e.split(t,n):[]};var Ra=function(e,t,n){return e=G(e),n=null==n?0:ze(Sr(n),0,e.length),t=U(t),e.slice(n,n+t.length)==t},Da=Object(Kn.a)(function(e,t,n,r){Object(qe.a)(t,Object(nt.a)(t),e,r)}),Ia="[object DOMException]",La="[object Error]";var Fa=function(e){if(!Object(pn.a)(e))return!1;var t=Object(St.a)(e);return t==La||t==Ia||"string"==typeof e.message&&"string"==typeof e.name&&!Object(Eo.a)(e)},Ba=Object(Vn.a)(function(e,t){try{return Object(Xn.a)(e,void 0,t)}catch(n){return Fa(n)?n:new Error(n)}});var za=function(e,t){return I(t,function(t){return e[t]})},Va=Object.prototype,Ua=Va.hasOwnProperty;var Ga=function(e,t,n,r){return void 0===e||Object(Un.a)(e,Va[n])&&!Ua.call(r,n)?t:e},Ha={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var Wa=function(e){return"\\"+Ha[e]},qa=/<%=([\s\S]+?)%>/g,Xa={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:qa,variable:"",imports:{_:{escape:jr}}},$a="Invalid `variable` option passed into `_.template`",Ya=/\b__p \+= '';/g,Ka=/\b(__p \+=) '' \+/g,Ja=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Za=/[()=,{}\[\]\/\s]/,Qa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,es=/($^)/,ts=/['\n\r\u2028\u2029\\]/g,ns=Object.prototype.hasOwnProperty;var rs=function(e,t,n){var r=Xa.imports._.templateSettings||Xa;n&&Object(Gn.a)(e,t,n)&&(t=void 0),e=G(e),t=Da({},t,r,Ga);var i,o,a=Da({},t.imports,r.imports,Ga),s=et(a),u=za(a,s),c=0,l=t.interpolate||es,f="__p += '",h=RegExp((t.escape||es).source+"|"+l.source+"|"+(l===qa?Qa:es).source+"|"+(t.evaluate||es).source+"|$","g"),d=ns.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(ts,Wa),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),f+="';\n";var p=ns.call(t,"variable")&&t.variable;if(p){if(Za.test(p))throw new Error($a)}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(Ya,""):f).replace(Ka,"$1").replace(Ja,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ba(function(){return Function(s,d+"return "+f).apply(void 0,u)});if(g.source=f,Fa(g))throw g;return g},is=9007199254740991;var os=function(e){return e?ze(Sr(e),-is,is):0===e?e:0},as=30,ss="...",us=/\w*$/;var cs=function(e,t){var n=as,r=ss;if(Object(xn.a)(t)){var i="separator"in t?t.separator:i;n="length"in t?Sr(t.length):n,r="omission"in t?U(t.omission):r}var o=(e=G(e)).length;if(X(e)){var a=ae(e);o=a.length}if(n>=o)return e;var s=n-Yo(r);if(s<1)return r;var u=a?W(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),ja(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=RegExp(i.source,G(us.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(U(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},ls=fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fs=/&(?:amp|lt|gt|quot|#39);/g,hs=RegExp(fs.source);var ds=function(e){return(e=G(e))&&hs.test(e)?e.replace(fs,ls):e},ps=Et&&1/Xr(new Et([,-0]))[1]==1/0?function(e){return new Et(e)}:jo,gs=200;var vs=function(e,t,n){var r=-1,i=hr,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=dr;else if(o>=gs){var c=t?null:ps(e);if(c)return Xr(c);a=!1,i=pr,u=new sr}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s},ys=Object(Vn.a)(function(e){return vs(wr(e,1,xr.a,!0))});var ms=function(e){return e&&e.length?vs(e):[]},bs=0;var ws=function(e){var t=++bs;return G(e)+t};function xs(e,t,n){for(var r,i,o=Cs(e,n),a=Cs(t,n),s=a.free,u=o.keyIndex,c=a.keyIndex,l=[],f=[],h=0,d=0;h<e.length;){if(i=(r=e[h])[n])if(c.hasOwnProperty(i)){var p=c[i];f.push(t[p])}else f.push(null);else{var g=s[d+=1];f.push(g||null)}h+=1}var v=f.slice(0);for(h=0;h<v.length;)null===v[h]?(x(h),k(h)):h+=1;for(var y=h=0;h<t.length;){i=(r=t[h])[n];var m=v[y];if(m)if(i===m[n])y+=1;else if(u.hasOwnProperty(i)){var b=v[y+1];if(b)b[n]===i?(x(h),k(y),y+=1):C(h,r)}else C(h,r);else C(h,r);h+=1}for(var w=v.length-y;(y+=1)<v.length;)x((w-=1)+h);function x(e){var t={index:e,type:0,item:null};l.push(t)}function C(e,t){var n={index:e,item:t,type:1};l.push(n)}function k(e){v.splice(e,1)}return{moves:l}}function Cs(e,t){for(var n={},r=[],i=0,o=e.length;i<o;i+=1){var a=e[i],s=a[t];s?n[s]=i:r.push(a)}return{keyIndex:n,free:r}}function ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){"constructor"!==n&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))})})}var Es=n(2),Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};function Ss(e,t){function n(){this.constructor=e}Os(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var As=/^\s*class\s+/.test("".concat(function e(){Object(Es.a)(this,e)}))||/^\s*class\s*\{/.test("".concat(function(){return function e(){Object(Es.a)(this,e)}}()));function Ts(e,t){var n;return As?n=new Function("base","return class ".concat(e," extends base { }"))(t):Ss(n=new Function("base","return function ".concat(e,"() { return base.apply(this, arguments) }"))(t),t),n}function Ms(e,t){return null!=e?e:t}function _s(e,t,n){var r=null!=e?e[t]:null;return void 0!==n?Ms(r,n):r}function js(e,t,n){var r=null!=e?e[t]:null;return null==r?n:(r=+r,Number.isNaN(r)||!Number.isFinite(r)?n:r)}function Ps(e,t,n){var r=null!=e?e[t]:null;return null==r?n:!!r}function Ns(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",i=Array.isArray(t)?t:t.split(r);if(i.length)for(n=e;i.length;){var o=i.shift();if(!(Object(n)===n&&o&&o in n))return;n=n[o]}return n}function Rs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=Array.isArray(t)?t:t.split(r),o=i.pop();if(o){var a=e;i.forEach(function(e){null==a[e]&&(a[e]={}),a=a[e]}),a[o]=n}return e}function Ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",r=Array.isArray(t)?t.slice():t.split(n),i=r.pop();if(i)if(r.length>0){var o=Ns(e,r);o&&delete o[i]}else delete e[i];return e}function Is(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2?arguments[2]:void 0,r={};for(var i in Object.keys(e).forEach(function(i){var o=e[i],a="object"===typeof o||Array.isArray(o);if(a&&n&&n(o)&&(a=!1),a){var s=Is(o,t,n);Object.keys(s).forEach(function(e){r[i+t+e]=s[e]})}else r[i]=o}),e)Object.prototype.hasOwnProperty.call(e,i);return r}function Ls(e){var t=null;try{t=window.eval(e)}catch(n){}return t}var Fs=Fe(function(e,t,n){return e+(n?" ":"")+ue(t)}),Bs=Fe(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),zs=Fe(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Vs=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}},Us=Vs(function(e){return e.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),Gs=Vs(function(e){return Fs(Be(e)).replace(/ /g,"")}),Hs=Vs(function(e){return Bs(e).replace(/ /g,"_")}),Ws=Vs(function(e){return zs(e).replace(/ /g,".")}),qs=Vs(function(e){return zs(e).replace(/ /g,"/")}),Xs=Vs(function(e){return ue(zs(e))}),$s=Vs(function(e){return Fs(Be(e))});function Ys(e){for(var t=2166136261,n=!1,r=e,i=0,o=r.length;i<o;i+=1){var a=r.charCodeAt(i);a>127&&!n&&(a=(r=unescape(encodeURIComponent(r))).charCodeAt(i),n=!0),t^=a,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function Ks(){for(var e="",t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",n=0,r=t.length;n<r;n+=1){var i=t[n],o=16*Math.random()|0;e+=("x"===i?o:"y"===i?3&o|8:i).toString(16)}return e}function Js(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_.a.parseHTML(e,null,!1);return n.forEach(function(e){var t=e;if(t){var n=t.attributes;if(n)for(var r=0,i=n.length;r<i;r+=1){var o=n.item(r);if(o){var a=o.value.toLowerCase(),s=o.name.toLowerCase();(s.startsWith("on")||a.startsWith("javascript:")||a.startsWith("data:")||a.startsWith("vbscript:"))&&t.removeAttribute(s)}}}}),t.raw?n:_()("<div/>").append(n).html()}function Zs(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qs(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(e,t,n){var r,i,o=Math.min(2,Math.floor(.34*e.length)),a=Math.floor(.4*e.length)+1,s=!1,u=e.toLowerCase(),c=Zs(t);try{for(c.s();!(i=c.n()).done;){var l=i.value,f=n(l);if(void 0!==f&&Math.abs(f.length-u.length)<=o){var h=f.toLowerCase();if(h===u){if(f===e)continue;return l}if(s)continue;if(f.length<3)continue;var d=tu(u,h,a-1);if(void 0===d)continue;d<3?(s=!0,r=l):(a=d,r=l)}}}catch(p){c.e(p)}finally{c.f()}return r}function tu(e,t,n){for(var r=new Array(t.length+1),i=new Array(t.length+1),o=n+1,a=0;a<=t.length;a+=1)r[a]=a;for(var s=1;s<=e.length;s+=1){var u=e.charCodeAt(s-1),c=s>n?s-n:1,l=t.length>n+s?n+s:t.length;i[0]=s;for(var f=s,h=1;h<c;h+=1)i[h]=o;for(var d=c;d<=l;d+=1){var p=u===t.charCodeAt(d-1)?r[d-1]:Math.min(r[d]+1,i[d-1]+1,r[d-1]+2);i[d]=p,f=Math.min(f,p)}for(var g=l+1;g<=t.length;g+=1)i[g]=o;if(f>n)return;var v=r;r=i,i=v}var y=r[t.length];return y>n?void 0:y}function nu(e,t){return(e%t+t)%t}function ru(e,t){if(null==t)t=null==e?1:e,e=0;else if(t<e){var n=e;e=t,t=n}return Math.floor(Math.random()*(t-e+1)+e)}function iu(e){return"string"===typeof e&&"%"===e.slice(-1)}function ou(e,t){if(null==e)return 0;var n;if("string"===typeof e){if(n=parseFloat(e),iu(e)&&(n/=100,Number.isFinite(n)))return n*t}else n=e;return Number.isFinite(n)?n>0&&n<1?n*t:n:0}function au(e,t){var n,r=parseFloat(e);if(Number.isNaN(r))return null;if(null==t)n="[A-Za-z]*";else if(Array.isArray(t)){if(0===t.length)return null;n=t.join("|")}else"string"===typeof t&&(n=t);var i=function(t){var n=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(t,")$")).exec(e);return n?n[1]:null}(n);return null===i?null:{unit:i,value:r}}function su(e){if("object"===typeof e){var t=0,n=0,r=0,i=0;return null!=e.vertical&&Number.isFinite(e.vertical)&&(n=i=e.vertical),null!=e.horizontal&&Number.isFinite(e.horizontal)&&(r=t=e.horizontal),null!=e.left&&Number.isFinite(e.left)&&(t=e.left),null!=e.top&&Number.isFinite(e.top)&&(n=e.top),null!=e.right&&Number.isFinite(e.right)&&(r=e.right),null!=e.bottom&&Number.isFinite(e.bottom)&&(i=e.bottom),{top:n,right:r,bottom:i,left:t}}var o=0;return null!=e&&Number.isFinite(e)&&(o=e),{top:o,right:o,bottom:o,left:o}}function uu(e,t,n){if(n)switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);case 4:return e.call(t,n[0],n[1],n[2],n[3]);case 5:return e.call(t,n[0],n[1],n[2],n[3],n[4]);case 6:return e.call(t,n[0],n[1],n[2],n[3],n[4],n[5]);default:return e.apply(t,n)}return e.call(t)}function cu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return uu(e,t,r)}function lu(e,t,n){var r=[],i={};return function(){for(var o=!1,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];var c=s.join("\u2400");return c in i?(o=!0,function(e,t){for(var n=0,r=e.length;n<r;n+=1)if(e[n]===t)return e.push(e.splice(n,1)[0])}(r,c)):(r.length>=1e3&&delete i[r.shift()],r.push(c),i[c]=uu(e,t||null,s)),n?n(i[c],o):i[c]}}var fu=n(13);function hu(e){return"object"===typeof e&&e.then&&"function"===typeof e.then}function du(e){return null!=e&&(e instanceof Promise||hu(e))}function pu(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.forEach(function(t){Array.isArray(t)?e.push.apply(e,Object(fu.a)(t)):e.push(t)}),e.some(function(e){return du(e)})){var i=e.map(function(e){return du(e)?e:Promise.resolve(!1!==e)});return Promise.all(i).then(function(e){return e.reduce(function(e,t){return!1!==t&&e},!0)})}return e.every(function(e){return!1!==e})}function gu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pu(t);return"boolean"===typeof r?Promise.resolve(r):r}var vu=/[\t\r\n\f]/g,yu=/\S+/g,mu=function(e){return" ".concat(e," ")};function bu(e){return e&&e.getAttribute&&e.getAttribute("class")||""}function wu(e,t){if(null==e||null==t)return!1;var n=mu(bu(e)),r=mu(t);return 1===e.nodeType&&n.replace(vu," ").includes(r)}function xu(e,t){if(null!=e&&null!=t){if("function"===typeof t)return xu(e,t(bu(e)));if("string"===typeof t&&1===e.nodeType){var n=t.match(yu)||[],r=mu(bu(e)).replace(vu," "),i=n.reduce(function(e,t){return e.indexOf(mu(t))<0?"".concat(e).concat(t," "):e},r);r!==(i=i.trim())&&e.setAttribute("class",i)}}}function Cu(e,t){if(null!=e){if("function"===typeof t)return Cu(e,t(bu(e)));if((!t||"string"===typeof t)&&1===e.nodeType){var n=(t||"").match(yu)||[],r=mu(bu(e)).replace(vu," "),i=n.reduce(function(e,t){var n=mu(t);return e.indexOf(n)>-1?e.replace(n," "):e},r);r!==(i=t?i.trim():"")&&e.setAttribute("class",i)}}}function ku(e,t,n){if(null!=e&&null!=t)if(null==n||"string"!==typeof t){if("function"===typeof t)return ku(e,t(bu(e),n),n);if("string"===typeof t)(t.match(yu)||[]).forEach(function(t){wu(e,t)?Cu(e,t):xu(e,t)})}else n?xu(e,t):Cu(e,t)}var Eu=0;function Ou(){return"v".concat(Eu+=1)}function Su(e){return null!=e.id&&""!==e.id||(e.id=Ou()),e.id}function Au(e){return null!=e&&("function"===typeof e.getScreenCTM&&e instanceof SVGElement)}var Tu,Mu,_u,ju={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Pu="1.1";function Nu(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).createElement(e)}function Ru(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ju.xhtml;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).createElementNS(t,e)}function Du(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Ru(e,ju.svg,t)}function Iu(e){if(e)return Lu('<svg xmlns="'.concat(ju.svg,'" xmlns:xlink="').concat(ju.xlink,'" version="').concat(Pu,'">').concat(e,"</svg>"),{async:!1}).documentElement;var t=document.createElementNS(ju.svg,"svg");return t.setAttributeNS(ju.xmlns,"xmlns:xlink",ju.xlink),t.setAttribute("version",Pu),t}function Lu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r=new DOMParser;if(null!=n.async)r.async=n.async;t=r.parseFromString(e,n.mimeType||"text/xml")}catch(i){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(e));return t}function Fu(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.nodeName;return t?n.toLowerCase():n.toUpperCase()}function Bu(e){for(var t=0,n=e.previousSibling;n;)1===n.nodeType&&(t+=1),n=n.previousSibling;return t}function zu(e,t){return e.querySelectorAll(t)}function Vu(e,t){return e.querySelector(t)}function Uu(e,t,n){for(var r=e.ownerSVGElement,i=e.parentNode;i&&i!==n&&i!==r;){if(wu(i,t))return i;i=i.parentNode}return null}function Gu(e,t){var n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&16&e.compareDocumentPosition(n))}function Hu(e){e.parentNode&&e.parentNode.removeChild(e)}function Wu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function qu(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){null!=t&&e.appendChild(t)})}function Xu(e,t){var n=e.firstChild;return n?$u(n,t):qu(e,t)}function $u(e,t){var n=e.parentNode;n&&(Array.isArray(t)?t:[t]).forEach(function(t){null!=t&&n.insertBefore(t,e)})}function Yu(e,t){null!=t&&t.appendChild(e)}function Ku(e){try{return e instanceof HTMLElement}catch(t){return"object"===typeof e&&1===e.nodeType&&"object"===typeof e.style&&"object"===typeof e.ownerDocument}}function Ju(e,t){return e.getAttribute(t)}function Zu(e,t){var n=nc(t);n.ns?e.hasAttributeNS(n.ns,n.local)&&e.removeAttributeNS(n.ns,n.local):e.hasAttribute(t)&&e.removeAttribute(t)}function Qu(e,t,n){if(null==n)return Zu(e,t);var r=nc(t);r.ns&&"string"===typeof n?e.setAttributeNS(r.ns,t,n):"id"===t?e.id="".concat(n):e.setAttribute(t,"".concat(n))}function ec(e,t){Object.keys(t).forEach(function(n){Qu(e,n,t[n])})}function tc(e,t,n){if(null==t){for(var r=e.attributes,i={},o=0;o<r.length;o+=1)i[r[o].name]=r[o].value;return i}if("string"===typeof t&&void 0===n)return e.getAttribute(t);"object"===typeof t?ec(e,t):Qu(e,t,n)}function nc(e){if(-1!==e.indexOf(":")){var t=e.split(":");return{ns:ju[t[0]],local:t[1]}}return{ns:null,local:e}}function rc(e){var t={};return Object.keys(e).forEach(function(n){var r=Us(n);t[r]=e[n]}),t}function ic(e){var t={};return e.split(";").forEach(function(e){var n=e.trim();if(n){var r=n.split("=");r.length&&(t[r[0].trim()]=r[1]?r[1].trim():"")}}),t}function oc(e,t){return Object.keys(t).forEach(function(n){if("class"===n)e[n]=e[n]?"".concat(e[n]," ").concat(t[n]):t[n];else if("style"===n){var r,i,o="object"===typeof e[n],a="object"===typeof t[n];o&&a?(r=e[n],i=t[n]):o?(r=e[n],i=ic(t[n])):a?(r=ic(e[n]),i=t[n]):(r=ic(e[n]),i=ic(t[n])),e[n]=oc(r,i)}else e[n]=t[n]}),e}function ac(e,t){for(var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.offset||0,s=[],u=[],c=null,l=0;l<e.length;l+=1){n=u[l]=e[l];for(var f=0,h=t.length;f<h;f+=1){var d=t[f],p=d.start+a,g=d.end+a;l>=p&&l<g&&("string"===typeof n?n=u[l]={t:e[l],attrs:d.attrs}:n.attrs=oc(oc({},n.attrs),d.attrs),o.includeAnnotationIndices&&(null==n.annotations&&(n.annotations=[]),n.annotations.push(f)))}(r=u[l-1])?i.isObject(n)&&i.isObject(r)?(c=c,JSON.stringify(n.attrs)===JSON.stringify(r.attrs)?c.t+=n.t:(s.push(c),c=n)):i.isObject(n)?(c=c,s.push(c),c=n):i.isObject(r)?(c=c,s.push(c),c=n):c=(c||"")+n:c=n}return null!=c&&s.push(c),s}function sc(e,t){return e?e.filter(function(e){return e.start<t&&t<=e.end}):[]}function uc(e,t,n){return e?e.filter(function(e){return t>=e.start&&t<e.end||n>e.start&&n<=e.end||e.start>=t&&e.end<n}):[]}function cc(e,t,n){return e&&e.forEach(function(e){e.start<t&&e.end>=t?e.end+=n:e.start>=t&&(e.start+=n,e.end+=n)}),e}function lc(e){return e.replace(/ /g,"\xa0")}!function(e){function t(e){return null===e||void 0===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e}function n(e){return Array.isArray(e)}function r(e,i){if(e===i)return!0;if(t(e)||t(i))return!1;var o=n(e),a=n(i);return o===a&&(o&&a?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n+=1)if(!r(e[n],t[n]))return!1;return!0}(e,i):function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var i in t)if(!(i in e))return!1;for(var o in e)if(!r(e[o],t[o]))return!1;return!0}(e,i))}function i(e){return t(e)?e:n(e)?function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;n+=1)t[n]=i(e[n]);return t}(e):function(e){var t={};return Object.keys(e).forEach(function(n){t[n]=i(e[n])}),t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=r,e.deepCopy=i}(Tu||(Tu={})),function(e){function t(e){return"data:"===e.substr(0,"data:".length)}function n(e){var t,n=e.replace(/\s/g,""),r=(n=decodeURIComponent(n)).indexOf(","),i=n.slice(0,r),o=i.split(":")[1].split(";")[0],a=n.slice(r+1);t=i.indexOf("base64")>=0?atob(a):unescape(encodeURIComponent(a));for(var s=new Uint8Array(t.length),u=0;u<t.length;u+=1)s[u]=t.charCodeAt(u);return new Blob([s],{type:o})}function r(e,t){var n=window.navigator.msSaveBlob;if(n)n(e,t);else{var r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}}function i(e){var t=parseFloat(e);return Number.isNaN(t)?null:t}e.isDataUrl=t,e.imageToDataUri=function(e,n){if(e&&!t(e)){var r=function(){n(new Error("Failed to load image: ".concat(e)))},i=window.FileReader?function(e){if(200===e.status){var t=new FileReader;t.onload=function(e){var t=e.target.result;n(null,t)},t.onerror=r,t.readAsDataURL(e.response)}else r()}:function(t){if(200===t.status){var i=e.split(".").pop()||"png";"svg"===i&&(i="svg+xml");var o="data:image/".concat(i,";base64,"),a=new Uint8Array(t.response),s=o+btoa(function(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")}(a));n(null,s)}else r()},o=new XMLHttpRequest;o.responseType=window.FileReader?"blob":"arraybuffer",o.open("GET",e,!0),o.addEventListener("error",r),o.addEventListener("load",function(){return i(o)}),o.send()}else setTimeout(function(){return n(null,e)})},e.dataUriToBlob=n,e.downloadBlob=r,e.downloadDataUri=function(e,t){r(n(e),t)},e.svgToDataUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=function(t){return null==n&&(n=function(e){var t=e.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return t&&t[2]?t[2].replace(/\s+/," ").split(" "):null}(e)),null!=n?i(n[t]):null},o=function(t){var n=e.match(t);return n&&n[2]?i(n[2]):null},a=t.width;if(null==a&&(a=o(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==a&&(a=r(2)),null==a)throw new Error("Can not parse width from svg string");var s=t.height;if(null==s&&(s=o(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==s&&(s=r(3)),null==s)throw new Error("Can not parse height from svg string");var u=encodeURIComponent(e).replace(/'/g,"%27").replace(/"/g,"%22");return"".concat("data:image/svg+xml",",").concat(u)}}(Mu||(Mu={}));var fc,hc={px:function(e){return e},mm:function(e){return _u*e},cm:function(e){return _u*e*10},in:function(e){return _u*e*25.4},pt:function(e){return _u*(25.4*e/72)},pc:function(e){return _u*(25.4*e/6)}};!function(e){function t(e,t,n){var r=_()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:e+(n||""),height:t+(n||"")}).appendTo(document.body),i={width:r.width()||0,height:r.height()||0};return r.remove(),i}e.measure=t,e.toPx=function(e,n){null==_u&&(_u=t("1","1","mm").width);var r=n?hc[n]:null;return r?r(e):e}}(fc||(fc={}));var dc=function(){var e,t=window;if(null!=t&&null!=(e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame)&&(e=e.bind(t)),null==e){var n=0;e=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-n)),i=setTimeout(function(){e(t+r)},r);return n=t+r,i}}return e}(),pc=function(){var e,t=window;return null!=t&&(e=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.msCancelAnimationFrame||t.msCancelRequestAnimationFrame||t.oCancelAnimationFrame||t.oCancelRequestAnimationFrame||t.mozCancelAnimationFrame||t.mozCancelRequestAnimationFrame)&&(e=e.bind(t)),null==e&&(e=clearTimeout),e}(),gc=/-(.)/g;var vc={},yc=["Webkit","ms","Moz","O"],mc=document?document.createElement("div").style:{};function bc(e){var t=e.replace(gc,function(e,t){return t.toUpperCase()});if(null==vc[t]){var n=t.charAt(0).toUpperCase()+t.slice(1);vc[t]=t in mc?t:function(e){for(var t=0;t<yc.length;t+=1){var n=yc[t]+e;if(n in mc)return n}return null}(n)}return vc[t]}function wc(e,t,n){var r=bc(t);null!=r&&(e[r]=n),e[t]=n}function xc(e,t){var n=e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null);return n&&t?n.getPropertyValue(t)||n[t]:n}function Cc(e){var t=xc(e);return null!=t&&("scroll"===t.overflow||"auto"===t.overflow)}var kc,Ec=function(){var e=document;return e.selection?function(){e.selection.empty()}:window.getSelection?function(){var e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}:function(){}}(),Oc=n(4);!function(e){e.toDeg=function(e){return 180*e/Math.PI%360},e.toRad=function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:e%360)*Math.PI/180},e.normalize=function(e){return e%360+(e<0?360:0)}}(kc||(kc={}));var Sc=n(6),Ac=n(3),Tc=n(7);function Mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isInteger(e)?e:+e.toFixed(t)}function _c(e,t){var n,r;if(null==t?(r=null==e?1:e,n=0):(r=t,n=null==e?0:e),r<n){var i=n;n=r,r=i}return Math.floor(Math.random()*(r-n+1)+n)}function jc(e,t,n){return Number.isNaN(e)?NaN:Number.isNaN(t)||Number.isNaN(n)?0:t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}function Pc(e,t){return t*Math.round(e/t)}function Nc(e,t){return null!=t&&null!=e&&t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function Rc(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}var Dc=function(){function e(){Object(Es.a)(this,e)}return Object(Oc.a)(e,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}(),Ic=function(e){function t(e,n){var r;return Object(Es.a)(this,t),(r=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).x=null==e?0:e,r.y=null==n?0:n,r}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x=Mc(this.x,e),this.y=Mc(this.y,e),this}},{key:"add",value:function(e,n){var r=t.create(e,n);return this.x+=r.x,this.y+=r.y,this}},{key:"update",value:function(e,n){var r=t.create(e,n);return this.x=r.x,this.y=r.y,this}},{key:"translate",value:function(e,n){var r=t.create(e,n);return this.x+=r.x,this.y+=r.y,this}},{key:"rotate",value:function(e,n){var r=t.rotate(this,e,n);return this.x=r.x,this.y=r.y,this}},{key:"scale",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t,i=t.create(r);return this.x=i.x+e*(this.x-i.x),this.y=i.y+n*(this.y-i.y),this}},{key:"closest",value:function(e){var n=this;if(1===e.length)return t.create(e[0]);var r=null,i=1/0;return e.forEach(function(e){var t=n.squaredDistance(e);t<i&&(r=e,i=t)}),r?t.create(r):null}},{key:"distance",value:function(e){return Math.sqrt(this.squaredDistance(e))}},{key:"squaredDistance",value:function(e){var n=t.create(e),r=this.x-n.x,i=this.y-n.y;return r*r+i*i}},{key:"manhattanDistance",value:function(e){var n=t.create(e);return Math.abs(n.x-this.x)+Math.abs(n.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t,n=t.create(e),r=-(n.y-this.y),i=n.x-this.x,o=Math.atan2(r,i);return o<0&&(o=2*Math.PI+o),180*o/Math.PI}},{key:"angleBetween",value:function(e,t){if(this.equals(e)||this.equals(t))return NaN;var n=this.theta(t)-this.theta(e);return n<0&&(n+=360),n}},{key:"vectorAngle",value:function(e){return new t(0,0).angleBetween(this,e)}},{key:"toPolar",value:function(e){return this.update(t.toPolar(this,e)),this}},{key:"changeInAngle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return this.clone().translate(-e,-n).theta(r)-this.theta(r)}},{key:"adhereToRect",value:function(e){return Nc(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}},{key:"bearing",value:function(e){var n=t.create(e),r=kc.toRad(this.y),i=kc.toRad(n.y),o=this.x,a=n.x,s=kc.toRad(a-o),u=Math.sin(s)*Math.cos(i),c=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(s),l=kc.toDeg(Math.atan2(u,c))-22.5;return l<0&&(l+=360),["NE","E","SE","S","SW","W","NW","N"][l=parseInt(l/45,10)]}},{key:"cross",value:function(e,n){if(null!=e&&null!=n){var r=t.create(e),i=t.create(n);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}},{key:"dot",value:function(e){var n=t.create(e);return this.x*n.x+this.y*n.y}},{key:"diff",value:function(e,n){if("number"===typeof e)return new t(this.x-e,this.y-n);var r=t.create(e);return new t(this.x-r.x,this.y-r.y)}},{key:"lerp",value:function(e,n){var r=t.create(e);return new t((1-n)*this.x+n*r.x,(1-n)*this.y+n*r.y)}},{key:"normalize",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/this.magnitude();return this.scale(e,e)}},{key:"move",value:function(e,n){var r=t.create(e),i=kc.toRad(r.theta(this));return this.translate(Math.cos(i)*n,-Math.sin(i)*n)}},{key:"reflection",value:function(e){return t.create(e).move(this,this.distance(e))}},{key:"snapToGrid",value:function(e,t){return this.x=Pc(this.x,e),this.y=Pc(this.y,null==t?e:t),this}},{key:"equals",value:function(e){var n=t.create(e);return null!=n&&n.x===this.x&&n.y===this.y}},{key:"clone",value:function(){return t.clone(this)}},{key:"toJSON",value:function(){return t.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isPoint=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"number"===typeof r.x&&"number"===typeof r.y&&"function"===typeof r.toPolar}}(Ic||(Ic={})),function(e){e.isPointLike=function(e){return null!=e&&"object"===typeof e&&"number"===typeof e.x&&"number"===typeof e.y},e.isPointData=function(e){return null!=e&&Array.isArray(e)&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]}}(Ic||(Ic={})),function(e){function t(t){return e.isPoint(t)?new e(t.x,t.y):Array.isArray(t)?new e(t[0],t[1]):new e(t.x,t.y)}function n(e,t){return e===t||null!=e&&null!=t&&(e.x===t.x&&e.y===t.y)}function r(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e,a=t(n),s=t(o),u=a.x-s.x,c=a.y-s.y,l=c*r+u*i;return new e(u*r-c*i+s.x,l+s.y)}e.create=function(n,r){return null==n||"number"===typeof n?new e(n,r):t(n)},e.clone=t,e.toJSON=function(t){return e.isPoint(t)?{x:t.x,y:t.y}:Array.isArray(t)?{x:t[0],y:t[1]}:{x:t.x,y:t.y}},e.fromPolar=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e,o=Math.abs(n*Math.cos(r)),a=Math.abs(n*Math.sin(r)),s=t(i),u=kc.normalize(kc.toDeg(r));return u<90?a=-a:u<180?(o=-o,a=-a):u<270&&(o=-o),new e(s.x+o,s.y+a)},e.toPolar=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e,i=t(n),o=t(r),a=i.x-o.x,s=i.y-o.y;return new e(Math.sqrt(a*a+s*s),kc.toRad(o.theta(i)))},e.equals=n,e.equalPoints=function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!==t.length)return!1;if(null!=e&&null!=t)for(var r=0,i=e.length;r<i;r+=1)if(!n(e[r],t[r]))return!1;return!0},e.random=function(t,n,r,i){return new e(_c(t,n),_c(r,i))},e.rotate=function(e,t,n){var i=kc.toRad(kc.normalize(-t)),o=Math.sin(i);return r(e,Math.cos(i),o,n)},e.rotateEx=r}(Ic||(Ic={}));var Lc=function(e){function t(e,n,r,i){var o;return Object(Es.a)(this,t),(o=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).x=null==e?0:e,o.y=null==n?0:n,o.width=null==r?0:r,o.height=null==i?0:i,o}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(e){if(!e)return this.clone();var n=kc.toRad(e),r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n)),o=this.width*i+this.height*r,a=this.width*r+this.height*i;return new t(this.x+(this.width-o)/2,this.y+(this.height-a)/2,o,a)}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x=Mc(this.x,e),this.y=Mc(this.y,e),this.width=Mc(this.width,e),this.height=Mc(this.height,e),this}},{key:"add",value:function(e,n,r,i){var o=t.create(e,n,r,i),a=Math.min(this.x,o.x),s=Math.min(this.y,o.y),u=Math.max(this.x+this.width,o.x+o.width),c=Math.max(this.y+this.height,o.y+o.height);return this.x=a,this.y=s,this.width=u-a,this.height=c-s,this}},{key:"update",value:function(e,n,r,i){var o=t.create(e,n,r,i);return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this}},{key:"inflate",value:function(e,t){var n=e,r=null!=t?t:e;return this.x-=n,this.y-=r,this.width+=2*n,this.height+=2*r,this}},{key:"snapToGrid",value:function(e,t){var n=this.origin.snapToGrid(e,t),r=this.corner.snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this}},{key:"translate",value:function(e,t){var n=Ic.create(e,t);return this.x+=n.x,this.y+=n.y,this}},{key:"scale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ic,r=this.origin.scale(e,t,n);return this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this}},{key:"rotate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCenter();if(0!==e){var r=kc.toRad(e),i=Math.cos(r),o=Math.sin(r),a=this.getOrigin(),s=this.getTopRight(),u=this.getBottomRight(),c=this.getBottomLeft();a=Ic.rotateEx(a,i,o,n),s=Ic.rotateEx(s,i,o,n),u=Ic.rotateEx(u,i,o,n),c=Ic.rotateEx(c,i,o,n);var l=new t(a.x,a.y,0,0);l.add(s.x,s.y,0,0),l.add(u.x,u.y,0,0),l.add(c.x,c.y,0,0),this.update(l)}return this}},{key:"rotate90",value:function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;return this.width=this.height,this.height=t,this}},{key:"moveAndExpand",value:function(e){var n=t.clone(e);return this.x+=n.x||0,this.y+=n.y||0,this.width+=n.width||0,this.height+=n.height||0,this}},{key:"getMaxScaleToFit",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center,r=t.clone(e),i=n.x,o=n.y,a=1/0,s=1/0,u=1/0,c=1/0,l=1/0,f=1/0,h=1/0,d=1/0,p=r.topLeft;p.x<i&&(a=(this.x-i)/(p.x-i)),p.y<o&&(l=(this.y-o)/(p.y-o));var g=r.bottomRight;g.x>i&&(s=(this.x+this.width-i)/(g.x-i)),g.y>o&&(f=(this.y+this.height-o)/(g.y-o));var v=r.topRight;v.x>i&&(u=(this.x+this.width-i)/(v.x-i)),v.y<o&&(h=(this.y-o)/(v.y-o));var y=r.bottomLeft;return y.x<i&&(c=(this.x-i)/(y.x-i)),y.y>o&&(d=(this.y+this.height-o)/(y.y-o)),{sx:Math.min(a,s,u,c),sy:Math.min(l,f,h,d)}}},{key:"getMaxUniformScaleToFit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center,n=this.getMaxScaleToFit(e,t);return Math.min(n.sx,n.sy)}},{key:"containsPoint",value:function(e,t){return Nc(this,Ic.create(e,t))}},{key:"containsRect",value:function(e,n,r,i){var o=t.create(e,n,r,i),a=this.x,s=this.y,u=this.width,c=this.height,l=o.x,f=o.y,h=o.width,d=o.height;return 0!==u&&0!==c&&0!==h&&0!==d&&(l>=a&&f>=s&&l+h<=a+u&&f+d<=s+c)}},{key:"intersectsWithLine",value:function(e){var t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],n=[],r=[];return t.forEach(function(t){var i=e.intersectsWithLine(t);null!==i&&r.indexOf(i.toString())<0&&(n.push(i),r.push(i.toString()))}),n.length>0?n:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(e,t){var n=Ic.clone(e),r=this.center,i=null;null!=t&&0!==t&&n.rotate(t,r);for(var o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new Fc(r,n),s=o.length-1;s>=0;s-=1){var u=o[s].intersectsWithLine(a);if(null!==u){i=u;break}}return i&&null!=t&&0!==t&&i.rotate(-t,r),i}},{key:"intersectsWithRect",value:function(e,n,r,i){var o=t.create(e,n,r,i);if(!this.isIntersectWithRect(o))return null;var a=this.origin,s=this.corner,u=o.origin,c=o.corner,l=Math.max(a.x,u.x),f=Math.max(a.y,u.y);return new t(l,f,Math.min(s.x,c.x)-l,Math.min(s.y,c.y)-f)}},{key:"isIntersectWithRect",value:function(e,n,r,i){var o=t.create(e,n,r,i),a=this.origin,s=this.corner,u=o.origin,c=o.corner;return!(c.x<=a.x||c.y<=a.y||u.x>=s.x||u.y>=s.y)}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this}},{key:"union",value:function(e){var n=t.clone(e),r=this.origin,i=this.corner,o=n.origin,a=n.corner,s=Math.min(r.x,o.x),u=Math.min(r.y,o.y);return new t(s,u,Math.max(i.x,a.x)-s,Math.max(i.y,a.y)-u)}},{key:"getNearestSideToPoint",value:function(e){var t=Ic.clone(e),n=t.x-this.x,r=this.x+this.width-t.x,i=t.y-this.y,o=n,a="left";return r<o&&(o=r,a="right"),i<o&&(o=i,a="top"),this.y+this.height-t.y<o&&(a="bottom"),a}},{key:"getNearestPointToPoint",value:function(e){var t=Ic.clone(e);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new Ic(this.x+this.width,t.y);case"left":return new Ic(this.x,t.y);case"bottom":return new Ic(t.x,this.y+this.height);case"top":return new Ic(t.x,this.y)}return t.adhereToRect(this)}},{key:"equals",value:function(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new Ic(this.x,this.y)}},{key:"topLeft",get:function(){return new Ic(this.x,this.y)}},{key:"topCenter",get:function(){return new Ic(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new Ic(this.x+this.width,this.y)}},{key:"center",get:function(){return new Ic(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new Ic(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new Ic(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new Ic(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new Ic(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new Ic(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new Ic(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new Fc(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new Fc(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new Fc(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new Fc(this.topLeft,this.bottomLeft)}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isRectangle=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"number"===typeof r.x&&"number"===typeof r.y&&"number"===typeof r.width&&"number"===typeof r.height&&"function"===typeof r.inflate&&"function"===typeof r.moveAndExpand}}(Lc||(Lc={})),function(e){(Lc||(Lc={})).isRectangleLike=function(e){return null!=e&&"object"===typeof e&&"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.width&&"number"===typeof e.height}}(),function(e){function t(t){return e.isRectangle(t)?t.clone():Array.isArray(t)?new e(t[0],t[1],t[2],t[3]):new e(t.x,t.y,t.width,t.height)}e.create=function(n,r,i,o){return null==n||"number"===typeof n?new e(n,r,i,o):t(n)},e.clone=t,e.fromSize=function(t){return new e(0,0,t.width,t.height)},e.fromPositionAndSize=function(t,n){return new e(t.x,t.y,n.width,n.height)},e.fromEllipse=function(t){return new e(t.x-t.a,t.y-t.b,2*t.a,2*t.b)}}(Lc||(Lc={}));var Fc=function(e){function t(e,n,r,i){var o;return Object(Es.a)(this,t),o=Object(Sc.a)(this,Object(Ac.a)(t).call(this)),"number"===typeof e&&"number"===typeof n?(o.start=new Ic(e,n),o.end=new Ic(r,i)):(o.start=Ic.create(e),o.end=Ic.create(n)),o}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.start.round(e),this.end.round(e),this}},{key:"translate",value:function(e,t){return"number"===typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}},{key:"rotate",value:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}},{key:"scale",value:function(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}},{key:"setLength",value:function(e){var t=this.length();if(!t)return this;var n=e/t;return this.scale(n,n,this.start)}},{key:"parallel",value:function(e){var t=this.clone();if(!t.isDifferentiable())return t;var n=t.start,r=t.end,i=n.clone().rotate(270,r),o=r.clone().rotate(90,n);return n.move(o,e),r.move(i,e),t}},{key:"vector",value:function(){return new Ic(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var e=new Ic(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}},{key:"bbox",value:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),r=Math.max(this.start.y,this.end.y);return new Lc(e,t,n-e,r-t)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(e){return this.pointAt(this.closestPointNormalizedLength(e))}},{key:"closestPointLength",value:function(e){return this.closestPointNormalizedLength(e)*this.length()}},{key:"closestPointTangent",value:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))}},{key:"closestPointNormalizedLength",value:function(e){var n=this.vector().dot(new t(this.start,e).vector()),r=Math.min(1,Math.max(0,n/this.squaredLength()));return Number.isNaN(r)?0:r}},{key:"pointAt",value:function(e){var t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)}},{key:"pointAtLength",value:function(e){var t=this.start,n=this.end,r=!0;e<0&&(r=!1,e=-e);var i=this.length();if(e>=i)return r?n.clone():t.clone();var o=(r?e:i-e)/i;return this.pointAt(o)}},{key:"divideAt",value:function(e){var n=this.pointAt(e);return[new t(this.start,n),new t(n,this.end)]}},{key:"divideAtLength",value:function(e){var n=this.pointAtLength(e);return[new t(this.start,n),new t(n,this.end)]}},{key:"containsPoint",value:function(e){var n=this.start,r=this.end;if(0!==n.cross(e,r))return!1;var i=this.length();return!(new t(n,e).length()>i)&&!(new t(e,r).length()>i)}},{key:"intersect",value:function(e,t){var n=e.intersectsWithLine(this,t);return n?Array.isArray(n)?n:[n]:null}},{key:"intersectsWithLine",value:function(e){var t=new Ic(this.end.x-this.start.x,this.end.y-this.start.y),n=new Ic(e.end.x-e.start.x,e.end.y-e.start.y),r=t.x*n.y-t.y*n.x,i=new Ic(e.start.x-this.start.x,e.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*t.y-i.y*t.x;if(0===r||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return new Ic(this.start.x+o*t.x/r,this.start.y+o*t.y/r)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(e){var t=Ic.clone(e),n=this.start,r=this.end;return((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/this.length()}},{key:"pointSquaredDistance",value:function(e,t){var n=Ic.create(e,t);return this.closestPoint(n).squaredDistance(n)}},{key:"pointDistance",value:function(e,t){var n=Ic.create(e,t);return this.closestPoint(n).distance(n)}},{key:"tangentAt",value:function(e){if(!this.isDifferentiable())return null;var n=this.start,r=this.end,i=this.pointAt(e),o=new t(n,r);return o.translate(i.x-n.x,i.y-n.y),o}},{key:"tangentAtLength",value:function(e){if(!this.isDifferentiable())return null;var n=this.start,r=this.end,i=this.pointAtLength(e),o=new t(n,r);return o.translate(i.x-n.x,i.y-n.y),o}},{key:"relativeCcw",value:function(e,t){var n=Ic.create(e,t),r=n.x-this.start.x,i=n.y-this.start.y,o=this.end.x-this.start.x,a=this.end.y-this.start.y,s=r*a-i*o;return 0===s&&(s=r*o+i*a)>0&&(s=(r-=o)*o+(i-=a)*a)<0&&(s=0),s<0?-1:s>0?1:0}},{key:"equals",value:function(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}},{key:"clone",value:function(){return new t(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"center",get:function(){return new Ic((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isLine=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;try{if((null==n||n===e.toStringTag)&&Ic.isPoint(r.start)&&Ic.isPoint(r.end)&&"function"===typeof r.vector&&"function"===typeof r.bearing&&"function"===typeof r.parallel&&"function"===typeof r.intersect)return!0}catch(i){return!1}return!1}}(Fc||(Fc={}));var Bc=function(e){function t(e,n,r,i){var o;return Object(Es.a)(this,t),(o=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).x=null==e?0:e,o.y=null==n?0:n,o.a=null==r?0:r,o.b=null==i?0:i,o}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){return Lc.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(e,t){var n=e,r=null!=t?t:e;return this.a+=2*n,this.b+=2*r,this}},{key:"normalizedDistance",value:function(e,t){var n=Ic.create(e,t),r=n.x-this.x,i=n.y-this.y,o=this.a,a=this.b;return r*r/(o*o)+i*i/(a*a)}},{key:"containsPoint",value:function(e,t){return this.normalizedDistance(e,t)<=1}},{key:"intersectsWithLine",value:function(e){var t=[],n=this.a,r=this.b,i=e.start,o=e.end,a=e.vector(),s=i.diff(new Ic(this.x,this.y)),u=new Ic(a.x/(n*n),a.y/(r*r)),c=new Ic(s.x/(n*n),s.y/(r*r)),l=a.dot(u),f=a.dot(c),h=f*f-l*(s.dot(c)-1);if(h<0)return null;if(h>0){var d=Math.sqrt(h),p=(-f-d)/l,g=(-f+d)/l;if((p<0||p>1)&&(g<0||g>1))return null;p>=0&&p<=1&&t.push(i.lerp(o,p)),g>=0&&g<=1&&t.push(i.lerp(o,g))}else{var v=-f/l;if(!(v>=0&&v<=1))return null;t.push(i.lerp(o,v))}return t}},{key:"intersectsWithLineFromCenterToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ic.clone(e);t&&n.rotate(t,this.getCenter());var r,i=n.x-this.x,o=n.y-this.y;if(0===i)return r=this.bbox().getNearestPointToPoint(n),t?r.rotate(-t,this.getCenter()):r;var a=o/i,s=a*a,u=this.a*this.a,c=this.b*this.b,l=Math.sqrt(1/(1/u+s/c)),f=a*(l=i<0?-l:l);return r=new Ic(this.x+l,this.y+f),t?r.rotate(-t,this.getCenter()):r}},{key:"tangentTheta",value:function(e){var t,n,r=Ic.clone(e),i=r.x,o=r.y,a=this.a,s=this.b,u=this.bbox().center,c=u.x,l=u.y,f=i>u.x+a/2,h=i<u.x-a/2;return f||h?t=a*a/(i-c)-a*a*(o-l)*((n=i>u.x?o-30:o+30)-l)/(s*s*(i-c))+c:n=s*s/(o-l)-s*s*(i-c)*((t=o>u.y?i+30:i-30)-c)/(a*a*(o-l))+l,new Ic(t,n).theta(r)}},{key:"scale",value:function(e,t){return this.a*=e,this.b*=t,this}},{key:"rotate",value:function(e,n){var r=Lc.fromEllipse(this);r.rotate(e,n);var i=t.fromRect(r);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}},{key:"translate",value:function(e,t){var n=Ic.create(e,t);return this.x+=n.x,this.y+=n.y,this}},{key:"equals",value:function(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}},{key:"clone",value:function(){return new t(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"center",get:function(){return new Ic(this.x,this.y)}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isEllipse=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"number"===typeof r.x&&"number"===typeof r.y&&"number"===typeof r.a&&"number"===typeof r.b&&"function"===typeof r.inflate&&"function"===typeof r.normalizedDistance}}(Bc||(Bc={})),function(e){function t(t){return e.isEllipse(t)?t.clone():Array.isArray(t)?new e(t[0],t[1],t[2],t[3]):new e(t.x,t.y,t.a,t.b)}e.create=function(n,r,i,o){return null==n||"number"===typeof n?new e(n,r,i,o):t(n)},e.parse=t,e.fromRect=function(t){var n=t.center;return new e(n.x,n.y,t.width/2,t.height/2)}}(Bc||(Bc={}));var zc=function(e){function t(e){var n;if(Object(Es.a)(this,t),n=Object(Sc.a)(this,Object(Ac.a)(t).call(this)),null!=e){if("string"===typeof e)return Object(Sc.a)(n,t.parse(e));n.points=e.map(function(e){return Ic.create(e)})}else n.points=[];return n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"scale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ic;return this.points.forEach(function(r){return r.scale(e,t,n)}),this}},{key:"rotate",value:function(e,t){return this.points.forEach(function(n){return n.rotate(e,t)}),this}},{key:"translate",value:function(e,t){var n=Ic.create(e,t);return this.points.forEach(function(e){return e.translate(n.x,n.y)}),this}},{key:"bbox",value:function(){if(0===this.points.length)return new Lc;for(var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.points,o=0,a=i.length;o<a;o+=1){var s=i[o],u=s.x,c=s.y;u<e&&(e=u),u>t&&(t=u),c<n&&(n=c),c>r&&(r=c)}return new Lc(e,n,t-e,r-n)}},{key:"closestPoint",value:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)}},{key:"closestPointLength",value:function(e){var t=this.points,n=t.length;if(0===n||1===n)return 0;for(var r=0,i=0,o=1/0,a=0,s=n-1;a<s;a+=1){var u=new Fc(t[a],t[a+1]),c=u.length(),l=u.closestPointNormalizedLength(e),f=u.pointAt(l).squaredDistance(e);f<o&&(o=f,i=r+l*c),r+=c}return i}},{key:"closestPointNormalizedLength",value:function(e){var t=this.closestPointLength(e);if(0===t)return 0;var n=this.length();return 0===n?0:t/n}},{key:"closestPointTangent",value:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)}},{key:"containsPoint",value:function(e){if(0===this.points.length)return!1;for(var t=Ic.clone(e),n=t.x,r=t.y,i=this.points,o=i.length,a=o-1,s=0,u=0;u<o;u+=1){var c=i[a],l=i[u];if(t.equals(c))return!0;var f=new Fc(c,l);if(f.containsPoint(e))return!0;if(r<=c.y&&r>l.y||r>c.y&&r<=l.y){var h=c.x-n>l.x-n?c.x-n:l.x-n;if(h>=0){var d=new Ic(n+h,r),p=new Fc(e,d);f.intersectsWithLine(p)&&(s+=1)}}a=u}return s%2===1}},{key:"intersectsWithLine",value:function(e){for(var t=[],n=0,r=this.points.length-1;n<r;n+=1){var i=this.points[n],o=this.points[n+1],a=e.intersectsWithLine(new Fc(i,o));a&&t.push(a)}return t.length>0?t:null}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.points.length-1;e<t;e+=1){var n=this.points[e],r=this.points[e+1];if(new Fc(n,r).isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var e=0,t=0,n=this.points.length-1;t<n;t+=1){var r=this.points[t],i=this.points[t+1];e+=r.distance(i)}return e}},{key:"pointAt",value:function(e){var t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();if(e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();var r=this.length()*e;return this.pointAtLength(r)}},{key:"pointAtLength",value:function(e){var t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var i=0,o=0,a=n-1;o<a;o+=1){var s=r?o:a-1-o,u=t[s],c=t[s+1],l=new Fc(u,c),f=u.distance(c);if(e<=i+f)return l.pointAtLength((r?1:-1)*(e-i));i+=f}return(r?t[n-1]:t[0]).clone()}},{key:"tangentAt",value:function(e){var t=this.points.length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length()*e;return this.tangentAtLength(n)}},{key:"tangentAtLength",value:function(e){var t=this.points,n=t.length;if(0===n||1===n)return null;var r,i=!0;e<0&&(i=!1,e=-e);for(var o=0,a=0,s=n-1;a<s;a+=1){var u=i?a:s-1-a,c=t[u],l=t[u+1],f=new Fc(c,l),h=c.distance(l);if(f.isDifferentiable()){if(e<=o+h)return f.tangentAtLength((i?1:-1)*(e-o));r=f}o+=h}if(r){var d=i?1:0;return r.tangentAt(d)}return null}},{key:"simplify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.points;if(t.length<3)return this;for(var n=e.threshold||0,r=0;t[r+2];){var i=r+1,o=r+2,a=t[r],s=t[i],u=t[o];new Fc(a,u).closestPoint(s).distance(s)<=n?t.splice(i,1):r+=1}return this}},{key:"toHull",value:function(){var e=this.points,n=e.length;if(0===n)return new t;for(var r=e[0],i=1;i<n;i+=1)e[i].y<r.y?r=e[i]:e[i].y===r.y&&e[i].x>r.x&&(r=e[i]);for(var o=[],a=0;a<n;a+=1){var s=r.theta(e[a]);0===s&&(s=360),o.push([e[a],a,s])}if(o.sort(function(e,t){var n=e[2]-t[2];return 0===n&&(n=t[1]-e[1]),n}),o.length>2){var u=o[o.length-1];o.unshift(u)}for(var c,l={},f=[],h=function(e){return"".concat(e[0].toString(),"@").concat(e[1])};0!==o.length;){var d=o.pop(),p=d[0];if(!l[h(d)])for(var g=!1;!g;)if(f.length<2)f.push(d),g=!0;else{var v=f.pop(),y=v[0],m=f.pop(),b=m[0],w=b.cross(y,p);if(w<0)f.push(m),f.push(v),f.push(d),g=!0;else if(0===w){var x=y.angleBetween(b,p);Math.abs(x-180)<1e-10?(l[h(v)]=y,f.push(m)):y.equals(p)||b.equals(y)?(l[h(v)]=y,f.push(m)):Math.abs((x+1)%360-1)<1e-10&&(f.push(m),o.push(v))}else l[h(v)]=y,f.push(m)}}f.length>2&&f.pop();for(var C=-1,k=0,E=f.length;k<E;k+=1){var O=f[k][1];(void 0===c||O<c)&&(c=O,C=k)}var S=[];if(C>0){var A=f.slice(C),T=f.slice(0,C);S=A.concat(T)}else S=f;for(var M=[],_=0,j=S.length;_<j;_+=1)M.push(S[_][0]);return new t(M)}},{key:"equals",value:function(e){var t=this;return null!=e&&(e.points.length===this.points.length&&e.points.every(function(e,n){return e.equals(t.points[n])}))}},{key:"clone",value:function(){return new t(this.points.map(function(e){return e.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(e){return"".concat(e.x,", ").concat(e.y)}).join(" ")}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"start",get:function(){return 0===this.points.length?null:this.points[0]}},{key:"end",get:function(){return 0===this.points.length?null:this.points[this.points.length-1]}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isPolyline=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.toHull&&"function"===typeof r.simplify}}(zc||(zc={})),function(e){e.parse=function(t){var n=t.trim();if(""===n)return new e;for(var r=[],i=n.split(/\s*,\s*|\s+/),o=0,a=i.length;o<a;o+=2)r.push({x:+i[o],y:+i[o+1]});return new e(r)}}(zc||(zc={}));var Vc=function(e){function t(e,n,r,i){var o;return Object(Es.a)(this,t),(o=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).PRECISION=3,o.start=Ic.create(e),o.controlPoint1=Ic.create(n),o.controlPoint2=Ic.create(r),o.end=Ic.create(i),o}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){for(var e,t,n,r,i,o,a,s,u,c,l,f=this.start,h=this.controlPoint1,d=this.controlPoint2,p=this.end,g=f.x,v=f.y,y=h.x,m=h.y,b=d.x,w=d.y,x=p.x,C=p.y,k=[],E=[],O=[[],[]],S=0;S<2;S+=1)if(0===S?(t=6*g-12*y+6*b,e=-3*g+9*y-9*b+3*x,n=3*y-3*g):(t=6*v-12*m+6*w,e=-3*v+9*m-9*w+3*C,n=3*m-3*v),Math.abs(e)<1e-12){if(Math.abs(t)<1e-12)continue;(r=-n/t)>0&&r<1&&E.push(r)}else a=t*t-4*n*e,s=Math.sqrt(a),a<0||((i=(-t+s)/(2*e))>0&&i<1&&E.push(i),(o=(-t-s)/(2*e))>0&&o<1&&E.push(o));for(var A=E.length,T=A;A;)u=(l=1-(r=E[A-=1]))*l*l*g+3*l*l*r*y+3*l*r*r*b+r*r*r*x,O[0][A]=u,c=l*l*l*v+3*l*l*r*m+3*l*r*r*w+r*r*r*C,O[1][A]=c,k[A]={X:u,Y:c};E[T]=0,E[T+1]=1,k[T]={X:g,Y:v},k[T+1]={X:x,Y:C},O[0][T]=g,O[1][T]=v,O[0][T+1]=x,O[1][T+1]=C,E.length=T+2,O[0].length=T+2,O[1].length=T+2,k.length=T+2;var M=Math.min.apply(null,O[0]),_=Math.min.apply(null,O[1]),j=Math.max.apply(null,O[0]),P=Math.max.apply(null,O[1]);return new Lc(M,_,j-M,P-_)}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pointAtT(this.closestPointT(e,t))}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,n),n)}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(t),r=this.closestPointLength(e,n);if(!r)return 0;var i=this.length(n);return 0===i?0:r/i}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPrecision(t),r=this.getDivisions(t),i=Math.pow(10,-n),o=null,a=0,s=0,u=0,c=0,l=0,f=null,h=r.length,d=h>0?1/h:0;for(r.forEach(function(t,n){var r=t.start.distance(e),i=t.end.distance(e),h=r+i;(null==f||h<f)&&(o=t,a=n*d,s=(n+1)*d,u=r,c=i,f=h,l=t.endpointDistance())});;){var p=u?Math.abs(u-c)/u:0,g=null!=c?Math.abs(u-c)/c:0;if(p<i||g<i||(!u||u<l*i||(!c||c<l*i)))return u<=c?a:s;var v=o.divide(.5);d/=2;var y=v[0].start.distance(e),m=v[0].end.distance(e),b=y+m,w=v[1].start.distance(e),x=v[1].end.distance(e);b<=w+x?(o=v[0],s-=d,u=y,c=m):(o=v[1],a+=d,u=w,c=x)}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.tangentAtT(this.closestPointT(e,t))}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.toPolyline(t).containsPoint(e)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var n=this.tAt(e,t);return this.divideAtT(n)}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.tAtLength(e,t);return this.divideAtT(n)}},{key:"divide",value:function(e){return this.divideAtT(e)}},{key:"divideAtT",value:function(e){var n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return[new t(n,n,n,n),new t(n,r,i,o)];if(e>=1)return[new t(n,r,i,o),new t(o,o,o,o)];var a=this.getSkeletonPoints(e),s=a.startControlPoint1,u=a.startControlPoint2,c=a.divider,l=a.dividerControlPoint1,f=a.dividerControlPoint2;return[new t(n,s,u,c),new t(c,l,f,o)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new Fc(t,n).pointAt(e),a=new Fc(n,r).pointAt(e),s=new Fc(r,i).pointAt(e),u=new Fc(o,a).pointAt(e),c=new Fc(a,s).pointAt(e);return{startControlPoint1:o,startControlPoint2:u,divider:new Fc(u,c).pointAt(e),dividerControlPoint1:c,dividerControlPoint2:s}}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getPrecision(e),r=[new t(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return r;for(var i=this.endpointDistance(),o=Math.pow(10,-n),a=0,s=function(){a+=1;var e=[];r.forEach(function(t){var n=t.divide(.5);e.push(n[0],n[1])});var t=e.reduce(function(e,t){return e+t.endpointDistance()},0);if(a>1&&(0!==t?(t-i)/t:0)<o)return{v:e};r=e,i=t};;){var u=s();if("object"===typeof u)return u.v}}},{key:"length",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getDivisions(e).reduce(function(e,t){return e+t.endpointDistance()},0)}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<=0)return 0;var n=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})}},{key:"pointAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.tAt(e,t);return this.pointAtT(n)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.tAtLength(e,t);return this.pointAtT(n)}},{key:"pointAtT",value:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}},{key:"isDifferentiable",value:function(){var e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.tAt(e,t);return this.tangentAtT(n)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isDifferentiable())return null;var n=this.tAtLength(e,t);return this.tangentAtT(n)}},{key:"tangentAtT",value:function(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);var t=this.getSkeletonPoints(e),n=t.startControlPoint2,r=t.dividerControlPoint1,i=t.divider,o=new Fc(n,r);return o.translate(i.x-n.x,i.y-n.y),o}},{key:"getPrecision",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==e.precision?this.PRECISION:e.precision}},{key:"getDivisions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=e.subdivisions)return e.subdivisions;var t=this.getPrecision(e);return this.getSubdivisions({precision:t})}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}},{key:"tAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<=0)return 0;if(e>=1)return 1;var n=this.getOptions(t),r=this.length(n)*e;return this.tAtLength(r,n)}},{key:"tAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!0;e<0&&(n=!1,e=-e);for(var r,i,o=this.getPrecision(t),a=this.getDivisions(t),s={precision:o,subdivisions:a},u=null,c=0,l=0,f=0,h=a.length,d=h>0?1/h:0,p=0;p<h;p+=1){var g=n?p:h-1-p,v=a[p],y=v.endpointDistance();if(e<=f+y){u=v,r=g*d,i=(g+1)*d,c=n?e-f:y+f-e,l=n?y+f-e:e-f;break}f+=y}if(null==u)return n?1:0;for(var m=this.length(s),b=Math.pow(10,-o);;){if((0!==m?c/m:0)<b)return r;if((0!==m?l/m:0)<b)return i;var w=void 0,x=void 0,C=u.divide(.5);d/=2;var k=C[0].endpointDistance(),E=C[1].endpointDistance();c<=k?(u=C[0],i-=d,x=k-(w=c)):(u=C[1],r+=d,x=E-(w=c-k)),c=w,l=x}}},{key:"toPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getDivisions(e),n=[t[0].start.clone()];return t.forEach(function(e){return n.push(e.end.clone())}),n}},{key:"toPolyline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new zc(this.toPoints(e))}},{key:"scale",value:function(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return"number"===typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new t(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isCurve=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;try{if((null==n||n===e.toStringTag)&&Ic.isPoint(r.start)&&Ic.isPoint(r.controlPoint1)&&Ic.isPoint(r.controlPoint2)&&Ic.isPoint(r.end)&&"function"===typeof r.toPoints&&"function"===typeof r.toPolyline)return!0}catch(i){return!1}return!1}}(Vc||(Vc={})),function(e){function t(e){var t=e.length,n=[],r=[],i=2;n[0]=e[0]/i;for(var o=1;o<t;o+=1)r[o]=1/i,i=(o<t-1?4:3.5)-r[o],n[o]=(e[o]-n[o-1])/i;for(var a=1;a<t;a+=1)n[t-a-1]-=r[t-a]*n[t-a];return n}e.throughPoints=function(n){if(null==n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function(e){var n=e.map(function(e){return Ic.clone(e)}),r=[],i=[],o=n.length-1;if(1===o)return r[0]=new Ic((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new Ic(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];for(var a=[],s=1;s<o-1;s+=1)a[s]=4*n[s].x+2*n[s+1].x;a[0]=n[0].x+2*n[1].x,a[o-1]=(8*n[o-1].x+n[o].x)/2;for(var u=t(a),c=1;c<o-1;c+=1)a[c]=4*n[c].y+2*n[c+1].y;a[0]=n[0].y+2*n[1].y,a[o-1]=(8*n[o-1].y+n[o].y)/2;for(var l=t(a),f=0;f<o;f+=1)r.push(new Ic(u[f],l[f])),f<o-1?i.push(new Ic(2*n[f+1].x-u[f+1],2*n[f+1].y-l[f+1])):i.push(new Ic((n[o].x+u[o-1])/2,(n[o].y+l[o-1])/2));return[r,i]}(n),i=[],o=0,a=r[0].length;o<a;o+=1){var s=new Ic(r[0][o].x,r[0][o].y),u=new Ic(r[1][o].x,r[1][o].y);i.push(new e(n[o],s,u,n[o+1]))}return i}}(Vc||(Vc={}));var Uc=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).isVisible=!0,e.isSegment=!0,e.isSubpathStart=!1,e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}},{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}}]),t}(Dc),Gc=function(e){function t(e,n){var r;return Object(Es.a)(this,t),r=Object(Sc.a)(this,Object(Ac.a)(t).call(this)),Fc.isLine(e)?r.endPoint=e.end.clone().round(2):r.endPoint=Ic.create(e,n).round(2),r}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var n=this.line.divideAt(e);return[new t(n[0]),new t(n[1])]}},{key:"divideAtLength",value:function(e){var n=this.line.divideAtLength(e);return[new t(n[0]),new t(n[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return null!=this.previousSegment&&!this.start.equals(this.end)}},{key:"clone",value:function(){return new t(this.end)}},{key:"scale",value:function(e,t,n){return this.end.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return"number"===typeof e?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}},{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new Fc(this.start,this.end)}}]),t}(Uc);!function(e){e.create=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.length,o=n[0];if(Fc.isLine(o))return new e(o);if(Ic.isPointLike(o))return 1===i?new e(o):n.map(function(t){return new e(t)});if(2===i)return new e(+n[0],+n[1]);for(var a=[],s=0;s<i;s+=2){var u=+n[s],c=+n[s+1];a.push(new e(u,c))}return a}}(Gc||(Gc={}));var Hc=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Gc(t[0]):this.clone(),new Gc(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Gc(t[0]):this.clone(),new Gc(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new t}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}},{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new Fc(this.start,this.end)}}]),t}(Uc);!function(e){e.create=function(){return new e}}(Hc||(Hc={}));var Wc=function(e){function t(e,n){var r;return Object(Es.a)(this,t),(r=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).isVisible=!1,r.isSubpathStart=!0,Fc.isLine(e)||Vc.isCurve(e)?r.endPoint=e.end.clone().round(2):r.endPoint=Ic.create(e,n).round(2),r}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,n){return this.end.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return"number"===typeof e?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new t(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}},{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}}]),t}(Uc);!function(e){e.create=function(){var t=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Fc.isLine(n))return new e(n);if(Vc.isCurve(n))return new e(n);if(Ic.isPointLike(n)){if(1===t)return new e(n);for(var r=[],i=0;i<t;i+=1)0===i?r.push(new e(i<0||arguments.length<=i?void 0:arguments[i])):r.push(new Gc(i<0||arguments.length<=i?void 0:arguments[i]));return r}if(2===t)return new e(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var o=[],a=0;a<t;a+=2){var s=+(a<0||arguments.length<=a?void 0:arguments[a]),u=+(a+1<0||arguments.length<=a+1?void 0:arguments[a+1]);0===a?o.push(new e(s,u)):o.push(new Gc(s,u))}return o}}(Wc||(Wc={}));var qc=function(e){function t(e,n,r,i,o,a){var s;return Object(Es.a)(this,t),s=Object(Sc.a)(this,Object(Ac.a)(t).call(this)),Vc.isCurve(e)?(s.controlPoint1=e.controlPoint1.clone().round(2),s.controlPoint2=e.controlPoint2.clone().round(2),s.endPoint=e.end.clone().round(2)):"number"===typeof e?(s.controlPoint1=new Ic(e,n).round(2),s.controlPoint2=new Ic(r,i).round(2),s.endPoint=new Ic(o,a).round(2)):(s.controlPoint1=Ic.create(e).round(2),s.controlPoint2=Ic.create(n).round(2),s.endPoint=Ic.create(r).round(2)),s}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.curve.divideAt(e,n);return[new t(r[0]),new t(r[1])]}},{key:"divideAtLength",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.curve.divideAtLength(e,n);return[new t(r[0]),new t(r[1])]}},{key:"divideAtT",value:function(e){var n=this.curve.divideAtT(e);return[new t(n[0]),new t(n[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))}},{key:"scale",value:function(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return"number"===typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new t(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,n=this.end;return[this.type,e.x,e.y,t.x,t.y,n.x,n.y].join(" ")}},{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new Vc(this.start,this.controlPoint1,this.controlPoint2,this.end)}}]),t}(Uc);function Xc(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function $c(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}function Yc(e){var t=function(e){if(!e)return null;var t="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",n=new RegExp("([a-z])[".concat(t,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(t,"]*,?[").concat(t,"]*)+)"),"ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(t,"]*,?[").concat(t,"]*"),"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return e.replace(n,function(e,t,n){var a=[],s=t.toLowerCase();n.replace(r,function(e,t){return t&&a.push(+t),e}),"m"===s&&a.length>2&&(o.push([t].concat(Object(fu.a)(a.splice(0,2)))),s="l",t="m"===t?"l":"L");for(var u=i[s];a.length>=u&&(o.push([t].concat(Object(fu.a)(a.splice(0,u)))),u););return e}),o}(e);if(!t||!t.length)return[["M",0,0]];for(var n=0,r=0,i=0,o=0,a=[],s=0,u=t.length;s<u;s+=1){var c=[];a.push(c);var l=t[s],f=l[0];if(f!==f.toUpperCase())switch(c[0]=f.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+n,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+n;break;case"M":i=+l[1]+n,o=+l[2]+r;for(var h=1,d=l.length;h<d;h+=1)c[h]=+l[h]+(h%2?n:r);break;default:for(var p=1,g=l.length;p<g;p+=1)c[p]=+l[p]+(p%2?n:r)}else for(var v=0,y=l.length;v<y;v+=1)c[v]=l[v];switch(c[0]){case"Z":n=+i,r=+o;break;case"H":n=c[1];break;case"V":r=c[1];break;case"M":i=c[c.length-2],o=c[c.length-1],n=c[c.length-2],r=c[c.length-1];break;default:n=c[c.length-2],r=c[c.length-1]}}return a}function Kc(e){var t=Yc(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=null,t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":return 0===parseFloat(e[1])||0===parseFloat(e[2])?["L",e[6],e[7]]:["C"].concat(function e(t,n,r,i,o,a,s,u,c,l){var f,h,d,p,g,v=120*Math.PI/180,y=Math.PI/180*(+o||0),m=[];if(l)h=l[0],d=l[1],p=l[2],g=l[3];else{t=(f=Xc(t,n,-y)).x,n=f.y;var b=(t-(u=(f=Xc(u,c,-y)).x))/2,w=(n-(c=f.y))/2,x=b*b/(r*r)+w*w/(i*i);x>1&&(r*=x=Math.sqrt(x),i*=x);var C=r*r,k=i*i,E=(a===s?-1:1)*Math.sqrt(Math.abs((C*k-C*w*w-k*b*b)/(C*w*w+k*b*b)));p=E*r*w/i+(t+u)/2,g=E*-i*b/r+(n+c)/2,h=Math.asin((n-g)/i),d=Math.asin((c-g)/i),h=t<p?Math.PI-h:h,d=u<p?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),s&&h>d&&(h-=2*Math.PI),!s&&d>h&&(d-=2*Math.PI)}var O=d-h;if(Math.abs(O)>v){var S=d,A=u,T=c;d=h+v*(s&&d>h?1:-1),m=e(u=p+r*Math.cos(d),c=g+i*Math.sin(d),r,i,o,0,s,A,T,[d,S,p,g])}O=d-h;var M=Math.cos(h),_=Math.sin(h),j=Math.cos(d),P=Math.sin(d),N=Math.tan(O/4),R=4/3*(r*N),D=4/3*(i*N),I=[t,n],L=[t+R*_,n-D*M],F=[u+R*P,c-D*j],B=[u,c];if(L[0]=2*I[0]-L[0],L[1]=2*I[1]-L[1],l)return[L,F,B].concat(m);for(var z=[],V=(m=[L,F,B].concat(m).join().split(",")).length,U=0;U<V;U+=1)z[U]=U%2?Xc(+m[U-1],+m[U],y).y:Xc(+m[U],+m[U+1],y).x;return z}.apply(0,[t.x,t.y].concat(e.slice(1))));case"S":return"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),["C",r,i].concat(e.slice(1));case"T":return"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),["C"].concat($c(t.x,t.y,t.qx,t.qy,e[1],e[2]));case"Q":return t.qx=e[1],t.qy=e[2],["C"].concat($c(t.x,t.y,e[1],e[2],e[3],e[4]));case"H":return["L"].concat(e[1],t.y);case"V":return["L"].concat(t.x,e[1])}return e}function i(e,n){if(e[n].length>7){e[n].shift();for(var r=e[n];r.length;)o[n]="A",n+=1,e.splice(n,0,["C"].concat(r.splice(0,6)));e.splice(n,1),s=t.length}}for(var o=[],a="",s=t.length,u=0;u<s;u+=1){var c="";t[u]&&(c=t[u][0]),"C"!==c&&(o[u]=c,u>0&&(a=o[u-1])),t[u]=r(t[u],n,a),"A"!==o[u]&&"C"===c&&(o[u]="C"),i(t,u);var l=t[u],f=l.length;n.x=l[f-2],n.y=l[f-1],n.bx=parseFloat(l[f-4])||n.x,n.by=parseFloat(l[f-3])||n.y}return t[0][0]&&"M"===t[0][0]||t.unshift(["M",0,0]),t}function Jc(e){return Kc(e).map(function(e){return e.map(function(e){return"string"===typeof e?e:Mc(e,2)})}).join(",").split(",").join(" ")}!function(e){e.create=function(){var t=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Vc.isCurve(n))return new e(n);if(Ic.isPointLike(n)){if(3===t)return new e(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var r=[],i=0;i<t;i+=3)r.push(new e(i<0||arguments.length<=i?void 0:arguments[i],i+1<0||arguments.length<=i+1?void 0:arguments[i+1],i+2<0||arguments.length<=i+2?void 0:arguments[i+2]));return r}if(6===t)return new e(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var o=[],a=0;a<t;a+=6)o.push(new e(a<0||arguments.length<=a?void 0:arguments[a],a+1<0||arguments.length<=a+1?void 0:arguments[a+1],a+2<0||arguments.length<=a+2?void 0:arguments[a+2],a+3<0||arguments.length<=a+3?void 0:arguments[a+3],a+4<0||arguments.length<=a+4?void 0:arguments[a+4],a+5<0||arguments.length<=a+5?void 0:arguments[a+5]));return o}}(qc||(qc={}));var Zc=new RegExp("^[\\s\\dLMCZz,.]*$");function Qc(e){return"string"===typeof e&&Zc.test(e)}function el(e,t){return(e%t+t)%t}function tl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e&&e.length&&e.forEach(function(e){Array.isArray(e)?n.push({x:e[0],y:e[1]}):n.push({x:e.x,y:e.y})}),function(e,t,n,r,i){var o=[],a=e[e.length-1],s=null!=t&&t>0,u=t||0;if(r&&s){var c=(e=e.slice())[0],l=new Ic(a.x+(c.x-a.x)/2,a.y+(c.y-a.y)/2);e.splice(0,0,l)}var f=e[0],h=1;for(n?o.push("M",f.x,f.y):o.push("L",f.x,f.y);h<(r?e.length:e.length-1);){var d=e[el(h,e.length)],p=f.x-d.x,g=f.y-d.y;if(s&&(0!==p||0!==g)&&(null==i||i.indexOf(h-1)<0)){var v=Math.sqrt(p*p+g*g),y=p*Math.min(u,v/2)/v,m=g*Math.min(u,v/2)/v,b=d.x+y,w=d.y+m;o.push("L",b,w);for(var x=e[el(h+1,e.length)];h<e.length-2&&0===Math.round(x.x-d.x)&&0===Math.round(x.y-d.y);)x=e[el(h+2,e.length)],h+=1;p=x.x-d.x,g=x.y-d.y,v=Math.max(1,Math.sqrt(p*p+g*g));var C=p*Math.min(u,v/2)/v,k=g*Math.min(u,v/2)/v,E=d.x+C,O=d.y+k;o.push("Q",d.x,d.y,E,O),d=new Ic(E,O)}else o.push("L",d.x,d.y);f=d,h+=1}return r?o.push("Z"):o.push("L",a.x,a.y),o.map(function(e){return"string"===typeof e?e:+e.toFixed(3)}).join(" ")}(n,t.round,null==t.initialMove||t.initialMove,t.close,t.exclude)}function nl(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(0===n||0===r)return[];s-=e,u-=t,n=Math.abs(n),r=Math.abs(r);var c,l=-s/2,f=-u/2,h=Math.cos(i*Math.PI/180),d=Math.sin(i*Math.PI/180),p=h*l+d*f,g=-1*d*l+h*f,v=p*p,y=g*g,m=n*n,b=r*r,w=v/m+y/b;if(w>1)n=Math.sqrt(w)*n,r=Math.sqrt(w)*r,c=0;else{var x=1;o===a&&(x=-1),c=x*Math.sqrt((m*b-m*y-b*v)/(m*y+b*v))}var C=c*n*g/r,k=-1*c*r*p/n,E=h*C-d*k+s/2,O=d*C+h*k+u/2,S=Math.atan2((g-k)/r,(p-C)/n)-Math.atan2(0,1),A=S>=0?S:2*Math.PI+S,T=(S=Math.atan2((-g-k)/r,(-p-C)/n)-Math.atan2((g-k)/r,(p-C)/n))>=0?S:2*Math.PI+S;0===a&&T>0?T-=2*Math.PI:0!==a&&T<0&&(T+=2*Math.PI);for(var M=2*T/Math.PI,_=Math.ceil(M<0?-1*M:M),j=T/_,P=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),N=h*n,R=h*r,D=d*n,I=d*r,L=Math.cos(A),F=Math.sin(A),B=-P*(N*F+I*L),z=-P*(D*F-R*L),V=0,U=0,G=[],H=0;H<_;H+=1){A+=j,V=N*(L=Math.cos(A))-I*(F=Math.sin(A))+E,U=D*L+R*F+O;var W=-P*(N*F+I*L),q=-P*(D*F-R*L),X=6*H;G[X]=Number(B+e),G[X+1]=Number(z+t),G[X+2]=Number(V-W+e),G[X+3]=Number(U-q+t),G[X+4]=Number(V+e),G[X+5]=Number(U+t),B=V+W,z=U+q}return G.map(function(e){return+e.toFixed(2)})}function rl(e,t,n,r){var i=[],o=nl(e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0);if(null!=o)for(var a=0,s=o.length;a<s;a+=6)i.push("C",o[a],o[a+1],o[a+2],o[a+3],o[a+4],o[a+5]);return i.join(" ")}var il,ol=function(e){function t(e){var n;if(Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).PRECISION=3,n.segments=[],Array.isArray(e))if(Fc.isLine(e[0])||Vc.isCurve(e[0])){var r=null;e.forEach(function(e,i){0===i&&n.appendSegment(t.createSegment("M",e.start)),null==r||r.end.equals(e.start)||n.appendSegment(t.createSegment("M",e.start)),Fc.isLine(e)?n.appendSegment(t.createSegment("L",e.end)):Vc.isCurve(e)&&n.appendSegment(t.createSegment("C",e.controlPoint1,e.controlPoint2,e.end)),r=e})}else{e.forEach(function(e){e.isSegment&&n.appendSegment(e)})}else null!=e&&(Fc.isLine(e)?(n.appendSegment(t.createSegment("M",e.start)),n.appendSegment(t.createSegment("L",e.end))):Vc.isCurve(e)?(n.appendSegment(t.createSegment("M",e.start)),n.appendSegment(t.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):zc.isPolyline(e)?e.points&&e.points.length&&e.points.forEach(function(e,r){var i=0===r?t.createSegment("M",e):t.createSegment("L",e);n.appendSegment(i)}):e.isSegment&&n.appendSegment(e));return n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"moveTo",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.appendSegment((e=Wc.create).call.apply(e,[null].concat(n)))}},{key:"lineTo",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.appendSegment((e=Gc.create).call.apply(e,[null].concat(n)))}},{key:"curveTo",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.appendSegment((e=qc.create).call.apply(e,[null].concat(n)))}},{key:"arcTo",value:function(e,t,n,r,i,o,a){var s=this.end||new Ic,u="number"===typeof o?nl(s.x,s.y,e,t,n,r,i,o,a):nl(s.x,s.y,e,t,n,r,i,o.x,o.y);if(null!=u)for(var c=0,l=u.length;c<l;c+=6)this.curveTo(u[c],u[c+1],u[c+2],u[c+3],u[c+4],u[c+5]);return this}},{key:"quadTo",value:function(e,n,r,i){var o=this.end||new Ic,a=["M",o.x,o.y];if("number"===typeof e)a.push("Q",e,n,r,i);else{var s=n;a.push("Q",e.x,e.y,s.x,s.y)}var u=t.parse(a.join(" "));return this.appendSegment(u.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Hc.create())}},{key:"drawPoints",value:function(e){var n=tl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=t.parse(n);r&&r.segments&&this.appendSegment(r.segments)}},{key:"bbox",value:function(){var e,t=this.segments,n=t.length;if(0===n)return null;for(var r=0;r<n;r+=1){var i=t[r];if(i.isVisible){var o=i.bbox();null!=o&&(e=e?e.union(o):o)}}if(null!=e)return e;var a=t[n-1];return new Lc(a.end.x,a.end.y,0,0)}},{key:"appendSegment",value:function(e){var t,n=this.segments.length,r=0!==n?this.segments[n-1]:null;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i+=1){var a=e[i];t=this.prepareSegment(a,r,null),this.segments.push(t),r=t}else null!=e&&e.isSegment&&(t=this.prepareSegment(e,r,null),this.segments.push(t));return this}},{key:"insertSegment",value:function(e,t){var n,r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var i=null,o=null;if(0!==r&&(e>=1?o=(i=this.segments[e-1]).nextSegment:(i=null,o=this.segments[0])),Array.isArray(t))for(var a=0,s=t.length;a<s;a+=1){var u=t[a];n=this.prepareSegment(u,i,o),this.segments.splice(e+a,0,n),i=n}else n=this.prepareSegment(t,i,o),this.segments.splice(e,0,n);return this}},{key:"removeSegment",value:function(e){var t=this.fixIndex(e),n=this.segments.splice(t,1)[0],r=n.previousSegment,i=n.nextSegment;return r&&(r.nextSegment=i),i&&(i.previousSegment=r),n.isSubpathStart&&i&&this.updateSubpathStartSegment(i),n}},{key:"replaceSegment",value:function(e,t){var n,r=this.fixIndex(e),i=this.segments[r],o=i.previousSegment,a=i.nextSegment,s=i.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(var u=0,c=t.length;u<c;u+=1){var l=t[u];n=this.prepareSegment(l,o,a),this.segments.splice(e+u,0,n),o=n,s&&n.isSubpathStart&&(s=!1)}}else n=this.prepareSegment(t,o,a),this.segments.splice(r,1,n),s&&n.isSubpathStart&&(s=!1);s&&a&&this.updateSubpathStartSegment(a)}},{key:"getSegment",value:function(e){var t=this.fixIndex(e);return this.segments[t]}},{key:"fixIndex",value:function(e){var t=this.segments.length;if(0===t)throw new Error("Path has no segments.");for(var n=e;n<0;)n=t+n;if(n>=t||n<0)throw new Error("Index out of range.");return n}},{key:"segmentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null}},{key:"segmentAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null}},{key:"segmentIndexAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=jc(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.segmentIndexAtLength(i,r)}},{key:"segmentIndexAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segments.length;if(0===n)return null;var r=!0;e<0&&(r=!1,e=-e);for(var i=this.getPrecision(t),o=this.getSubdivisions(t),a=0,s=null,u=0;u<n;u+=1){var c=r?u:n-1-u,l=this.segments[c],f=o[c],h=l.length({precision:i,subdivisions:f});if(l.isVisible){if(e<=a+h)return c;s=c}a+=h}return s}},{key:"getSegmentSubdivisions",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getPrecision(e),n=[],r=0,i=this.segments.length;r<i;r+=1){var o=this.segments[r].getSubdivisions({precision:t});n.push(o)}return n}},{key:"updateSubpathStartSegment",value:function(e){for(var t=e.previousSegment,n=e;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=n,n=n.nextSegment}},{key:"prepareSegment",value:function(e,t,n){e.previousSegment=t,e.nextSegment=n,null!=t&&(t.nextSegment=e),null!=n&&(n.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=n),null!=r&&this.updateSubpathStartSegment(r),e}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.closestPointT(e,t);return n?this.pointAtT(n):null}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(t),r=this.closestPointT(e,n);return r?this.lengthAtT(r,n):0}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(t),r=this.closestPointLength(e,n);if(0===r)return 0;var i=this.length(n);return 0===i?0:r/i}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;for(var n,r=this.getPrecision(t),i=this.getSubdivisions(t),o=1/0,a=0,s=this.segments.length;a<s;a+=1){var u=this.segments[a],c=i[a];if(u.isVisible){var l=u.closestPointT(e,{precision:r,subdivisions:c}),f=Rc(u.pointAtT(l),e);f<o&&(n={segmentIndex:a,value:l},o=f)}}return n||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;for(var n,r=this.getPrecision(t),i=this.getSubdivisions(t),o=1/0,a=0,s=this.segments.length;a<s;a+=1){var u=this.segments[a],c=i[a];if(u.isDifferentiable()){var l=u.closestPointT(e,{precision:r,subdivisions:c}),f=Rc(u.pointAtT(l),e);f<o&&(n=u.tangentAtT(l),o=f)}}return n||null}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toPolylines(t);if(!n)return!1;for(var r=0,i=0,o=n.length;i<o;i+=1){n[i].containsPoint(e)&&(r+=1)}return r%2===1}},{key:"pointAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.getOptions(t),r=this.length(n)*e;return this.pointAtLength(r,n)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;if(0===e)return this.start.clone();var n=!0;e<0&&(n=!1,e=-e);for(var r,i=this.getPrecision(t),o=this.getSubdivisions(t),a=0,s=0,u=this.segments.length;s<u;s+=1){var c=n?s:u-1-s,l=this.segments[c],f=o[c],h=l.length({precision:i,subdivisions:f});if(l.isVisible){if(e<=a+h)return l.pointAtLength((n?1:-1)*(e-a),{precision:i,subdivisions:f});r=l}a+=h}return r?n?r.end:r.start:this.segments[this.segments.length-1].end.clone()}},{key:"pointAtT",value:function(e){var t=this.segments,n=t.length;if(0===n)return null;var r=e.segmentIndex;if(r<0)return t[0].pointAtT(0);if(r>=n)return t[n-1].pointAtT(1);var i=jc(e.value,0,1);return t[r].pointAtT(i)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=jc(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.divideAtLength(i,r)}},{key:"divideAtLength",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var r=!0;e<0&&(r=!1,e=-e);for(var i,o,a,s,u,c=this.getPrecision(n),l=this.getSubdivisions(n),f=0,h=0,d=this.segments.length;h<d;h+=1){var p=r?h:d-1-h,g=this.getSegment(p),v={precision:c,subdivisions:l[p]},y=g.length(v);if(g.isDifferentiable()&&(a=g,s=p,e<=f+y)){o=p,i=g.divideAtLength((r?1:-1)*(e-f),v);break}f+=y}if(!a)return null;i||(o=s,u=r?1:0,i=a.divideAtT(u));var m=this.clone(),b=o;m.replaceSegment(b,i);var w=b,x=b+1,C=b+2;i[0].isDifferentiable()||(m.removeSegment(w),x-=1,C-=1);var k=m.getSegment(x).start;m.insertSegment(x,t.createSegment("M",k)),C+=1,i[1].isDifferentiable()||(m.removeSegment(C-1),C-=1);for(var E=C-w-1,O=C,S=m.segments.length;O<S;O+=1){var A=this.getSegment(O-E),T=m.getSegment(O);if("Z"===T.type&&!A.subpathStartSegment.end.equals(T.subpathStartSegment.end)){var M=t.createSegment("L",A.end);m.replaceSegment(O,M)}}return[new t(m.segments.slice(0,x)),new t(m.segments.slice(x))]}},{key:"intersectsWithLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toPolylines(t);if(null==n)return null;for(var r=null,i=0,o=n.length;i<o;i+=1){var a,s=n[i],u=e.intersect(s);if(u)if(null==r&&(r=[]),Array.isArray(u))(a=r).push.apply(a,Object(fu.a)(u));else r.push(u)}return r}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.segments.length;e<t;e+=1){if(this.segments[e].isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var e=this.segments,t=0===e.length||"M"===e[0].type;return t}},{key:"length",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.segments.length)return 0;for(var t=this.getSubdivisions(e),n=0,r=0,i=this.segments.length;r<i;r+=1){var o=this.segments[r],a=t[r];n+=o.length({subdivisions:a})}return n}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segments.length;if(0===n)return 0;var r=e.segmentIndex;if(r<0)return 0;var i=jc(e.value,0,1);r>=n&&(r=n-1,i=1);for(var o=this.getPrecision(t),a=this.getSubdivisions(t),s=0,u=0;u<r;u+=1){var c=this.segments[u],l=a[u];s+=c.length({precision:o,subdivisions:l})}var f=this.segments[r],h=a[r];return s+=f.lengthAtT(i,{precision:o,subdivisions:h})}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=jc(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.tangentAtLength(i,r)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=!0;e<0&&(n=!1,e=-e);for(var r,i=this.getPrecision(t),o=this.getSubdivisions(t),a=0,s=0,u=this.segments.length;s<u;s+=1){var c=n?s:u-1-s,l=this.segments[c],f=o[c],h=l.length({precision:i,subdivisions:f});if(l.isDifferentiable()){if(e<=a+h)return l.tangentAtLength((n?1:-1)*(e-a),{precision:i,subdivisions:f});r=l}a+=h}if(r){var d=n?1:0;return r.tangentAtT(d)}return null}},{key:"tangentAtT",value:function(e){var t=this.segments.length;if(0===t)return null;var n=e.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=t)return this.segments[t-1].tangentAtT(1);var r=jc(e.value,0,1);return this.segments[n].tangentAtT(r)}},{key:"getPrecision",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==e.precision?this.PRECISION:e.precision}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==e.segmentSubdivisions){var t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}},{key:"toPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.segments,n=t.length;if(0===n)return null;for(var r=this.getSubdivisions(e),i=[],o=[],a=0;a<n;a+=1){var s=t[a];if(s.isVisible){var u=r[a];u.length>0?u.forEach(function(e){return o.push(e.start)}):o.push(s.start)}else o.length>0&&(o.push(t[a-1].end),i.push(o),o=[])}return o.length>0&&(o.push(this.end),i.push(o)),i}},{key:"toPolylines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.toPoints(e);return t?t.map(function(e){return new zc(e)}):null}},{key:"scale",value:function(e,t,n){return this.segments.forEach(function(r){return r.scale(e,t,n)}),this}},{key:"rotate",value:function(e,t){return this.segments.forEach(function(n){return n.rotate(e,t)}),this}},{key:"translate",value:function(e,t){return"number"===typeof e?this.segments.forEach(function(n){return n.translate(e,t)}):this.segments.forEach(function(t){return t.translate(e)}),this}},{key:"clone",value:function(){var e=new t;return this.segments.forEach(function(t){return e.appendSegment(t.clone())}),e}},{key:"equals",value:function(e){if(null==e)return!1;var t=this.segments,n=e.segments,r=t.length;if(n.length!==r)return!1;for(var i=0;i<r;i+=1){var o=t[i],a=n[i];if(o.type!==a.type||!o.equals(a))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(e){return e.serialize()}).join(" ")}},{key:"toString",value:function(){return this.serialize()}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"start",get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=0;n<t;n+=1){var r=e[n];if(r.isVisible)return r.start}return e[t-1].end}},{key:"end",get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=t-1;n>=0;n-=1){var r=e[n];if(r.isVisible)return r.end}return e[t-1].end}}]),t}(Dc);!function(e){e.toStringTag="X6.Geometry.".concat(e.name),e.isPath=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return!(null!=n&&n!==e.toStringTag||!Array.isArray(r.segments)||"function"!==typeof r.moveTo||"function"!==typeof r.lineTo||"function"!==typeof r.curveTo)}}(ol||(ol={})),function(e){function t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;if("M"===e)return(i=Wc.create).call.apply(i,[null].concat(n));if("L"===e)return(o=Gc.create).call.apply(o,[null].concat(n));if("C"===e)return(a=qc.create).call.apply(a,[null].concat(n));if("z"===e||"Z"===e)return Hc.create();throw new Error('Invalid path segment type "'.concat(e,'"'))}e.parse=function(n){if(!n)return new e;var r=new e,i=e.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=i)for(var o=0,a=i.length;o<a;o+=1){var s=i[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=s){var u=s[0],c=s.slice(1).map(function(e){return+e}),l=t.call.apply(t,[null,u].concat(Object(fu.a)(c)));r.appendSegment(l)}}return r},e.createSegment=t}(ol||(ol={})),(il=ol||(ol={})).normalize=Jc,il.isValid=Qc,il.drawArc=rl,il.drawPoints=tl,il.arcToCurves=nl;var al=function(){function e(t,n,r){if(Object(Es.a)(this,e),!t)throw new TypeError("Invalid element to create vector");var i;if(e.isVector(t))i=t.node;else if("string"===typeof t)if("svg"===t.toLowerCase())i=Iu();else if("<"===t[0]){var o=Iu(t);i=document.importNode(o.firstChild,!0)}else i=document.createElementNS(ju.svg,t);else i=t;this.node=i,n&&this.setAttributes(n),r&&this.append(r)}return Object(Oc.a)(e,[{key:"transform",value:function(e,t){return null==e?uf(this.node):(uf(this.node,e,t),this)}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null==e?cf(this.node):(cf(this.node,e,t,n),this)}},{key:"rotate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null==e?lf(this.node):(lf(this.node,e,t,n,r),this)}},{key:"scale",value:function(e,t){return null==e?ff(this.node):(ff(this.node,e,t),this)}},{key:"getTransformToElement",value:function(t){var n=e.toNode(t);return Jl(this.node,n)}},{key:"removeAttribute",value:function(e){return Zu(this.node,e),this}},{key:"getAttribute",value:function(e){return Ju(this.node,e)}},{key:"setAttribute",value:function(e,t){return Qu(this.node,e,t),this}},{key:"setAttributes",value:function(e){return ec(this.node,e),this}},{key:"attr",value:function(e,t){return null==e?tc(this.node):"string"===typeof e&&void 0===t?tc(this.node,e):("object"===typeof e?tc(this.node,e):tc(this.node,e,t),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:e.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var t=this.svg()||this,n=t.node.getElementsByTagName("defs")[0];return n?e.create(n):e.create("defs").appendTo(t)}},{key:"text",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ll(this.node,e,t),this}},{key:"tagName",value:function(){return Fu(this.node)}},{key:"clone",value:function(){return e.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Hu(this.node),this}},{key:"empty",value:function(){return Wu(this.node),this}},{key:"append",value:function(t){return qu(this.node,e.toNodes(t)),this}},{key:"appendTo",value:function(t){return Yu(this.node,e.isVector(t)?t.node:t),this}},{key:"prepend",value:function(t){return Xu(this.node,e.toNodes(t)),this}},{key:"before",value:function(t){return $u(this.node,e.toNodes(t)),this}},{key:"replace",value:function(t){return this.node.parentNode&&this.node.parentNode.replaceChild(e.toNode(t),this.node),e.create(t)}},{key:"first",value:function(){return this.node.firstChild?e.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?e.create(this.node.lastChild):null}},{key:"get",value:function(t){var n=this.node.childNodes[t];return n?e.create(n):null}},{key:"indexOf",value:function(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(e.toNode(t))}},{key:"find",value:function(t){var n=[],r=zu(this.node,t);if(r)for(var i=0,o=r.length;i<o;i+=1)n.push(e.create(r[i]));return n}},{key:"findOne",value:function(t){var n=Vu(this.node,t);return n?e.create(n):null}},{key:"findParentByClass",value:function(t,n){var r=Uu(this.node,t,n);return r?e.create(r):null}},{key:"matches",value:function(e){var t=this.node,n=(this.node.matches,t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null);return n&&n.call(t,e)}},{key:"contains",value:function(t){return Gu(this.node,e.isVector(t)?t.node:t)}},{key:"wrap",value:function(t){var n=e.create(t),r=this.node.parentNode;return null!=r&&r.insertBefore(n.node,this.node),n.append(this)}},{key:"parent",value:function(t){var n=this;if(null==n.node.parentNode)return null;if(n=e.create(n.node.parentNode),null==t)return n;do{if("string"===typeof t?n.matches(t):n instanceof t)return n}while(n=e.create(n.node.parentNode));return n}},{key:"children",value:function(){for(var t=this.node.childNodes,n=[],r=0;r<t.length;r+=1){1===t[r].nodeType&&n.push(e.create(t[r]))}return n}},{key:"eachChild",value:function(e,t){for(var n=this.children(),r=0,i=n.length;r<i;r+=1)e.call(n[r],n[r],r,n),t&&n[r].eachChild(e,t);return this}},{key:"index",value:function(){return Bu(this.node)}},{key:"hasClass",value:function(e){return wu(this.node,e)}},{key:"addClass",value:function(e){return xu(this.node,e),this}},{key:"removeClass",value:function(e){return Cu(this.node,e),this}},{key:"toggleClass",value:function(e,t){return ku(this.node,e,t),this}},{key:"toLocalPoint",value:function(e,t){return Zl(this.node,e,t)}},{key:"toGeometryShape",value:function(){return Ql(this.node)}},{key:"translateCenterToPoint",value:function(e){var t=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-t.x,e.y-t.y),this}},{key:"translateAndAutoOrient",value:function(e,t,n){return hf(this.node,e,t,n),this}},{key:"animate",value:function(e){return tf(this.node,e)}},{key:"animateTransform",value:function(e){return nf(this.node,e)}},{key:"animateAlongPath",value:function(e,t){return af(this.node,e,t)}},{key:"normalizePath",value:function(){return"path"===this.tagName()&&this.attr("d",ol.normalize(this.attr("d"))),this}},{key:"bbox",value:function(e,t){return Xl(this.node,e,t)}},{key:"getBBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $l(this.node,{recursive:t.recursive,target:t.target?e.toNode(t.target):null})}},{key:"sample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.node instanceof SVGPathElement?pl(this.node,e):[]}},{key:"toPath",value:function(){return e.create(El(this.node))}},{key:"toPathData",value:function(){return Ol(this.node)}},{key:Symbol.toStringTag,get:function(){return e.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id},set:function(e){this.node.id=e}}]),e}();function sl(e,t,n){for(var r,i=n.eol,o=n.baseSize,a=n.lineHeight,s=0,u={},c=t.length-1,l=0;l<=c;l+=1){var f=t[l],h=null;if("object"===typeof f){var d=f.attrs,p=al.create("tspan",d);r=p.node;var g=f.t;i&&l===c&&(g+=i),r.textContent=g;var v=d.class;v&&p.addClass(v),n.includeAnnotationIndices&&p.attr("annotations",f.annotations.join(",")),void 0===(h=parseFloat(d["font-size"]))&&(h=o),h&&h>s&&(s=h)}else i&&l===c&&(f+=i),r=document.createTextNode(f||" "),o&&o>s&&(s=o);e.appendChild(r)}return s&&(u.maxFontSize=s),a?u.lineHeight=a:s&&(u.lineHeight=1.2*s),u}!function(e){function t(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&r.node instanceof SVGElement&&"function"===typeof r.animate&&"function"===typeof r.sample&&"function"===typeof r.normalizePath&&"function"===typeof r.toPath}function n(t,n,r){return new e(t,n,r)}function r(e){return t(e)?e.node:e}e.toStringTag="X6.".concat(e.name),e.isVector=t,e.create=n,e.createVectors=function(e){if("<"===e[0]){for(var t=Iu(e),r=[],i=0,o=t.childNodes.length;i<o;i+=1){var a=t.childNodes[i];r.push(n(document.importNode(a,!0)))}return r}return[n(e)]},e.toNode=r,e.toNodes=function(e){return Array.isArray(e)?e.map(function(e){return r(e)}):[r(e)]}}(al||(al={}));var ul=/em$/;function cl(e,t){var n=parseFloat(e);return ul.test(e)?n*t:n}function ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=u.sanitize(t);var r=n.eol,i=n.textPath,o=n.textVerticalAnchor,a="middle"===o||"bottom"===o||"top"===o,s=n.x;void 0===s&&(s=e.getAttribute("x")||0);var c=n.includeAnnotationIndices,l=n.annotations;l&&!Array.isArray(l)&&(l=[l]);var f=n.lineHeight,h="auto"===f,d=h?"1.5em":f||"1em";Wu(e),tc(e,{"xml:space":"preserve",display:t||n.displayEmpty?null:"none"});var p,g,v=tc(e,"font-size"),y=parseFloat(v);y||(y=16,!a&&!l||v||tc(e,"font-size","".concat(y))),i?("string"===typeof i&&(i={d:i}),p=function(e,t){var n=al.create(t),r=al.create("textPath"),i=e.d;if(i&&void 0===e["xlink:href"]){var o=al.create("path").attr("d",i).appendTo(n.defs());r.attr("xlink:href","#".concat(o.id))}return"object"===typeof e&&r.attr(e),r.node}(i,e)):p=document.createDocumentFragment();for(var m,b=0,w=t.split("\n"),x=[],C=w.length-1,k=0;k<=C;k+=1){g=d;var E="v-line",O=Du("tspan"),S=void 0,A=w[k];if(A)if(l){var T=(S=sl(O,u.annotate(A,l,{offset:-b,includeAnnotationIndices:c}),{eol:k!==C&&r,baseSize:y,lineHeight:h?null:d,includeAnnotationIndices:c})).lineHeight;T&&h&&0!==k&&(g=T),0===k&&(m=.8*S.maxFontSize)}else r&&k!==C&&(A+=r),O.textContent=A;else{O.textContent="-",E+=" v-empty-line";var M=O.style;M.fillOpacity=0,M.strokeOpacity=0,l&&(S={})}S&&x.push(S),k>0&&O.setAttribute("dy",g),(k>0||i)&&O.setAttribute("x",s),O.className.baseVal=E,p.appendChild(O),b+=A.length+1}if(a)if(l)g=function(e,t,n,r){if(!Array.isArray(t))return 0;var i=t.length;if(!i)return 0;for(var o=t[0],a=cl(o.maxFontSize,n)||n,s=0,u=cl(r,n),c=1;c<i;c+=1)s+=cl((o=t[c]).lineHeight,n)||u;var l,f=cl(o.maxFontSize,n)||n;switch(e){case"middle":l=a/2-.15*f-s/2;break;case"bottom":l=-.25*f-s;break;default:case"top":l=.8*a}return l}(o,x,y,d);else if("top"===o)g="0.8em";else{var _;switch(C>0?(_=parseFloat(d)||1,_*=C,ul.test(d)||(_/=y)):_=0,o){case"middle":g="".concat(.3-_/2,"em");break;case"bottom":g="".concat(-_-.3,"em")}}else 0===o?g="0em":o?g=o:(g=0,null==e.getAttribute("y")&&e.setAttribute("y","".concat(m||"0.8em")));p.firstChild.setAttribute("dy",g),e.appendChild(p)}function fl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t.width,o=t.height,s=r.svgDocument||Du("svg"),u=Du("text"),c=Du("tspan"),l=document.createTextNode("");tc(u,n),u.appendChild(c),u.style.opacity="0",u.style.display="block",c.style.display="block",c.appendChild(l),s.appendChild(u);var f=null==s.parentNode;f&&document.body.appendChild(s);for(var h,d,p,g=r.eol||"\n",v=r.separator||" ",y=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,m=!1!==r.breakWord,b=[],w={},x=[],C=function(e,t,n,r){var i=[],o=[];if(null!=t){var a=e.split(t);if(i.push.apply(i,Object(fu.a)(a)),"string"===typeof t)for(var s=0,u=a.length-1;s<u;s+=1)o.push(t);else for(var c=e.match(new RegExp(t,"g")),l=0,f=a.length-1;l<f;l+=1)o.push(c?c[l]:"")}else{for(var h="",d=0,p=e.length;d<p;d+=1){var g=e[d];" "===g?(i.push(h),o.push(" "),h=""):g.match(/[^\x00-\xff]/)?(h.length&&(i.push(h),o.push("")),i.push(g),o.push(""),h=""):h+=g}h.length&&i.push(h)}for(var v=0;v<i.length;v+=1){var y=i[v];if(y.indexOf(n)>=0&&y.length>1){for(var m=y.split(n),b=0,w=m.length-1;b<w;b+=1)m.splice(2*b+1,0,n);var x=m.filter(function(e){return""!==e});i.splice.apply(i,[v,1].concat(Object(fu.a)(x)));var C=x.map(function(){return""});C.pop(),o.splice.apply(o,[v,0].concat(Object(fu.a)(C)))}}for(var k=0;k<i.length;k+=1){var E=i[k],O=E.search(r);O>0&&O<E.length-1&&(i.splice(k,1,E.substring(0,O+1),E.substring(O+1)),o.splice(k,0,""))}return{words:i,separators:o}}(e,r.separator,g,y),k=C.words,E=C.separators,O=0,S=0,T=k.length;O<T;O+=1){var M=k[O];if(M)if(M!==g){if(null!=x[S]?(p=E[O-1]||"",l.data="".concat(x[S]).concat(p).concat(M)):l.data=M,c.getComputedTextLength()<=i)x[S]=l.data,w[S]=E[O],h&&(b[S]=!0,S+=1,h=0);else{if(m){if(!x[S]||h){var _=!!h,j=1===M.length;if(h=M.length-1,_||j){if(j){if(!x[S]){x=[];break}k.splice(O,2,M+k[O+1]),E.splice(O+1,1),b[S]=!0,S+=1,T-=1,O-=1;continue}k[O]=M.substring(0,h),k[O+1]=M.substring(h)+k[O+1]}else k.splice(O,1,M.substring(0,h),M.substring(h)),E.splice(O,0,""),T+=1,S&&!b[S-1]&&(S-=1);O-=1;continue}}else if(!x[S]){x[S]=M,b[S]=!0,S+=1;continue}S+=1,O-=1}if(null!=o){if(null==d){var P=void 0;d=(P="auto"===n.lineHeight?{value:1.5,unit:"em"}:a.parseCssNumeric(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===P.unit&&(A.IS_FIREFOX?d*=c.getBBox().height:d*=u.getBBox().height)}if(d*x.length>o){var N=Math.floor(o/d)-1,R=x[N],D=x[N+1];if(x.splice(N+1),null==R)break;var I=r.ellipsis;if(!I)break;"string"!==typeof I&&(I="\u2026");var L=R;D&&m&&(L+=p+D);var F=L.length,B=void 0,z=void 0;do{if(z=L[F],B=L.substring(0,F),z?z.match(v)&&(B+=z):B+=w[N],B+=I,l.data=B,c.getComputedTextLength()<=i){x[N]=B;break}F-=1}while(F>=0);break}}}else b[S]=!0,x[S+=1]=""}return Hu(f?s:u),x.join(g)}var hl=.551784;function dl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=e.getAttribute(t);if(null==r)return n;var i=parseFloat(r);return Number.isNaN(i)?n:i}function pl(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.getTotalLength(),i=[],o=0;o<r;)t=e.getPointAtLength(o),i.push({distance:o,x:t.x,y:t.y}),o+=n;return i}function gl(e){return["M",dl(e,"x1"),dl(e,"y1"),"L",dl(e,"x2"),dl(e,"y2")].join(" ")}function vl(e){var t=bl(e);return 0===t.length?null:"".concat(ml(t)," Z")}function yl(e){var t=bl(e);return 0===t.length?null:ml(t)}function ml(e){var t=e.map(function(e){return"".concat(e.x," ").concat(e.y)});return"M ".concat(t.join(" L"))}function bl(e){var t=[],n=e.points;if(n)for(var r=0,i=n.numberOfItems;r<i;r+=1)t.push(n.getItem(r));return t}function wl(e){var t=dl(e,"cx",0),n=dl(e,"cy",0),r=dl(e,"r"),i=r*hl;return["M",t,n-r,"C",t+i,n-r,t+r,n-i,t+r,n,"C",t+r,n+i,t+i,n+r,t,n+r,"C",t-i,n+r,t-r,n+i,t-r,n,"C",t-r,n-i,t-i,n-r,t,n-r,"Z"].join(" ")}function xl(e){var t=dl(e,"cx",0),n=dl(e,"cy",0),r=dl(e,"rx"),i=dl(e,"ry")||r,o=r*hl,a=i*hl;return["M",t,n-i,"C",t+o,n-i,t+r,n-a,t+r,n,"C",t+r,n+a,t+o,n+i,t,n+i,"C",t-o,n+i,t-r,n+a,t-r,n,"C",t-r,n-a,t-o,n-i,t,n-i,"Z"].join(" ")}function Cl(e){return kl({x:dl(e,"x",0),y:dl(e,"y",0),width:dl(e,"width",0),height:dl(e,"height",0),rx:dl(e,"rx",0),ry:dl(e,"ry",0)})}function kl(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=Math.min(e.rx||e["top-rx"]||0,r/2),a=Math.min(e.rx||e["bottom-rx"]||0,r/2),s=Math.min(e.ry||e["top-ry"]||0,i/2),u=Math.min(e.ry||e["bottom-ry"]||0,i/2);return(o||a||s||u?["M",t,n+s,"v",i-s-u,"a",a,u,0,0,0,a,u,"h",r-2*a,"a",a,u,0,0,0,a,-u,"v",-(i-u-s),"a",o,s,0,0,0,-o,-s,"h",-(r-2*o),"a",o,s,0,0,0,-o,s,"Z"]:["M",t,n,"H",t+r,"V",n+i,"H",t,"V",n,"Z"]).join(" ")}function El(e){var t=Du("path");tc(t,tc(e));var n=Ol(e);return n&&t.setAttribute("d",n),t}function Ol(e){var t=e.tagName.toLowerCase();switch(t){case"path":return e.getAttribute("d");case"line":return gl(e);case"polygon":return vl(e);case"polyline":return yl(e);case"ellipse":return xl(e);case"circle":return wl(e);case"rect":return Cl(e)}throw new Error('"'.concat(t,'" cannot be converted to svg path element.'))}function Sl(e,t,n,r){var i=2*Math.PI-1e-6,o=e,a=t,s=n,u=r;if(u<s){var c=s;s=u,u=c}var l=u-s,f=l<Math.PI?"0":"1",h=Math.cos(s),d=Math.sin(s),p=Math.cos(u),g=Math.sin(u);return l>=i?o?"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"M0,").concat(o,"A").concat(o,",").concat(o," 0 1,0 0,").concat(-o,"A").concat(o,",").concat(o," 0 1,0 0,").concat(o,"Z"):"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"Z"):o?"M".concat(a*h,",").concat(a*d,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*p,",").concat(a*g,"L").concat(o*p,",").concat(o*g,"A").concat(o,",").concat(o," 0 ").concat(f,",0 ").concat(o*h,",").concat(o*d,"Z"):"M".concat(a*h,",").concat(a*d,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*p,",").concat(a*g,"L0,0")+"Z"}var Al=Du("svg"),Tl=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Ml=/[ ,]+/,_l=/^(\w+)\((.*)\)/;function jl(e,t){var n=Al.createSVGPoint();return n.x=e,n.y=t,n}function Pl(e){var t=Al.createSVGMatrix();if(null!=e){var n=e,r=t;for(var i in n)r[i]=n[i]}return t}function Nl(e){return null!=e?(e instanceof DOMMatrix||(e=Pl(e)),Al.createSVGTransformFromMatrix(e)):Al.createSVGTransform()}function Rl(e){var t=Pl(),n=null!=e&&e.match(Tl);if(!n)return t;for(var r=0,i=n.length;r<i;r+=1){var o=n[r].match(_l);if(o){var a=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=Pl(),h=o[2].split(Ml);switch(o[1].toLowerCase()){case"scale":a=parseFloat(h[0]),s=void 0===h[1]?a:parseFloat(h[1]),f=f.scaleNonUniform(a,s);break;case"translate":u=parseFloat(h[0]),c=parseFloat(h[1]),f=f.translate(u,c);break;case"rotate":l=parseFloat(h[0]),u=parseFloat(h[1])||0,c=parseFloat(h[2])||0,f=0!==u||0!==c?f.translate(u,c).rotate(l).translate(-u,-c):f.rotate(l);break;case"skewx":l=parseFloat(h[0]),f=f.skewX(l);break;case"skewy":l=parseFloat(h[0]),f=f.skewY(l);break;case"matrix":f.a=parseFloat(h[0]),f.b=parseFloat(h[1]),f.c=parseFloat(h[2]),f.d=parseFloat(h[3]),f.e=parseFloat(h[4]),f.f=parseFloat(h[5]);break;default:continue}t=t.multiply(f)}}return t}function Dl(e){var t=e||{},n=null!=t.a?t.a:1,r=null!=t.b?t.b:0,i=null!=t.c?t.c:0,o=null!=t.d?t.d:1,a=null!=t.e?t.e:0,s=null!=t.f?t.f:0;return"matrix(".concat(n,",").concat(r,",").concat(i,",").concat(o,",").concat(a,",").concat(s,")")}function Il(e){var t,n,r;if(e){var i=Ml;if(e.trim().indexOf("matrix")>=0){var o=Fl(Rl(e));t=[o.translateX,o.translateY],n=[o.rotation],r=[o.scaleX,o.scaleY];var a=[];0===t[0]&&0===t[1]||a.push("translate(".concat(t.join(","),")")),1===r[0]&&1===r[1]||a.push("scale(".concat(r.join(","),")")),0!==n[0]&&a.push("rotate(".concat(n[0],")")),e=a.join(" ")}else{var s=e.match(/translate\((.*?)\)/);s&&(t=s[1].split(i));var u=e.match(/rotate\((.*?)\)/);u&&(n=u[1].split(i));var c=e.match(/scale\((.*?)\)/);c&&(r=c[1].split(i))}}var l=r&&r[0]?parseFloat(r[0]):1;return{raw:e||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:l,sy:r&&r[1]?parseFloat(r[1]):l}}}function Ll(e,t){return{x:t.x*e.a+t.y*e.c+0,y:t.x*e.b+t.y*e.d+0}}function Fl(e){var t=Ll(e,{x:0,y:1}),n=Ll(e,{x:1,y:0}),r=180/Math.PI*Math.atan2(t.y,t.x)-90;return{skewX:r,skewY:180/Math.PI*Math.atan2(n.y,n.x),translateX:e.e,translateY:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),rotation:r}}function Bl(e){var t,n,r,i;return e?(t=null==e.a?1:e.a,i=null==e.d?1:e.d,n=e.b,r=e.c):t=i=1,{sx:n?Math.sqrt(t*t+n*n):t,sy:r?Math.sqrt(r*r+i*i):i}}function zl(e){var t={x:0,y:1};return e&&(t=Ll(e,t)),{angle:kc.normalize(kc.toDeg(Math.atan2(t.y,t.x))-90)}}function Vl(e){return{tx:e&&e.e||0,ty:e&&e.f||0}}function Ul(e,t){var n=jl(e.x,e.y).matrixTransform(t);return new Ic(n.x,n.y)}function Gl(e,t){return new Fc(Ul(e.start,t),Ul(e.end,t))}function Hl(e,t){var n=e instanceof zc?e.points:e;return Array.isArray(n)||(n=[]),new zc(n.map(function(e){return Ul(e,t)}))}function Wl(e,t){var n=Al.createSVGPoint();n.x=e.x,n.y=e.y;var r=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y;var i=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y+e.height;var o=n.matrixTransform(t);n.x=e.x,n.y=e.y+e.height;var a=n.matrixTransform(t),s=Math.min(r.x,i.x,o.x,a.x),u=Math.max(r.x,i.x,o.x,a.x),c=Math.min(r.y,i.y,o.y,a.y),l=Math.max(r.y,i.y,o.y,a.y);return new Lc(s,c,u-s,l-c)}var ql=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Xl(e,t,n){var r,i=e.ownerSVGElement;if(!i)return new Lc(0,0,0,0);try{r=e.getBBox()}catch(o){r={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}return t?Lc.create(r):Wl(r,Jl(e,n||i))}function $l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.ownerSVGElement||!Au(e)){if(Ku(e)){var r=sf(e),i=r.left,o=r.top,a=r.width,s=r.height;return new Lc(i,o,a,s)}return new Lc(0,0,0,0)}var u=n.target;if(!n.recursive){try{t=e.getBBox()}catch(p){t={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}return u?Wl(t,Jl(e,u)):Lc.create(t)}var c=e.childNodes,l=c.length;if(0===l)return $l(e,{target:u});u||(u=e);for(var f=0;f<l;f+=1){var h=c[f],d=void 0;d=0===h.childNodes.length?$l(h,{target:u}):$l(h,{target:u,recursive:!0}),t=t?t.union(d):d}return t}function Yl(e){for(var t=e,n=t?t.tagName.toLowerCase():"";"g"===n;)n=(t=t.firstElementChild)?t.tagName.toLowerCase():"";var r,i,o=function(e){var n=t.getAttribute(e),r=n?parseFloat(n):0;return Number.isNaN(r)?0:r};switch(n){case"rect":i=new Lc(o("x"),o("y"),o("width"),o("height"));break;case"circle":r=o("r"),i=new Lc(o("cx")-r,o("cy")-r,2*r,2*r)}return i}function Kl(e,t){var n=Pl();if(Au(t)&&Au(e)){for(var r=e,i=[];r&&r!==t;){var o=Rl(r.getAttribute("transform")||null);i.push(o),r=r.parentNode}i.reverse().forEach(function(e){n=n.multiply(e)})}return n}function Jl(e,t){if(Au(t)&&Au(e)){var n=t.getScreenCTM(),r=e.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return Pl()}function Zl(e,t,n){var r=e instanceof SVGSVGElement?e:e.ownerSVGElement,i=r.createSVGPoint();i.x=t,i.y=n;try{var o=r.getScreenCTM(),a=i.matrixTransform(o.inverse()),s=Jl(e,r).inverse();return a.matrixTransform(s)}catch(u){return i}}function Ql(e){var t=function(t){var n=e.getAttribute(t),r=n?parseFloat(n):0;return Number.isNaN(r)?0:r};switch(e instanceof SVGElement&&e.nodeName.toLowerCase()){case"rect":return new Lc(t("x"),t("y"),t("width"),t("height"));case"circle":return new Bc(t("cx"),t("cy"),t("r"),t("r"));case"ellipse":return new Bc(t("cx"),t("cy"),t("rx"),t("ry"));case"polyline":var n=bl(e);return new zc(n);case"polygon":var r=bl(e);return r.length>1&&r.push(r[0]),new zc(r);case"path":var i=e.getAttribute("d");return ol.isValid(i)||(i=ol.normalize(i)),ol.parse(i);case"line":return new Fc(t("x1"),t("y1"),t("x2"),t("y2"))}return $l(e)}function ef(e,t,n){var r=e instanceof SVGSVGElement?e:e.ownerSVGElement,i=$l(n=n||r),o=i.getCenter();if(!i.intersectsWithLineFromCenterToPoint(t))return null;var a=null,s=e.tagName.toLowerCase();if("rect"===s){var u=new Lc(parseFloat(e.getAttribute("x")||"0"),parseFloat(e.getAttribute("y")||"0"),parseFloat(e.getAttribute("width")||"0"),parseFloat(e.getAttribute("height")||"0")),c=Jl(e,n),l=Fl(c),f=r.createSVGTransform();f.setRotate(-l.rotation,o.x,o.y);var h=Wl(u,f.matrix.multiply(c));a=Lc.create(h).intersectsWithLineFromCenterToPoint(t,l.rotation)}else if("path"===s||"polygon"===s||"polyline"===s||"circle"===s||"ellipse"===s){for(var d=pl("path"===s?e:El(e)),p=1/0,g=[],v=0,y=d.length;v<y;v+=1){var m=d[v],b=jl(m.x,m.y);b=b.matrixTransform(Jl(e,n));var w=Ic.create(b),x=w.distance(o),C=1.1*w.distance(t),k=x+C;k<p?(p=k,g=[{sample:m,refDistance:C}]):k<p+1&&g.push({sample:m,refDistance:C})}g.sort(function(e,t){return e.refDistance-t.refDistance}),g[0]&&(a=Ic.create(g[0].sample))}return a}function tf(e,t){return rf(e,t,"animate")}function nf(e,t){return rf(e,t,"animateTransform")}function rf(e,t,n){var r=Du(n);e.appendChild(r);try{return of(r,t)}catch(i){}return function(){}}function of(e,t){var n=t.start,r=t.complete,i=t.repeat;tc(e,ql(t,["start","complete","repeat"])),n&&e.addEventListener("beginEvent",n),r&&e.addEventListener("endEvent",r),i&&e.addEventListener("repeatEvent",i);var o=e;return o.beginElement(),function(){return o.endElement()}}function af(e,t,n){var r=Su(n),i=Du("animateMotion"),o=Du("mpath");tc(o,{"xlink:href":"#".concat(r)}),i.appendChild(o),e.appendChild(i);try{return of(i,t)}catch(p){if("fake"===document.documentElement.getAttribute("smiling")){var a=i;a.animators=[];var s=window,u=a.getAttribute("id");u&&(s.id2anim[u]=a);for(var c=s.getTargets(a),l=0,f=c.length;l<f;l+=1){var h=c[l],d=new s.Animator(a,h,l);s.animators.push(d),a.animators[l]=d,d.register()}}}return function(){}}function sf(e){var t=0,n=0,r=0,i=0;if(e){for(var o=e;o;)t+=o.offsetLeft,n+=o.offsetTop,(o=o.offsetParent)&&(t+=parseInt(xc(o,"borderLeft"),10),n+=parseInt(xc(o,"borderTop"),10));r=e.offsetWidth,i=e.offsetHeight}return{left:t,top:n,width:r,height:i}}function uf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return Rl(tc(e,"transform"));if(n.absolute)e.setAttribute("transform",Dl(t));else{var r=e.transform,i=Nl(t);r.baseVal.appendItem(i)}}function cf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=tc(e,"transform"),o=Il(i);if(null==t)return o.translation;i=(i=o.raw).replace(/translate\([^)]*\)/g,"").trim();var a=r.absolute?t:o.translation.tx+t,s=r.absolute?n:o.translation.ty+n,u="translate(".concat(a,",").concat(s,")");e.setAttribute("transform","".concat(u," ").concat(i).trim())}function lf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=tc(e,"transform"),a=Il(o);if(null==t)return a.rotation;o=(o=a.raw).replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s=i.absolute?t:a.rotation.angle+t,u=null!=n&&null!=r?",".concat(n,",").concat(r):"",c="rotate(".concat(s).concat(u,")");e.setAttribute("transform","".concat(o," ").concat(c).trim())}function ff(e,t,n){var r=tc(e,"transform"),i=Il(r);if(null==t)return i.scale;n=null==n?t:n,r=(r=i.raw).replace(/scale\([^)]*\)/g,"").trim();var o="scale(".concat(t,",").concat(n,")");e.setAttribute("transform","".concat(r," ").concat(o).trim())}function hf(e,t,n,r){var i=Ic.create(t),o=Ic.create(n);r||(r=e instanceof SVGSVGElement?e:e.ownerSVGElement);var a=ff(e);e.setAttribute("transform","");var s=$l(e,{target:r}).scale(a.sx,a.sy),u=Nl();u.setTranslate(-s.x-s.width/2,-s.y-s.height/2);var c=Nl(),l=i.angleBetween(o,i.clone().translate(1,0));l&&c.setRotate(l,0,0);var f=Nl(),h=i.clone().move(o,s.width/2);f.setTranslate(2*i.x-h.x,2*i.y-h.y);var d=Jl(e,r),p=Nl();p.setMatrix(f.matrix.multiply(c.matrix.multiply(u.matrix.multiply(d.scale(a.sx,a.sy))))),e.setAttribute("transform",Dl(p.matrix))}var df=function(){function e(t,n,r){Object(Es.a)(this,e),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=A.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=n,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return Object(Oc.a)(e,[{key:"enable",value:function(){A.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):_()(this.target).on("mousewheel",this.onWheel)}},{key:"disable",value:function(){A.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):_()(this.target).off("mousewheel")}},{key:"onWheel",value:function(e){var t,n=this;(null==this.onWheelGuard||this.onWheelGuard(e))&&(this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),0===this.deltaX&&0===this.deltaY||(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(function(){n.didWheel(e)})))}},{key:"didWheel",value:function(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),e}(),pf=al.isVector,gf=al.create,vf=al.createVectors;function yf(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r&&clearTimeout(r),r=window.setTimeout(function(){e.apply(t,o)},n)}}var mf,bf,wf="undefined"!==typeof ResizeObserver?function(e){var t=null,n=[],r=yf(function(){n.forEach(function(t){t(e)})}),i=function(){t&&(t.disconnect(),n=[],t=null)};return{element:e,bind:function(i){t||(t=function(){var t=new ResizeObserver(r);return t.observe(e),r(),t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}}:function(e){var t=null,n=[],r=yf(function(){n.forEach(function(t){return t(e)})}),i=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=null,n=[])};return{element:e,bind:function(i){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("tabindex","-1"),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}};!function(e){var t=new WeakMap;function n(e){var n=t.get(e);return n||(n=wf(e),t.set(e,n),n)}e.bind=function(e,t){var r=n(e);return r.bind(t),function(){return r.unbind(t)}},e.clear=function(e){!function(e){e.destroy(),t.delete(e.element)}(n(e))}}(mf||(mf={})),function(e){var t=[],n=[],r=0,i=function(){return performance.now()},o=function(e){return e[0]},a=function(e){return 1===n.push(e)&&s()},s=function(){var e=function(){return n.splice(0,n.length).forEach(function(e){return e()})};if("undefined"!==typeof MessageChannel){var t=new MessageChannel,r=t.port1,i=t.port2;return r.onmessage=e,function(){return i.postMessage(null)}}return function(){return setTimeout(e)}}(),u=function n(){r=i()+1e3/60;for(var s=o(t);s&&!e.shouldYield();){var u=s,c=u.callback,l=u.data;s.callback=null;var f=c&&c(l);f?s.callback=f:t.shift(),s=o(t)}s&&a(n)};e.scheduleTask=function(e,n){var r={callback:e,data:n};t.push(r),a(u)},e.shouldYield=function(){var e,t;return(null===(t=null===(e=navigator)||void 0===e?void 0:e.scheduling)||void 0===t?void 0:t.isInputPending())||i()>=r}}(bf||(bf={}));var xf=n(18),Cf=function(){function e(t){Object(Es.a)(this,e),this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(Oc.a)(e,[{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"!==typeof e){!this.exist(e)||r||A.isApplyingHMR()||this.onDuplicated(e);var i=this.options.process,o=i?s.call(i,this,e,t):t;return this.data[e]=o,o}Object.keys(e).forEach(function(r){n.register(r,e[r],t)})}},{key:"unregister",value:function(e){var t=e?this.data[e]:null;return delete this.data[e],t}},{key:"get",value:function(e){return e?this.data[e]:null}},{key:"exist",value:function(e){return!!e&&null!=this.data[e]}},{key:"onDuplicated",value:function(e){try{throw this.options.onConflict&&s.call(this.options.onConflict,this,e),new Error("".concat(o.upperFirst(this.options.type)," with name '").concat(e,"' already registered."))}catch(t){throw t}}},{key:"onNotFound",value:function(e,t){throw new Error(this.getSpellingSuggestion(e,t))}},{key:"getSpellingSuggestion",value:function(e,t){var n=this.getSpellingSuggestionForName(e),r=t?"".concat(t," ").concat(o.lowerFirst(this.options.type)):this.options.type;return"".concat(o.upperFirst(r)," with name '").concat(e,"' does not exist.").concat(n?" Did you mean '".concat(n,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(e){return o.getSpellingSuggestion(e,Object.keys(this.data),function(e){return e})}},{key:"names",get:function(){return Object.keys(this.data)}}]),e}();!function(e){e.create=function(t){return new e(t)}}(Cf||(Cf={}));var kf={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Ef={},Of={position:$f("x","width","origin")},Sf={position:$f("y","height","origin")},Af={position:$f("x","width","corner")},Tf={position:$f("y","height","corner")},Mf={set:Yf("width","width")},_f={set:Yf("height","height")},jf={set:Yf("rx","width")},Pf={set:Yf("ry","height")},Nf={set:function(e){var t=Yf("r","width"),n=Yf("r","height");return function(e,r){var i=r.refBBox,o=i.height>i.width?t:n;return s.call(o,this,e,r)}}()},Rf={set:function(e,t){var n=t.refBBox,r=parseFloat(e),i=a.isPercentage(e);i&&(r/=100);var o,s=Math.sqrt(n.height*n.height+n.width*n.width);return Number.isFinite(r)&&(o=i||r>=0&&r<=1?r*s:Math.max(r+s,0)),{r:o}}},Df={set:Yf("cx","width")},If={set:Yf("cy","height")},Lf={set:Jf({resetOffset:!0})},Ff={set:Jf({resetOffset:!1})},Bf={set:Zf({resetOffset:!0})},zf={set:Zf({resetOffset:!1})},Vf=Nf,Uf=Lf,Gf=Bf,Hf=Of,Wf=Sf,qf=Mf,Xf=_f;function $f(e,t,n){return function(r,i){var o=i.refBBox;if(null==r)return null;var s,u=parseFloat(r),c=a.isPercentage(r);if(c&&(u/=100),Number.isFinite(u)){var l=o[n];s=c||u>0&&u<1?l[e]+o[t]*u:l[e]+u}var f=new Ic;return f[e]=s||0,f}}function Yf(e,t){return function(n,r){var i=r.refBBox,o=parseFloat(n),s=a.isPercentage(n);s&&(o/=100);var u={};if(Number.isFinite(o)){var c=s||o>=0&&o<=1?o*i[t]:Math.max(o+i[t],0);u[e]=c}return u}}function Kf(e,t){var n=t&&t.resetOffset;return function(t,r){var i=r.view,o=r.elem,a=r.refBBox,s=i.$(o),u=s.data("x6-shape");if(!u||u.value!==t){var c=e(t);u={value:t,shape:c,shapeBBox:c.bbox()},s.data("x6-shape",u)}var l=u.shape.clone(),f=u.shapeBBox.clone(),h=f.getOrigin(),d=a.getOrigin();f.x=d.x,f.y=d.y;var p=a.getMaxScaleToFit(f,d),g=0===f.width||0===a.width?1:p.sx,v=0===f.height||0===a.height?1:p.sy;return l.scale(g,v,h),n&&l.translate(-h.x,-h.y),l}}function Jf(e){var t=Kf(function(e){return ol.parse(e)},e);return function(e,n){return{d:t(e,n).serialize()}}}function Zf(e){var t=Kf(function(e){return new zc(e)},e);return function(e,n){return{points:t(e,n).serialize()}}}var Qf={qualify:i.isPlainObject,set:function(e,t){var n=t.view;return"url(#".concat(n.graph.defineGradient(e),")")}},eh={qualify:i.isPlainObject,set:function(e,t){var n=t.view,r=n.cell,i=Object.assign({},e);if(r.isEdge()&&"linearGradient"===i.type){var o=n,a=o.sourcePoint,s=o.targetPoint;i.id="gradient-".concat(i.type,"-").concat(r.id),i.attrs=Object.assign(Object.assign({},i.attrs),{x1:a.x,y1:a.y,x2:s.x,y2:s.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(i.id)}return"url(#".concat(n.graph.defineGradient(i),")")}},th={qualify:function(e,t){var n=t.attrs;return null==n.textWrap||!i.isPlainObject(n.textWrap)},set:function(e,t){var n=t.view,r=t.elem,i=t.attrs,o=n.$(r),a=o.data("x6-text"),s=function(e){try{return JSON.parse(e)}catch(t){return e}},u={x:i.x,eol:i.eol,annotations:s(i.annotations),textPath:s(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:"true"===(i["display-empty"]||i.displayEmpty),lineHeight:i["line-height"]||i.lineHeight},l=i["font-size"]||i.fontSize,f=JSON.stringify([e,u]);if(l&&r.setAttribute("font-size",l),null==a||a!==f){var h=u.textPath;if(null!=h&&"object"===typeof h){var d=h.selector;if("string"===typeof d){var p=n.find(d)[0];p instanceof SVGPathElement&&(c.ensureId(p),u.textPath=Object.assign({"xlink:href":"#".concat(p.id)},h))}}c.text(r,"".concat(e),u),o.data("x6-text",f)}}},nh={qualify:i.isPlainObject,set:function(e,t){var n=t.view,r=t.elem,i=t.attrs,o=t.refBBox,u=e,l=u.width||0;a.isPercentage(l)?o.width*=parseFloat(l)/100:l<=0?o.width+=l:o.width=l;var f,h=u.height||0;a.isPercentage(h)?o.height*=parseFloat(h)/100:h<=0?o.height+=h:o.height=h;var d=u.text;null==d&&(d=i.text),f=null!=d?c.breakText("".concat(d),o,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:u.ellipsis,hyphen:u.hyphen,breakWord:u.breakWord}):"",s.call(th.set,this,f,{view:n,elem:r,attrs:i,refBBox:o,cell:n.cell})}},rh=function(e,t){return void 0!==t.attrs.text},ih={qualify:rh},oh={qualify:rh},ah={qualify:rh},sh={qualify:rh},uh={qualify:rh},ch={qualify:rh},lh={qualify:function(e,t){return t.elem instanceof SVGElement},set:function(e,t){var n=t.view,r=t.elem,i="".concat(e),o=n.$(r),a=o.data("x6-title");if(null==a||a!==i){o.data("x6-title",i);var s=r.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase()){s.textContent=i}else{var u=document.createElementNS(r.namespaceURI,"title");u.textContent=i,r.insertBefore(u,s)}}}},fh={offset:ph("x","width","right")},hh={offset:ph("y","height","bottom")},dh={offset:function(e,t){var n=t.refBBox;return e?{x:-n.x,y:-n.y}:{x:0,y:0}}};function ph(e,t,n){return function(r,i){var o,s=i.refBBox,u=new Ic;return o="middle"===r?s[t]/2:r===n?s[t]:"number"===typeof r&&Number.isFinite(r)?r>-1&&r<1?-s[t]*r:-r:a.isPercentage(r)?s[t]*parseFloat(r)/100:0,u[e]=-(s[e]+o),u}}var gh={qualify:i.isPlainObject,set:function(e,t){var n=t.view,r=t.elem;n.$(r).css(e)}},vh={set:function(e,t){var n=t.view,r=t.elem;n.$(r).html("".concat(e))}},yh={qualify:i.isPlainObject,set:function(e,t){var n=t.view;return"url(#".concat(n.graph.defineFilter(e),")")}},mh={set:function(e){return null!=e&&"object"===typeof e&&e.id?e.id:e}};function bh(e,t,n){var r,i;"object"===typeof t?(r=t.x,i=t.y):(r=t,i=n);var o=ol.parse(e),a=o.bbox();if(a){var s=-a.height/2-a.y,u=-a.width/2-a.x;"number"===typeof r&&(u-=r),"number"===typeof i&&(s-=i),o.translate(u,s)}return o.serialize()}var wh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},xh=function(e){return kh({size:e.size,width:e.width,height:e.height,offset:e.offset},!0===e.open,!0,void 0,wh(e,["size","width","height","offset","open"]))},Ch=function(e){return kh({size:e.size,width:e.width,height:e.height,offset:e.offset},!1,!1,e.factor,wh(e,["size","width","height","offset","factor"]))};function kh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.75,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.size||10,s=e.width||o,u=e.height||o,c=new ol,l={};if(t)c.moveTo(s,0).lineTo(0,u/2).lineTo(s,u),l.fill="none";else{if(c.moveTo(0,u/2),c.lineTo(s,0),!n){var f=a.clamp(r,0,1);c.lineTo(s*f,u/2)}c.lineTo(s,u),c.close()}return Object.assign(Object.assign(Object.assign({},l),i),{tagName:"path",d:bh(c.serialize(),{x:null!=e.offset?e.offset:-s/2})})}var Eh,Oh,Sh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ah=function(e){var t=e.size,n=e.width,r=e.height,i=e.offset,o=Sh(e,["size","width","height","offset"]),a=t||10,s=n||a,u=r||a,c=new ol;return c.moveTo(0,u/2).lineTo(s/2,0).lineTo(s,u/2).lineTo(s/2,u).close(),Object.assign(Object.assign({},o),{tagName:"path",d:bh(c.serialize(),null==i?-s/2:i)})},Th=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Mh=function(e){var t=e.d,n=e.offsetX,r=e.offsetY,i=Th(e,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:bh(t,n,r)})},_h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},jh=function(e){var t=e.size,n=e.width,r=e.height,i=e.offset,o=_h(e,["size","width","height","offset"]),a=t||10,s=n||a,u=r||a,c=new ol;return c.moveTo(0,0).lineTo(s,u).moveTo(0,u).lineTo(s,0),Object.assign(Object.assign({},o),{tagName:"path",fill:"none",d:bh(c.serialize(),i||-s/2)})},Ph=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Nh=function(e){var t=e.width,n=e.height,r=e.offset,i=e.open,o=e.flip,a=Ph(e,["width","height","offset","open","flip"]),s=n||6,u=t||10,c=!0===i,l=!0===o,f=Object.assign(Object.assign({},a),{tagName:"path"});l&&(s=-s);var h=new ol;return h.moveTo(0,s).lineTo(u,0),c?f.fill="none":(h.lineTo(u,s),h.close()),f.d=bh(h.serialize(),{x:r||-u/2,y:s/2}),f},Rh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Dh=function(e){var t=e.r,n=Rh(e,["r"]),r=t||5;return Object.assign(Object.assign({cx:r},n),{tagName:"circle",r:r})},Ih=function(e){var t=e.r,n=Rh(e,["r"]),r=t||5,i=new ol;return i.moveTo(r,0).lineTo(r,2*r),i.moveTo(0,r).lineTo(2*r,r),{children:[Object.assign(Object.assign({},Dh({r:r})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:bh(i.serialize(),-r)})]}},Lh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Fh=function(e){var t=e.rx,n=e.ry,r=Lh(e,["rx","ry"]),i=t||5,o=n||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:o})};(Oh=Eh||(Eh={})).presets=l,Oh.registry=Cf.create({type:"marker"}),Oh.registry.register(Oh.presets,!0),(Eh||(Eh={})).normalize=bh;var Bh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function zh(e){return"string"===typeof e||i.isPlainObject(e)}var Vh={qualify:zh,set:function(e,t){return Hh("marker-start",e,t.view,t.attrs)}},Uh={qualify:zh,set:function(e,t){return Hh("marker-end",e,t.view,t.attrs,{transform:"rotate(180)"})}},Gh={qualify:zh,set:function(e,t){return Hh("marker-mid",e,t.view,t.attrs)}};function Hh(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o="string"===typeof t?{name:t}:t,a=o.name,s=o.args,u=Bh(o,["name","args"]),c=u;if(a&&"string"===typeof a){var l=Eh.registry.get(a);if(!l)return Eh.registry.onNotFound(a);c=l(Object.assign(Object.assign({},u),s))}var f=Object.assign(Object.assign(Object.assign({},function(e,t){var n={},r=e.stroke;"string"===typeof r&&(n.stroke=r,n.fill=r);var i=e.strokeOpacity;null==i&&(i=e["stroke-opacity"]);null==i&&(i=e.opacity);null!=i&&(n["stroke-opacity"]=i,n["fill-opacity"]=i);if("marker-mid"!==t){var o=parseFloat(e.strokeWidth||e["stroke-width"]);if(Number.isFinite(o)&&o>1){var a=Math.ceil(o/2);n.refX="marker-start"===t?a:-a}}return n}(r,e)),i),c);return Object(T.a)({},e,"url(#".concat(n.graph.defineMarker(f),")"))}var Wh,qh,Xh=function(e,t){return t.view.cell.isEdge()},$h={qualify:Xh,set:function(e,t){var n,r=t.view,i=e.stubs||0;if(Number.isFinite(i)&&0!==i){var o;if(i<0)o=((r.getConnectionLength()||0)+i)/2;else o=i;var a=r.getConnection();if(a){var s=a.divideAtLength(o),u=a.divideAtLength(-o);s&&u&&(n="".concat(s[0].serialize()," ").concat(u[1].serialize()))}}return{d:n||r.getConnectionPathData()}}},Yh={qualify:Xh,set:td("getTangentAtLength",{rotate:!0})},Kh={qualify:Xh,set:td("getTangentAtLength",{rotate:!1})},Jh={qualify:Xh,set:td("getTangentAtRatio",{rotate:!0})},Zh={qualify:Xh,set:td("getTangentAtRatio",{rotate:!1})},Qh=Yh,ed=Jh;function td(e,t){var n={x:1,y:0};return function(r,i){var o,a,s=i.view,u=s[e](Number(r));return u?(a=t.rotate?u.vector().vectorAngle(n):0,o=u.start):(o=s.path.start,a=0),0===a?{transform:"translate(".concat(o.x,",").concat(o.y,"')")}:{transform:"translate(".concat(o.x,",").concat(o.y,"') rotate(").concat(a,")")}}}!function(e){(Wh||(Wh={})).isValidDefinition=function(e,t,n){if(null!=e){if("string"===typeof e)return!0;if("function"!==typeof e.qualify||s.call(e.qualify,this,t,n))return!0}return!1}}(),(qh=Wh||(Wh={})).presets=Object.assign(Object.assign({},kf),f),qh.registry=Cf.create({type:"attribute definition"}),qh.registry.register(qh.presets,!0);var nd,rd,id,od={color:"#aaaaaa",thickness:1,markup:"rect",update:function(e,t){var n=t.thickness*t.sx,r=t.thickness*t.sy;c.attr(e,{width:n,height:r,rx:n,ry:r,fill:t.color})}},ad={color:"#aaaaaa",thickness:1,markup:"rect",update:function(e,t){var n=t.sx<=1?t.thickness*t.sx:t.thickness;c.attr(e,{width:n,height:n,rx:n,ry:n,fill:t.color})}},sd={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",c.attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}},ud=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",c.attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(e,t){var n,r=t.factor||1,i=t.width*r,o=t.height*r,a=t.thickness;n=i-a>=0&&o-a>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",t.width=i,t.height=o,c.attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}}],cd=function(){function e(){Object(Es.a)(this,e),this.patterns={},this.root=al.create(c.createSvgDocument(),{width:"100%",height:"100%"},[c.createSvgElement("defs")]).node}return Object(Oc.a)(e,[{key:"add",value:function(e,t){var n=this.root.childNodes[0];n&&n.appendChild(t),this.patterns[e]=t,al.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(e,")")}).appendTo(this.root)}},{key:"get",value:function(e){return this.patterns[e]}},{key:"has",value:function(e){return null!=this.patterns[e]}}]),e}();function ld(e,t){return null!=e?e:t}function fd(e,t){return null!=e&&Number.isFinite(e)?e:t}function hd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ld(e.color,"blue"),n=fd(e.width,1),r=fd(e.margin,2),i=fd(e.opacity,1),o=r,a=r+n;return'\n    <filter>\n      <feFlood flood-color="'.concat(t,'" flood-opacity="').concat(i,'" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="').concat(a,'" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="').concat(o,'" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  ').trim()}function dd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ld(e.color,"red"),n=fd(e.blur,0),r=fd(e.width,1),i=fd(e.opacity,1);return'\n      <filter>\n        <feFlood flood-color="'.concat(t,'" flood-opacity="').concat(i,'" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="').concat(r,'"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="').concat(n,'"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    ').trim()}function pd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fd(e.x,2),n=null!=e.y&&Number.isFinite(e.y)?[t,e.y]:t;return'\n    <filter>\n      <feGaussianBlur stdDeviation="'.concat(n,'"/>\n    </filter>\n  ').trim()}function gd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fd(e.dx,0),n=fd(e.dy,0),r=ld(e.color,"black"),i=fd(e.blur,4),o=fd(e.opacity,1);return"SVGFEDropShadowElement"in window?'<filter>\n         <feDropShadow stdDeviation="'.concat(i,'" dx="').concat(t,'" dy="').concat(n,'" flood-color="').concat(r,'" flood-opacity="').concat(o,'" />\n       </filter>').trim():'<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="'.concat(i,'" />\n         <feOffset dx="').concat(t,'" dy="').concat(n,'" result="offsetblur" />\n         <feFlood flood-color="').concat(r,'" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="').concat(o,'" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>').trim()}function vd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),t=.7152-.7152*(1-e),n=.0722-.0722*(1-e),r=.2126-.2126*(1-e),i=.7152+.2848*(1-e),o=.0722-.0722*(1-e),a=.2126-.2126*(1-e),s=.0722+.9278*(1-e);return'\n    <filter>\n      <feColorMatrix type="matrix" values="'.concat(.2126+.7874*(1-e)," ").concat(t," ").concat(n," 0 0 ").concat(r," ").concat(i," ").concat(o," 0 0 ").concat(a," ").concat(t," ").concat(s,' 0 0 0 0 0 1 0"/>\n    </filter>\n  ').trim()}function yd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),t=.769-.769*(1-e),n=.189-.189*(1-e),r=.349-.349*(1-e),i=.686+.314*(1-e),o=.168-.168*(1-e),a=.272-.272*(1-e),s=.534-.534*(1-e),u=.131+.869*(1-e);return'\n      <filter>\n        <feColorMatrix type="matrix" values="'.concat(.393+.607*(1-e)," ").concat(t," ").concat(n," 0 0 ").concat(r," ").concat(i," ").concat(o," 0 0 ").concat(a," ").concat(s," ").concat(u,' 0 0 0 0 0 1 0"/>\n      </filter>\n    ').trim()}function md(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1);return'\n      <filter>\n        <feColorMatrix type="saturate" values="'.concat(1-e,'"/>\n      </filter>\n    ').trim()}function bd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).angle,0);return'\n      <filter>\n        <feColorMatrix type="hueRotate" values="'.concat(e,'"/>\n      </filter>\n    ').trim()}function wd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),t=1-e;return'\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="'.concat(e," ").concat(t,'"/>\n          <feFuncG type="table" tableValues="').concat(e," ").concat(t,'"/>\n          <feFuncB type="table" tableValues="').concat(e," ").concat(t,'"/>\n        </feComponentTransfer>\n      </filter>\n    ').trim()}function xd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1);return'\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(e,'"/>\n        <feFuncG type="linear" slope="').concat(e,'"/>\n        <feFuncB type="linear" slope="').concat(e,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}function Cd(){var e=fd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),t=.5-e/2;return'\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(e,'" intercept="').concat(t,'"/>\n        <feFuncG type="linear" slope="').concat(e,'" intercept="').concat(t,'"/>\n        <feFuncB type="linear" slope="').concat(e,'" intercept="').concat(t,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}(nd=cd||(cd={})).presets=h,nd.registry=Cf.create({type:"grid"}),nd.registry.register(nd.presets,!0),(id=rd||(rd={})).presets=d,id.registry=Cf.create({type:"filter"}),id.registry.register(id.presets,!0);var kd,Ed,Od=function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(e,0,0,n,r),t},Sd=function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n,t.height=2*r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(e,0,0,n,r),t},Ad=function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=2*r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,n,r),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,n,r),t},Td=function(e,t){var n=e.width,r=e.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),a=null!=t.angle?-t.angle:-20,s=kc.toRad(a),u=i.width/4,c=i.height/4,l=0;l<4;l+=1)for(var f=0;f<4;f+=1)(l+f)%2>0&&(o.setTransform(1,0,0,1,(2*l-1)*u,(2*f-1)*c),o.rotate(s),o.drawImage(e,-n/2,-r/2,n,r));return i};(Ed=kd||(kd={})).presets=Object.assign({},p),Ed.presets["flip-x"]=Od,Ed.presets["flip-y"]=Sd,Ed.presets["flip-xy"]=Ad,Ed.registry=Cf.create({type:"background pattern"}),Ed.registry.register(Ed.presets,!0);var Md,_d={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(e){_d.trackable=e}};!function(e){e.snapToGrid=Pc,e.normalizeMarker=bh,e.prefix=function(e){return"".concat(_d.prefixCls,"-").concat(e)}}(Md||(Md={})),function(e){(Md||(Md={})).makeTree=function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o="function"===typeof t.children?t.children(e):e[t.children||"children"];return n||(n=t.createNode(e),i.push(n)),Array.isArray(o)&&o.forEach(function(e){var o=t.createNode(e),a=t.createEdge(n,o);i.push(o,a),r.makeTree(e,t,o,i)}),i}}();var jd,Pd,Nd,Rd="1.29.6",Dd=Md.prefix("highlighted"),Id={highlight:function(e,t,n){var r=n&&n.className||Dd;c.addClass(t,r)},unhighlight:function(e,t,n){var r=n&&n.className||Dd;c.removeClass(t,r)}},Ld=Md.prefix("highlight-opacity"),Fd={highlight:function(e,t){c.addClass(t,Ld)},unhighlight:function(e,t){c.removeClass(t,Ld)}},Bd={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},zd={highlight:function(e,t,n){var r=jd.getHighlighterId(t,n);if(!jd.hasCache(r)){n=i.defaultsDeep({},n,Bd);var o,a,s=al.create(t);try{o=s.toPathData()}catch(x){a=s.bbox(!0),o=c.rectToPathData(Object.assign(Object.assign({},n),a))}var u=c.createSvgElement("path");if(c.attr(u,Object.assign({d:o,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?c.kebablizeAttrs(n.attrs):null)),e.isEdgeElement(t))c.attr(u,"d",e.getConnectionPathData());else{var l=s.getTransformToElement(e.container),f=n.padding;if(f){null==a&&(a=s.bbox(!0));var h=a.x+a.width/2,d=a.y+a.height/2;a=c.transformRectangle(a,l);var p=Math.max(a.width,1),g=Math.max(a.height,1),v=(p+f)/p,y=(g+f)/g,m=c.createSVGMatrix({a:v,b:0,c:0,d:y,e:h-v*h,f:d-y*d});l=l.multiply(m)}c.transform(u,l)}c.addClass(u,Md.prefix("highlight-stroke"));var b=e.cell,w=function(){return jd.removeHighlighter(r)};b.on("removed",w),b.model&&b.model.on("reseted",w),e.container.appendChild(u),jd.setCache(r,u)}},unhighlight:function(e,t,n){jd.removeHighlighter(jd.getHighlighterId(t,n))}};function Vd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Ic(a.normalizePercentage(t.x,e.width),a.normalizePercentage(t.y,e.height))}function Ud(e,t,n){return Object.assign({angle:t,position:e.toJSON()},n)}!function(e){e.getHighlighterId=function(e,t){return c.ensureId(e),e.id+JSON.stringify(t)};var t={};e.setCache=function(e,n){t[e]=n},e.hasCache=function(e){return null!=t[e]},e.removeHighlighter=function(e){var n=t[e];n&&(c.remove(n),delete t[e])}}(jd||(jd={})),function(e){(Pd||(Pd={})).check=function(e,t){if("function"!==typeof t.highlight)throw new Error("Highlighter '".concat(e,"' is missing required `highlight()` method"));if("function"!==typeof t.unhighlight)throw new Error("Highlighter '".concat(e,"' is missing required `unhighlight()` method"))}}(),(Nd=Pd||(Pd={})).presets=g,Nd.registry=Cf.create({type:"highlighter"}),Nd.registry.register(Nd.presets,!0);var Gd=function(e,t){return e.map(function(e){var n=e.x,r=e.y,i=e.angle;return Ud(Vd(t,{x:n,y:r}),i||0)})},Hd=function(e,t,n){var r=n.start||0,i=n.step||20;return qd(e,t,r,function(e,t){return(e+.5-t/2)*i})},Wd=function(e,t,n){var r=n.start||0,i=n.step||360/e.length;return qd(e,t,r,function(e){return e*i})};function qd(e,t,n,r){var i=t.getCenter(),o=t.getTopCenter(),a=t.width/t.height,s=Bc.fromRect(t),u=e.length;return e.map(function(e,t){var c=n+r(t,u),l=o.clone().rotate(-c,i).scale(a,1,i),f=e.compensateRotate?-s.tangentTheta(l):0;return(e.dx||e.dy)&&l.translate(e.dx||0,e.dy||0),e.dr&&l.move(i,e.dr),Ud(l.round(),f,e)})}var Xd,$d,Yd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Kd=function(e,t,n){return tp(e,Vd(t,n.start||t.getOrigin()),Vd(t,n.end||t.getCorner()),n)},Jd=function(e,t,n){return tp(e,t.getTopLeft(),t.getBottomLeft(),n)},Zd=function(e,t,n){return tp(e,t.getTopRight(),t.getBottomRight(),n)},Qd=function(e,t,n){return tp(e,t.getTopLeft(),t.getTopRight(),n)},ep=function(e,t,n){return tp(e,t.getBottomLeft(),t.getBottomRight(),n)};function tp(e,t,n,r){var i=new Fc(t,n),o=e.length;return e.map(function(e,t){var n=e.strict,a=Yd(e,["strict"]),s=n||r.strict?(t+1)/(o+1):(t+.5)/o,u=i.pointAt(s);return(a.dx||a.dy)&&u.translate(a.dx||0,a.dy||0),Ud(u.round(),0,a)})}($d=Xd||(Xd={})).presets=v,$d.registry=Cf.create({type:"port layout"}),$d.registry.register($d.presets,!0);var np={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function rp(e,t){var n=t||{},r=n.x,o=n.y,a=n.angle,s=n.attrs;return i.defaultsDeep({},{angle:a,attrs:s,position:{x:r,y:o}},e,np)}var ip=function(e,t,n){return rp({position:t.getTopLeft()},n)},op=function(e,t,n){return rp({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},ap=function(e,t,n){return rp({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},sp=function(e,t,n){return rp({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},up=function(e,t,n){return rp({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},cp=function(e,t,n){return dp(e,t,!1,n)},lp=function(e,t,n){return dp(e,t,!0,n)},fp=function(e,t,n){return pp(e,t,!1,n)},hp=function(e,t,n){return pp(e,t,!0,n)};function dp(e,t,n,r){var i,o,a,s,u=null!=r.offset?r.offset:15,c=t.getCenter().theta(e),l=gp(t),f=0;return c<l[1]||c>l[2]?(i=".3em",o=u,a=0,s="start"):c<l[0]?(i="0",o=0,a=-u,n?(f=-90,s="start"):s="middle"):c<l[3]?(i=".3em",o=-u,a=0,s="end"):(i=".6em",o=0,a=u,n?(f=90,s="start"):s="middle"),rp({position:{x:Math.round(o),y:Math.round(a)},angle:f,attrs:{".":{y:i,"text-anchor":s}}},r)}function pp(e,t,n,r){var i,o,a,s,u=null!=r.offset?r.offset:15,c=t.getCenter().theta(e),l=gp(t),f=0;return c<l[1]||c>l[2]?(i=".3em",o=-u,a=0,s="end"):c<l[0]?(i=".6em",o=0,a=u,n?(f=90,s="start"):s="middle"):c<l[3]?(i=".3em",o=u,a=0,s="start"):(i="0em",o=0,a=-u,n?(f=-90,s="start"):s="middle"),rp({position:{x:Math.round(o),y:Math.round(a)},angle:f,attrs:{".":{y:i,"text-anchor":s}}},r)}function gp(e){var t=e.getCenter(),n=t.theta(e.getTopLeft()),r=t.theta(e.getBottomLeft()),i=t.theta(e.getBottomRight());return[n,t.theta(e.getTopRight()),i,r]}var vp,yp,mp=function(e,t,n){return wp(e.diff(t.getCenter()),!1,n)},bp=function(e,t,n){return wp(e.diff(t.getCenter()),!0,n)};function wp(e,t,n){var r,i=null!=n.offset?n.offset:20,o=new Ic(0,0),a=-e.theta(o),s=".3em",u=a;return(a+90)%180===0?(r=t?"end":"middle",t||-270!==a||(s="0em")):a>-270&&a<-90?(r="start",u=a-180):r="end",rp({position:e.clone().move(o,i).diff(e).round().round().toJSON(),angle:t?u:0,attrs:{".":{y:s,"text-anchor":r}}},n)}(yp=vp||(vp={})).presets=y,yp.registry=Cf.create({type:"port label layout"}),yp.registry.register(yp.presets,!0);var xp=n(25),Cp=n(88),kp=function(){function e(t,n,r,i){return Object(Es.a)(this,e),null==t?this.set(255,255,255,1):"number"===typeof t?this.set(t,n,r,i):"string"===typeof t?e.fromString(t)||this:Array.isArray(t)?this.set(t):void this.set(t.r,t.g,t.b,null==t.a?1:t.a)}return Object(Oc.a)(e,[{key:"blend",value:function(e,t,n){this.set(e.r+(t.r-e.r)*n,e.g+(t.g-e.g)*n,e.b+(t.b-e.b)*n,e.a+(t.a-e.a)*n)}},{key:"lighten",value:function(t){var n=e.lighten(this.toArray(),t);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(e){this.lighten(-e)}},{key:"set",value:function(e,t,n,r){var i=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,s=Array.isArray(e)?e[2]:n,u=Array.isArray(e)?e[3]:r;return this.r=Math.round(a.clamp(i,0,255)),this.g=Math.round(a.clamp(o,0,255)),this.b=Math.round(a.clamp(s,0,255)),this.a=null==u?1:a.clamp(u,0,1),this}},{key:"toHex",value:function(){var e=this,t=["r","g","b"].map(function(t){var n=e[t].toString(16);return n.length<2?"0".concat(n):n});return"#".concat(t.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return e.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(e){var t="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return e?"rgb(".concat(t,")"):"rgba(".concat(t,",").concat(this.a,")")}},{key:"toGrey",value:function(){return e.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),e}();!function(e){function t(t){return new e([].concat(Object(fu.a)(u(t)),[1]))}function n(t){var n=t.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(n){var r=n[1].split(/\s*,\s*/).map(function(e){return parseInt(e,10)});return new e(r)}return null}function r(e,t,n){n<0&&++n,n>1&&--n;var r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function i(t){var n=t.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(n){var r=n[2].split(/\s*,\s*/),i=(parseFloat(r[0])%360+360)%360/360,a=parseFloat(r[1])/100,s=parseFloat(r[2])/100,u=null==r[3]?1:parseInt(r[3],10);return new e(o(i,a,s,u))}return null}function o(e,t,n,i){var o=Array.isArray(e)?e[0]:e,a=Array.isArray(e)?e[1]:t,s=Array.isArray(e)?e[2]:n,u=Array.isArray(e)?e[3]:i,c=s<=.5?s*(a+1):s+a-s*a,l=2*s-c;return[256*r(l,c,o+1/3),256*r(l,c,o),256*r(l,c,o-1/3),null==u?1:u]}function s(t){return new e(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),t?void 0:parseFloat(Math.random().toFixed(2)))}function u(e){var t=0===e.indexOf("#")?e:"#".concat(e),n=Number("0x".concat(t.substr(1)));if(4!==t.length&&7!==t.length||Number.isNaN(n))throw new Error("Invalid hex color.");var r=4===t.length?4:8,i=(1<<r)-1,o=["b","g","r"].map(function(){var e=n&i;return n>>=r,4===r?17*e:e});return[o[2],o[1],o[0]]}function c(e,t,n){var r=function(e){return e.length<2?"0".concat(e):e};return"".concat(r(e.toString(16))).concat(r(t.toString(16))).concat(r(n.toString(16)))}function l(e,t){if("string"===typeof e){var n="#"===e[0],r=parseInt(n?e.substr(1):e,16),i=a.clamp((r>>16)+t,0,255),o=a.clamp((r>>8&255)+t,0,255),s=a.clamp((255&r)+t,0,255);return"".concat(n?"#":"").concat((s|o<<8|i<<16).toString(16))}var f=u(l(c(e[0],e[1],e[2]),t));return[f[0],f[1],f[2],e[3]]}e.fromArray=function(t){return new e(t)},e.fromHex=t,e.fromRGBA=n,e.fromHSLA=i,e.fromString=function(r){if(r.startsWith("#"))return t(r);if(r.startsWith("rgb"))return n(r);var o=e.named[r];return o?t(o):i(r)},e.makeGrey=function(t,n){return e.fromArray([t,t,t,n])},e.rgba2hsla=function(e,t,n,r){var i=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:n,s=Array.isArray(e)?e[3]:r,u=Math.max(i,o,a),c=Math.min(i,o,a),l=(u+c)/2,f=0,h=0;if(c!==u){var d=u-c;switch(h=l>.5?d/(2-u-c):d/(u+c),u){case i:f=(o-a)/d+(o<a?6:0);break;case o:f=(a-i)/d+2;break;case a:f=(i-o)/d+4}f/=6}return[f,h,l,null==s?1:s]},e.hsla2rgba=o,e.random=s,e.randomHex=function(){for(var e="#",t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},e.randomRGBA=function(e){return s(e).toString()},e.invert=function(e,t){if("string"===typeof e){var n="#"===e[0],r=u(e),i=Object(Cp.a)(r,3),o=i[0],a=i[1],s=i[2];return t?.299*o+.587*a+.114*s>186?"#000000":"#ffffff":"".concat(n?"#":"").concat(c(255-o,255-a,255-s))}var l=e[0],f=e[1],h=e[2],d=e[3];return t?.299*l+.587*f+.114*h>186?[0,0,0,d]:[255,255,255,d]:[255-l,255-f,255-h,d]},e.lighten=function(e,t){return l(e,t)},e.darken=function(e,t){return l(e,-t)}}(kp||(kp={})),(kp||(kp={})).named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Ep,Op=function(){function e(){Object(Es.a)(this,e),this.listeners={}}return Object(Oc.a)(e,[{key:"on",value:function(e,t,n){return null==t?this:(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,n),this)}},{key:"once",value:function(e,t,n){var r=this;return this.on(e,function i(){r.off(e,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return Ep.call([t,n],a)},this)}},{key:"off",value:function(e,t,n){if(!(e||t||n))return this.listeners={},this;var r=this.listeners;return(e?[e]:Object.keys(r)).forEach(function(e){var i=r[e];if(i)if(t||n)for(var o=i.length-2;o>=0;o-=2)t&&i[o]!==t||n&&i[o+1]!==n||i.splice(o,2);else delete r[e]}),this}},{key:"trigger",value:function(e){for(var t=!0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("*"!==e){var o=this.listeners[e];null!=o&&(t=Ep.call(Object(fu.a)(o),r))}var a=this.listeners["*"];return null!=a?s.toAsyncBoolean([t,Ep.call(Object(fu.a)(a),[e].concat(r))]):t}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.trigger.apply(this,[e].concat(n))}}]),e}();!function(e){(Ep||(Ep={})).call=function(e,t){for(var n=[],r=0;r<e.length;r+=2){var i=e[r],o=e[r+1],a=Array.isArray(t)?t:[t],u=s.apply(i,o,a);n.push(u)}return s.toAsyncBoolean(n)}}();var Sp=function(){function e(){Object(Es.a)(this,e)}return Object(Oc.a)(e,[{key:"dispose",value:function(){this._disposed=!0}},{key:"disposed",get:function(){return!0===this._disposed}}]),e}();!function(e){(Sp||(Sp={})).dispose=function(){return function(e,t,n){var r=n.value,i=e.__proto__;n.value=function(){this.disposed||(r.call(this),i.dispose.call(this))}}}}();var Ap=function(){function e(){Object(Es.a)(this,e),this.isDisposed=!1,this.items=new Set}return Object(Oc.a)(e,[{key:"dispose",value:function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(e){e.dispose()}),this.items.clear())}},{key:"contains",value:function(e){return this.items.has(e)}},{key:"add",value:function(e){this.items.add(e)}},{key:"remove",value:function(e){this.items.delete(e)}},{key:"clear",value:function(){this.items.clear()}},{key:"disposed",get:function(){return this.isDisposed}}]),e}();!function(e){e.from=function(t){var n=new e;return t.forEach(function(e){n.add(e)}),n}}(Ap||(Ap={}));var Tp=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),t}(Op);(Tp||(Tp={})).dispose=Sp.dispose,i.applyMixins(Tp,Sp);var Mp=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}},{key:"disabled",get:function(){return!0===this._disabled}}]),t}(Tp),_p=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},jp=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).clear(),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var n=this.map.get(e);return this.map.delete(e),n}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(n){var r=t.map.get(n);e(r,n)})}},{key:"dispose",value:function(){this.clear()}}]),t}(Sp);_p([Sp.dispose()],jp.prototype,"dispose",null);var Pp,Np,Rp,Dp,Ip=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Es.a)(this,e),this.comparator=t.comparator||e.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}return Object(Oc.a)(e,[{key:"isEmpty",value:function(){return 0===this.data.length}},{key:"insert",value:function(e,t,n){var r={priority:e,value:t},i=this.data.length-1;return n&&(r.id=n,this.index[n]=i),this.data.push(r),this.bubbleUp(i),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(e,t){var n=this.index[e];if("undefined"===typeof n)throw new Error("Node with id '".concat(e,"' was not found in the heap."));var r=this.data,i=r[n].priority,o=this.comparator(t,i);o<0?(r[n].priority=t,this.bubbleUp(n)):o>0&&(r[n].priority=t,this.bubbleDown(n))}},{key:"remove",value:function(){var e=this.data,t=e[0],n=e.pop();return delete this.index[e.length],e.length>0&&(e[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),t?t.value:null}},{key:"heapify",value:function(){for(var e=0;e<this.data.length;e+=1)this.bubbleUp(e)}},{key:"bubbleUp",value:function(e){for(var t,n,r=this.data,i=e;i>0&&(n=i-1>>>1,this.comparator(r[i].priority,r[n].priority)<0);){t=r[n],r[n]=r[i];var o=r[i].id;null!=o&&(this.index[o]=n),r[i]=t,null!=(o=r[i].id)&&(this.index[o]=i),i=n}}},{key:"bubbleDown",value:function(e){for(var t=this.data,n=t.length-1,r=e;;){var i=1+(r<<1),o=i+1,a=r;if(i<=n&&this.comparator(t[i].priority,t[a].priority)<0&&(a=i),o<=n&&this.comparator(t[o].priority,t[a].priority)<0&&(a=o),a===r)break;var s=t[a];t[a]=t[r];var u=t[r].id;null!=u&&(this.index[u]=a),t[r]=s,null!=(u=t[r].id)&&(this.index[u]=r),r=a}}}]),e}();(Ip||(Ip={})).defaultComparator=function(e,t){return e-t},function(e){(Pp||(Pp={})).run=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return 1},r={},i={},o={},a=new Ip;for(r[t]=0,Object.keys(e).forEach(function(e){e!==t&&(r[e]=1/0),a.insert(r[e],e,e)});!a.isEmpty();){var s=a.remove();o[s]=!0;for(var u=e[s]||[],c=0;c<u.length;c+=1){var l=u[c];if(!o[l]){var f=r[s]+n(s,l);f<r[l]&&(r[l]=f,i[l]=s,a.updatePriority(l,f))}}}return i}}(),function(e){e.linear=function(e){return e},e.quad=function(e){return e*e},e.cubic=function(e){return e*e*e},e.inout=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},e.exponential=function(e){return Math.pow(2,10*(e-1))},e.bounce=function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){var r=(11-6*t-11*e)/4;return-r*r+n*n}}}(Np||(Np={})),function(e){e.decorators={reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(r){var i=e(r);return i<t?t:i>n?n:i}},back:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.70158;return function(t){return t*t*((e+1)*t-e)}},elastic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.5;return function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}}}(Np||(Np={})),function(e){function t(e){var t=e/1;if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75){var n=t-1.5/2.75;return 7.5625*n*n+.75}if(t<2.5/2.75){var r=t-2.25/2.75;return 7.5625*r*r+.9375}var i=t-2.625/2.75;return 7.5625*i*i+.984375}function n(e){return 1-t(1-e)}e.easeInSine=function(e){return-1*Math.cos(e*(Math.PI/2))+1},e.easeOutSine=function(e){return Math.sin(e*(Math.PI/2))},e.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.easeInQuad=function(e){return e*e},e.easeOutQuad=function(e){return e*(2-e)},e.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},e.easeInCubic=function(e){return e*e*e},e.easeOutCubic=function(e){var t=e-1;return t*t*t+1},e.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},e.easeInQuart=function(e){return e*e*e*e},e.easeOutQuart=function(e){var t=e-1;return 1-t*t*t*t},e.easeInOutQuart=function(e){var t=e-1;return e<.5?8*e*e*e*e:1-8*t*t*t*t},e.easeInQuint=function(e){return e*e*e*e*e},e.easeOutQuint=function(e){var t=e-1;return 1+t*t*t*t*t},e.easeInOutQuint=function(e){var t=e-1;return e<.5?16*e*e*e*e*e:1+16*t*t*t*t*t},e.easeInExpo=function(e){return 0===e?0:Math.pow(2,10*(e-1))},e.easeOutExpo=function(e){return 1===e?1:1-Math.pow(2,-10*e)},e.easeInOutExpo=function(e){if(0===e||1===e)return e;var t=2*e,n=t-1;return t<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},e.easeInCirc=function(e){var t=e/1;return-1*(Math.sqrt(1-t*e)-1)},e.easeOutCirc=function(e){var t=e-1;return Math.sqrt(1-t*t)},e.easeInOutCirc=function(e){var t=2*e,n=t-2;return t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-n*n)+1)},e.easeInBack=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158;return e*e*((t+1)*e-t)},e.easeOutBack=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158,n=e/1-1;return n*n*((t+1)*n+t)+1},e.easeInOutBack=function(e){var t=2*e,n=t-2,r=1.525*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158);return t<1?.5*t*t*((r+1)*t-r):.5*(n*n*((r+1)*n+r)+2)},e.easeInElastic=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;if(0===e||1===e)return e;var n=e/1-1,r=1-t,i=r/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*n)*Math.sin((n-i)*(2*Math.PI)/r)},e.easeOutElastic=function(e){var t=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7),n=2*e;if(0===e||1===e)return e;var r=t/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-r)*(2*Math.PI)/t)+1},e.easeInOutElastic=function(e){var t=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.65);if(0===e||1===e)return e;var n=2*e,r=n-1,i=t/(2*Math.PI)*Math.asin(1);return n<1?Math.pow(2,10*r)*Math.sin((r-i)*(2*Math.PI)/t)*-.5:Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/t)*.5+1},e.easeOutBounce=t,e.easeInBounce=n,e.easeInOutBounce=function(e){return e<.5?.5*n(2*e):.5*t(2*e-1)+.5}}(Np||(Np={})),function(e){e.number=function(e,t){var n=t-e;return function(t){return e+n*t}},e.object=function(e,t){var n=Object.keys(e);return function(r){for(var i={},o=n.length-1;-1!==o;o-=1){var a=n[o];i[a]=e[a]+(t[a]-e[a])*r}return i}},e.unit=function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),i=n.exec(t),o=i?i[1]:"",a=r?+r[1]:0,s=i?+i[1]:0,u=o.indexOf("."),c=u>0?o[1].length-u-1:0,l=s-a,f=r?r[2]:"";return function(e){return(a+l*e).toFixed(c)+f}},e.color=function(e,t){var n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),i=255&n,o=(255&r)-i,a=65280&n,s=(65280&r)-a,u=16711680&n,c=(16711680&r)-u;return function(e){return"#".concat((1<<24|i+o*e&255|a+s*e&65280|u+c*e&16711680).toString(16).slice(1))}}}(Rp||(Rp={})),function(e){var t="".concat(_d.prefixCls,".storage");function n(e,t,n){e&&s.defer(function(){e(t,n)})}function r(e,t){localStorage.setItem(e,JSON.stringify(t))}function i(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function a(e){var t=i(c(e));return t?(null==t.keys&&(t.keys=[]),t):{keys:[]}}function u(e,n){return"".concat(t,".").concat(e,".docs.").concat(n)}function c(e){return"".concat(t,".").concat(e,".index")}e.insert=function(e,t,i){var s=t.id||o.uniqueId("doc-"),l=a(e);l.keys.push(s),r(u(e,s),t),r(c(e),l),n(i,null,Object.assign(Object.assign({},t),{id:s}))},e.find=function(e,t,r){var o=a(e),s=[];if(null==t)o.keys.forEach(function(t){var o=i(u(e,t));o?s.push(o):n(r,new Error("No document found for an ID '".concat(t,"' from index.")))}),n(r,null,s);else if(t.id){var c=i(u(e,t.id));n(r,null,c?[c]:[])}else n(r,null,[])},e.remove=function(e,t,i){var o=a(e);if(null==t)o.keys.forEach(function(t){localStorage.removeItem(u(e,t))}),localStorage.removeItem(c(e)),n(i,null);else if(t.id){var s=o.keys.indexOf(t.id);s>=0&&o.keys.splice(s,1),localStorage.removeItem(u(e,t.id)),r(c(e),o),n(i,null)}}}(Dp||(Dp={}));var Lp,Fp=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).cid=Lp.uniqueId(),t.views[e.cid]=Object(xp.a)(e),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return t.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete t.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container).classList.value=Array.isArray(e)?e.join(" "):e}},{key:"addClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;return null!=e&&null!=t&&(t instanceof SVGElement?c.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;t&&1===t.nodeType;){var n=t.getAttribute(e);if(null!=n)return n;if(t===this.container)return null;t=t.parentNode}return null}},{key:"find",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectors;return t.find(e,n,r).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectors,r=this.find(e,t,n);return r.length>0?r[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;t&&t.getAttribute;){var n=t.getAttribute(e);if((null!=n||t===this.container)&&"false"!==n)return t;t=t.parentNode}return null}},{key:"getSelector",value:function(e,t){var n;if(e===this.container)return"string"===typeof t&&(n="> ".concat(t)),n;if(e){var r=c.index(e)+1;n="".concat(e.tagName.toLowerCase(),":nth-child(").concat(r,")"),t&&(n+=" > ".concat(t)),n=this.getSelector(e.parentNode,n)}return n}},{key:"prefixClassName",value:function(e){return Md.prefix(e)}},{key:"delegateEvents",value:function(e,t){var n=this;if(null==e)return this;t||this.undelegateEvents();var r=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(t){var i=t.match(r);if(null!=i){var o=n.getEventHandler(e[t]);"function"===typeof o&&n.delegateEvent(i[1],i[2],o)}}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,n){return this.$(this.container).on(e+this.getEventNamespace(),t,n),this}},{key:"undelegateEvent",value:function(e,t,n){var r=e+this.getEventNamespace();return null==t?this.$(this.container).off(r):"string"===typeof t?this.$(this.container).off(r,t,n):this.$(this.container).off(r,t),this}},{key:"addEventListeners",value:function(e,t,n){var r=this;if(null==t)return this;var i=this.getEventNamespace(),o=this.$(e);return Object.keys(t).forEach(function(e){var a=r.getEventHandler(t[e]);"function"===typeof a&&o.on(e+i,n,a)}),this}},{key:"removeEventListeners",value:function(e){return null!=e&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(_d.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t,n=this;if("string"===typeof e){var r=this[e];"function"===typeof r&&(t=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.call.apply(r,[n].concat(t))})}else t=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.call.apply(e,[n].concat(r))};return t}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,r=e.type,i=e.clientX,o=void 0===i?0:i,a=e.clientY,s=void 0===a?0:a;return t.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):n}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return!0===this.getEventData(e).propagationStopped}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(null==e)throw new TypeError("Event object required");var n=e.data,r="__".concat(this.cid,"__");return null==t?null==n?{}:n[r]||{}:(null==n&&(n=e.data={}),null==n[r]?n[r]=Object.assign({},t):n[r]=Object.assign(Object.assign({},n[r]),t),n[r])}},{key:"normalizeEvent",value:function(e){return t.normalizeEvent(e)}},{key:"priority",get:function(){return 2}}]),t}(Tp);!function(e){function t(e){return _()(e)}e.$=t,e.createElement=function(e,t){return t?c.createSvgElement(e||"g"):c.createElementNS(e||"div")},e.find=function(e,n,r){if(!e||"."===e)return{elems:[n]};if(r){var i=r[e];if(i)return{elems:Array.isArray(i)?i:[i]}}return _d.useCSSSelector?{isCSSSelector:!0,elems:t(n).find(e).toArray()}:{elems:[]}},e.normalizeEvent=function(e){var t=e,n=e.originalEvent,r=n&&n.changedTouches&&n.changedTouches[0];if(r){for(var i in e)void 0===r[i]&&(r[i]=e[i]);t=r}var o=t.target;if(o){var a=o.correspondingUseElement;a&&(t.target=a)}return t}}(Fp||(Fp={})),function(e){e.views={},e.getView=function(t){return e.views[t]||null}}(Fp||(Fp={})),function(e){var t=0;e.uniqueId=function(){var e="v".concat(t);return t+=1,e}}(Lp||(Lp={}));var Bp=function(e){return e};function zp(e,t){return 0===t?"0%":"".concat(Math.round(e/t*100),"%")}function Vp(e){return function(t,n,r,i){return n.isEdgeElement(r)?function(e,t,n,r,i){var o=n.getConnection();if(!o)return t;var a=o.closestPointLength(i);if(e){var s=o.length();t.anchor={name:"ratio",args:{ratio:a/s}}}else t.anchor={name:"length",args:{length:a}};return t}(e,t,n,0,i):function(e,t,n,r,i){var o=n.cell,a=o.getAngle(),s=n.getUnrotatedBBoxOfElement(r),u=o.getBBox().getCenter(),c=Ic.create(i).rotate(a,u),l=c.x-s.x,f=c.y-s.y;return e&&(l=zp(l,s.width),f=zp(f,s.height)),t.anchor={name:"topLeft",args:{dx:l,dy:f,rotate:!0}},t}(e,t,n,r,i)}}var Up,Gp,Hp=Vp(!0),Wp=Vp(!1);(Gp=Up||(Up={})).presets=m,Gp.registry=Cf.create({type:"connection strategy"}),Gp.registry.register(Gp.presets,!0);var qp,Xp=function(){function e(t){Object(Es.a)(this,e),this.view=t,this.clean()}return Object(Oc.a)(e,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new jp,this.pathCache={}}},{key:"get",value:function(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}},{key:"getData",value:function(e){var t=this.get(e);return t.data||(t.data={}),t.data}},{key:"getMatrix",value:function(e){var t=this.get(e);if(null==t.matrix){var n=this.view.rotatableNode||this.view.container;t.matrix=c.getTransformToElement(e,n)}return c.createSVGMatrix(t.matrix)}},{key:"getShape",value:function(e){var t=this.get(e);return null==t.shape&&(t.shape=c.toGeometryShape(e)),t.shape.clone()}},{key:"getBoundingRect",value:function(e){var t=this.get(e);return null==t.boundingRect&&(t.boundingRect=c.getBBox(e)),t.boundingRect.clone()}}]),e}();!function(e){function t(e){return null!=e&&"string"===typeof e}function n(e){return"".concat(e).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:c.ns.svg},n=document.createDocumentFragment(),r={},i={},o=[{markup:Array.isArray(e)?e:[e],parent:n,ns:t.ns}],a=function(){var e=o.pop(),t=e.ns||c.ns.svg,n=e.markup,a=e.parent;n.forEach(function(e){var n=e.tagName;if(!n)throw new TypeError("Invalid tagName");e.ns&&(t=e.ns);var s=t===c.ns.svg,u=t?c.createElementNS(n,t):c.createElement(n),l=e.attrs;l&&(s?c.attr(u,c.kebablizeAttrs(l)):_()(u).attr(l));var f=e.style;f&&_()(u).css(f);var h=e.className;null!=h&&u.setAttribute("class",Array.isArray(h)?h.join(" "):h),e.textContent&&(u.textContent=e.textContent);var d=e.selector;if(null!=d){if(i[d])throw new TypeError("Selector must be unique");i[d]=u}if(e.groupSelector){var p=e.groupSelector;Array.isArray(p)||(p=[p]),p.forEach(function(e){r[e]||(r[e]=[]),r[e].push(u)})}a.appendChild(u);var g=e.children;Array.isArray(g)&&o.push({ns:t,markup:g,parent:u})})};o.length>0;)a();return Object.keys(r).forEach(function(e){if(i[e])throw new Error("Ambiguous group selector");i[e]=r[e]}),{fragment:n,selectors:i,groups:r}}function a(e){return e instanceof SVGElement?c.createSvgElement("g"):c.createElement("div")}e.isJSONMarkup=function(e){return null!=e&&!t(e)},e.isStringMarkup=t,e.clone=function(e){return null==e||t(e)?e:i.cloneDeep(e)},e.sanitize=n,e.parseStringMarkup=function(e){var t=document.createDocumentFragment(),r=n(e);return o.sanitizeHTML(r,{raw:!0}).forEach(function(e){t.appendChild(e)}),{fragment:t,selectors:{},groups:{}}},e.parseJSONMarkup=r,e.renderMarkup=function(e){if(t(e)){var n=al.createVectors(e),i=n.length;if(1===i)return{elem:n[0].node};if(i>1){var o=a(n[0].node);return n.forEach(function(e){o.appendChild(e.node)}),{elem:o}}return{}}var s=r(e),u=s.fragment,c=null;return u.childNodes.length>1?(c=a(u.firstChild)).appendChild(u):c=u.firstChild,{elem:c,selectors:s.selectors}},e.parseLabelStringMarkup=function(e){for(var t=al.createVectors(e),n=document.createDocumentFragment(),r=0,i=t.length;r<i;r+=1){var o=t[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}}}(qp||(qp={})),function(e){function t(e,n,r){if(null!=e){var i,o=e.tagName.toLowerCase();if(e===n)return i="string"===typeof r?"> ".concat(o," > ").concat(r):"> ".concat(o);var a=e.parentNode;if(a&&a.childNodes.length>1){var s=c.index(e)+1;i="".concat(o,":nth-child(").concat(s,")")}else i=o;return r&&(i+=" > ".concat(r)),t(e.parentNode,n,i)}return r}e.getSelector=t,e.xml2json=function(n){var r=e.sanitize(n),i=c.parseXML(r,{mimeType:"image/svg+xml"}),o=Array.prototype.slice.call(i.childNodes),a={},s=new WeakMap,u=function e(n,r,i){var o=function(e,n,r){if("#text"===e.nodeName)return null;var i=null,o=null,a=null,s=!1,u={tagName:e.tagName};if(e.attributes){a={};for(var l=0,f=e.attributes.length;l<f;l+=1){var h=e.attributes[l],d=h.nodeName,p=h.nodeValue;"selector"===d?i=p:"groupSelector"===d?o=p:"class"===d?u.attrs={class:p}:a[d]=p}}return null==i&&(s=!0,i=t(e,n)),e.namespaceURI&&(u.ns=e.namespaceURI),null==u.ns&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?u.ns=c.ns.xhtml:r&&(u.ns=r)),i&&(u.selector=i),null!=o&&(u.groupSelector=o),{markup:u,attrs:a,isCSSSelector:s}}(n,r,i);if(null!=o){var u=o.markup,l=o.attrs,f=o.isCSSSelector;if(s.set(n,u),u.selector&&null!=l&&(Object.keys(l).length&&(a[u.selector]=l),f&&delete u.selector),n.childNodes&&n.childNodes.length>0)for(var h=0,d=n.childNodes.length;h<d;h+=1){var p=e(n.childNodes[h],r,u.ns);p&&(null==u.children&&(u.children=[]),u.children.push(p))}return u}var g=s.get(n.parentNode);g&&n.textContent&&(g.textContent=n.textContent)};return{markup:o.map(function(e){return u(e,e)}).filter(function(e){return null!=e}),attrs:a}}}(qp||(qp={})),function(e){e.getPortContainerMarkup=function(){return"g"},e.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},e.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(qp||(qp={})),function(e){e.getEdgeMarkup=function(){return e.sanitize('\n    <path class="connection" stroke="black" d="M 0 0 0 0"/>\n    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="connection-wrap" d="M 0 0 0 0"/>\n    <g class="labels"/>\n    <g class="vertices"/>\n    <g class="arrowheads"/>\n    <g class="tools"/>\n  ')},e.getEdgeToolMarkup=function(){return e.sanitize('\n    <g class="edge-tool">\n      <g class="tool-remove" event="edge:remove">\n        <circle r="11" />\n        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />\n        <title>Remove edge.</title>\n      </g>\n      <g class="tool-options" event="edge:options">\n        <circle r="11" transform="translate(25)"/>\n        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>\n        <title>Edge options.</title>\n      </g>\n    </g>\n  ')},e.getEdgeVertexMarkup=function(){return e.sanitize('\n    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">\n      <circle class="vertex" data-index="<%= index %>" r="10" />\n      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>\n      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">\n      <title>Remove vertex.</title>\n      </path>\n    </g>\n  ')},e.getEdgeArrowheadMarkup=function(){return e.sanitize('\n    <g class="arrowhead-group arrowhead-group-<%= end %>">\n      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />\n    </g>\n  ')}}(qp||(qp={})),function(e){(qp||(qp={})).getForeignObjectMarkup=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"foreignObject",selector:"fo",children:[{ns:c.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:c.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}();var $p,Yp=function(){function e(t){Object(Es.a)(this,e),this.view=t}return Object(Oc.a)(e,[{key:"getDefinition",value:function(e){return this.cell.getAttrDefinition(e)}},{key:"processAttrs",value:function(t,n){var r,i,a,u,l,f=this,h=[];return Object.keys(n).forEach(function(i){var a=n[i],u=f.getDefinition(i),c=s.call(Wh.isValidDefinition,f.view,u,a,{elem:t,attrs:n,cell:f.cell,view:f.view});if(u&&c)"string"===typeof u?(null==r&&(r={}),r[u]=a):null!==a&&h.push({name:i,definition:u});else{null==r&&(r={});var l=e.CASE_SENSITIVE_ATTR.includes(i)?i:o.kebabCase(i);r[l]=a}}),h.forEach(function(r){var o=r.name,s=r.definition,f=n[o];"function"===typeof s.set&&(!c.isHTMLElement(t)&&e.DELAY_ATTRS.includes(o)?(null==l&&(l={}),l[o]=f):(null==i&&(i={}),i[o]=f)),"function"===typeof s.offset&&(null==a&&(a={}),a[o]=f),"function"===typeof s.position&&(null==u&&(u={}),u[o]=f)}),{raw:n,normal:r,set:i,offset:a,position:u,delay:l}}},{key:"mergeProcessedAttrs",value:function(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);var n=e.normal&&e.normal.transform;null!=n&&t.normal&&(t.normal.transform=n),e.normal=t.normal}},{key:"findAttrs",value:function(e,t,n,o){var a=[],s=new jp;return Object.keys(e).forEach(function(u){var c=e[u];if(i.isPlainObject(c)){var l=Fp.find(u,t,o),f=l.isCSSSelector,h=l.elems;n[u]=h;for(var d=0,p=h.length;d<p;d+=1){var g=h[d],v=o&&o[u]===g,y=s.get(g);if(y){y.array||(a.push(g),y.array=!0,y.attrs=[y.attrs],y.priority=[y.priority]);var m=y.attrs,b=y.priority;if(v)m.unshift(c),b.unshift(-1);else{var w=r.sortedIndex(b,f?-1:p);m.splice(w,0,c),b.splice(w,0,p)}}else s.set(g,{elem:g,attrs:c,priority:v?-1:p,array:!1})}}}),a.forEach(function(e){var t=s.get(e),n=t.attrs;t.attrs=n.reduceRight(function(e,t){return i.merge(e,t)},{})}),s}},{key:"updateRelativeAttrs",value:function(e,t,n,r){var i=this,o=t.raw||{},a=t.normal||{},u=t.set,l=t.position,f=t.offset,h=t.delay,d=function(){return{elem:e,cell:i.cell,view:i.view,attrs:o,refBBox:n.clone()}};if(null!=u&&Object.keys(u).forEach(function(e){var t=u[e],n=i.getDefinition(e);if(null!=n){var r=s.call(n.set,i.view,t,d());"object"===typeof r?a=Object.assign(Object.assign({},a),r):null!=r&&(a[e]=r)}}),c.isHTMLElement(e))this.view.setAttrs(a,e);else{var p=a.transform,g=p?"".concat(p):null,v=c.transformStringToMatrix(g),y=new Ic(v.e,v.f);p&&(delete a.transform,v.e=0,v.f=0);var m=1,b=1;if(l||f){var w=this.view.getScaleOfElement(e,r.scalableNode);m=w.sx,b=w.sy}var x=!1;null!=l&&Object.keys(l).forEach(function(e){var t=l[e],n=i.getDefinition(e);if(null!=n){var r=s.call(n.position,i.view,t,d());null!=r&&(x=!0,y.translate(Ic.create(r).scale(m,b)))}}),this.view.setAttrs(a,e);var C=!1;if(null!=f){var k=this.view.getBoundingRectOfElement(e);if(k.width>0&&k.height>0){var E=c.transformRectangle(k,v).scale(1/m,1/b);Object.keys(f).forEach(function(t){var n=f[t],r=i.getDefinition(t);if(null!=r){var a=s.call(r.offset,i.view,n,{elem:e,cell:i.cell,view:i.view,attrs:o,refBBox:E});null!=a&&(C=!0,y.translate(Ic.create(a).scale(m,b)))}})}}(null!=p||x||C)&&(y.round(1),v.e=y.x,v.f=y.y,e.setAttribute("transform",c.matrixToTransformString(v)));var O=function(){null!=h&&Object.keys(h).forEach(function(t){var n=h[t],r=i.getDefinition(t);if(null!=r){var o=s.call(r.set,i.view,n,d());"object"===typeof o?i.view.setAttrs(o,e):null!=o&&i.view.setAttrs(Object(T.a)({},t,o),e)}})};r.forceSync?O():bf.scheduleTask(O)}}},{key:"update",value:function(e,t,n){var r=this,i={},o=this.findAttrs(n.attrs||t,e,i,n.selectors),a=n.attrs?this.findAttrs(t,e,i,n.selectors):o,s=[];o.each(function(t){var o=t.elem,u=t.attrs,c=r.processAttrs(o,u);if(null==c.set&&null==c.position&&null==c.offset&&null==c.delay)r.view.setAttrs(c.normal,o);else{var l,f=a.get(o),h=f?f.attrs:null,d=h&&null==u.ref?h.ref:u.ref;if(d){if(!(l=(i[d]||r.view.find(d,e,n.selectors))[0]))throw new Error('"'.concat(d,'" reference does not exist.'))}else l=null;var p={node:o,refNode:l,attributes:h,processedAttributes:c},g=s.findIndex(function(e){return e.refNode===o});g>-1?s.splice(g,0,p):s.push(p)}});var u,l=new jp;s.forEach(function(t){var i,o,a=t.node,f=t.refNode,h=null!=f&&null!=n.rotatableNode&&c.contains(n.rotatableNode,f);if(f&&(i=l.get(f)),!i){var d=h?n.rotatableNode:e;i=f?c.getBBox(f,{target:d}):n.rootBBox,f&&l.set(f,i)}n.attrs&&t.attributes?(o=r.processAttrs(a,t.attributes),r.mergeProcessedAttrs(o,t.processedAttributes)):o=t.processedAttributes;var p=i;h&&null!=n.rotatableNode&&!n.rotatableNode.contains(a)&&(u||(u=c.transformStringToMatrix(c.attr(n.rotatableNode,"transform"))),p=c.transformRectangle(i,u)),s.find(function(e){return e.refNode===a})&&(n.forceSync=!0),r.updateRelativeAttrs(a,o,p,n)})}},{key:"cell",get:function(){return this.view.cell}}]),e}();($p=Yp||(Yp={})).CASE_SENSITIVE_ATTR=["viewBox"],$p.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"];var Kp,Jp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(Es.a)(this,e),this.view=t;var i={},o={},a=0;Object.keys(n).forEach(function(e){var t=n[e];Array.isArray(t)||(t=[t]),t.forEach(function(t){var n=i[t];n||(a+=1,n=i[t]=1<<a),o[e]|=n})});var s=r;if(Array.isArray(s)||(s=[s]),s.forEach(function(e){i[e]||(a+=1,i[e]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=o,this.bootstrap=r}return Object(Oc.a)(e,[{key:"getFlag",value:function(e){var t=this.flags;return null==t?0:Array.isArray(e)?e.reduce(function(e,n){return e|t[n]},0):0|t[e]}},{key:"hasAction",value:function(e,t){return e&this.getFlag(t)}},{key:"removeAction",value:function(e,t){return e^e&this.getFlag(t)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var e=this,t=0;return this.attrs?(Object.keys(this.attrs).forEach(function(n){e.cell.hasChanged(n)&&(t|=e.attrs[n])}),t):t}},{key:"cell",get:function(){return this.view.cell}}]),e}(),Zp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Qp=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).cell=e,n.options=n.ensureOptions(r),n.graph=n.options.graph,n.attr=new Yp(Object(xp.a)(n)),n.flag=new Jp(Object(xp.a)(n),n.options.actions,n.options.bootstrap),n.cache=new Xp(Object(xp.a)(n)),n.setContainer(n.ensureContainer()),n.setup(),n.$(n.container).data("view",Object(xp.a)(n)),n.init(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(e){return this.getConstructor().getOptions(e)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return Fp.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(e){if(this.container!==e){this.undelegateEvents(),this.container=e,null!=this.options.events&&this.delegateEvents(this.options.events);var t=this.getContainerAttrs();null!=t&&this.setAttrs(t,e);var n=this.getContainerStyle();null!=n&&this.setStyle(n,e);var r=this.getContainerClassName();null!=r&&this.addClass(r,e)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(e){return this.flag.getFlag(e)}},{key:"hasAction",value:function(e,t){return this.flag.hasAction(e,t)}},{key:"removeAction",value:function(e,t){return this.flag.removeAction(e,t)}},{key:"handleAction",value:function(e,t,n,r){if(this.hasAction(e,t)){n();var i=[t];return r&&("string"===typeof r?i.push(r):i.push.apply(i,Object(fu.a)(r))),this.removeAction(e,i)}return e}},{key:"setup",value:function(){var e=this;this.cell.on("changed",function(t){var n=t.options;return e.onAttrsChange(n)})}},{key:"onAttrsChange",value:function(e){var t=this.flag.getChangedFlag();!e.updated&&t&&(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e))}},{key:"parseJSONMarkup",value:function(e,t){var n=qp.parseJSONMarkup(e),r=n.selectors,i=this.rootSelector;if(t&&i){if(r[i])throw new Error("Invalid root selector");r[i]=t}return n}},{key:"can",value:function(e){var t=this.graph.options.interacting;if("function"===typeof t&&(t=s.call(t,this.graph,this)),"object"===typeof t){var n=t[e];return"function"===typeof n&&(n=s.call(n,this.graph,this)),!1!==n}return"boolean"===typeof t&&t}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(e){return this.cache.get(e)}},{key:"getDataOfElement",value:function(e){return this.cache.getData(e)}},{key:"getMatrixOfElement",value:function(e){return this.cache.getMatrix(e)}},{key:"getShapeOfElement",value:function(e){return this.cache.getShape(e)}},{key:"getScaleOfElement",value:function(e,t){var n,r;if(t&&t.contains(e)){var i=c.scale(t);n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}}},{key:"getBoundingRectOfElement",value:function(e){return this.cache.getBoundingRect(e)}},{key:"getBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),n=this.getMatrixOfElement(e),r=this.getRootRotatedMatrix(),i=this.getRootTranslatedMatrix();return c.transformRectangle(t,i.multiply(r).multiply(n))}},{key:"getUnrotatedBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),n=this.getMatrixOfElement(e),r=this.getRootTranslatedMatrix();return c.transformRectangle(t,r.multiply(n))}},{key:"getBBox",value:function(){var e;if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useCellGeometry){var t=this.cell,n=t.isNode()?t.getAngle():0;e=t.getBBox().bbox(n)}else e=this.getBBoxOfElement(this.container);return this.graph.localToGraph(e)}},{key:"getRootTranslatedMatrix",value:function(){var e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return c.createSVGMatrix().translate(t.x,t.y)}},{key:"getRootRotatedMatrix",value:function(){var e=c.createSVGMatrix(),t=this.cell,n=t.isNode()?t.getAngle():0;if(n){var r=t.getBBox(),i=r.width/2,o=r.height/2;e=e.translate(i,o).rotate(n).translate(-i,-o)}return e}},{key:"findMagnet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return this.findByAttr("magnet",e)}},{key:"updateAttrs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null==n.rootBBox&&(n.rootBBox=new Lc),null==n.selectors&&(n.selectors=this.selectors),this.attr.update(e,t,n)}},{key:"isEdgeElement",value:function(e){return this.cell.isEdge()&&(null==e||e===this.container)}},{key:"prepareHighlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&this.$(e)[0]||this.container;return t.partial=n===this.container,n}},{key:"highlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:n,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:n,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:n,options:t,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:n,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:n,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:n,options:t,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(e,t){}},{key:"getEdgeTerminal",value:function(e,t,n,r,i){var o=this.cell,a=this.findAttr("port",e),s=e.getAttribute("data-selector"),u={cell:o.id};return null!=s&&(u.magnet=s),null!=a?(u.port=a,o.isNode()&&(o.hasPort(a)||null!=s||(u.selector=this.getSelector(e)))):null==s&&this.container!==e&&(u.selector=this.getSelector(e)),this.customizeEdgeTerminal(u,e,t,n,r,i)}},{key:"customizeEdgeTerminal",value:function(e,t,n,r,i,o){var a=i.getStrategy()||this.graph.options.connecting.strategy;if(a){var u="string"===typeof a?a:a.name,c="string"===typeof a?{}:a.args||{},l=Up.registry;if(u){var f=l.get(u);if(null==f)return l.onNotFound(u);var h=s.call(f,this.graph,e,this,t,new Ic(n,r),i,o,c);if(h)return h}}return e}},{key:"getMagnetFromEdgeTerminal",value:function(e){var t,n=this.cell,r=this.container,i=e.port,o=e.magnet;return null!=i&&n.isNode()&&n.hasPort(i)?t=this.findPortElem(i,o)||r:(o||(o=e.selector),o||null==i||(o='[port="'.concat(i,'"]')),t=this.findOne(o,r,this.selectors)),t}},{key:"animate",value:function(e,t){var n="string"===typeof e?this.findOne(e):e;if(null==n)throw new Error("Invalid animation element.");var r=n.parentNode,i=al.create(n);r||i.appendTo(this.graph.view.stage);var o=t.complete;return t.complete=function(e){r||c.remove(n),o&&o(e)},i.animate(t)}},{key:"animateTransform",value:function(e,t){var n="string"===typeof e?this.findOne(e):e;if(null==n)throw new Error("Invalid animation element.");var r=n.parentNode,i=al.create(n);r||i.appendTo(this.graph.view.stage);var o=t.complete;return t.complete=function(e){r||c.remove(n),o&&o(e)},i.animateTransform(t)}},{key:"hasTools",value:function(e){var t=this.tools;return null!=t&&(null==e||t.name===e)}},{key:"addTools",value:function(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){var t=eg.isToolsView(e)?e:new eg(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}},{key:"updateTools",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.tools&&this.tools.update(e),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"notify",value:function(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}},{key:"getEventArgs",value:function(e,t,n){var r=this.cell;return null==t||null==n?{e:e,view:this,cell:r}:{e:e,x:t,y:n,view:this,cell:r}}},{key:"onClick",value:function(e,t,n){this.notify("cell:click",this.getEventArgs(e,t,n))}},{key:"onDblClick",value:function(e,t,n){this.notify("cell:dblclick",this.getEventArgs(e,t,n))}},{key:"onContextMenu",value:function(e,t,n){this.notify("cell:contextmenu",this.getEventArgs(e,t,n))}},{key:"onMouseDown",value:function(e,t,n){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,n))}},{key:"onMouseUp",value:function(e,t,n){this.notify("cell:mouseup",this.getEventArgs(e,t,n)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(e,t,n){this.notify("cell:mousemove",this.getEventArgs(e,t,n))}},{key:"onMouseOver",value:function(e){this.notify("cell:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){this.notify("cell:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){this.notify("cell:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){this.notify("cell:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,n,r){this.notify("cell:mousewheel",Object.assign({delta:r},this.getEventArgs(e,t,n)))}},{key:"onCustomEvent",value:function(e,t,n,r){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,n,r))),this.notify(t,Object.assign({},this.getEventArgs(e,n,r)))}},{key:"onMagnetMouseDown",value:function(e,t,n,r){}},{key:"onMagnetDblClick",value:function(e,t,n,r){}},{key:"onMagnetContextMenu",value:function(e,t,n,r){}},{key:"onLabelMouseDown",value:function(e,t,n){}},{key:"checkMouseleave",value:function(e){var t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);var n=this.getEventTarget(e,{fromPoint:!0}),r=t.renderer.findViewByElem(n);r!==this&&(this.onMouseLeave(e),r&&r.onMouseEnter(e))}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(e){this.defaults=this.getOptions(e)}},{key:"getOptions",value:function(e){var t=function(e,t){return null!=t?r.uniq([].concat(Object(fu.a)(Array.isArray(e)?e:[e]),Object(fu.a)(Array.isArray(t)?t:[t]))):Array.isArray(e)?Object(fu.a)(e):[e]},n=i.cloneDeep(this.getDefaults()),o=e.bootstrap,a=e.actions,s=e.events,u=e.documentEvents,c=Zp(e,["bootstrap","actions","events","documentEvents"]);return o&&(n.bootstrap=t(n.bootstrap,o)),a&&Object.keys(a).forEach(function(e){var r=a[e],i=n.actions[e];r&&i?n.actions[e]=t(i,r):r&&(n.actions[e]=t(r))}),s&&(n.events=Object.assign(Object.assign({},n.events),s)),e.documentEvents&&(n.documentEvents=Object.assign(Object.assign({},n.documentEvents),u)),i.merge(n,c)}}]),t}(Fp);Qp.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},(Kp=Qp||(Qp={})).Flag=Jp,Kp.Attr=Yp,function(e){e.toStringTag="X6.".concat(e.name),e.isCellView=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate}}(Qp||(Qp={})),function(e){e.priority=function(e){return function(t){t.config({priority:e})}},e.bootstrap=function(e){return function(t){t.config({bootstrap:e})}}}(Qp||(Qp={})),(Qp||(Qp={})).registry=Cf.create({type:"view"});var eg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).svgContainer=e.createContainer(!0,n),e.htmlContainer=e.createContainer(!1,n),e.config(n),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"createContainer",value:function(e,t){var n=e?Fp.createElement("g",!0):Fp.createElement("div",!1);return c.addClass(n,this.prefixClassName("cell-tools")),t.className&&c.addClass(n,t.className),n}},{key:"config",value:function(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Qp.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(c.addClass(this.svgContainer,this.prefixClassName("edge-tools")),c.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(c.addClass(this.svgContainer,this.prefixClassName("node-tools")),c.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var n=this.options.items;if(!Array.isArray(n))return this;this.tools=[];var r=[];n.forEach(function(e){t.ToolItem.isToolItem(e)?"vertices"===e.name?r.unshift(e):r.push(e):"vertices"===("object"===typeof e?e.name:e)?r.unshift(e):r.push(e)});for(var i=0;i<r.length;i+=1){var o=r[i],a=void 0;if(t.ToolItem.isToolItem(o))a=o;else{var s="object"===typeof o?o.name:o,u="object"===typeof o&&o.args||{};if(s)if(this.cell.isNode()){var l=bg.registry.get(s);if(!l)return bg.registry.onNotFound(s);a=new l(u)}else if(this.cell.isEdge()){var f=xg.registry.get(s);if(!f)return xg.registry.onNotFound(s);a=new f(u)}}if(a)a.config(this.cellView,this),a.render(),(!1!==a.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a)}return this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.tools;return t&&t.forEach(function(t){e.toolId!==t.cid&&t.isVisible()&&t.update()}),this}},{key:"focus",value:function(e){var t=this.tools;return t&&t.forEach(function(t){e===t?t.show():t.hide()}),this}},{key:"blur",value:function(e){var t=this.tools;return t&&t.forEach(function(t){t===e||t.isVisible()||(t.show(),t.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var e=this.tools;return e&&(e.forEach(function(e){return e.remove()}),this.tools=null),c.remove(this.svgContainer),c.remove(this.htmlContainer),Object(xf.a)(Object(Ac.a)(t.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var e=this.tools,t=this.cellView;if(t&&e){var n=e.some(function(e){return!1!==e.options.isSVGElement}),r=e.some(function(e){return!1===e.options.isSVGElement});if(n)(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer);r&&this.graph.container.appendChild(this.htmlContainer)}return this}},{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Fp);function tg(e,t,n,r){return s.call(Up.presets.pinRelative,this.graph,{},t,n,e,this.cell,r,{}).anchor}function ng(e,t){return t?e.cell.getBBox():e.cell.isEdge()?e.getConnection().bbox():e.getUnrotatedBBoxOfElement(e.container)}!function(e){e.toStringTag="X6.".concat(e.name),e.isToolsView=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"===typeof r.config&&"function"===typeof r.update&&"function"===typeof r.focus&&"function"===typeof r.blur&&"function"===typeof r.show&&"function"===typeof r.hide}}(eg||(eg={})),function(e){var t=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=e.getOptions(n),e.container=Fp.createElement(e.options.tagName||"g",!1!==e.options.isSVGElement),c.addClass(e.container,e.prefixClassName("cell-tool")),"string"===typeof e.options.className&&c.addClass(e.container,e.options.className),e.init(),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){}},{key:"getOptions",value:function(e){return this.constructor.getOptions(e)}},{key:"delegateEvents",value:function(){return this.options.events&&Object(xf.a)(Object(Ac.a)(t.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(e,t){return this.cellView=e,this.parent=t,this.stamp(this.container),this.cell.isEdge()?c.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&c.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var e=this.options.markup;if(e){var t=qp.isStringMarkup(e)?qp.parseStringMarkup(e):qp.parseJSONMarkup(e);this.container.appendChild(t.fragment),this.childNodes=t.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;e&&e.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return this.visible}},{key:"focus",value:function(){var e=this.options.focusOpacity;return null!=e&&Number.isFinite(e)&&(this.container.style.opacity="".concat(e)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(e){return null==this.graph||null==this.cellView||this.graph.view.guard(e,this.cellView)}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(e){this.defaults=this.getOptions(e)}},{key:"getOptions",value:function(e){return i.merge(i.cloneDeep(this.getDefaults()),e)}}]),t}(Fp);t.defaults={isSVGElement:!0,tagName:"g"},e.ToolItem=t,function(e){var t=0;e.define=function(e){var n,r=i.createClass((n=e.name)?o.pascalCase(n):"CustomTool".concat(t+=1),this);return r.config(e),r}}(t=e.ToolItem||(e.ToolItem={})),function(e){e.toStringTag="X6.".concat(e.name),e.isToolItem=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"===typeof r.config&&"function"===typeof r.update&&"function"===typeof r.focus&&"function"===typeof r.blur&&"function"===typeof r.show&&"function"===typeof r.hide&&"function"===typeof r.isVisible}}(t=e.ToolItem||(e.ToolItem={}))}(eg||(eg={}));var rg,ig=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onRender",value:function(){c.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();c.transform(this.container,e,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,s=t.offset,u=t.useCellGeometry,l=t.rotate,f=ng(e,u),h=e.cell.getAngle();l||(f=f.bbox(h));var d=0,p=0;"number"===typeof s?(d=s,p=s):"object"===typeof s&&(d=s.x,p=s.y),r=a.normalizePercentage(r,f.width),o=a.normalizePercentage(o,f.height);var g=c.createSVGMatrix().translate(f.x+f.width/2,f.y+f.height/2);return l&&(g=g.rotate(h)),g=g.translate(r+d-f.width/2,o+p-f.height/2)}},{key:"getEdgeMatrix",value:function(){var e,t,n,r=this.cellView,i=this.options,o=i.offset,s=void 0===o?0:o,u=i.distance,l=void 0===u?0:u,f=i.rotate;(e=a.isPercentage(l)?r.getTangentAtRatio(parseFloat(l)/100):r.getTangentAtLength(l))?(t=e.start,n=e.vector().vectorAngle(new Ic(1,0))||0):(t=r.getConnection().start,n=0);var h=c.createSVGMatrix().translate(t.x,t.y).rotate(n);return h="object"===typeof s?h.translate(s.x||0,s.y||0):h.translate(0,s),f||(h=h.rotate(-n)),h}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.onClick;"function"===typeof t&&s.call(t,this.cellView,{e:e,view:this.cellView,cell:this.cellView.cell,btn:this})}}}]),t}(eg.ToolItem);(ig||(ig={})).config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}}),(rg=ig||(ig={})).Remove=rg.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(e){var t=e.view,n=e.btn;n.parent.remove(),t.cell.remove({ui:!0,toolId:n.cid})}});var og=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ag=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onRender",value:function(){if(c.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,n=og(e,["class"]);c.attr(this.container,c.kebablizeAttrs(n)),t&&c.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,n=t.useCellGeometry,r=t.rotate,i=a.normalizeSides(t.padding),o=ng(e,n).moveAndExpand({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}),s=e.cell;if(s.isNode()){var u=s.getAngle();if(u)if(r){var l=s.getBBox().getCenter();c.rotate(this.container,u,l.x,l.y,{absolute:!0})}else o=o.bbox(u)}return c.attr(this.container,o.toJSON()),this}}]),t}(eg.ToolItem);(ag||(ag={})).config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}});var sg=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).handles=[],e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(t){e.stopHandleListening(t),t.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,n=0,r=t.length;n<r;n+=1){var i=t[n],o=this.options.createHandle,a=this.options.processHandle,s=o({index:n,graph:this.graph,guard:function(t){return e.guard(t)},attrs:this.options.attrs||{}});a&&a(s),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:s}),s.updatePosition(i.x,i.y),this.stamp(s.container),this.container.appendChild(s.container),this.handles.push(s),this.startHandleListening(s)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,n=e.length;t<n;t+=1){var r=e[t],i=this.handles[t];i&&i.updatePosition(r.x,r.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,n=this.vertices,r=e>0?n[e-1]:t.sourceAnchor,i=e<n.length-1?n[e+1]:t.targetAnchor;return{prev:Ic.create(r),next:Ic.create(i)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:n.x,y:n.y}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var n=this.cellView;if(n.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var r=this.getMouseEventArgs(t),i=r.e,o=r.x,a=r.y;n.notifyMouseDown(i,o,a)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,n=e.e,r=this.cellView,i=t.options.index,o=this.getMouseEventArgs(n),a=o.e,s=o.x,u=o.y,c={x:s,y:u};this.snapVertex(c,i),r.cell.setVertexAt(i,c,{ui:!0,toolId:this.cid}),t.updatePosition(c.x,c.y),this.options.stopPropagation||r.notifyMouseMove(a,s,u)}},{key:"onHandleChanged",value:function(e){var t=e.e,n=this.options,r=this.cellView;if(n.addable&&this.updatePath(),n.removeRedundancies){r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),r.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&r.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var i=this.getMouseEventArgs(t),o=i.e,a=i.x,s=i.y;this.options.stopPropagation||r.notifyMouseUp(o,a,s),r.checkMouseleave(o),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})}}},{key:"snapVertex",value:function(e,t){var n=this.options.snapRadius||0;if(n>0){var r=this.getNeighborPoints(t),i=r.prev,o=r.next;Math.abs(e.x-i.x)<n?e.x=i.x:Math.abs(e.x-o.x)<n&&(e.x=o.x),Math.abs(e.y-i.y)<n?e.y=r.prev.y:Math.abs(e.y-o.y)<n&&(e.y=o.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,n=e.e;if(this.options.removable){var r=t.options.index,i=this.cellView;i.cell.removeVertexAt(r,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(n))}}},{key:"onPathMouseDown",value:function(e){var t=this.cellView;if(!this.guard(e)&&this.options.addable&&t.can("vertexAddable")){e.stopPropagation(),e.preventDefault();var n=this.normalizeEvent(e),r=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var i=t.getVertexIndex(r.x,r.y);this.snapVertex(r,i),t.cell.insertVertex(r,i,{ui:!0,toolId:this.cid}),this.render();var o=this.handles[i];this.eventData(n,{vertexAdded:!0}),o.onMouseDown(n)}}},{key:"onRemove",value:function(){this.resetHandles()}},{key:"vertices",get:function(){return this.cellView.cell.getVertices()}}]),t}(eg.ToolItem);!function(e){var t=function(t){function n(e){var t;return Object(Es.a)(this,n),(t=Object(Sc.a)(this,Object(Ac.a)(n).call(this))).options=e,t.render(),t.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),t}return Object(Tc.a)(n,t),Object(Oc.a)(n,[{key:"render",value:function(){this.container=Fp.createElement("circle",!0);var t=this.options.attrs;if("function"===typeof t){var n=e.getDefaults();this.setAttrs(Object.assign(Object.assign({},n.attrs),t(this)))}else this.setAttrs(t);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(e,t){this.setAttrs({cx:e,cy:t})}},{key:"onMouseDown",value:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.data),this.emit("change",{e:e,handle:this}))}},{key:"onMouseMove",value:function(e){this.emit("changing",{e:e,handle:this})}},{key:"onMouseUp",value:function(e){this.emit("changed",{e:e,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(e){this.emit("remove",{e:e,handle:this})}},{key:"graph",get:function(){return this.options.graph}}]),n}(Fp);e.Handle=t}(sg||(sg={})),function(e){var t,n=Md.prefix("edge-tool-vertex-path");e.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(t){return new e.Handle(t)},markup:[{tagName:"path",selector:"connection",className:n,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(t={},Object(T.a)(t,"mousedown .".concat(n),"onPathMouseDown"),Object(T.a)(t,"touchstart .".concat(n),"onPathMouseDown"),t)})}(sg||(sg={}));var ug,cg=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).handles=[],e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){c.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(fu.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var n=0,r=t.length;n<r-1;n+=1){var i=t[n],o=t[n+1],a=this.renderHandle(i,o,n);this.stamp(a.container),this.handles.push(a)}return this}},{key:"renderHandle",value:function(e,t,n){var r=this,i=this.options.createHandle({index:n,graph:this.graph,guard:function(e){return r.guard(e)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:i}),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(t){e.stopHandleListening(t),t.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,n=0,r=t.length;n<r;n+=1)t[n].options.index+=e}},{key:"resetAnchor",value:function(e,t){var n=this.cellView.cell,r={ui:!0,toolId:this.cid};t?n.prop([e,"anchor"],t,r):n.removeProp([e,"anchor"],r)}},{key:"snapHandle",value:function(e,t,n){var r=e.options.axis,i=e.options.index,o=this.cellView.cell.getVertices(),a=o[i-2]||n.sourceAnchor,s=o[i+1]||n.targetAnchor,u=this.options.snapRadius;return Math.abs(t[r]-a[r])<u?t[r]=a[r]:Math.abs(t[r]-s[r])<u&&(t[r]=s[r]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,n=e.e,r=this.graph,o=this.options,a=this.cellView,u=o.anchor,c=t.options.axis,l=t.options.index-1,f=this.getEventData(n),h=this.normalizeEvent(n),d=r.snapToGrid(h.clientX,h.clientY),p=this.snapHandle(t,d.clone(),f),g=i.cloneDeep(this.vertices),v=g[l],y=g[l+1],m=a.sourceView,b=a.sourceBBox,w=!1,x=!1;if(v?0===l?b.containsPoint(v)?(g.shift(),this.shiftHandleIndexes(-1),w=!0):(v[c]=p[c],x=!0):v[c]=p[c]:((v=a.sourceAnchor.toJSON())[c]=p[c],b.containsPoint(v)?w=!0:(g.unshift(v),this.shiftHandleIndexes(1),x=!0)),"function"===typeof u&&m){if(w){var C=f.sourceAnchor.clone();C[c]=p[c];var k=s.call(u,a,C,m,a.sourceMagnet||m.container,"source",a,this);this.resetAnchor("source",k)}x&&this.resetAnchor("source",f.sourceAnchorDef)}var E=a.targetView,O=a.targetBBox,S=!1,A=!1;if(y?l===g.length-2?O.containsPoint(y)?(g.pop(),S=!0):(y[c]=p[c],A=!0):y[c]=p[c]:((y=a.targetAnchor.toJSON())[c]=p[c],O.containsPoint(y)?S=!0:(g.push(y),A=!0)),"function"===typeof u&&E){if(S){var T=f.targetAnchor.clone();T[c]=p[c];var M=s.call(u,a,T,E,a.targetMagnet||E.container,"target",a,this);this.resetAnchor("target",M)}A&&this.resetAnchor("target",f.targetAnchorDef)}Ic.equalPoints(g,this.vertices)||this.cellView.cell.setVertices(g,{ui:!0,toolId:this.cid}),this.updateHandle(t,v,y,0),o.stopPropagation||a.notifyMouseMove(h,d.x,d.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,n=e.e,r=this.options,o=this.handles,a=this.cellView,s=t.options.index;if(Array.isArray(o)){for(var u=0,c=o.length;u<c;u+=1)u!==s&&o[u].hide();if(this.focus(),this.setEventData(n,{sourceAnchor:a.sourceAnchor.clone(),targetAnchor:a.targetAnchor.clone(),sourceAnchorDef:i.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:i.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){var l=this.normalizeEvent(n),f=this.graph.snapToGrid(l.clientX,l.clientY);a.notifyMouseDown(l,f.x,f.y)}}}},{key:"onHandleChanged",value:function(e){var t=e.e,n=this.options,r=this.cellView;n.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var i=this.normalizeEvent(t),o=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),n.stopPropagation||r.notifyMouseUp(i,o.x,o.y),r.checkMouseleave(i),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})}},{key:"updateHandle",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.options.precision||0,o=Math.abs(t.x-n.x)<i,a=Math.abs(t.y-n.y)<i;if(o||a){var s=new Fc(t,n);if(s.length()<this.options.threshold)e.hide();else{var u=s.getCenter(),c=o?"x":"y";u[c]+=r||0;var l=s.vector().vectorAngle(new Ic(1,0));e.updatePosition(u.x,u.y,l,this.cellView),e.show(),e.options.axis=c}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}},{key:"vertices",get:function(){return this.cellView.cell.getVertices()}}]),t}(eg.ToolItem);!function(e){var t=function(t){function n(e){var t;return Object(Es.a)(this,n),(t=Object(Sc.a)(this,Object(Ac.a)(n).call(this))).options=e,t.render(),t.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),t}return Object(Tc.a)(n,t),Object(Oc.a)(n,[{key:"render",value:function(){this.container=Fp.createElement("rect",!0);var t=this.options.attrs;if("function"===typeof t){var n=e.getDefaults();this.setAttrs(Object.assign(Object.assign({},n.attrs),t(this)))}else this.setAttrs(t);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(e,t,n,r){var i=r.getClosestPoint(new Ic(e,t))||new Ic(e,t),o=c.createSVGMatrix().translate(i.x,i.y);if(i.equals({x:e,y:t}))o=o.rotate(n);else{var a=new Fc(e,t,i.x,i.y).vector().vectorAngle(new Ic(1,0));0!==a&&(a+=90),o=o.rotate(a)}this.setAttrs({transform:c.matrixToTransformString(o),cursor:n%180===0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(e){this.options.guard(e)||(this.trigger("change",{e:e,handle:this}),e.stopPropagation(),e.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.data))}},{key:"onMouseMove",value:function(e){this.emit("changing",{e:e,handle:this})}},{key:"onMouseUp",value:function(e){this.emit("changed",{e:e,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),n}(Fp);e.Handle=t}(cg||(cg={})),(ug=cg||(cg={})).config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(e){return new ug.Handle(e)},anchor:tg});var lg=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onRender",value:function(){c.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(e){var t=e.anchor;if(t){var n=this.type,r=this.cellView,i=this.options,o=r.getTerminalAnchor(n),a=r.cell.prop([n,"anchor"]);t.setAttribute("transform","translate(".concat(o.x,", ").concat(o.y,")"));var s=a?i.customAnchorAttrs:i.defaultAnchorAttrs;s&&Object.keys(s).forEach(function(e){t.setAttribute(e,s[e])})}}}},{key:"updateArea",value:function(){var e=this.childNodes;if(e){var t=e.area;if(t){var n=this.type,r=this.cellView,i=r.getTerminalView(n);if(i){var o,a,s,u=i.cell,l=r.getTerminalMagnet(n),f=this.options.areaPadding||0;Number.isFinite(f)||(f=0),i.isEdgeElement(l)?(a=0,s=(o=i.getBBox()).getCenter()):(o=i.getUnrotatedBBoxOfElement(l),a=u.getAngle(),s=o.getCenter(),a&&s.rotate(-a,u.getBBox().getCenter())),o.inflate(f),c.attr(t,{x:-o.width/2,y:-o.height/2,width:o.width,height:o.height,transform:"translate(".concat(s.x,", ").concat(s.y,") rotate(").concat(a,")")})}}}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}},{key:"resetAnchor",value:function(e){var t=this.type,n=this.cell;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,n=this.cellView,r=n.getTerminalView(t);if(null!=r){var i,o=this.normalizeEvent(e),a=r.cell,u=n.getTerminalMagnet(t),c=this.graph.clientToLocal(o.clientX,o.clientY),l=this.options.snap;if("function"===typeof l){var f=s.call(l,n,c,r,u,t,n,this);c=Ic.create(f)}if(this.options.restrictArea)if(r.isEdgeElement(u)){var h=r.getClosestPoint(c);h&&(c=h)}else{var d=r.getUnrotatedBBoxOfElement(u),p=a.getAngle(),g=a.getBBox().getCenter(),v=c.clone().rotate(p,g);d.containsPoint(v)||(c=d.getNearestPointToPoint(v).rotate(-p,g))}var y=this.options.anchor;"function"===typeof y&&(i=s.call(y,n,c,r,u,t,n,this)),this.resetAnchor(i),this.update()}}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}},{key:"type",get:function(){return this.options.type}}]),t}(eg.ToolItem);(lg||(lg={})).config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:tg,snap:function(e,t,n,r,i,o){var a=o.options.snapRadius||0,s="source"===r,u=s?0:-1,c=this.cell.getVertexAt(u)||this.getTerminalAnchor(s?"target":"source");return c&&(Math.abs(c.x-e.x)<a&&(e.x=c.x),Math.abs(c.y-e.y)<a&&(e.y=c.y)),e}});var fg=lg.define({name:"source-anchor",type:"source"}),hg=lg.define({name:"target-anchor",type:"target"}),dg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},pg=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,n=dg(e,["class"]);this.setAttrs(n,this.container),t&&c.addClass(this.container,t)}}},{key:"onRender",value:function(){c.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,n=t.getTangentAtRatio(e),r=n?n.start:t.getPointAtRatio(e),i=n&&n.vector().vectorAngle(new Ic(1,0))||0;if(!r)return this;var o=c.createSVGMatrix().translate(r.x,r.y).rotate(i);return c.transform(this.container,o,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var n=this.graph.snapToGrid(e.clientX,e.clientY),r=t.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:{toolId:this.cid}});this.cellView.setEventData(e,r),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,n.x,n.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),n=this.cellView,r=this.graph.snapToGrid(t.clientX,t.clientY);n.onMouseUp(t,r.x,r.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}},{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}}]),t}(eg.ToolItem);(pg||(pg={})).config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}});var gg,vg=pg.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),yg=pg.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),mg=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).labelIndex=-1,e.distance=.5,e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"render",value:function(){return this.createElement(),this.update(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}},{key:"createElement",value:function(){var e=this.cell,t=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=eg.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"update",value:function(){var e=this.graph,t=this.cell,n=this.editor,r=n.style,i=new Ic,o=20;if(t.isNode())i=t.getBBox().center,o=t.size().width-4;else if(t.isEdge()){var a=this.options.event,u=a.target,l=u.parentElement;if(l&&c.hasClass(l,this.prefixClassName("edge-label"))){var f=l.getAttribute("data-index")||"0";this.labelIndex=parseInt(f,10);var h=l.getAttribute("transform"),d=c.parseTransformString(h).translation;i=new Ic(d.tx,d.ty),o=c.getBBox(u).width}else{i=e.clientToLocal(Ic.create(a.clientX,a.clientY));var p=this.cellView.path.closestPointLength(i);this.distance=p}}i=e.localToGraph(i),r.left="".concat(i.x,"px"),r.top="".concat(i.y,"px"),r.minWidth="".concat(o,"px");var g=e.scale();r.transform="scale(".concat(g.sx,", ").concat(g.sy,") translate(-50%, -50%)");var v=this.options.attrs;r.fontSize="".concat(v.fontSize,"px"),r.fontFamily=v.fontFamily,r.color=v.color,r.backgroundColor=v.backgroundColor;var y,m=this.options.getText;return"function"===typeof m&&(y=s.call(m,this.cellView,{cell:this.cell,index:this.labelIndex})),n.innerText=y||"",this}},{key:"onDocumentMouseDown",value:function(e){if(e.target!==this.editor){var t=this.cell,n=this.editor.innerText.replace(/\n$/,"")||"",r=this.options.setText;"function"===typeof r&&s.call(r,this.cellView,{cell:this.cell,value:n,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}},{key:"onDblClick",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"autoFocus",value:function(){var e=this;setTimeout(function(){e.editor.focus(),e.selectText()})}},{key:"selectText",value:function(){if(window.getSelection){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}]),t}(eg.ToolItem);(mg||(mg={})).config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}}),(gg=mg||(mg={})).NodeEditor=gg.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(e){return e.cell.attr("text/text")},setText:function(e){var t=e.cell,n=e.value;t.attr("text/text",n)}}),gg.EdgeEditor=gg.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(e){var t=e.cell,n=e.index;return-1===n?"":t.prop("labels/".concat(n,"/attrs/label/text"))},setText:function(e){var t=e.cell,n=e.value,r=e.index,i=e.distance,o=t;-1===r?o.appendLabel({position:{distance:i},attrs:{label:{text:n}}}):o.prop("labels/".concat(r,"/attrs/label/text"),n)}});var bg,wg,xg,Cg,kg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};(wg=bg||(bg={})).presets={boundary:ag,button:ig,"button-remove":ig.Remove,"node-editor":mg.NodeEditor},wg.registry=Cf.create({type:"node tool",process:function(e,t){if("function"===typeof t)return t;var n=eg.ToolItem,r=t.inherit,i=kg(t,["inherit"]);if(r){var o=this.get(r);null==o?this.onNotFound(r,"inherited"):n=o}return null==i.name&&(i.name=e),n.define.call(n,i)}}),wg.registry.register(wg.presets,!0),(Cg=xg||(xg={})).presets={boundary:ag,vertices:sg,segments:cg,button:ig,"button-remove":ig.Remove,"source-anchor":fg,"target-anchor":hg,"source-arrowhead":vg,"target-arrowhead":yg,"edge-editor":mg.EdgeEditor},Cg.registry=Cf.create({type:"edge tool",process:function(e,t){if("function"===typeof t)return t;var n=eg.ToolItem,r=t.inherit,i=kg(t,["inherit"]);if(r){var o=this.get(r);null==o?this.onNotFound(r,"inherited"):n=o}return null==i.name&&(i.name=e),n.define.call(n,i)}}),Cg.registry.register(Cg.presets,!0);var Eg=Ng("center"),Og=Ng("topCenter"),Sg=Ng("bottomCenter"),Ag=Ng("leftMiddle"),Tg=Ng("rightMiddle"),Mg=Ng("topLeft"),_g=Ng("topRight"),jg=Ng("bottomLeft"),Pg=Ng("bottomRight");function Ng(e){return function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.rotate?t.getUnrotatedBBoxOfElement(n):t.getBBoxOfElement(n),s=o[e];s.x+=a.normalizePercentage(i.dx,o.width),s.y+=a.normalizePercentage(i.dy,o.height);var u=t.cell;return i.rotate?s.rotate(-u.getAngle(),u.getBBox().getCenter()):s}}function Rg(e){return function(t,n,r,i){if(r instanceof Element){var o,a=this.graph.renderer.findViewByElem(r);if(a)if(a.isEdgeElement(r))o=Dg(a,null!=i.fixedAt?i.fixedAt:"50%");else o=a.getBBoxOfElement(r).getCenter();else o=new Ic;return e.call(this,t,n,o,i)}return e.apply(this,arguments)}}function Dg(e,t){var n=a.isPercentage(t),r="string"===typeof t?parseFloat(t):t;return n?e.getPointAtRatio(r/100):e.getPointAtLength(r)}var Ig,Lg,Fg=Rg(function(e,t,n,r){var i=e.cell.getAngle(),o=e.getBBoxOfElement(t),a=o.getCenter(),s=o.getTopLeft(),u=o.getBottomRight(),c=r.padding;if(Number.isFinite(c)||(c=0),s.y+c<=n.y&&n.y<=u.y-c){var l=n.y-a.y;a.x+=0===i||180===i?0:1*l/Math.tan(kc.toRad(i)),a.y+=l}else if(s.x+c<=n.x&&n.x<=u.x-c){var f=n.x-a.x;a.y+=90===i||270===i?0:f*Math.tan(kc.toRad(i)),a.x+=f}return a}),Bg=function(e,t,n,r,i){var o=e.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&o.translate(r.dx||0,r.dy||0),o},zg=Rg(function(e,t,n,r){var i,o,a=0,s=e.cell;r.rotate?(i=e.getUnrotatedBBoxOfElement(t),o=s.getBBox().getCenter(),a=s.getAngle()):i=e.getBBoxOfElement(t);var u=r.padding;null!=u&&Number.isFinite(u)&&i.inflate(u),r.rotate&&n.rotate(a,o);var c,l=i.getNearestSideToPoint(n);switch(l){case"left":c=i.getLeftMiddle();break;case"right":c=i.getRightMiddle();break;case"top":c=i.getTopCenter();break;case"bottom":c=i.getBottomCenter()}var f=r.direction;return"H"===f?"top"!==l&&"bottom"!==l||(c=n.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===f&&(c=n.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?c.rotate(-a,o):c});(Lg=Ig||(Ig={})).presets=b,Lg.registry=Cf.create({type:"node endpoint"}),Lg.registry.register(Lg.presets,!0);var Vg,Ug,Gg=function(e,t,n,r){var i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),e.getPointAtRatio(i)},Hg=function(e,t,n,r){var i=null!=r.length?r.length:20;return e.getPointAtLength(i)},Wg=function(e,t,n,r){var i=e.getClosestPoint(n);return null!=i?i:new Ic},qg=Rg(Wg),Xg=Rg(function(e,t,n,r){var i=e.getConnection(),o=e.getConnectionSubdivisions(),a=new Fc(n.clone().translate(0,1e6),n.clone().translate(0,-1e6)),u=new Fc(n.clone().translate(1e6,0),n.clone().translate(-1e6,0)),c=a.intersect(i,{segmentSubdivisions:o}),l=u.intersect(i,{segmentSubdivisions:o}),f=[];return c&&f.push.apply(f,Object(fu.a)(c)),l&&f.push.apply(f,Object(fu.a)(l)),f.length>0?n.closest(f):null!=r.fallbackAt?Dg(e,r.fallbackAt):s.call(Wg,this,e,t,n,r)});function $g(e,t,n){var r;if("object"===typeof n){if(Number.isFinite(n.y)){var i=new Fc(t,e).parallel(n.y);t=i.start,e=i.end}r=n.x}else r=n;if(null==r||!Number.isFinite(r))return e;var o=e.distance(t);return 0===r&&o>0?e:e.move(t,-Math.min(r,o-1))}function Yg(e){var t=e.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}(Ug=Vg||(Vg={})).presets=w,Ug.registry=Cf.create({type:"edge endpoint"}),Ug.registry.register(Ug.presets,!0);var Kg=function(e,t,n,r){var i=t.getBBoxOfElement(n);r.stroked&&i.inflate(Yg(n)/2);var o=e.intersect(i);return $g(o&&o.length?e.start.closest(o):e.end,e.start,r.offset)},Jg=function(e,t,n,r,i){var o=t.cell,a=o.isNode()?o.getAngle():0;if(0===a)return s.call(Kg,this,e,t,n,r,i);var u=t.getUnrotatedBBoxOfElement(n);r.stroked&&u.inflate(Yg(n)/2);var c=u.getCenter(),l=e.clone().rotate(a,c),f=l.setLength(1e6).intersect(u);return $g(f&&f.length?l.start.closest(f).rotate(-a,c):e.end,e.start,r.offset)},Zg=function(e,t,n,r){var o,a,s=e.end,u=r.selector;if(o="string"===typeof u?t.findOne(u):Array.isArray(u)?i.getByPath(n,u):function(e){if(null==e)return null;var t=e;do{var n=t.tagName;if("string"!==typeof n)return null;if("G"===(n=n.toUpperCase()))t=t.firstElementChild;else{if("TITLE"!==n)break;t=t.nextElementSibling}}while(t);return t}(n),!c.isSVGGraphicsElement(o)){if(o===n||!c.isSVGGraphicsElement(n))return s;o=n}var l,f=t.getShapeOfElement(o),h=t.getMatrixOfElement(o),d=t.getRootTranslatedMatrix(),p=t.getRootRotatedMatrix(),g=d.multiply(p).multiply(h),v=g.inverse(),y=c.transformLine(e,v),m=y.start.clone(),b=t.getDataOfElement(o);if(!1===r.insideout){null==b.shapeBBox&&(b.shapeBBox=f.bbox());var w=b.shapeBBox;if(null!=w&&w.containsPoint(m))return s}if(!0===r.extrapolate&&y.setLength(1e6),ol.isPath(f)){var x=r.precision||2;null==b.segmentSubdivisions&&(b.segmentSubdivisions=f.getSegmentSubdivisions({precision:x})),l={precision:x,segmentSubdivisions:b.segmentSubdivisions},a=y.intersect(f,l)}else a=y.intersect(f);a?Array.isArray(a)&&(a=m.closest(a)):!0===r.sticky&&(a=Lc.isRectangle(f)?f.getNearestPointToPoint(m):Bc.isEllipse(f)?f.intersectsWithLineFromCenterToPoint(m):f.closestPoint(m,l));var C=a?c.transformPoint(a,g):s,k=r.offset||0;return!1!==r.stroked&&("object"===typeof k?(null==(k=Object.assign({},k)).x&&(k.x=0),k.x+=Yg(o)/2):k+=Yg(o)/2),$g(C,e.start,k)};var Qg,ev,tv=function(e,t,n,r){var i=r.alignOffset,o=r.align;return o&&function(e,t){var n,r,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=e.start,u=e.end;switch(t){case"left":o="x",n=u,r=s,i=-1;break;case"right":o="x",n=s,r=u,i=1;break;case"top":o="y",n=u,r=s,i=-1;break;case"bottom":o="y",n=s,r=u,i=1;break;default:return}s[o]<u[o]?n[o]=r[o]:r[o]=n[o],Number.isFinite(a)&&(n[o]+=i*a,r[o]+=i*a)}(e,o,i),$g(e.end,e.start,r.offset)};(ev=Qg||(Qg={})).presets=x,ev.registry=Cf.create({type:"connection point"}),ev.registry.register(ev.presets,!0);var nv=function(e){return Object(fu.a)(e)},rv=function(e,t,n){var r,i,o,s=t.side||"bottom",u=a.normalizeSides(t.padding||40),c=n.sourceBBox,l=n.targetBBox,f=c.getCenter(),h=l.getCenter();switch(s){case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;case"bottom":default:o=1,r="y",i="height"}return f[r]+=o*(c[i]/2+u[s]),h[r]+=o*(l[i]/2+u[s]),o*(f[r]-h[r])>0?h[r]=f[r]:f[r]=h[r],[f.toJSON()].concat(Object(fu.a)(e),[h.toJSON()])};function iv(e){return new Lc(e.x,e.y,0,0)}function ov(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.normalizeSides(e.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function av(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sourceBBox.clone().moveAndExpand(ov(t))}function sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.targetBBox.clone().moveAndExpand(ov(t))}var uv,cv=function(e,t,n){var r=av(n,t),i=sv(n,t),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sourceAnchor?e.sourceAnchor:av(e,t).getCenter()}(n,t),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.targetAnchor?e.targetAnchor:sv(e,t).getCenter()}(n,t);r=r.union(iv(o)),i=i.union(iv(a));var s=e.map(function(e){return Ic.create(e)});s.unshift(o),s.push(a);for(var u=null,c=[],l=0,f=s.length-1;l<f;l+=1){var h=null,d=s[l],p=s[l+1],g=null!=uv.getBearing(d,p);if(0===l)l+1===f?r.intersectsWithRect(i.clone().inflate(1))?h=uv.insideNode(d,p,r,i):g||(h=uv.nodeToNode(d,p,r,i)):r.containsPoint(p)?h=uv.insideNode(d,p,r,iv(p).moveAndExpand(ov(t))):g||(h=uv.nodeToVertex(d,p,r));else if(l+1===f){var v=g&&uv.getBearing(p,d)===u;i.containsPoint(d)||v?h=uv.insideNode(d,p,iv(d).moveAndExpand(ov(t)),i,u):g||(h=uv.vertexToNode(d,p,i,u))}else g||(h=uv.vertexToVertex(d,p,u));h?(c.push.apply(c,Object(fu.a)(h.points)),u=h.direction):u=uv.getBearing(d,p),l+1<f&&c.push(p)}return c};!function(e){var t={N:"S",S:"N",E:"W",W:"E"},n={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(e,t,n){var r=new Ic(e.x,t.y);return n.containsPoint(r)&&(r=new Ic(t.x,e.y)),r}function o(e,t){return e["W"===t||"E"===t?"width":"height"]}function a(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function s(e,n,r){var i=new Ic(e.x,n.y),o=new Ic(n.x,e.y),s=a(e,i),u=a(e,o),c=r?t[r]:null,l=s===r||s!==c&&(u===c||u!==r)?i:o;return{points:[l],direction:a(l,n)}}function u(e,t,n){var r=i(e,t,n);return{points:[r],direction:a(r,t)}}e.getBBoxSize=o,e.getBearing=a,e.vertexToVertex=s,e.nodeToVertex=u,e.vertexToNode=function(e,t,n,s){var u,c=[new Ic(e.x,t.y),new Ic(t.x,e.y)],l=c.filter(function(e){return!n.containsPoint(e)}),f=l.filter(function(t){return a(t,e)!==s});if(f.length>0)return{points:[u=(u=f.filter(function(t){return a(e,t)===s}).pop())||f[0]],direction:a(u,t)};u=r.difference(c,l)[0];var h=Ic.create(t).move(u,-o(n,s)/2);return{points:[i(h,e,n),h],direction:a(h,t)}},e.nodeToNode=function(e,t,n,r){var i=u(t,e,r),c=i.points[0];if(n.containsPoint(c)){var l=(i=u(e,t,n)).points[0];if(r.containsPoint(l)){var f=Ic.create(e).move(l,-o(n,a(e,l))/2),h=Ic.create(t).move(c,-o(r,a(t,c))/2),d=new Fc(f,h).getCenter(),p=u(e,d,n),g=s(d,t,p.direction);i.points=[p.points[0],g.points[0]],i.direction=g.direction}}return i},e.insideNode=function(e,t,r,o,s){var u,c,l,f,h=r.union(o).inflate(1),d=h.getCenter(),p=d.distance(t)>d.distance(e),g=p?t:e,v=p?e:t;return s?(u=Ic.fromPolar(h.width+h.height,n[s],g),u=h.getNearestPointToPoint(u).move(u,-1)):u=h.getNearestPointToPoint(g).move(g,1),c=i(u,v,h),u.round().equals(c.round())?(c=Ic.fromPolar(h.width+h.height,kc.toRad(u.theta(g))+Math.PI/2,v),l=i(u,c=h.getNearestPointToPoint(c).move(v,1).round(),h),f=p?[c,l,u]:[u,l,c]):f=p?[c,u]:[u,c],{points:f,direction:a(p?u:c,t)}}}(uv||(uv={}));var lv={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return fv(this.step,this)},directions:function(){var e=fv(this.step,this),t=fv(this.cost,this);return[{cost:t,offsetX:e,offsetY:0},{cost:t,offsetX:0,offsetY:e},{cost:t,offsetX:-e,offsetY:0},{cost:t,offsetX:0,offsetY:-e}]},penalties:function(){var e=fv(this.step,this);return{0:0,45:e/2,90:e/2}},paddingBox:function(){var e=fv(this.step,this);return{x:-e,y:-e,width:2*e,height:2*e}},fallbackRouter:cv,draggingRouter:null};function fv(e,t){return"function"===typeof e?e.call(t):e}var hv=function(){function e(){Object(Es.a)(this,e),this.items=[],this.hash={},this.values={}}return Object(Oc.a)(e,[{key:"add",value:function(e,t){var n=this;this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=1,this.values[e]=t;var i=r.sortedIndexBy(this.items,e,function(e){return n.values[e]});this.items.splice(i,0,e)}},{key:"pop",value:function(){var e=this.items.shift();return e&&(this.hash[e]=2),e}},{key:"isOpen",value:function(e){return 1===this.hash[e]}},{key:"isClose",value:function(e){return 2===this.hash[e]}},{key:"isEmpty",value:function(){return 0===this.items.length}}]),e}(),dv=function(){function e(t){Object(Es.a)(this,e),this.options=t,this.mapGridSize=100,this.map={}}return Object(Oc.a)(e,[{key:"build",value:function(e,t){var n=this.options,i=n.excludeTerminals.reduce(function(n,r){var i=t[r];if(i){var o=e.getCell(i.cell);o&&n.push(o)}return n},[]),o=[],a=e.getCell(t.getSourceCellId());a&&(o=r.union(o,a.getAncestors().map(function(e){return e.id})));var s=e.getCell(t.getTargetCellId());s&&(o=r.union(o,s.getAncestors().map(function(e){return e.id})));var u=this.mapGridSize;return e.getNodes().reduce(function(e,t){var r=t.shape,a=n.excludeShapes,s=!!r&&a.includes(r),c=i.some(function(e){return e.id===t.id}),l=o.includes(t.id),f=n.excludeHiddenNodes&&!t.isVisible();if(!(s||c||l||f))for(var h=t.getBBox().moveAndExpand(n.paddingBox),d=h.getOrigin().snapToGrid(u),p=h.getCorner().snapToGrid(u),g=d.x;g<=p.x;g+=u)for(var v=d.y;v<=p.y;v+=u){var y=new Ic(g,v).toString();null==e[y]&&(e[y]=[]),e[y].push(h)}return e},this.map),this}},{key:"isAccessible",value:function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[t];return!n||n.every(function(t){return!t.containsPoint(e)})}}]),e}();function pv(e,t){var n=e.sourceBBox.clone();return t&&t.paddingBox?n.moveAndExpand(t.paddingBox):n}function gv(e,t){var n=e.targetBBox.clone();return t&&t.paddingBox?n.moveAndExpand(t.paddingBox):n}function vv(e,t){return e.sourceAnchor?e.sourceAnchor:pv(e,t).getCenter()}function yv(e,t,n,r,i){var o=360/n,a=e.theta(function(e,t,n,r){var i=r.step,o=t.x-e.x,a=t.y-e.y,s=o/n.x,u=a/n.y,c=s*i,l=u*i;return new Ic(e.x+c,e.y+l)}(e,t,r,i)),s=kc.normalize(a+o/2);return o*Math.floor(s/o)}function mv(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function bv(e,t){if(!e)return t;var n=Math.abs(e),r=Math.round(n/t);return r?t+(n-r*t)/r:n}function wv(e,t){return e.round(t)}function xv(e,t,n){return wv(function(e,t){var n=t.source,r=Md.snapToGrid(e.x-n.x,t.x)+n.x,i=Md.snapToGrid(e.y-n.y,t.y)+n.y;return new Ic(r,i)}(e.clone(),t),n)}function Cv(e){return e.toString()}function kv(e){return new Ic(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function Ev(e,t){for(var n=1/0,r=0,i=t.length;r<i;r+=1){var o=e.manhattanDistance(t[r]);o<n&&(n=o)}return n}function Ov(e,t,n,r,i){var o=i.precision,a=i.directionMap,s=e.diff(t.getCenter()),u=Object.keys(a).reduce(function(i,u){if(n.includes(u)){for(var c,l=a[u],f=new Ic(e.x+l.x*(Math.abs(s.x)+t.width),e.y+l.y*(Math.abs(s.y)+t.height)),h=new Fc(e,f).intersect(t)||[],d=null,p=0;p<h.length;p+=1){var g=h[p],v=e.squaredDistance(g);(null==c||v>c)&&(c=v,d=g)}if(d){var y=xv(d,r,o);t.containsPoint(y)&&(y=xv(y.translate(l.x*r.x,l.y*r.y),r,o)),i.push(y)}}return i},[]);return t.containsPoint(e)||u.push(xv(e,r,o)),u}function Sv(e,t,n,r,i){for(var o,a=[],s=kv(i.diff(n)),u=Cv(n),c=e[u];c;){var l=kv((o=t[u]).diff(c));l.equals(s)||(a.unshift(o),s=l),c=e[u=Cv(c)]}var f=t[u];return kv(f.diff(r)).equals(s)||a.unshift(f),a}function Av(e,t,n,r,i){var o,a,u=i.precision;o=Lc.isRectangle(t)?wv(vv(e,i).clone(),u):wv(t.clone(),u),a=Lc.isRectangle(n)?wv(function(e,t){return e.targetAnchor?e.targetAnchor:gv(e,t).getCenter()}(e,i).clone(),u):wv(n.clone(),u);var c,l,f,h,d,p=(c=i.step,f=a,{source:(l=o).clone(),x:bv(f.x-l.x,c),y:bv(f.y-l.y,c)}),g=o,v=a;if(h=Lc.isRectangle(t)?Ov(g,t,i.startDirections,p,i):[g],d=Lc.isRectangle(n)?Ov(a,n,i.endDirections,p,i):[v],h=h.filter(function(e){return r.isAccessible(e)}),d=d.filter(function(e){return r.isAccessible(e)}),h.length>0&&d.length>0){for(var y=new hv,m={},b={},w={},x=0,C=h.length;x<C;x+=1){var k=h[x],E=Cv(k);y.add(E,Ev(k,d)),m[E]=k,w[E]=0}for(var O,S,A=i.previousDirectionAngle,T=void 0===A,M=function(e,t){var n=t.step;return t.directions.forEach(function(t){t.gridOffsetX=t.offsetX/n*e.x,t.gridOffsetY=t.offsetY/n*e.y}),t.directions}(p,i),_=M.length,j=d.reduce(function(e,t){var n=Cv(t);return e.push(n),e},[]),P=Ic.equalPoints(h,d),N=i.maxLoopCount;!y.isEmpty()&&N>0;){var R=y.pop(),D=m[R],I=b[R],L=w[R],F=D.equals(g),B=null==I,z=void 0;if(z=B?T?F?null:yv(g,D,_,p,i):A:yv(I,D,_,p,i),!(B&&P)&&j.indexOf(R)>=0)return i.previousDirectionAngle=z,Sv(b,m,D,g,v);for(var V=0;V<_;V+=1){var U=(O=M[V]).angle;if(S=mv(z,U),T&&F||!(S>i.maxDirectionChange)){var G=xv(D.clone().translate(O.gridOffsetX||0,O.gridOffsetY||0),p,u),H=Cv(G);if(!y.isClose(H)&&r.isAccessible(G)){if(j.indexOf(H)>=0)if(!G.equals(v))if(mv(U,yv(G,v,_,p,i))>i.maxDirectionChange)continue;var W=L+O.cost+(F?0:i.penalties[S]);(!y.isOpen(H)||W<w[H])&&(m[H]=G,b[H]=D,w[H]=W,y.add(H,W+Ev(G,d)))}}}N-=1}}return i.fallbackRoute?s.call(i.fallbackRoute,this,g,v,i):null}var Tv=function(e,t,n){for(var r,i,o=function(e){var t=Object.keys(e).reduce(function(t,n){var r=t;return r[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?e[n]:fv(e[n],e),t},{});if(t.padding){var n=a.normalizeSides(t.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}return t.directions.forEach(function(e){var t=new Ic(0,0),n=new Ic(e.offsetX,e.offsetY);e.angle=kc.normalize(t.theta(n))}),t}(t),u=pv(n,o),c=gv(n,o),l=vv(n,o),f=new dv(o).build(n.graph.model,n.cell),h=e.map(function(e){return Ic.create(e)}),d=[],p=l,g=0,v=h.length;g<=v;g+=1){var y=null;if(r=i||u,null==(i=h[g])){i=c;var m=n.cell;if((null==m.getSourceCellId()||null==m.getTargetCellId())&&"function"===typeof o.draggingRouter){var b=r===u?l:r,w=i.getOrigin();y=s.call(o.draggingRouter,n,b,w,o)}}if(null==y&&(y=Av(n,r,i,f,o)),null===y)return s.call(o.fallbackRouter,this,e,o,n);var x=y[0];x&&x.equals(p)&&y.shift(),p=y[y.length-1]||p,d.push.apply(d,Object(fu.a)(y))}return d},Mv=function(e,t,n){return s.call(Tv,this,e,Object.assign(Object.assign({},lv),t),n)},_v={maxDirectionChange:45,directions:function(){var e=fv(this.step,this),t=fv(this.cost,this),n=Math.ceil(Math.sqrt(e*e<<1));return[{cost:t,offsetX:e,offsetY:0},{cost:n,offsetX:e,offsetY:e},{cost:t,offsetX:0,offsetY:e},{cost:n,offsetX:-e,offsetY:e},{cost:t,offsetX:-e,offsetY:0},{cost:n,offsetX:-e,offsetY:-e},{cost:t,offsetX:0,offsetY:-e},{cost:n,offsetX:e,offsetY:-e}]},fallbackRoute:function(e,t,n){var r=e.theta(t),i=[],o={x:t.x,y:e.y},a={x:e.x,y:t.y};if(r%180>90){var s=o;o=a,a=s}var u=r%90<45?o:a,c=new Fc(e,u),l=90*Math.ceil(r/90),f=Ic.fromPolar(c.squaredLength(),kc.toRad(l+135),u),h=new Fc(t,f),d=c.intersectsWithLine(h),p=d||t,g=d?p:e,v=360/n.directions.length,y=g.theta(t),m=kc.normalize(y+v/2),b=v*Math.floor(m/v);return n.previousDirectionAngle=b,p&&i.push(p.round()),i.push(t),i}},jv=function(e,t,n){return s.call(Mv,this,e,Object.assign(Object.assign({},_v),t),n)},Pv=function(e,t,n){var r,i,o,a=t.offset||32,s=null==t.min?16:t.min,u=0,c=t.direction,l=n.sourceBBox,f=n.targetBBox,h=l.getCenter(),d=f.getCenter();if("number"===typeof a&&(u=a),null==c){var p=f.left-l.right,g=f.top-l.bottom;p>=0&&g>=0?c=p>=g?"L":"T":p<=0&&g>=0?c=(p=l.left-f.right)>=0&&p>=g?"R":"T":p>=0&&g<=0?c=(g=l.top-f.bottom)>=0?p>=g?"L":"B":"L":(p=l.left-f.right,g=l.top-f.bottom,c=p>=0&&g>=0?p>=g?"R":"B":p<=0&&g>=0?"B":p>=0&&g<=0?"R":Math.abs(p)>Math.abs(g)?"R":"B")}"H"===c?c=d.x-h.x>=0?"L":"R":"V"===c&&(c=d.y-h.y>=0?"T":"B"),"center"===a&&("L"===c?u=(f.left-l.right)/2:"R"===c?u=(l.left-f.right)/2:"T"===c?u=(f.top-l.bottom)/2:"B"===c&&(u=(l.top-f.bottom)/2));var v="L"===c||"R"===c;if(v){if(d.y===h.y)return Object(fu.a)(e);o="L"===c?1:-1,r="x",i="width"}else{if(d.x===h.x)return Object(fu.a)(e);o="T"===c?1:-1,r="y",i="height"}var y=h.clone(),m=d.clone();if(y[r]+=o*(l[i]/2+u),m[r]-=o*(f[i]/2+u),v){var b=y.x,w=m.x,x=l.width/2+s,C=f.width/2+s;d.x>h.x?w<=b&&(y.x=Math.max(w,h.x+x),m.x=Math.min(b,d.x-C)):w>=b&&(y.x=Math.min(w,h.x-x),m.x=Math.max(b,d.x+C))}else{var k=y.y,E=m.y,O=l.height/2+s,S=f.height/2+s;d.y>h.y?E<=k&&(y.y=Math.max(E,h.y+O),m.y=Math.min(k,d.y-S)):E>=k&&(y.y=Math.min(E,h.y-O),m.y=Math.max(k,d.y+S))}return[y.toJSON()].concat(Object(fu.a)(e),[m.toJSON()])};function Nv(e,t){if(null!=t&&!1!==t){var n="boolean"===typeof t?0:t;if(n>0){var r=Ic.create(e[1]).move(e[2],n),i=Ic.create(e[1]).move(e[0],n);return[r.toJSON()].concat(Object(fu.a)(e),[i.toJSON()])}var o=e[1];return[Object.assign({},o)].concat(Object(fu.a)(e),[Object.assign({},o)])}return e}var Rv,Dv,Iv=function(e,t,n){var r=t.width||50,i=(t.height||80)/2,o=t.angle||"auto",a=n.sourceAnchor,s=n.targetAnchor,u=n.sourceBBox,c=n.targetBBox;if(a.equals(s)){var l=function(e){var t=kc.toRad(e),n=Math.sin(t),o=Math.cos(t),s=new Ic(a.x+o*r,a.y+n*r),u=new Ic(s.x-o*i,s.y-n*i),c=u.clone().rotate(-90,s),l=u.clone().rotate(90,s);return[c.toJSON(),s.toJSON(),l.toJSON()]},f=function(e){var t=a.clone().move(e,-1),n=new Fc(t,e);return!u.containsPoint(e)&&!u.intersectsWithLine(n)},h=[0,90,180,270,45,135,225,315];if("number"===typeof o)return Nv(l(o),t.merge);var d=u.getCenter();if(d.equals(a))return Nv(l(0),t.merge);var p=d.angleBetween(a,d.clone().translate(1,0)),g=l(p);if(f(g[1]))return Nv(g,t.merge);for(var v=1,y=h.length;v<y;v+=1)if(f((g=l(p+h[v]))[1]))return Nv(g,t.merge);return Nv(g,t.merge)}var m=new Fc(a,s),b=m.parallel(-r),w=b.getCenter(),x=b.start.clone().move(b.end,i),C=b.end.clone().move(b.start,i),k=m.parallel(-1),E=new Fc(k.start,w),O=new Fc(k.end,w);if((u.containsPoint(w)||c.containsPoint(w)||u.intersectsWithLine(E)||u.intersectsWithLine(O)||c.intersectsWithLine(E)||c.intersectsWithLine(O))&&(w=(b=m.parallel(r)).getCenter(),x=b.start.clone().move(b.end,i),C=b.end.clone().move(b.start,i)),t.merge){var S=new Fc(a,s),A=new Fc(w,S.center).setLength(Number.MAX_SAFE_INTEGER),T=u.intersectsWithLine(A),M=c.intersectsWithLine(A),_=T?Array.isArray(T)?T:[T]:[];M&&(Array.isArray(M)?_.push.apply(_,Object(fu.a)(M)):_.push(M));var j=S.center.closest(_);j?(n.sourceAnchor=j.clone(),n.targetAnchor=j.clone()):(n.sourceAnchor=S.center.clone(),n.targetAnchor=S.center.clone())}return Nv([x.toJSON(),w.toJSON(),C.toJSON()],t.merge)};(Dv=Rv||(Rv={})).presets=C,Dv.registry=Cf.create({type:"router"}),Dv.registry.register(Dv.presets,!0);var Lv,Fv,Bv=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[e].concat(Object(fu.a)(n),[t]),o=new zc(i),a=new ol(o);return r.raw?a:a.serialize()},zv=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=3===n.length?0:1,o=Ic.create(n[0+i]),a=Ic.create(n[2+i]),s=Ic.create(n[1+i]);if(!Ic.equals(e,t)){var u=new Ic((e.x+t.x)/2,(e.y+t.y)/2),c=u.angleBetween(Ic.create(e).rotate(90,u),s);c>1&&(o.rotate(180-c,u),a.rotate(180-c,u),s.rotate(180-c,u))}var l="\n     M ".concat(e.x," ").concat(e.y,"\n     Q ").concat(o.x," ").concat(o.y," ").concat(s.x," ").concat(s.y,"\n     Q ").concat(a.x," ").concat(a.y," ").concat(t.x," ").concat(t.y,"\n  ");return r.raw?ol.parse(l):l},Vv=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new ol;i.appendSegment(ol.createSegment("M",e));for(var o,a,s=r.radius||10,u=0,c=n.length;u<c;u+=1){var l=Ic.create(n[u]),f=n[u-1]||e,h=n[u+1]||t;o=a||l.distance(f)/2,a=l.distance(h)/2;var d=-Math.min(s,o),p=-Math.min(s,a),g=l.clone().move(f,d).round(),v=l.clone().move(h,p).round(),y=new Ic(1/3*g.x+2/3*l.x,2/3*l.y+1/3*g.y),m=new Ic(1/3*v.x+2/3*l.x,2/3*l.y+1/3*v.y);i.appendSegment(ol.createSegment("L",g)),i.appendSegment(ol.createSegment("C",y,m,v))}return i.appendSegment(ol.createSegment("L",t)),r.raw?i:i.serialize()},Uv=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.direction;if(n&&0!==n.length){var a=[e].concat(Object(fu.a)(n),[t]),s=Vc.throughPoints(a);r=new ol(s)}else if((r=new ol).appendSegment(ol.createSegment("M",e)),o||(o=Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)?"H":"V"),"H"===o){var u=(e.x+t.x)/2;r.appendSegment(ol.createSegment("C",u,e.y,u,t.y,t.x,t.y))}else{var c=(e.y+t.y)/2;r.appendSegment(ol.createSegment("C",e.x,c,t.x,c,t.x,t.y))}return i.raw?r:r.serialize()},Gv=1,Hv=1/3,Wv=2/3;function qv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[e].concat(Object(fu.a)(n),[t]),i=[];return r.forEach(function(e,t){var n=r[t+1];null!=n&&i.push(new Fc(e,n))}),i}function Xv(e,t){return new Fc(e,t).squaredLength()}function $v(e,t,n,r){var i,o=new ol;return i=ol.createSegment("M",e[0].start),o.appendSegment(i),e.forEach(function(a,s){if(Lv.includes(a)){var u,c,l,f;if("arc"===n){u=-90,((c=a.start.diff(a.end)).x<0||0===c.x&&c.y<0)&&(u+=180);var h,d=a.getCenter(),p=new Fc(d,a.end).rotate(u,d);l=(h=new Fc(a.start,d)).pointAt(2/3).rotate(u,a.start),f=p.pointAt(1/3).rotate(-u,p.end),i=ol.createSegment("C",l,f,p.end),o.appendSegment(i),h=new Fc(d,a.end),l=p.pointAt(1/3).rotate(u,p.end),f=h.pointAt(1/3).rotate(-u,a.end),i=ol.createSegment("C",l,f,a.end),o.appendSegment(i)}else if("gap"===n)i=ol.createSegment("M",a.end),o.appendSegment(i);else if("cubic"===n){u=a.start.theta(a.end);var g=.6*t,v=1.35*t;((c=a.start.diff(a.end)).x<0||0===c.x&&c.y<0)&&(v*=-1),l=new Ic(a.start.x+g,a.start.y+v).rotate(u,a.start),f=new Ic(a.end.x-g,a.end.y+v).rotate(u,a.end),i=ol.createSegment("C",l,f,a.end),o.appendSegment(i)}}else{var y=e[s+1];0===r||!y||Lv.includes(y)?(i=ol.createSegment("L",a.end),o.appendSegment(i)):function(e,t,n,r,i){var o,a=n.distance(r)/2,s=n.distance(i)/2,u=-Math.min(e,a),c=-Math.min(e,s),l=n.clone().move(r,u).round(),f=n.clone().move(i,c).round(),h=new Ic(Hv*l.x+Wv*n.x,Wv*n.y+Hv*l.y),d=new Ic(Hv*f.x+Wv*n.x,Wv*n.y+Hv*f.y);o=ol.createSegment("L",l),t.appendSegment(o),o=ol.createSegment("C",h,d,f),t.appendSegment(o)}(r,o,a.end,a.start,y.end)}}),o}var Yv,Kv,Jv=function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Lv=[],Fv=[],function(e){var t=e.graph._jumpOverUpdateList;if(null==t&&(t=e.graph._jumpOverUpdateList=[],e.graph.on("cell:mouseup",function(){for(var t=e.graph._jumpOverUpdateList,n=0;n<t.length;n+=1)t[n].update()}),e.graph.on("model:reseted",function(){t=e.graph._jumpOverUpdateList=[]})),t.indexOf(e)<0){t.push(e);var n=function(){return t.splice(t.indexOf(e),1)};e.cell.once("change:connector",n),e.cell.once("removed",n)}}(this);var o=i.size||5,a=i.type||"arc",s=i.radius||0,u=i.ignoreConnectors||["smooth"],c=this.graph,l=c.model.getEdges();if(1===l.length)return $v(qv(e,t,n),o,a,s);var f=this.cell,h=l.indexOf(f),d=c.options.connecting.connector||{},p=l.filter(function(e,t){var n=e.getConnector()||d;return!u.includes(n.name)&&(!(t>h)||"jumpover"!==n.name)}),g=p.map(function(e){return c.renderer.findViewByCell(e)}),v=qv(e,t,n),y=g.map(function(e){return null==e?[]:e===r?v:qv(e.sourcePoint,e.targetPoint,e.routePoints)}),m=[];v.forEach(function(e){var t=p.reduce(function(t,n,r){if(n!==f){var i=function(e,t){var n=[];return t.forEach(function(t){var r=e.intersectsWithLine(t);r&&n.push(r)}),n}(e,y[r]);t.push.apply(t,Object(fu.a)(i))}return t},[]).sort(function(t,n){return Xv(e.start,t)-Xv(e.start,n)});t.length>0?m.push.apply(m,Object(fu.a)(function(e,t,n){return t.reduce(function(r,i,o){if(Fv.includes(i))return r;var a=r.pop()||e,s=Ic.create(i).move(a.start,-n),u=Ic.create(i).move(a.start,+n),c=t[o+1];if(null!=c){var l=u.distance(c);l<=n&&(u=c.move(a.start,l),Fv.push(c))}else if(s.distance(a.end)<2*n+Gv)return r.push(a),r;if(u.distance(a.start)<2*n+Gv)return r.push(a),r;var f=new Fc(s,u);return Lv.push(f),r.push(new Fc(a.start,s),f,new Fc(u,a.end)),r},[])}(e,t,o))):m.push(e)});var b=$v(m,o,a,s);return Lv=[],Fv=[],i.raw?b:b.serialize()};(Kv=Yv||(Yv={})).presets=k,Kv.registry=Cf.create({type:"connector"}),Kv.registry.register(Kv.presets,!0);var Zv=Cf.create,Qv=function(){function e(t){Object(Es.a)(this,e),this.cell=t,this.ids={},this.cache={}}return Object(Oc.a)(e,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",s=this.cell.getPropByPath(t),u=i.defaults(o,e.defaultOptions),l=this.getTiming(u.timing),f=this.getInterp(u.interp,s,n),h=0,d=Array.isArray(t)?t.join(a):t,p=Array.isArray(t)?t:t.split(a),g=function e(){var t=(new Date).getTime();0===h&&(h=t);var n=(t-h)/u.duration;n<1?r.ids[d]=c.requestAnimationFrame(e):n=1;var i=f(l(n));r.cell.setPropByPath(p,i),o.progress&&o.progress(Object.assign({progress:n,currentValue:i},r.getArgs(d))),1===n&&(r.cell.notify("transition:end",r.getArgs(d)),r.cell.notify("transition:complete",r.getArgs(d)),o.complete&&o.complete(r.getArgs(d)),r.cell.notify("transition:finish",r.getArgs(d)),o.finish&&o.finish(r.getArgs(d)),r.clean(d))};return setTimeout(function(){r.stop(t,void 0,a),r.cache[d]={startValue:s,targetValue:n,options:u},r.ids[d]=c.requestAnimationFrame(g),r.cell.notify("transition:begin",r.getArgs(d)),r.cell.notify("transition:start",r.getArgs(d)),o.start&&o.start(r.getArgs(d))},o.delay),this.stop.bind(this,t,a,o)}},{key:"stop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",o=Array.isArray(e)?e:e.split(r);return Object.keys(this.ids).filter(function(e){return i.isEqual(o,e.split(r).slice(0,o.length))}).forEach(function(e){c.cancelAnimationFrame(t.ids[e]);var r=t.cache[e],i=t.getArgs(e),o=Object.assign(Object.assign({},r.options),n),a=o.jumpedToEnd;a&&null!=r.targetValue&&(t.cell.setPropByPath(e,r.targetValue),t.cell.notify("transition:end",Object.assign({},i)),t.cell.notify("transition:complete",Object.assign({},i)),o.complete&&o.complete(Object.assign({},i)));var s=Object.assign({jumpedToEnd:a},i);t.cell.notify("transition:stop",Object.assign({},s)),o.stop&&o.stop(Object.assign({},s)),t.cell.notify("transition:finish",Object.assign({},i)),o.finish&&o.finish(Object.assign({},i)),t.clean(e)}),this}},{key:"clean",value:function(e){delete this.ids[e],delete this.cache[e]}},{key:"getTiming",value:function(e){return"string"===typeof e?Np[e]:e}},{key:"getInterp",value:function(e,t,n){return e?e(t,n):"number"===typeof n?Rp.number(t,n):"string"===typeof n?"#"===n[0]?Rp.color(t,n):Rp.unit(t,n):Rp.object(t,n)}},{key:"getArgs",value:function(e){var t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}]),e}();(Qv||(Qv={})).defaultOptions={delay:10,duration:100,timing:"linear"};var ey=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ty=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).pending=!1,e.changing=!1,e.data={},e.mutate(i.cloneDeep(n)),e.changed={},e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"mutate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0===n.unset,o=!0===n.silent,a=[],s=this.changing;this.changing=!0,s||(this.previous=i.cloneDeep(this.data),this.changed={});var u=this.data,c=this.previous,l=this.changed;if(Object.keys(e).forEach(function(t){var n=t,o=e[n];i.isEqual(u[n],o)||a.push(n),i.isEqual(c[n],o)?delete l[n]:l[n]=o,r?delete u[n]:u[n]=o}),!o&&a.length>0&&(this.pending=!0,this.pendingOptions=n,a.forEach(function(e){t.emit("change:*",{key:e,options:n,store:t,current:u[e],previous:c[e]})})),s)return this;if(!o)for(;this.pending;)this.pending=!1,this.emit("changed",{current:u,previous:c,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(null==e)return this.data;var n=this.data[e];return null==n?t:n}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return null==t?void 0:t}}},{key:"set",value:function(e,t,n){return null!=e&&("object"===typeof e?this.mutate(e,t):this.mutate(Object(T.a)({},e,t),n)),this}},{key:"remove",value:function(e,t){var n,r={};if("string"===typeof e)r[e]=void 0,n=t;else if(Array.isArray(e))e.forEach(function(e){return r[e]=void 0}),n=t;else{for(var i in this.data)r[i]=void 0;n=e}return this.mutate(r,Object.assign(Object.assign({},n),{unset:!0})),this}},{key:"getByPath",value:function(e){return i.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(e)?Object(fu.a)(e):e.split("/"),o=Array.isArray(e)?e.join("/"):e,a=r[0],s=r.length;if(n.propertyPath=o,n.propertyValue=t,n.propertyPathArray=r,1===s)this.set(a,t,n);else{for(var u={},c=u,l=a,f=1;f<s;f+=1){var h=r[f],d=Number.isFinite(Number(h));c=c[l]=d?[]:{},l=h}i.setByPath(u,r,t,"/");var p=i.cloneDeep(this.data);n.rewrite&&i.unsetByPath(p,e,"/");var g=i.merge(p,u);this.set(a,g[a],n)}return this}},{key:"removeByPath",value:function(e,t){var n=Array.isArray(e)?e:e.split("/"),r=n[0];if(1===n.length)this.remove(r,t);else{var o=n.slice(1),a=i.cloneDeep(this.get(r));a&&i.unsetByPath(a,o),this.set(r,a,t)}return this}},{key:"hasChanged",value:function(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(null==e)return this.hasChanged()?i.cloneDeep(this.changed):null;var t,n=this.changing?this.previous:this.data,r={};for(var o in e){var a=e[o];i.isEqual(n[o],a)||(r[o]=a,t=!0)}return t?i.cloneDeep(r):null}},{key:"toJSON",value:function(){return i.cloneDeep(this.data)}},{key:"clone",value:function(){return new(0,this.constructor)(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),t}(Tp);ey([Tp.dispose()],ty.prototype,"dispose",null);var ny,ry,iy=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},oy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ay=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Es.a)(this,t);var r=(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).constructor.getDefaults(!0),a=i.merge({},e.preprocess(r),e.preprocess(n));return e.id=a.id||o.uuid(),e.store=new ty(a),e.animation=new Qv(Object(xp.a)(e)),e.setup(),e.init(),e.postprocess(n),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){}},{key:"preprocess",value:function(e,t){var n=e.id,r=this.constructor.applyPropHooks(this,e);return null==n&&!0!==t&&(r.id=o.uuid()),r}},{key:"postprocess",value:function(e){}},{key:"setup",value:function(){var e=this;this.store.on("change:*",function(t){var n=t.key,r=t.current,i=t.previous,o=t.options;e.notify("change:*",{key:n,options:o,current:r,previous:i,cell:e}),e.notify("change:".concat(n),{options:o,current:r,previous:i,cell:e});var a=n;"source"!==a&&"target"!==a||e.notify("change:terminal",{type:a,current:r,previous:i,options:o,cell:e})}),this.store.on("changed",function(t){var n=t.options;return e.notify("changed",{options:n,cell:e})})}},{key:"notify",value:function(e,t){this.trigger(e,t);var n=this.model;return n&&(n.notify("cell:".concat(e),t),this.isNode()?n.notify("node:".concat(e),Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&n.notify("edge:".concat(e),Object.assign(Object.assign({},t),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(e){return this.store===e.store}},{key:"getProp",value:function(e,t){return null==e?this.store.get():this.store.get(e,t)}},{key:"setProp",value:function(e,t,n){if("string"===typeof e)this.store.set(e,t,n);else{var r=this.preprocess(e,!0);this.store.set(i.merge({},this.getProp(),r),t),this.postprocess(e)}return this}},{key:"removeProp",value:function(e,t){return"string"===typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}},{key:"hasChanged",value:function(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}},{key:"getPropByPath",value:function(e){return this.store.getByPath(e)}},{key:"setPropByPath",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model&&("children"===e?this._children=t?t.map(function(e){return n.model.getCell(e)}).filter(function(e){return null!=e}):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,r),this}},{key:"removePropByPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:e.split("/");return"attrs"===n[0]&&(t.dirty=!0),this.store.removeByPath(n,t),this}},{key:"prop",value:function(e,t,n){return null==e?this.getProp():"string"===typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,n||{}):this.setPropByPath(e,t,n||{}):this.setProp(e,t||{})}},{key:"previous",value:function(e){return this.store.getPrevious(e)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("zIndex",e,t),this}},{key:"removeZIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("zIndex",e),this}},{key:"toFront",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;if(t){var n,r=t.getMaxZIndex();e.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this],r=r-n.length+1;var i=t.total(),o=t.indexOf(this)!==i-n.length;o||(o=n.some(function(e,t){return e.getZIndex()!==r+t})),o&&this.batchUpdate("to-front",function(){r+=n.length,n.forEach(function(t,n){t.setZIndex(r+n,e)})})}return this}},{key:"toBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;if(t){var n,r=t.getMinZIndex();e.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this];var i=0!==t.indexOf(this);i||(i=n.some(function(e,t){return e.getZIndex()!==r+t})),i&&this.batchUpdate("to-back",function(){r-=n.length,n.forEach(function(t,n){t.setZIndex(r+n,e)})})}return this}},{key:"getMarkup",value:function(){var e=this.store.get("markup");null==e&&(e=this.constructor.getMarkup());return e}},{key:"setMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("markup",e,t),this}},{key:"removeMarkup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("markup",e),this}},{key:"getAttrs",value:function(){var e=this.store.get("attrs");return e?Object.assign({},e):{}}},{key:"setAttrs",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)this.removeAttrs(n);else{var r=function(e){return t.store.set("attrs",e,n)};if(!0===n.overwrite)r(e);else{var o=this.getAttrs();!1===n.deep?r(Object.assign(Object.assign({},o),e)):r(i.merge({},o,e))}}return this}},{key:"replaceAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeAttrs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("attrs",e),this}},{key:"getAttrDefinition",value:function(e){if(!e)return null;var t=this.constructor.getAttrHooks()||{},n=t[e]||Wh.registry.get(e);if(!n){var r=o.camelCase(e);n=t[r]||Wh.registry.get(r)}return n||null}},{key:"getAttrByPath",value:function(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}},{key:"setAttrByPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(e),t,n),this}},{key:"removeAttrByPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(e),t),this}},{key:"prefixAttrPath",value:function(e){return Array.isArray(e)?["attrs"].concat(e):"attrs/".concat(e)}},{key:"attr",value:function(e,t,n){return null==e?this.getAttrByPath():"string"===typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,n||{}):this.setAttrByPath(e,t,n||{}):this.setAttrs(e,t||{})}},{key:"setVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("visible",e,t),this}},{key:"isVisible",value:function(){return!1!==this.store.get("visible")}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isVisible()||this.setVisible(!0,e),this}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,e),this}},{key:"toggleVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="boolean"===typeof e?t:e;return("boolean"===typeof e?e:!this.isVisible())?this.show(n):this.hide(n),this}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)this.removeData(n);else{var r=function(e){return t.store.set("data",e,n)};if(!0===n.overwrite)r(e);else{var o=this.getData();!1===n.deep?r("object"===typeof e?Object.assign(Object.assign({},o),e):e):r(i.merge({},o,e))}}return this}},{key:"replaceData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("data",e),this}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var e=this.getParentId();if(e&&this.model){var t=this.model.getCell(e);return this._parent=t,t}return null}},{key:"getChildren",value:function(){var e=this,t=this.store.get("children");if(t&&t.length&&this.model){var n=t.map(function(t){var n;return null===(n=e.model)||void 0===n?void 0:n.getCell(t)}).filter(function(e){return null!=e});return this._children=n,Object(fu.a)(n)}return null}},{key:"hasParent",value:function(){return null!=this.parent}},{key:"isParentOf",value:function(e){return null!=e&&e.getParent()===this}},{key:"isChildOf",value:function(e){return null!=e&&this.getParent()===e}},{key:"eachChild",value:function(e,t){return this.children&&this.children.forEach(e,t),this}},{key:"filterChild",value:function(e,t){return this.children?this.children.filter(e,t):[]}},{key:"getChildCount",value:function(){return null==this.children?0:this.children.length}},{key:"getChildIndex",value:function(e){return null==this.children?-1:this.children.indexOf(e)}},{key:"getChildAt",value:function(e){return null!=this.children&&e>=0?this.children[e]:null}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.getParent();n;)t.push(n),n=!1!==e.deep?n.getParent():null;return t}},{key:"getDescendants",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1!==e.deep){if(e.breadthFirst){for(var t=[],n=this.getChildren()||[];n.length>0;){var r=n.shift(),i=r.getChildren();t.push(r),i&&n.push.apply(n,Object(fu.a)(i))}return t}var o=this.getChildren()||[];return o.forEach(function(t){o.push.apply(o,Object(fu.a)(t.getDescendants(e)))}),o}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return!1;if(!1!==t.deep){for(var n=this.getParent();n;){if(n===e)return!0;n=n.getParent()}return!1}return this.isChildOf(e)}},{key:"isAncestorOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=e&&e.isDescendantOf(this,t)}},{key:"contains",value:function(e){return this.isAncestorOf(e)}},{key:"getCommonAncestor",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.getCommonAncestor.apply(t,[this].concat(n))}},{key:"setParent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}},{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._children=e,null!=e?this.store.set("children",e.map(function(e){return e.id}),t):this.store.remove("children",t),this}},{key:"unembed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.children;if(null!=n&&null!=e){var r=this.getChildIndex(e);-1!==r&&(n.splice(r,1),e.setParent(null,t),this.setChildren(n,t))}return this}},{key:"embed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.addTo(this,t),this}},{key:"addTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.isCell(e)?e.addChild(this,n):e.addCell(this,n),this}},{key:"insertTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.insertChild(this,t,n),this}},{key:"addChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertChild(e,void 0,t)}},{key:"insertChild",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&e!==this){var r=e.getParent(),i=this!==r,o=t;if(null==o&&(o=this.getChildCount(),i||(o-=1)),r){var a=r.getChildren();if(a){var s=a.indexOf(e);s>=0&&(e.setParent(null,n),a.splice(s,1),r.setChildren(a,n))}}var u=this.children;if(null==u?(u=[]).push(e):u.splice(o,0,e),e.setParent(this,n),this.setChildren(u,n),i&&this.model){var c=this.model.getIncomingEdges(this),l=this.model.getOutgoingEdges(this);c&&c.forEach(function(e){return e.updateParent(n)}),l&&l.forEach(function(e){return e.updateParent(n)})}this.model&&this.model.addCell(e,n)}return this}},{key:"removeFromParent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getParent();if(null!=t){var n=t.getChildIndex(this);t.removeChildAt(n,e)}return this}},{key:"removeChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getChildIndex(e);return this.removeChildAt(n,t)}},{key:"removeChildAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getChildAt(e);return null!=this.children&&null!=n&&(this.unembed(n,t),n.remove(t)),n}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.batchUpdate("remove",function(){var n=e.getParent();n&&n.removeChild(e,t),!1!==t.deep&&e.eachChild(function(e){return e.remove(t)}),e.model&&e.model.removeCell(e,t)}),this}},{key:"transition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";return this.animation.start(e,t,n,r)}},{key:"stopTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";return this.animation.stop(e,t,n),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(e,t,n){return this}},{key:"scale",value:function(e,t,n,r){return this}},{key:"addTools",value:function(e,t,n){var r=Array.isArray(e)?e:[e],o="string"===typeof t?t:null,a="object"===typeof t?t:"object"===typeof n?n:{};if(a.reset)return this.setTools({name:o,items:r,local:a.local},a);var s=i.cloneDeep(this.getTools());return null==s||null==o||s.name===o?(null==s&&(s={}),s.items||(s.items=[]),s.name=o,s.items=[].concat(Object(fu.a)(s.items),Object(fu.a)(r)),this.setTools(Object.assign({},s),a)):void 0}},{key:"setTools",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?this.removeTools():this.store.set("tools",t.normalizeTools(e),n),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("tools",e),this}},{key:"hasTools",value:function(e){var t=this.getTools();return null!=t&&(null==e||t.name===e)}},{key:"hasTool",value:function(e){var t=this.getTools();return null!=t&&t.items.some(function(t){return"string"===typeof t?t===e:t.name===e})}},{key:"removeTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.cloneDeep(this.getTools());if(n){var r=!1,o=n.items.slice(),a=function(e){o.splice(e,1),r=!0};if("number"===typeof e)a(e);else for(var s=o.length-1;s>=0;s-=1){var u=o[s];("string"===typeof u?u===e:u.name===e)&&a(s)}r&&(n.items=o,this.setTools(n,t))}return this}},{key:"getBBox",value:function(e){return new Lc}},{key:"getConnectionPoint",value:function(e,t){return new Ic}},{key:"toJSON",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},this.store.get()),r=Object.prototype.toString,o=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!n.shape){var a=this.constructor;throw new Error("Unable to serialize ".concat(o,' missing "shape" prop, check the ').concat(o,' "').concat(a.name||r.call(a),'"'))}var s=this.constructor,u=!0===t.diff,c=n.attrs||{},l=s.getDefaults(!0),f=u?this.preprocess(l,!0):l,h=f.attrs||{},d={};Object.keys(n).forEach(function(t){var a=n[t];if(null!=a&&!Array.isArray(a)&&"object"===typeof a&&!i.isPlainObject(a))throw new Error("Can only serialize ".concat(o,' with plain-object props, but got a "').concat(r.call(a),'" type of key "').concat(t,'" on ').concat(o,' "').concat(e.id,'"'));if("attrs"!==t&&"shape"!==t&&u){var s=f[t];i.isEqual(a,s)&&delete n[t]}}),Object.keys(c).forEach(function(e){var t=c[e],n=h[e];Object.keys(t).forEach(function(r){var o=t[r],a=n?n[r]:null;null==o||"object"!==typeof o||Array.isArray(o)?null!=n&&i.isEqual(a,o)||(null==d[e]&&(d[e]={}),d[e][r]=o):Object.keys(o).forEach(function(t){var s=o[t];null!=n&&null!=a&&i.isObject(a)&&i.isEqual(a[t],s)||(null==d[e]&&(d[e]={}),null==d[e][r]&&(d[e][r]={}),d[e][r][t]=s)})})});var p=Object.assign(Object.assign({},n),{attrs:i.isEmpty(d)?void 0:d});null==p.attrs&&delete p.attrs;var g=p;return 0===g.angle&&delete g.angle,i.cloneDeep(g)}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.deep){var n=Object.assign({},this.store.get());return e.keepId||delete n.id,delete n.parent,delete n.children,new(0,this.constructor)(n)}return t.deepClone(this)[this.id]}},{key:"findView",value:function(e){return e.renderer.findViewByCell(this)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.model;return this.notify("batch:start",{name:e,data:t,cell:this}),n&&n.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.model;return n&&n.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}},{key:"batchUpdate",value:function(e,t,n){var r=this.model;this.startBatch(e,n,r);var i=t();return this.stopBatch(e,n,r),i}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"model",get:function(){return this._model},set:function(e){this._model!==e&&(this._model=e)}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"zIndex",get:function(){return this.getZIndex()},set:function(e){null==e?this.removeZIndex():this.setZIndex(e)}},{key:"markup",get:function(){return this.getMarkup()},set:function(e){null==e?this.removeMarkup():this.setMarkup(e)}},{key:"attrs",get:function(){return this.getAttrs()},set:function(e){null==e?this.removeAttrs():this.setAttrs(e)}},{key:"visible",get:function(){return this.isVisible()},set:function(e){this.setVisible(e)}},{key:"data",get:function(){return this.getData()},set:function(e){this.setData(e)}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}}],[{key:"config",value:function(e){var t,n=this,r=e.markup,o=e.propHooks,a=e.attrHooks,s=oy(e,["markup","propHooks","attrHooks"]);(null!=r&&(this.markup=r),o)&&(this.propHooks=this.propHooks.slice(),Array.isArray(o)?(t=this.propHooks).push.apply(t,Object(fu.a)(o)):"function"===typeof o?this.propHooks.push(o):Object.keys(o).forEach(function(e){var t=o[e];"function"===typeof t&&n.propHooks.push(t)}));a&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),a)),this.defaults=i.merge({},this.defaults,s)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(e){return e?this.defaults:i.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(e,t){return this.propHooks.reduce(function(t,n){return n?s.call(n,e,t):t},t)}}]),t}(Tp);ay.defaults={},ay.attrHooks={},ay.propHooks=[],iy([Tp.dispose()],ay.prototype,"dispose",null),function(e){(ay||(ay={})).normalizeTools=function(e){return"string"===typeof e?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}}(),function(e){e.toStringTag="X6.".concat(e.name),e.isCell=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr}}(ay||(ay={})),function(e){e.getCommonAncestor=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(e){return null!=e}).map(function(e){return e.getAncestors()}).sort(function(e,t){return e.length-t.length});return r.shift().find(function(e){return r.every(function(t){return t.includes(e)})})||null},e.getCellsBBox=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=0,i=e.length;r<i;r+=1){var o=e[r],a=o.getBBox(t);if(a){if(o.isNode()){var s=o.getAngle();null!=s&&0!==s&&(a=a.bbox(s))}n=null==n?a:n.union(a)}}return n},e.deepClone=function(t){var n=[t].concat(Object(fu.a)(t.getDescendants({deep:!0})));return e.cloneCells(n)},e.cloneCells=function(e){var t=r.uniq(e),n=t.reduce(function(e,t){return e[t.id]=t.clone(),e},{});return t.forEach(function(e){var t=n[e.id];if(t.isEdge()){var r=t.getSourceCellId(),i=t.getTargetCellId();r&&n[r]&&t.setSource(Object.assign(Object.assign({},t.getSource()),{cell:n[r].id})),i&&n[i]&&t.setTarget(Object.assign(Object.assign({},t.getTarget()),{cell:n[i].id}))}var o=e.getParent();o&&n[o.id]&&t.setParent(n[o.id]);var a=e.getChildren();if(a&&a.length){var s=a.reduce(function(e,t){return n[t.id]&&e.push(n[t.id]),e},[]);s.length>0&&t.setChildren(s)}}),n}}(ay||(ay={})),(ny=ay||(ay={})).config({propHooks:function(e){var t=e.tools,n=oy(e,["tools"]);return t&&(n.tools=ny.normalizeTools(t)),n}}),function(e){var t,n;e.exist=function(e,r){return r?null!=t&&t.exist(e):null!=n&&n.exist(e)},e.setEdgeRegistry=function(e){t=e},e.setNodeRegistry=function(e){n=e}}(ry||(ry={}));var sy=function(){function e(t){Object(Es.a)(this,e),this.ports=[],this.groups={},this.init(i.cloneDeep(t))}return Object(Oc.a)(e,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(e){return null!=e?this.groups[e]:null}},{key:"getPortsByGroup",value:function(e){return this.ports.filter(function(t){return t.group===e||null==t.group&&null==e})}},{key:"getPortsLayoutByGroup",value:function(e,t){var n,r=this,i=this.getPortsByGroup(e),o=e?this.getGroup(e):null,a=o?o.position:null,s=a?a.name:null;if(null!=s){var u=Xd.registry.get(s);if(null==u)return Xd.registry.onNotFound(s);n=u}else n=Xd.presets.left;var c=i.map(function(e){return e&&e.position&&e.position.args||{}}),l=a&&a.args||{};return n(c,t,l).map(function(e,n){var o=i[n];return{portLayout:e,portId:o.id,portSize:o.size,portAttrs:o.attrs,labelSize:o.label.size,labelLayout:r.getPortLabelLayout(o,Ic.create(e.position),t)}})}},{key:"init",value:function(e){var t=this,n=e.groups,r=e.items;null!=n&&Object.keys(n).forEach(function(e){t.groups[e]=t.parseGroup(n[e])}),Array.isArray(r)&&r.forEach(function(e){t.ports.push(t.parsePort(e))})}},{key:"parseGroup",value:function(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}},{key:"parsePort",value:function(e){var t=Object.assign({},e),n=this.getGroup(e.group)||{};return t.markup=t.markup||n.markup,t.attrs=i.merge({},n.attrs,t.attrs),t.position=this.createPosition(n,t),t.label=i.merge({},n.label,this.getLabel(t)),t.zIndex=this.getZIndex(n,t),t.size=Object.assign(Object.assign({},n.size),t.size),t}},{key:"getZIndex",value:function(e,t){return"number"===typeof t.zIndex?t.zIndex:"number"===typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}},{key:"createPosition",value:function(e,t){return i.merge({name:"left",args:{}},e.position,{args:t.args})}},{key:"getPortPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e){if(t)return{name:"left",args:{}}}else{if("string"===typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"===typeof e)return e}return{args:{}}}},{key:"getPortLabelPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e){if(t)return{name:"left",args:{}}}else{if("string"===typeof e)return{name:e,args:{}};if("object"===typeof e)return e}return{args:{}}}},{key:"getLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.label||{};return n.position=this.getPortLabelPosition(n.position,t),n}},{key:"getPortLabelLayout",value:function(e,t,n){var r=e.label.position.name||"left",i=e.label.position.args||{},o=vp.registry.get(r)||vp.presets.left;return o?o(t,n,i):null}}]),e}(),uy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},cy=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this,n))).initPorts(),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"preprocess",value:function(e,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=uy(e,["x","y","width","height"]);if(null!=r||null!=i){var u=s.position;s.position=Object.assign(Object.assign({},u),{x:null!=r?r:u?u.x:0,y:null!=i?i:u?u.y:0})}if(null!=o||null!=a){var c=s.size;s.size=Object.assign(Object.assign({},c),{width:null!=o?o:c?c.width:0,height:null!=a?a:c?c.height:0})}return Object(xf.a)(Object(Ac.a)(t.prototype),"preprocess",this).call(this,s,n)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(e,t,n){return void 0===e?this.getSize():"number"===typeof e?this.setSize(e,t,n):this.setSize(e,t)}},{key:"getSize",value:function(){var e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}},{key:"setSize",value:function(e,t,n){return"object"===typeof e?this.resize(e.width,e.height,t):this.resize(e,t,n),this}},{key:"resize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startBatch("resize",n);var r=n.direction;if(r){var i=this.getSize();switch(r){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width}var o={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[r],a=kc.normalize(this.getAngle()||0);n.absolute&&(o+=Math.floor((a+45)/90),o%=4);var s=this.getBBox(),u=(0===o?s.getBottomLeft():1===o?s.getCorner():2===o?s.getTopRight():s.getOrigin()).clone().rotate(-a,s.getCenter()),c=Math.sqrt(e*e+t*t)/2,l=o*Math.PI/2;l+=Math.atan(o%2===0?t/e:e/t),l-=kc.toRad(a);var f=Ic.fromPolar(c,l,u).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},n),this.setPosition(f.x,f.y,n)}else this.store.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this}},{key:"scale",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getBBox().scale(e,t,null==n?void 0:n);return this.startBatch("scale",r),this.setPosition(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this}},{key:"position",value:function(e,t,n){return"number"===typeof e?this.setPosition(e,t,n):this.getPosition(e)}},{key:"getPosition",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).relative){var e=this.getParent();if(null!=e&&e.isNode()){var t=this.getPosition(),n=e.getPosition();return{x:t.x-n.x,y:t.y-n.y}}}var r=this.store.get("position");return r?Object.assign({},r):{x:0,y:0}}},{key:"setPosition",value:function(e,t){var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"===typeof e?(n=e.x,r=e.y,i=t||{}):(n=e,r=t,i=o||{}),i.relative){var a=this.getParent();if(null!=a&&a.isNode()){var s=a.getPosition();n+=s.x,r+=s.y}}if(i.deep){var u=this.getPosition();this.translate(n-u.x,r-u.y,i)}else this.store.set("position",{x:n,y:r},i);return this}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===e&&0===t)return this;n.translateBy=n.translateBy||this.id;var r=this.getPosition();if(null!=n.restrict&&n.translateBy===this.id){var i=this.getBBox({deep:!0}),o=n.restrict,a=r.x-i.x,s=r.y-i.y,u=Math.max(o.x+a,Math.min(o.x+o.width+a-i.width,r.x+e)),c=Math.max(o.y+s,Math.min(o.y+o.height+s-i.height,r.y+t));e=u-r.x,t=c-r.y}var l={x:r.x+e,y:r.y+t};return n.tx=e,n.ty=t,n.transition?("object"!==typeof n.transition&&(n.transition={}),this.transition("position",l,Object.assign(Object.assign({},n.transition),{interp:Rp.object})),this.eachChild(function(r){var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(e,t,n)})):(this.startBatch("translate",n),this.store.set("position",l,n),this.eachChild(function(r){var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(e,t,n)}),this.stopBatch("translate",n)),this}},{key:"angle",value:function(e,t){return null==e?this.getAngle():this.rotate(e,t)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAngle();if(t.center){var r=this.getSize(),i=this.getPosition(),o=this.getBBox().getCenter();o.rotate(n-e,t.center);var a=o.x-r.width/2-i.x,s=o.y-r.height/2-i.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(i.x+a,i.y+s,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(n+e)%360,t);return this}},{key:"getBBox",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deep){var e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),ay.getCellsBBox(e)}return Lc.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(e,t){var n=this.getBBox(),r=n.getCenter(),i=e.getTerminal(t);if(null==i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var a=this.getPort(o);if(!a||!a.group)return r;var s=this.getPortsPosition(a.group)[o].position,u=Ic.create(s).translate(n.getOrigin()),c=this.getAngle();return c&&u.rotate(-c,r),u}},{key:"fit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(this.getChildren()||[]).filter(function(e){return e.isNode()});if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&t.forEach(function(t){return t.fit(e)});var n=ay.getCellsBBox(t),r=n.x,i=n.y,o=n.width,s=n.height,u=a.normalizeSides(e.padding);return r-=u.left,i-=u.top,o+=u.left+u.right,s+=u.bottom+u.top,this.store.set({position:{x:r,y:i},size:{width:o,height:s}},e),this.stopBatch("fit-embeds"),this}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||qp.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portContainerMarkup",qp.clone(e),t),this}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||qp.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portMarkup",qp.clone(e),t),this}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||qp.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portLabelMarkup",qp.clone(e),t),this}},{key:"getPorts",value:function(){return i.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(e){return this.getPorts().filter(function(t){return t.group===e})}},{key:"getPort",value:function(e){return i.cloneDeep(this.ports.items.find(function(t){return t.id&&t.id===e}))}},{key:"getPortAt",value:function(e){return this.ports.items[e]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(e){return-1!==this.getPortIndex(e)}},{key:"getPortIndex",value:function(e){var t="string"===typeof e?e:e.id;return null!=t?this.ports.items.findIndex(function(e){return e.id===t}):-1}},{key:"getPortsPosition",value:function(e){var t=this.getSize();return this.port.getPortsLayoutByGroup(e,new Lc(0,0,t.width,t.height)).reduce(function(e,t){var n=t.portLayout;return e[t.portId]={position:Object.assign({},n.position),angle:n.angle||0},e},{})}},{key:"getPortProp",value:function(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}},{key:"setPortProp",value:function(e,t,n,r){if("string"===typeof t||Array.isArray(t)){var i=this.prefixPortPath(e,t),o=n;return this.setPropByPath(i,o,r)}var a=this.prefixPortPath(e),s=t;return this.setPropByPath(a,s,n)}},{key:"removePortProp",value:function(e,t,n){return"string"===typeof t||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),n):this.removePropByPath(this.prefixPortPath(e),t)}},{key:"portProp",value:function(e,t,n,r){return null==t?this.getPortProp(e):"string"===typeof t||Array.isArray(t)?2===arguments.length?this.getPortProp(e,t):null==n?this.removePortProp(e,t,r):this.setPortProp(e,t,n,r):this.setPortProp(e,t,n)}},{key:"prefixPortPath",value:function(e,t){var n=this.getPortIndex(e);if(-1===n)throw new Error('Unable to find port with id: "'.concat(e,'"'));return null==t||""===t?["ports","items","".concat(n)]:Array.isArray(t)?["ports","items","".concat(n)].concat(Object(fu.a)(t)):"ports/items/".concat(n,"/").concat(t)}},{key:"addPort",value:function(e,t){var n=Object(fu.a)(this.ports.items);return n.push(e),this.setPropByPath("ports/items",n,t),this}},{key:"addPorts",value:function(e,t){return this.setPropByPath("ports/items",[].concat(Object(fu.a)(this.ports.items),Object(fu.a)(e)),t),this}},{key:"removePort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removePortAt(this.getPortIndex(e),t)}},{key:"removePortAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e>=0){var n=Object(fu.a)(this.ports.items);n.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",n,t)}return this}},{key:"removePorts",value:function(e,t){var n;if(Array.isArray(e)){if(n=t||{},e.length){n.rewrite=!0;var r=Object(fu.a)(this.ports.items).filter(function(t){return!e.some(function(e){var n="string"===typeof e?e:e.id;return t.id===n})});this.setPropByPath("ports/items",r,n)}}else(n=e||{}).rewrite=!0,this.setPropByPath("ports/items",[],n);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(e,t){return this.port.getPortsLayoutByGroup(e,t)}},{key:"initPorts",value:function(){var e=this;this.updatePortData(),this.on("change:ports",function(){e.processRemovedPort(),e.updatePortData()})}},{key:"processRemovedPort",value:function(){var e=this.ports,t={};e.items.forEach(function(e){e.id&&(t[e.id]=!0)});var n={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(function(e){e.id&&!t[e.id]&&(n[e.id]=!0)});var r=this.model;r&&!i.isEmpty(n)&&(r.getConnectedEdges(this,{incoming:!0}).forEach(function(e){var t=e.getTargetPortId();t&&n[t]&&e.remove()}),r.getConnectedEdges(this,{outgoing:!0}).forEach(function(e){var t=e.getSourcePortId();t&&n[t]&&e.remove()}))}},{key:"validatePorts",value:function(){var e=this,t={},n=[];return this.ports.items.forEach(function(r){"object"!==typeof r&&n.push("Invalid port ".concat(r,".")),null==r.id&&(r.id=e.generatePortId()),t[r.id]&&n.push("Duplicitied port id."),t[r.id]=!0}),n}},{key:"generatePortId",value:function(){return o.uuid()}},{key:"updatePortData",value:function(){var e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));var t=this.port?this.port.getPorts():null;this.port=new sy(this.ports);var n=this.port.getPorts(),r=t?n.filter(function(e){return t.find(function(t){return t.id===e.id})?null:e}):Object(fu.a)(n),i=t?t.filter(function(e){return n.find(function(t){return t.id===e.id})?null:e}):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),i.length>0&&this.notify("ports:removed",{removed:i,cell:this,node:this})}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()},set:function(e){this.setPortContainerMarkup(e)}},{key:"portMarkup",get:function(){return this.getPortMarkup()},set:function(e){this.setPortMarkup(e)}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()},set:function(e){this.setPortLabelMarkup(e)}},{key:"ports",get:function(){var e=this.store.get("ports",{items:[]});return null==e.items&&(e.items=[]),e}}]),t}(ay);cy.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(e){e.toStringTag="X6.".concat(e.name),e.isNode=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr&&"function"===typeof r.size&&"function"===typeof r.position}}(cy||(cy={})),(cy||(cy={})).config({propHooks:function(e){var t=e.ports,n=uy(e,["ports"]);return t&&(n.ports=Array.isArray(t)?{items:t}:t),n}}),function(e){e.registry=Cf.create({type:"node",process:function(t,n){if(ry.exist(t,!0))throw new Error("Node with name '".concat(t,"' was registered by anthor Edge"));if("function"===typeof n)return n.config({shape:t}),n;var r=e,i=n.inherit,o=uy(n,["inherit"]);if(i)if("string"===typeof i){var a=this.get(i);null==a?this.onNotFound(i,"inherited"):r=a}else r=i;null==o.constructorName&&(o.constructorName=t);var s=r.define.call(r,o);return s.config({shape:t}),s}}),ry.setNodeRegistry(e.registry)}(cy||(cy={})),function(e){var t=0;e.define=function(n){var r,a=n.constructorName,s=n.overwrite,u=uy(n,["constructorName","overwrite"]),c=i.createClass((r=a||u.shape)?o.pascalCase(r):"CustomNode".concat(t+=1),this);return c.config(u),u.shape&&e.registry.register(u.shape,c,s),c},e.create=function(t){var n=t.shape||"rect",r=e.registry.get(n);return r?new r(t):e.registry.onNotFound(n)}}(cy||(cy={}));var ly,fy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},hy=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}},{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}}]),t}(cy);(ly=hy||(hy={})).bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},ly.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},ly.config({attrs:{text:Object.assign({},ly.labelAttr)},propHooks:function(e){var t=e.label,n=fy(e,["label"]);return t&&i.setByPath(n,"attrs/text/text",t),n}});var dy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function py(e){return"basic.".concat(e)}function gy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xlink:href";return function(t){var n=t.imageUrl,r=t.imageWidth,i=t.imageHeight,o=dy(t,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=r||null!=i){var a=function(){if(o.attrs){var t=o.attrs.image;null!=n&&(t[e]=n),null!=r&&(t.width=r),null!=i&&(t.height=i),o.attrs.image=t}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}function vy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=py(e),o={constructorName:r,attrs:Object(T.a)({".":{fill:"#ffffff",stroke:"none"}},e,{fill:"#ffffff",stroke:"#000000"})};return n.ignoreMarkup||(o.markup=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return'<g class="rotatable"><g class="scalable"><'.concat(e,"/></g>").concat(t?"":"<text/>","</g>")}(e,!0===n.noText)),(n.parent||hy).define(i.merge(o,t,{shape:r}))}vy("rect",{attrs:{rect:{width:100,height:60}}}),vy("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),vy("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),vy("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),vy("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),vy("image",{attrs:{text:{refY:null,refDy:16}},propHooks:gy()});var yy,my=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},by=vy("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(e){var t=e.d,n=my(e,["d"]);return null!=t&&i.setByPath(n,"attrs/path/d",t),n}}),wy=(vy("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:by,ignoreMarkup:!0}),vy("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:by,ignoreMarkup:!0}),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}),xy=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).call(this,e))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"preprocess",value:function(e,n){var r=e.source,i=e.sourceCell,o=e.sourcePort,a=e.sourcePoint,s=e.target,u=e.targetCell,c=e.targetPort,l=e.targetPoint,f=wy(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),h=function(e){return"string"===typeof e||"number"===typeof e};if(null!=r)if(ay.isCell(r))f.source={cell:r.id};else if(h(r))f.source={cell:r};else if(Ic.isPoint(r))f.source=r.toJSON();else if(Array.isArray(r))f.source={x:r[0],y:r[1]};else{var d=r.cell;ay.isCell(d)?f.source=Object.assign(Object.assign({},r),{cell:d.id}):f.source=r}if(null!=i||null!=o){var p=f.source;if(null!=i){var g=h(i)?i:i.id;p?p.cell=g:p=f.source={cell:g}}null!=o&&p&&(p.port=o)}else null!=a&&(f.source=Ic.create(a).toJSON());if(null!=s)if(ay.isCell(s))f.target={cell:s.id};else if(h(s))f.target={cell:s};else if(Ic.isPoint(s))f.target=s.toJSON();else if(Array.isArray(s))f.target={x:s[0],y:s[1]};else{var v=s.cell;ay.isCell(v)?f.target=Object.assign(Object.assign({},s),{cell:v.id}):f.target=s}if(null!=u||null!=c){var y=f.target;if(null!=u){var m=h(u)?u:u.id;y?y.cell=m:y=f.target={cell:m}}null!=c&&y&&(y.port=c)}else null!=l&&(f.target=Ic.create(l).toJSON());return Object(xf.a)(Object(Ac.a)(t.prototype),"preprocess",this).call(this,f,n)}},{key:"setup",value:function(){var e=this;Object(xf.a)(Object(Ac.a)(t.prototype),"setup",this).call(this),this.on("change:labels",function(t){return e.onLabelsChanged(t)}),this.on("change:vertices",function(t){return e.onVertexsChanged(t)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setTerminal("source",e,t,n)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setTerminal("target",e,t,n)}},{key:"getTerminal",value:function(e){return Object.assign({},this.store.get(e))}},{key:"setTerminal",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(ay.isCell(t))return this.store.set(e,i.merge({},n,{cell:t.id}),r),this;var o=t;return Ic.isPoint(t)||null!=o.x&&null!=o.y?(this.store.set(e,i.merge({},n,{x:o.x,y:o.y}),r),this):(this.store.set(e,i.cloneDeep(t),r),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(e){var t=this[e];if(Ic.isPointLike(t))return Ic.create(t);var n=this.getTerminalCell(e);return n?n.getConnectionPoint(this,e):new Ic}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(e){if(this.model){var t="source"===e?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(e){for(var t=this,n={};t&&t.isEdge();){if(n[t.id])return null;n[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(e,t,n){return"object"===typeof e?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},n),this}},{key:"removeRouter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("router",e),this}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(e,t,n){return"object"===typeof e?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},n),this}},{key:"removeConnector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("connector",e)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(e,t,n){return"object"===typeof e?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},n),this}},{key:"removeStrategy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("strategy",e)}},{key:"getDefaultLabel",value:function(){var e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return i.cloneDeep(t)}},{key:"getLabels",value:function(){var e=this;return Object(fu.a)(this.store.get("labels",[])).map(function(t){return e.parseLabel(t)})}},{key:"setLabels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("labels",Array.isArray(e)?e:[e],t),this}},{key:"insertLabel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getLabels(),i=r.length,o=null!=t&&Number.isFinite(t)?t:i;return o<0&&(o=i+o+1),r.splice(o,0,this.parseLabel(e)),this.setLabels(r,n)}},{key:"appendLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertLabel(e,-1,t)}},{key:"getLabelAt",value:function(e){var t=this.getLabels();return null!=e&&Number.isFinite(e)?this.parseLabel(t[e]):null}},{key:"setLabelAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&Number.isFinite(e)){var r=this.getLabels();r[e]=this.parseLabel(t),this.setLabels(r,n)}return this}},{key:"removeLabelAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getLabels(),r=null!=e&&Number.isFinite(e)?e:-1,i=n.splice(r,1);return this.setLabels(n,t),i.length?i[0]:null}},{key:"parseLabel",value:function(e){return"string"===typeof e?this.constructor.parseStringLabel(e):e}},{key:"onLabelsChanged",value:function(e){var t=e.previous,n=e.current,r=t&&n?n.filter(function(e){return t.find(function(t){return e===t||i.isEqual(e,t)})?null:e}):n?Object(fu.a)(n):[],o=t&&n?t.filter(function(e){return n.find(function(t){return e===t||i.isEqual(e,t)})?null:e}):t?Object(fu.a)(t):[];r.length>0&&this.notify("labels:added",{added:r,cell:this,edge:this}),o.length>0&&this.notify("labels:removed",{removed:o,cell:this,edge:this})}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||qp.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("vertexMarkup",qp.clone(e),t),this}},{key:"getVertices",value:function(){return Object(fu.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e];return this.store.set("vertices",n.map(function(e){return Ic.toJSON(e)}),t),this}},{key:"insertVertex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getVertices(),i=r.length,o=null!=t&&Number.isFinite(t)?t:i;return o<0&&(o=i+o+1),r.splice(o,0,Ic.toJSON(e)),this.setVertices(r,n)}},{key:"appendVertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertVertex(e,-1,t)}},{key:"getVertexAt",value:function(e){return null!=e&&Number.isFinite(e)?this.getVertices()[e]:null}},{key:"setVertexAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&Number.isFinite(e)){var r=this.getVertices();r[e]=t,this.setVertices(r,n)}return this}},{key:"removeVertexAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getVertices(),r=null!=e&&Number.isFinite(e)?e:-1;return n.splice(r,1),this.setVertices(n,t)}},{key:"onVertexsChanged",value:function(e){var t=e.previous,n=e.current,r=t&&n?n.filter(function(e){return t.find(function(t){return Ic.equals(e,t)})?null:e}):n?Object(fu.a)(n):[],i=t&&n?t.filter(function(e){return n.find(function(t){return Ic.equals(e,t)})?null:e}):t?Object(fu.a)(t):[];r.length>0&&this.notify("vertexs:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("vertexs:removed",{removed:i,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||qp.getEdgeMarkup()}},{key:"getMarkup",value:function(){return Object(xf.a)(Object(Ac.a)(t.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||qp.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("toolMarkup",e,t),this}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("doubleToolMarkup",e,t),this}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||qp.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("arrowheadMarkup",e,t),this}},{key:"translate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},n)}},{key:"scale",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.applyToPoints(function(r){return Ic.create(r).scale(e,t,n).toJSON()},r)}},{key:"applyToPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=this.getSource(),i=this.getTarget();Ic.isPointLike(r)&&(n.source=e(r)),Ic.isPointLike(i)&&(n.target=e(i));var o=this.getVertices();return o.length>0&&(n.vertices=o.map(e)),this.store.set(n,t),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var e=[this.getSourcePoint(),this.getTargetPoint()];return this.getVertices().forEach(function(t){return e.push(Ic.create(t))}),new zc(e)}},{key:"updateParent",value:function(e){var t=null,n=this.getSourceCell(),r=this.getTargetCell(),i=this.getParent();return n&&r&&(t=n===r||n.isDescendantOf(r)?r:r.isDescendantOf(n)?n:ay.getCommonAncestor(n,r)),!i||t&&t.id===i.id||i.unembed(this,e),t&&t.embed(this,e),t}},{key:"hasLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getSource(),n=this.getTarget(),r=t.cell,i=n.cell;if(!r||!i)return!1;var o=r===i;if(!o&&e.deep&&this._model){var a=this.getSourceCell(),s=this.getTargetCell();a&&s&&(o=a.isAncestorOf(s,e)||s.isAncestorOf(a,e))}return o}},{key:"getFragmentAncestor",value:function(){var e=[this,this.getSourceNode(),this.getTargetNode()].filter(function(e){return null!=e});return this.getCommonAncestor.apply(this,Object(fu.a)(e))}},{key:"isFragmentDescendantOf",value:function(e){var t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"source",get:function(){return this.getSource()},set:function(e){this.setSource(e)}},{key:"target",get:function(){return this.getTarget()},set:function(e){this.setTarget(e)}},{key:"router",get:function(){return this.getRouter()},set:function(e){null==e?this.removeRouter():this.setRouter(e)}},{key:"connector",get:function(){return this.getConnector()},set:function(e){null==e?this.removeConnector():this.setConnector(e)}},{key:"strategy",get:function(){return this.getStrategy()},set:function(e){null==e?this.removeStrategy():this.setStrategy(e)}},{key:"labels",get:function(){return this.getLabels()},set:function(e){this.setLabels(e)}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()},set:function(e){this.setVertexMarkup(e)}},{key:"vertices",get:function(){return this.getVertices()},set:function(e){this.setVertices(e)}},{key:"toolMarkup",get:function(){return this.getToolMarkup()},set:function(e){this.setToolMarkup(e)}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()},set:function(e){this.setDoubleToolMarkup(e)}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()},set:function(e){this.setArrowheadMarkup(e)}}]),t}(ay);xy.defaults={},function(e){(xy||(xy={})).equalTerminals=function(e,t){var n=e,r=t;return n.cell===r.cell&&(n.port===r.port||null==n.port&&null==r.port)}}(),function(e){e.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},e.parseStringLabel=function(e){return{attrs:{label:{text:e}}}}}(xy||(xy={})),function(e){e.toStringTag="X6.".concat(e.name),e.isEdge=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr&&"function"===typeof r.disconnect&&"function"===typeof r.getSource&&"function"===typeof r.getTarget}}(xy||(xy={})),(yy=xy||(xy={})).registry=Cf.create({type:"edge",process:function(e,t){if(ry.exist(e,!1))throw new Error("Edge with name '".concat(e,"' was registered by anthor Node"));if("function"===typeof t)return t.config({shape:e}),t;var n=yy,r=t.inherit,i=void 0===r?"edge":r,o=wy(t,["inherit"]);if("string"===typeof i){var a=this.get(i||"edge");null==a&&i?this.onNotFound(i,"inherited"):n=a}else n=i;null==o.constructorName&&(o.constructorName=e);var s=n.define.call(n,o);return s.config({shape:e}),s}}),ry.setEdgeRegistry(yy.registry),function(e){var t=0;e.define=function(n){var r,a=n.constructorName,s=n.overwrite,u=wy(n,["constructorName","overwrite"]),c=i.createClass((r=a||u.shape)?o.pascalCase(r):"CustomEdge".concat(t+=1),this);return c.config(u),u.shape&&e.registry.register(u.shape,c,s),c},e.create=function(t){var n=t.shape||"edge",r=e.registry.get(n);return r?new r(t):e.registry.onNotFound(n)}}(xy||(xy={})),function(e){e.config({shape:"basic.edge",propHooks:function(t){var n=t.label,r=t.vertices,i=wy(t,["label","vertices"]);if(n){null==i.labels&&(i.labels=[]);var o="string"===typeof n?e.parseStringLabel(n):n;i.labels.push(o)}return r&&Array.isArray(r)&&(i.vertices=r.map(function(e){return Ic.create(e).toJSON()})),i}}),e.registry.register("basic.edge",e)}(xy||(xy={}));var Cy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ky=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).POINT_ROUNDING=2,e.markerCache={},e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getContainerClassName",value:function(){return[Object(xf.a)(Object(Ac.a)(t.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}var i=this.graph,o=this.sourceView,a=this.targetView;return i&&(o&&!i.renderer.isViewMounted(o)||a&&!i.renderer.isViewMounted(a))?r:this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","vertices","labels","tools","widget"])):(r=this.handleAction(r,"vertices",function(){return t.renderVertexMarkers()}),r=this.handleAction(r,"update",function(){return t.update(null,n)}),r=this.handleAction(r,"labels",function(){return t.onLabelsChange(n)}),r=this.handleAction(r,"tools",function(){t.renderTools(),t.updateToolsPosition()}),r=this.handleAction(r,"widget",function(){return t.renderExternalTools()}))}},{key:"onLabelsChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],r=n.length;if(r>1)if(t[n[1]]){if(2===r)return"object"===typeof e.propertyValue&&i.has(e.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return"string"===typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}},{key:"renderStringMarkup",value:function(e){var t=this.containers,n=al.createVectors(e);n.forEach(function(e){var n=e.attr("class");n&&(t[o.camelCase(n)]=e.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),c.append(this.container,n.map(function(e){return e.node}))}},{key:"renderLabels",value:function(){var e=this.cell,t=e.getLabels(),n=t.length,r=this.containers.labels;if(this.labelCache={},this.labelSelectors={},n<=0)return r&&r.parentNode&&r.parentNode.removeChild(r),this;r?this.empty(r):(r=c.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),r),this.containers.labels=r);for(var i=0,o=t.length;i<o;i+=1){var a=t[i],s=this.normalizeLabelMarkup(this.parseLabelMarkup(a.markup)),u=void 0,l=void 0;if(s)u=s.node,l=s.selectors;else{var f=e.getDefaultLabel(),h=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup));u=h.node,l=h.selectors}u.setAttribute("data-index","".concat(i)),r.appendChild(u);var d=this.rootSelector;if(l[d])throw new Error("Ambiguous label root selector.");l[d]=u,this.labelCache[i]=u,this.labelSelectors[i]=l}return null==r.parentNode&&this.container.appendChild(r),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(e){return e?"string"===typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}},{key:"parseLabelStringMarkup",value:function(e){for(var t=al.createVectors(e),n=document.createDocumentFragment(),r=0,i=t.length;r<i;r+=1){var o=t[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(e){if(null!=e){var t,n=e.fragment;if(!(n instanceof DocumentFragment)||!n.hasChildNodes())throw new Error("Invalid label markup.");var r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?al.create("g").append(n):al.create(r[0])).addClass(this.prefixClassName("edge-label")),{node:t.node,selectors:e.selectors}}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,n=this.can("edgeLabelMovable"),r=e.getDefaultLabel(),o=0,a=t.length;o<a;o+=1){var s=this.labelCache[o],u=this.labelSelectors[o];s.setAttribute("cursor",n?"move":"default");var c=t[o],l=i.merge({},r.attrs,c.attrs);this.updateAttrs(s,l,{selectors:u,rootBBox:c.size?Lc.fromSize(c.size):void 0})}}},{key:"mergeLabelAttrs",value:function(e,t,n){if(null===t)return null;if(void 0===t){if(null===n)return null;if(void 0===n)return;return e?n:i.merge({},n)}return e?i.merge({},n,t):void 0}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,n=0,r=t.length;n<r;n+=1){var i=t[n],o=this.labelCache[n],a=this.labelSelectors[n];this.graph.hook.onEdgeLabelRendered({edge:e,label:i,container:o,selectors:a})}}},{key:"renderTools",value:function(){var e=this.containers.tools;if(null==e)return this;var t=this.cell.toolMarkup,n=this.$(e).empty();if(qp.isStringMarkup(t)){var r=o.template(t),i=al.create(r());if(n.append(i.node),this.toolCache=i.node,this.options.doubleTools){var a,s=this.cell.doubleToolMarkup;qp.isStringMarkup(s)?(r=o.template(s),a=al.create(r())):a=i.clone(),n.append(a.node),this.tool2Cache=a.node}}return this}},{key:"renderExternalTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"renderVertexMarkers",value:function(){var e=this.containers.vertices;if(null==e)return this;var t=this.cell.vertexMarkup,n=this.$(e).empty();if(qp.isStringMarkup(t)){var r=o.template(t);this.cell.getVertices().forEach(function(e,t){n.append(al.create(r(Object.assign({index:t},e))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(null==e)return this;var t=this.cell.arrowheadMarkup,n=this.$(e).empty();if(qp.isStringMarkup(t)){var r=o.template(t),i=al.create(r({end:"source"})).node,a=al.create(r({end:"target"})).node;this.containers.sourceArrowhead=i,this.containers.targetArrowhead=a,n.append(i,a)}return this}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.cleanCache(),this.updateConnection(t);var n=this.cell.getAttrs();return null!=n&&this.updateAttrs(this.container,n,{attrs:e===n?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),null==t.toolId?this.renderExternalTools():this.updateTools(t),this}},{key:"removeRedundantLinearVertices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.cell,n=t.getVertices(),r=[this.sourceAnchor].concat(Object(fu.a)(n),[this.targetAnchor]),i=r.length,o=new zc(r);o.simplify({threshold:.01});var a=o.points.map(function(e){return e.toJSON()}),s=a.length;return i===s?0:(t.setVertices(a.slice(1,s-1),e),i-s)}},{key:"updateConnectionPath",value:function(){var e=this.containers;if(e.connection){var t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){var n=this.getConnectionPathData();e.connectionWrap.setAttribute("d",n)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}},{key:"getTerminalView",value:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalAnchor",value:function(e){switch(e){case"source":return Ic.create(this.sourceAnchor);case"target":return Ic.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalConnectionPoint",value:function(e){switch(e){case"source":return Ic.create(this.sourcePoint);case"target":return Ic.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalMagnet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"source":if(t.raw)return this.sourceMagnet;var n=this.sourceView;return n?this.sourceMagnet||n.container:null;case"target":if(t.raw)return this.targetMagnet;var r=this.targetView;return r?this.targetMagnet||r.container:null;default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"updateConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){var n=e.tx||0,r=e.ty||0;this.routePoints=new zc(this.routePoints).translate(n,r).points,this.translateConnectionPoints(n,r),this.path.translate(n,r)}else{var i=t.getVertices(),o=this.findAnchors(i);this.sourceAnchor=o.source,this.targetAnchor=o.target,this.routePoints=this.findRoutePoints(i);var a=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=a.source,this.targetPoint=a.target;var s=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,s.source||this.sourcePoint,s.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(e){var t=this.cell,n=t.source,r=t.target,i=e[0],o=e[e.length-1];return r.priority&&!n.priority?this.findAnchorsOrdered("target",o,"source",i):this.findAnchorsOrdered("source",i,"target",o)}},{key:"findAnchorsOrdered",value:function(e,t,n,r){var i,o,a,s,u=this.cell,c=u[e],l=u[n],f=this.getTerminalView(e),h=this.getTerminalView(n),d=this.getTerminalMagnet(e),p=this.getTerminalMagnet(n);f?(s=t?Ic.create(t):h?p:Ic.create(l),o=this.getAnchor(c.anchor,f,d,s,e)):o=Ic.create(c);if(h){var g=Ic.create(r||o);a=this.getAnchor(l.anchor,h,p,g,n)}else a=Ic.isPointLike(l)?Ic.create(l):new Ic;return i={},Object(T.a)(i,e,o),Object(T.a)(i,n,a),i}},{key:"getAnchor",value:function(e,t,n,r,i){var o,a=t.isEdgeElement(n),u=this.graph.options.connecting,c="string"===typeof e?{name:e}:e;if(!c){var l=a?("source"===i?u.sourceEdgeAnchor:u.targetEdgeAnchor)||u.edgeAnchor:("source"===i?u.sourceAnchor:u.targetAnchor)||u.anchor;c="string"===typeof l?{name:l}:l}if(!c)throw new Error("Anchor should be specified.");var f=c.name;if(a){var h=Vg.registry.get(f);if("function"!==typeof h)return Vg.registry.onNotFound(f);o=s.call(h,this,t,n,r,c.args||{},i)}else{var d=Ig.registry.get(f);if("function"!==typeof d)return Ig.registry.onNotFound(f);o=s.call(d,this,t,n,r,c.args||{},i)}return o?o.round(this.POINT_ROUNDING):new Ic}},{key:"findRoutePoints",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.graph.options.connecting.router||Rv.presets.normal,r=this.cell.getRouter()||n;if("function"===typeof r)e=s.call(r,this,t,{},this);else{var i="string"===typeof r?r:r.name,o="string"===typeof r?{}:r.args||{},a=i?Rv.registry.get(i):Rv.presets.normal;if("function"!==typeof a)return Rv.registry.onNotFound(i);e=s.call(a,this,t,o,this)}return null==e?t.map(function(e){return Ic.create(e)}):e.map(function(e){return Ic.create(e)})}},{key:"findConnectionPoints",value:function(e,t,n){var r,i,o=this.cell,a=this.graph.options.connecting,s=o.getSource(),u=o.getTarget(),c=this.sourceView,l=this.targetView,f=e[0],h=e[e.length-1];if(c&&!c.isEdgeElement(this.sourceMagnet)){var d=this.sourceMagnet||c.container,p=new Fc(f||n,t),g=s.connectionPoint||a.sourceConnectionPoint||a.connectionPoint;r=this.getConnectionPoint(g,c,d,p,"source")}else r=t;if(l&&!l.isEdgeElement(this.targetMagnet)){var v=this.targetMagnet||l.container,y=u.connectionPoint||a.targetConnectionPoint||a.connectionPoint,m=new Fc(h||t,n);i=this.getConnectionPoint(y,l,v,m,"target")}else i=n;return{source:r,target:i}}},{key:"getConnectionPoint",value:function(e,t,n,r,i){var o=r.end;if(null==e)return o;var a="string"===typeof e?e:e.name,u="string"===typeof e?{}:e.args,c=Qg.registry.get(a);if("function"!==typeof c)return Qg.registry.onNotFound(a);var l=s.call(c,this,r,t,n,u||{},i);return l?l.round(this.POINT_ROUNDING):o}},{key:"updateMarkerAttr",value:function(e){var t=this.cell.getAttrs(),n=".".concat(e,"-marker"),r=t&&t[n];r&&this.updateAttrs(this.container,{},{attrs:Object(T.a)({},n,r),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(e,t,n){var r,i,o=this,a=function(e){for(var t=o.cell.getAttrs(),n=Object.keys(t),r=0,i=n.length;r<i;r+=1){var a=t[n[r]];if(a["".concat(e,"Marker")]||a["".concat(e,"-marker")]){var s=a.strokeWidth||a["stroke-width"];if(s)return parseFloat(s);break}}return null},s=e[0],u=e[e.length-1],l=this.containers.sourceMarker,f=this.containers.targetMarker,h=this.markerCache;if(l){if(this.updateMarkerAttr("source"),h.sourceBBox=h.sourceBBox||c.getBBox(l),h.sourceBBox.width>0){var d=c.scale(l);r=t.clone().move(s||n,h.sourceBBox.width*d.sx*-1)}}else{var p=a("source");p&&(r=t.clone().move(s||n,-p))}if(f){if(this.updateMarkerAttr("target"),h.targetBBox=h.targetBBox||c.getBBox(f),h.targetBBox.width>0){var g=c.scale(f);i=n.clone().move(u||t,h.targetBBox.width*g.sx*-1)}}else{var v=a("target");v&&(i=n.clone().move(u||t,-v))}return h.sourcePoint=r||t.clone(),h.targetPoint=i||n.clone(),{source:r,target:i}}},{key:"findPath",value:function(e,t,n){var r,i,o,a=this.cell.getConnector()||this.graph.options.connecting.connector;if("string"===typeof a?r=a:(r=a.name,i=a.args),r){var u=Yv.registry.get(r);if("function"!==typeof u)return Yv.registry.onNotFound(r);o=u}else o=Yv.presets.normal;var c=s.call(o,this,t,n,e,Object.assign(Object.assign({},i),{raw:!0}),this);return"string"===typeof c?ol.parse(c):c}},{key:"translateConnectionPoints",value:function(e,t){var n=this.markerCache;n.sourcePoint&&n.sourcePoint.translate(e,t),n.targetPoint&&n.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}},{key:"updateLabelPositions",value:function(){if(null==this.containers.labels)return this;if(!this.path)return this;var e=this.cell,t=e.getLabels();if(0===t.length)return this;for(var n=e.getDefaultLabel(),r=this.normalizeLabelPosition(n.position),o=0,a=t.length;o<a;o+=1){var s=t[o],u=this.normalizeLabelPosition(s.position),l=i.merge({},r,u),f=this.getLabelTransformationMatrix(l);this.labelCache[o].setAttribute("transform",c.matrixToTransformString(f))}return this}},{key:"updateToolsPosition",value:function(){if(null==this.containers.tools)return this;var e="",t=this.options.toolsOffset,n=this.getConnectionLength();if(null!=n){n<this.options.shortLength&&(e="scale(.5)",t/=2);var r=this.getPointAtLength(t);if(null!=r&&c.attr(this.toolCache,"transform","translate(".concat(r.x,",").concat(r.y,") ").concat(e)),this.options.doubleTools&&n>=this.options.longLength){var i=this.options.doubleToolsOffset||t;null!=(r=this.getPointAtLength(n-i))&&c.attr(this.tool2Cache,"transform","translate(".concat(r.x,",").concat(r.y,") ").concat(e)),c.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&c.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(null==e)return this;if("none"===e.style.display)return this;var t=this.containers.sourceArrowhead,n=this.containers.targetArrowhead;if(t&&n){var r=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;c.scale(t,r),c.scale(n,r),this.translateAndAutoOrientArrows(t,n)}return this}},{key:"updateTerminalProperties",value:function(e){var t=this.cell,n=this.graph,r=t[e],i=r&&r.cell,o="".concat(e,"View");if(!i)return this[o]=null,this.updateTerminalMagnet(e),!0;var a=n.getCellById(i);if(!a)throw new Error("Edge's ".concat(e,' node with id "').concat(i,'" not exists'));var s=a.findView(n);return!!s&&(this[o]=s,this.updateTerminalMagnet(e),!0)}},{key:"updateTerminalMagnet",value:function(e){var t="".concat(e,"Magnet"),n=this.getTerminalView(e);if(n){var r=n.getMagnetFromEdgeTerminal(this.cell[e]);r===n.container&&(r=null),this[t]=r}else this[t]=null}},{key:"translateAndAutoOrientArrows",value:function(e,t){var n=this.routePoints;e&&c.translateAndAutoOrient(e,this.sourcePoint,n[0]||this.targetPoint,this.graph.view.stage),t&&c.translateAndAutoOrient(t,this.targetPoint,n[n.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(e){var t=this.cell.getLabelAt(e);return t&&t.position&&"object"===typeof t.position&&t.position.angle||0}},{key:"getLabelPositionArgs",value:function(e){var t=this.cell.getLabelAt(e);if(t&&t.position&&"object"===typeof t.position)return t.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var e=this.cell.getDefaultLabel();if(e&&e.position&&"object"===typeof e.position)return e.position.options}},{key:"mergeLabelPositionArgs",value:function(e,t){return null===e?null:void 0===e?null===t?null:t:i.merge({},t,e)}},{key:"addLabel",value:function(e,t,n,r){var i,o,a,s=0;"number"!==typeof e?(i=e.x,o=e.y,"number"===typeof t?(s=t,a=n):a=t):(i=e,o=t,"number"===typeof n?(s=n,a=r):a=n);var u=this.getDefaultLabelPositionArgs(),c=a,l=this.mergeLabelPositionArgs(c,u),f={position:this.getLabelPosition(i,o,s,l)};return this.cell.insertLabel(f,-1,a),-1}},{key:"addVertex",value:function(e,t,n){var r="number"!==typeof e,i=r?e.x:e,o=r?e.y:t,a=r?t:n,s={x:i,y:o},u=this.getVertexIndex(i,o);return this.cell.insertVertex(s,u,a),u}},{key:"sendToken",value:function(e,t,n){var r,i,o,a,s="linear";"object"===typeof t?(r=t.duration,i=!0===t.reversed,o=t.selector,!1===t.rotate?a="":!0===t.rotate?a="auto":null!=t.rotate&&(a="".concat(t.rotate)),t.timing&&(s=t.timing)):(r=t,i=!1,o=null);var u,l={dur:"".concat(r=r||1e3,"ms"),repeatCount:"1",calcMode:s,fill:"freeze"};if(a&&(l.rotate=a),i&&(l.keyPoints="1;0",l.keyTimes="0;1"),"object"===typeof t){t.duration,t.reversed,t.selector,t.rotate,t.timing;var f=Cy(t,["duration","reversed","selector","rotate","timing"]);Object.keys(f).forEach(function(e){l[e]=f[e]})}if(!((u="string"===typeof o?this.findOne(o,this.container,this.selectors):this.containers.connection?this.containers.connection:this.container.querySelector("path"))instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var h="string"===typeof e?this.findOne(e):e;if(null==h)throw new Error("Token animation requires a valid token element.");var d=h.parentNode,p=function(){d||c.remove(h)},g=al.create(h);d||g.appendTo(this.graph.view.stage);var v=l.complete;l.complete=function(e){p(),n&&n(),v&&v(e)};var y=g.animateAlongPath(l,u);return function(){p(),y()}}},{key:"getConnection",value:function(){return null!=this.path?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(null==this.path)return"";var e=this.cache.pathCache;return i.has(e,"data")||(e.data=this.path.serialize()),e.data||""}},{key:"getConnectionSubdivisions",value:function(){if(null==this.path)return null;var e=this.cache.pathCache;return i.has(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(null==this.path)return 0;var e=this.cache.pathCache;return i.has(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}},{key:"getPointAtLength",value:function(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(e){return null==this.path?null:(a.isPercentage(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(e,t,n,r){var i,o={distance:0},a=0;"number"===typeof n?(a=n,i=r):i=n,null!=i&&(o.options=i);var s,u,c=i&&i.absoluteOffset,l=!(i&&i.absoluteDistance),f=i&&i.absoluteDistance&&i.reverseDistance,h=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=new Ic(e,t),g=h.closestPointT(p,d),v=this.getConnectionLength()||0,y=h.lengthAtT(g,d);if(l&&(y=v>0?y/v:0),f&&(y=-1*(v-y)||1),o.distance=y,c||(s=h.tangentAtT(g)),s)u=s.pointOffset(p);else{var m=h.pointAtT(g),b=p.diff(m);u={x:b.x,y:b.y}}return o.offset=u,o.angle=a,o}},{key:"normalizeLabelPosition",value:function(e){return"number"===typeof e?{distance:e}:e}},{key:"getLabelTransformationMatrix",value:function(e){var t=this.normalizeLabelPosition(e),n=t.options||{},r=t.angle||0,i=t.distance,o=i>0&&i<=1,a=0,s={x:0,y:0},u=t.offset;u&&("number"===typeof u?a=u:(null!=u.x&&(s.x=u.x),null!=u.y&&(s.y=u.y)));var l,f=0!==s.x||0!==s.y||0===a,h=n.keepGradient,d=n.ensureLegibility,p=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},v=o?i*this.getConnectionLength():i,y=p.tangentAtLength(v,g),m=r;if(y){if(f)(l=y.start).translate(s);else{var b=y.clone();b.rotate(-90,y.start),b.setLength(a),l=b.end}h&&(m=y.angle()+r,d&&(m=kc.normalize((m+90)%180-90)))}else l=p.start,f&&l.translate(s);return c.createSVGMatrix().translate(l.x,l.y).rotate(m)}},{key:"getLabelCoordinates",value:function(e){var t=this.getLabelTransformationMatrix(e);return new Ic(t.e,t.f)}},{key:"getVertexIndex",value:function(e,t){var n=this.cell.getVertices(),r=this.getClosestPointLength(new Ic(e,t)),i=0;if(null!=r)for(var o=n.length;i<o;i+=1){var a=n[i],s=this.getClosestPointLength(a);if(null!=s&&r<s)break}return i}},{key:"getEventArgs",value:function(e,t,n){var r=this.cell;return null==t||null==n?{e:e,view:this,edge:r,cell:r}:{e:e,x:t,y:n,view:this,edge:r,cell:r}}},{key:"notifyUnhandledMouseDown",value:function(e,t,n){this.notify("edge:unhandled:mousedown",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseDown",this).call(this,e,n,r),this.notify("edge:mousedown",this.getEventArgs(e,n,r))}},{key:"notifyMouseMove",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseMove",this).call(this,e,n,r),this.notify("edge:mousemove",this.getEventArgs(e,n,r))}},{key:"notifyMouseUp",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseUp",this).call(this,e,n,r),this.notify("edge:mouseup",this.getEventArgs(e,n,r))}},{key:"onClick",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onClick",this).call(this,e,n,r),this.notify("edge:click",this.getEventArgs(e,n,r))}},{key:"onDblClick",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onDblClick",this).call(this,e,n,r),this.notify("edge:dblclick",this.getEventArgs(e,n,r))}},{key:"onContextMenu",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onContextMenu",this).call(this,e,n,r),this.notify("edge:contextmenu",this.getEventArgs(e,n,r))}},{key:"onMouseDown",value:function(e,t,n){switch(this.notifyMouseDown(e,t,n),e.target.getAttribute("class")){case"vertex":return void this.startVertexDragging(e,t,n);case"vertex-remove":case"vertex-remove-area":return void this.handleVertexRemoving(e,t,n);case"connection":case"connection-wrap":return void this.handleVertexAdding(e,t,n);case"arrowhead":return void this.startArrowheadDragging(e,t,n);case"source-marker":case"target-marker":return void this.notifyUnhandledMouseDown(e,t,n)}this.startEdgeDragging(e,t,n)}},{key:"onMouseMove",value:function(e,t,n){var r=this.getEventData(e);switch(r.action){case"drag-vertex":this.dragVertex(e,t,n);break;case"drag-label":this.dragLabel(e,t,n);break;case"drag-arrowhead":this.dragArrowhead(e,t,n);break;case"drag-edge":this.dragEdge(e,t,n)}return this.notifyMouseMove(e,t,n),r}},{key:"onMouseUp",value:function(e,t,n){var r=this.getEventData(e);switch(r.action){case"drag-vertex":this.stopVertexDragging(e,t,n);break;case"drag-label":this.stopLabelDragging(e,t,n);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,n);break;case"drag-edge":this.stopEdgeDragging(e,t,n)}return this.notifyMouseUp(e,t,n),this.checkMouseleave(e),r}},{key:"onMouseOver",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseOver",this).call(this,e),this.notify("edge:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseOut",this).call(this,e),this.notify("edge:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseEnter",this).call(this,e),this.notify("edge:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseLeave",this).call(this,e),this.notify("edge:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,n,r,i){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseWheel",this).call(this,e,n,r,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,n,r)))}},{key:"onCustomEvent",value:function(e,n,r,i){if(c.findParentByClass(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===n)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:n},this.getEventArgs(e,r,i)))}this.notifyMouseDown(e,r,i)}else this.notify("edge:customevent",Object.assign({name:n},this.getEventArgs(e,r,i))),Object(xf.a)(Object(Ac.a)(t.prototype),"onCustomEvent",this).call(this,e,n,r,i)}},{key:"onLabelMouseDown",value:function(e,t,n){this.notifyMouseDown(e,t,n),this.startLabelDragging(e,t,n),this.getEventData(e).stopPropagation&&e.stopPropagation()}},{key:"startEdgeDragging",value:function(e,t,n){this.can("edgeMovable")?this.setEventData(e,{x:t,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,n)}},{key:"dragEdge",value:function(e,t,n){var r=this.getEventData(e);r.moving||(r.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-r.x,n-r.y,{ui:!0}),this.setEventData(e,{x:t,y:n}),this.notify("edge:moving",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(e,t,n){var r=this.getEventData(e);r.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),r.moving=!1}},{key:"prepareArrowheadDragging",value:function(e,t){var n=this.getTerminalMagnet(e),r={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:n,initialTerminal:i.clone(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(r),r}},{key:"createValidateConnectionArgs",value:function(e){var t,n=[];n[4]=e,n[5]=this;var r=0,i=0;"source"===e?(r=2,t="target"):(i=2,t="source");var o=this.cell[t],a=o.cell;if(a){var s,u=n[r]=this.graph.renderer.findViewByCell(a);u&&(s=u.getMagnetFromEdgeTerminal(o))===u.container&&(s=void 0),n[r+1]=s}return function(e,t){return n[i]=e,n[i+1]=e.container===t?void 0:t,n}}},{key:"beforeArrowheadDragging",value:function(e){e.zIndex=this.cell.zIndex,this.cell.toFront();var t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}},{key:"afterArrowheadDragging",value:function(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null),this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}},{key:"arrowheadDragging",value:function(e,t,n,r){var i;(r.x=t,r.y=n,r.currentTarget!==e)&&(r.currentMagnet&&r.currentView&&r.currentView.unhighlight(r.currentMagnet,{type:"magnetAdsorbed"}),r.currentView=this.graph.renderer.findViewByElem(e),r.currentView?(r.currentMagnet=r.currentView.findMagnet(e),r.currentMagnet&&(i=this.graph.hook).validateConnection.apply(i,Object(fu.a)(r.getValidateConnectionArgs(r.currentView,r.currentMagnet)).concat([r.currentView.getEdgeTerminal(r.currentMagnet,t,n,this.cell,r.terminalType)]))?r.currentView.highlight(r.currentMagnet,{type:"magnetAdsorbed"}):r.currentMagnet=null):r.currentMagnet=null);r.currentTarget=e,this.cell.prop(r.terminalType,{x:t,y:n},Object.assign(Object.assign({},r.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(e,t,n){var r=e.currentView,i=e.currentMagnet;if(i&&r){r.unhighlight(i,{type:"magnetAdsorbed"});var o=e.terminalType,a=r.getEdgeTerminal(i,t,n,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}}},{key:"snapArrowhead",value:function(e,t,n){var r,i=this,o=this.graph,a=o.options.connecting.snap,s="object"===typeof a&&a.radius||50,u=o.renderer.findViewsInArea({x:e-s,y:t-s,width:2*s,height:2*s}),c=n.closestView||null,l=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;var f,h=Number.MAX_SAFE_INTEGER,d=new Ic(e,t);u.forEach(function(a){var u;"false"!==a.container.getAttribute("magnet")&&((r=a.cell.getBBox().getCenter().distance(d))<s&&r<h&&(l===a.container||(u=o.hook).validateConnection.apply(u,Object(fu.a)(n.getValidateConnectionArgs(a,null)).concat([a.getEdgeTerminal(a.container,e,t,i.cell,n.terminalType)])))&&(h=r,n.closestView=a,n.closestMagnet=a.container));a.container.querySelectorAll("[magnet]").forEach(function(u){if("false"!==u.getAttribute("magnet")){var c,f=a.getBBoxOfElement(u);if((r=d.distance(f.getCenter()))<s&&r<h)(l===u||(c=o.hook).validateConnection.apply(c,Object(fu.a)(n.getValidateConnectionArgs(a,u)).concat([a.getEdgeTerminal(u,e,t,i.cell,n.terminalType)])))&&(h=r,n.closestView=a,n.closestMagnet=u)}})});var p=n.terminalType,g=n.closestView,v=n.closestMagnet,y=l!==v;if(c&&y&&c.unhighlight(l,{type:"magnetAdsorbed"}),g){if(!y)return;g.highlight(v,{type:"magnetAdsorbed"}),f=g.getEdgeTerminal(v,e,t,this.cell,p)}else f={x:e,y:t};this.cell.setTerminal(p,f,{},Object.assign(Object.assign({},n.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(n,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(n)),e.closestView=null,e.closestMagnet=null}},{key:"finishEmbedding",value:function(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}},{key:"fallbackConnection",value:function(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}}},{key:"notifyConnectionEvent",value:function(e,t){var n=e.terminalType,r=e.initialTerminal,i=this.cell[n];if(i&&!xy.equalTerminals(r,i)){var o=this.graph,a=r,s=a.cell?o.getCellById(a.cell):null,u=a.port,c=s?o.findViewByCell(s):null,l=s||e.isNewEdge?null:Ic.create(r).toJSON(),f=i,h=f.cell?o.getCellById(f.cell):null,d=f.port,p=h?o.findViewByCell(h):null,g=h?null:Ic.create(i).toJSON();this.notify("edge:connected",{e:t,previousCell:s,previousPort:u,previousView:c,previousPoint:l,currentCell:h,currentView:p,currentPort:d,currentPoint:g,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:n,isNew:e.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(e){var t=this,n=this.graph,r=n.model.getCells();e.marked={};for(var i=function(i,o){var a=n.renderer.findViewByCell(r[i]);if(!a)return"continue";var s=Array.prototype.slice.call(a.container.querySelectorAll("[magnet]"));"false"!==a.container.getAttribute("magnet")&&s.push(a.container);var u=s.filter(function(r){var i;return(i=n.hook).validateConnection.apply(i,Object(fu.a)(e.getValidateConnectionArgs(a,r)).concat([a.getEdgeTerminal(r,e.x,e.y,t.cell,e.terminalType)]))});if(u.length>0){for(var c=0,l=u.length;c<l;c+=1)a.highlight(u[c],{type:"magnetAvailable"});a.highlight(null,{type:"nodeAvailable"}),e.marked[a.cell.id]=u}},o=0,a=r.length;o<a;o+=1)i(o)}},{key:"unhighlightAvailableMagnets",value:function(e){var t=this,n=e.marked||{};Object.keys(n).forEach(function(e){var r=t.graph.renderer.findViewByCell(e);r&&(n[e].forEach(function(e){r.unhighlight(e,{type:"magnetAvailable"})}),r.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}},{key:"startArrowheadDragging",value:function(e,t,n){if(this.can("arrowheadMovable")){var r=e.target.getAttribute("data-terminal"),i=this.prepareArrowheadDragging(r,{x:t,y:n});this.setEventData(e,i)}else this.notifyUnhandledMouseDown(e,t,n)}},{key:"dragArrowhead",value:function(e,t,n){var r=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,n,r):this.arrowheadDragging(this.getEventTarget(e),t,n,r)}},{key:"stopArrowheadDragging",value:function(e,t,n){var r=this.graph,i=this.getEventData(e);r.options.connecting.snap?this.snapArrowheadEnd(i):this.arrowheadDragged(i,t,n),r.hook.validateEdge(this.cell,i.terminalType,i.initialTerminal)?(this.finishEmbedding(i),this.notifyConnectionEvent(i,e)):this.fallbackConnection(i),this.afterArrowheadDragging(i)}},{key:"startLabelDragging",value:function(e,t,n){if(this.can("edgeLabelMovable")){var r=e.currentTarget,i=parseInt(r.getAttribute("data-index"),10),o=this.getLabelPositionAngle(i),a=this.getLabelPositionArgs(i),s=this.getDefaultLabelPositionArgs(),u=this.mergeLabelPositionArgs(a,s);this.setEventData(e,{index:i,positionAngle:o,positionArgs:u,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}},{key:"dragLabel",value:function(e,t,n){var r=this.getEventData(e),o=this.cell.getLabelAt(r.index),a=i.merge({},o,{position:this.getLabelPosition(t,n,r.positionAngle,r.positionArgs)});this.cell.setLabelAt(r.index,a)}},{key:"stopLabelDragging",value:function(e,t,n){}},{key:"handleVertexAdding",value:function(e,t,n){if(this.can("vertexAddable")){var r=this.addVertex({x:t,y:n},{ui:!0});this.setEventData(e,{index:r,action:"drag-vertex"})}else this.notifyUnhandledMouseDown(e,t,n)}},{key:"handleVertexRemoving",value:function(e,t,n){if(this.can("vertexDeletable")){var r=e.target,i=parseInt(r.getAttribute("idx"),10);this.cell.removeVertexAt(i)}else this.notifyUnhandledMouseDown(e,t,n)}},{key:"startVertexDragging",value:function(e,t,n){if(this.can("vertexMovable")){var r=e.target,i=parseInt(r.getAttribute("idx"),10);this.setEventData(e,{index:i,action:"drag-vertex"})}else this.notifyUnhandledMouseDown(e,t,n)}},{key:"dragVertex",value:function(e,t,n){var r=this.getEventData(e);this.cell.setVertexAt(r.index,{x:t,y:n},{ui:!0})}},{key:"stopVertexDragging",value:function(e,t,n){}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}},{key:"sourceBBox",get:function(){var e=this.sourceView;if(!e){var t=this.cell.getSource();return new Lc(t.x,t.y)}var n=this.sourceMagnet;return e.isEdgeElement(n)?new Lc(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(n||e.container)}},{key:"targetBBox",get:function(){var e=this.targetView;if(!e){var t=this.cell.getTarget();return new Lc(t.x,t.y)}var n=this.targetMagnet;return e.isEdgeElement(n)?new Lc(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(n||e.container)}}]),t}(Qp);!function(e){e.toStringTag="X6.".concat(e.name),e.isEdgeView=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate&&"function"===typeof r.update&&"function"===typeof r.getConnection}}(ky||(ky={})),ky.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),ky.registry.register("edge",ky,!0);var Ey=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).scalableNode=null,e.rotatableNode=null,e.scalableSelector="scalable",e.rotatableSelector="rotatable",e.defaultPortMarkup=qp.getPortMarkup(),e.defaultPortLabelMarkup=qp.getPortLabelMarkup(),e.defaultPortContainerMarkup=qp.getPortContainerMarkup(),e.portsCache={},e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getContainerClassName",value:function(){var e=[Object(xf.a)(Object(Ac.a)(t.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}},{key:"updateClassName",value:function(e){var t=e.target;if(t.hasAttribute("magnet")){var n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?c.removeClass(t,n):c.addClass(t,n)}else{var r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;return this.hasAction(r,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","resize","translate","rotate","ports","tools"])):(r=this.handleAction(r,"resize",function(){return t.resize(n)},"update"),r=this.handleAction(r,"update",function(){return t.update()},_d.useCSSSelector?"ports":null),r=this.handleAction(r,"translate",function(){return t.translate()}),r=this.handleAction(r,"rotate",function(){return t.rotate()}),r=this.handleAction(r,"ports",function(){return t.renderPorts()}),r=this.handleAction(r,"tools",function(){return t.renderTools()})),r}},{key:"update",value:function(e){this.cleanCache(),_d.useCSSSelector&&this.removePorts();var t=this.cell,n=t.getSize(),r=t.getAttrs();this.updateAttrs(this.container,r,{attrs:e===r?null:e,rootBBox:new Lc(0,0,n.width,n.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),_d.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return"string"===typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container),n=function(e){return Array.isArray(e)?e[0]:e};this.selectors=t.selectors,this.rotatableNode=n(this.selectors[this.rotatableSelector]),this.scalableNode=n(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}},{key:"renderStringMarkup",value:function(e){c.append(this.container,al.toNodes(al.createVectors(e))),this.rotatableNode=c.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=c.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),_d.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode)return this.updateRotation(),void this.update();this.updateTransform()}},{key:"getTranslationString",value:function(){var e=this.cell.getPosition();return"translate(".concat(e.x,",").concat(e.y,")")}},{key:"getRotationString",value:function(){var e=this.cell.getAngle();if(e){var t=this.cell.getSize();return"rotate(".concat(e,",").concat(t.width/2,",").concat(t.height/2,")")}}},{key:"updateTransform",value:function(){var e=this.getTranslationString(),t=this.getRotationString();t&&(e+=" ".concat(t)),this.container.setAttribute("transform",e)}},{key:"updateRotation",value:function(){if(null!=this.rotatableNode){var e=this.getRotationString();null!=e?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.cell,n=t.getSize(),r=t.getAngle(),i=this.scalableNode,o=!1;i.getElementsByTagName("path").length>0&&(o=!0);var a=c.getBBox(i,{recursive:o}),s=n.width/(a.width||1),u=n.height/(a.height||1);i.setAttribute("transform","scale(".concat(s,",").concat(u,")"));var l=this.rotatableNode;if(null!=l){var f=l.getAttribute("transform");if(f){l.setAttribute("transform","".concat(f," rotate(").concat(-r,",").concat(n.width/2,",").concat(n.height/2,")"));var h=c.getBBox(i,{target:this.graph.view.stage});t.prop("position",{x:h.x,y:h.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(e,t){var n=e?this.portsCache[e]:null;if(!n)return null;var r=n.portContentElement,i=n.portContentSelectors||{};return this.findOne(t,r,i)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var e=this;Object.keys(this.portsCache).forEach(function(t){var n=e.portsCache[t];c.remove(n.portElement)})}},{key:"renderPorts",value:function(){var e=this,t=this.getPortsContainer(),n=[];t.childNodes.forEach(function(e){n.push(e)});var i=r.groupBy(this.cell.getParsedPorts(),"zIndex");i.auto&&i.auto.forEach(function(r){var i=e.getPortElement(r);t.append(i),n.push(i)}),Object.keys(i).forEach(function(t){if("auto"!==t){var r=parseInt(t,10);e.appendPorts(i[t],r,n)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(e,t,n){var r=this,i=e.map(function(e){return r.getPortElement(e)});n[t]||t<0?c.before(n[Math.max(t,0)],i):c.append(this.getPortsContainer(),i)}},{key:"getPortElement",value:function(e){var t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}},{key:"createPortElement",value:function(e){var t=qp.renderMarkup(this.getPortContainerMarkup()),n=t.elem;if(null==n)throw new Error("Invalid port container markup.");var r=(t=qp.renderMarkup(this.getPortMarkup(e))).elem,i=t.selectors;if(null==r)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},r);var o,a=(t=qp.renderMarkup(this.getPortLabelMarkup(e.label))).elem,s=t.selectors;if(null==a)throw new Error("Invalid port label markup.");if(i&&s){for(var u in s)if(i[u]&&u!==this.rootSelector)throw new Error("Selectors within port must be unique.");o=Object.assign(Object.assign({},i),s)}else o=i||s;return c.addClass(n,"x6-port"),c.addClass(r,"x6-port-body"),c.addClass(a,"x6-port-label"),n.appendChild(r),n.appendChild(a),this.portsCache[e.id]={portElement:n,portSelectors:o,portLabelElement:a,portLabelSelectors:s,portContentElement:r,portContentSelectors:i},this.graph.hook.onPortRendered({port:e,node:this.cell,container:n,selectors:o,labelContainer:a,labelSelectors:s,contentContainer:r,contentSelectors:i}),n}},{key:"updatePorts",value:function(){var e=this;this.updatePortGroup();var t=this.cell.getParsedGroups();Object.keys(t).forEach(function(t){return e.updatePortGroup(t)})}},{key:"updatePortGroup",value:function(e){for(var t=Lc.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(e,t),r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.portId,s=this.portsCache[a]||{},u=o.portLayout;if(this.applyPortTransform(s.portElement,u),null!=o.portAttrs){var c={selectors:s.portSelectors||{}};o.portSize&&(c.rootBBox=Lc.fromSize(o.portSize)),this.updateAttrs(s.portElement,o.portAttrs,c)}var l=o.labelLayout;if(l&&(this.applyPortTransform(s.portLabelElement,l,-(u.angle||0)),l.attrs)){var f={selectors:s.portLabelSelectors||{}};o.labelSize&&(f.rootBBox=Lc.fromSize(o.labelSize)),this.updateAttrs(s.portLabelElement,l.attrs,f)}}}},{key:"applyPortTransform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.angle,i=t.position,o=c.createSVGMatrix().rotate(n).translate(i.x||0,i.y||0).rotate(r||0);c.transform(e,o,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(e,t,n){var r=this.cell;return null==t||null==n?{e:e,view:this,node:r,cell:r}:{e:e,x:t,y:n,view:this,node:r,cell:r}}},{key:"notifyMouseDown",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseDown",this).call(this,e,n,r),this.notify("node:mousedown",this.getEventArgs(e,n,r))}},{key:"notifyMouseMove",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseMove",this).call(this,e,n,r),this.notify("node:mousemove",this.getEventArgs(e,n,r))}},{key:"notifyMouseUp",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseUp",this).call(this,e,n,r),this.notify("node:mouseup",this.getEventArgs(e,n,r))}},{key:"onClick",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onClick",this).call(this,e,n,r),this.notify("node:click",this.getEventArgs(e,n,r))}},{key:"onDblClick",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onDblClick",this).call(this,e,n,r),this.notify("node:dblclick",this.getEventArgs(e,n,r))}},{key:"onContextMenu",value:function(e,n,r){Object(xf.a)(Object(Ac.a)(t.prototype),"onContextMenu",this).call(this,e,n,r),this.notify("node:contextmenu",this.getEventArgs(e,n,r))}},{key:"onMouseDown",value:function(e,t,n){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,n),this.startNodeDragging(e,t,n))}},{key:"onMouseMove",value:function(e,t,n){var r=this.getEventData(e),i=r.action;if("magnet"===i)this.dragMagnet(e,t,n);else{if("move"===i){var o=r.targetView||this;o.dragNode(e,t,n),o.notify("node:moving",{e:e,x:t,y:n,view:o,cell:o.cell,node:o.cell})}this.notifyMouseMove(e,t,n)}this.setEventData(e,r)}},{key:"onMouseUp",value:function(e,t,n){var r=this.getEventData(e),i=r.action;"magnet"===i?this.stopMagnetDragging(e,t,n):(this.notifyMouseUp(e,t,n),"move"===i&&(r.targetView||this).stopNodeDragging(e,t,n));var o=r.targetMagnet;o&&this.onMagnetClick(e,o,t,n),this.checkMouseleave(e)}},{key:"onMouseOver",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseOver",this).call(this,e),this.notify("node:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseOut",this).call(this,e),this.notify("node:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){this.updateClassName(e),Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseEnter",this).call(this,e),this.notify("node:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseLeave",this).call(this,e),this.notify("node:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,n,r,i){Object(xf.a)(Object(Ac.a)(t.prototype),"onMouseWheel",this).call(this,e,n,r,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,n,r)))}},{key:"onMagnetClick",value:function(e,t,n,r){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}},{key:"onMagnetDblClick",value:function(e,t,n,r){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}},{key:"onMagnetContextMenu",value:function(e,t,n,r){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}},{key:"onMagnetMouseDown",value:function(e,t,n,r){this.startMagnetDragging(e,n,r)}},{key:"onCustomEvent",value:function(e,n,r,i){this.notify("node:customevent",Object.assign({name:n},this.getEventArgs(e,r,i))),Object(xf.a)(Object(Ac.a)(t.prototype),"onCustomEvent",this).call(this,e,n,r,i)}},{key:"prepareEmbedding",value:function(e){var t=this.getEventData(e).cell||this.cell,n=this.graph.findViewByCell(t),r=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e:e,node:t,view:n,cell:t,x:r.x,y:r.y,currentParent:t.getParent()})}},{key:"processEmbedding",value:function(e,t){var n=this,r=t.cell||this.cell,i=t.graph||this.graph,o=i.options.embedding,a=o.findParent,u="function"===typeof a?s.call(a,i,{view:this,node:this.cell}).filter(function(e){return ay.isCell(e)&&n.cell.id!==e.id&&!e.isDescendantOf(n.cell)}):i.model.getNodesUnderNode(r,{by:a});o.frontOnly&&(u=u.slice(-1));for(var c=null,l=t.candidateEmbedView,f=o.validate,h=u.length-1;h>=0;h-=1){var d=u[h];if(l&&l.cell.id===d.id){c=l;break}var p=d.findView(i);if(s.call(f,i,{child:this.cell,parent:p.cell,childView:this,parentView:p})){c=p;break}}this.clearEmbedding(t),c&&c.highlight(null,{type:"embedding"}),t.candidateEmbedView=c;var g=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e:e,cell:r,node:r,view:i.findViewByCell(r),x:g.x,y:g.y,currentParent:r.getParent(),candidateParent:c?c.cell:null})}},{key:"clearEmbedding",value:function(e){var t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(e,t){var n=t.cell||this.cell,r=t.graph||this.graph,i=r.findViewByCell(n),o=n.getParent(),a=t.candidateEmbedView;a?(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,null!=o&&o.id===a.cell.id||a.cell.insertChild(n,void 0,{ui:!0})):o&&o.unembed(n,{ui:!0}),r.model.getConnectedEdges(n,{deep:!0}).forEach(function(e){e.updateParent({ui:!0})});var s=r.snapToGrid(e.clientX,e.clientY);i&&i.notify("node:embedded",{e:e,cell:n,x:s.x,y:s.y,node:n,view:r.findViewByCell(n),previousParent:o,currentParent:n.getParent()})}},{key:"getDelegatedView",value:function(){for(var e=this.cell,t=this;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}},{key:"startMagnetDragging",value:function(e,t,n){if(this.can("magnetConnectable")){e.stopPropagation();var r=e.currentTarget,i=this.graph;this.setEventData(e,{targetMagnet:r}),i.hook.validateMagnet(this,r,e)?(i.options.magnetThreshold<=0&&this.startConnectting(e,r,t,n),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):this.onMouseDown(e,t,n),i.view.delegateDragEvents(e,this)}}},{key:"startConnectting",value:function(e,t,n,r){this.graph.model.startBatch("add-edge");var i=this.createEdgeFromMagnet(t,n,r);i.notifyMouseDown(e,n,r),i.setEventData(e,i.prepareArrowheadDragging("target",{x:n,y:r,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:i})}},{key:"createEdgeFromMagnet",value:function(e,t,n){var r=this.graph,i=r.model,o=r.hook.getDefaultEdge(this,e);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(e,t,n,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:t,y:n})),o.addTo(i,{async:!1,ui:!0}),o.findView(r)}},{key:"dragMagnet",value:function(e,t,n){var r=this.getEventData(e),i=r.edgeView;if(i)i.onMouseMove(e,t,n),this.autoScrollGraph(e.clientX,e.clientY);else{var o=this.graph,a=o.options.magnetThreshold,s=this.getEventTarget(e),u=r.targetMagnet;if("onleave"===a){if(u===s||u.contains(s))return}else if(o.view.getMouseMovedCount(e)<=a)return;this.startConnectting(e,u,t,n)}}},{key:"stopMagnetDragging",value:function(e,t,n){var r=this.eventData(e).edgeView;r&&(r.onMouseUp(e,t,n),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(e,t,n){this.notify("node:unhandled:mousedown",{e:e,x:t,y:n,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(e,t,n,r,i){var o=this,a=[i],s=this.graph.selection.widget;if(s&&s.options.movable){var u=this.graph.getSelectedCells();u.includes(i)&&(a=u.filter(function(e){return e.isNode()}))}a.forEach(function(i){o.notify(e,{e:t,x:n,y:r,cell:i,node:i,view:i.findView(o.graph)})})}},{key:"startNodeDragging",value:function(e,t,n){var r=this.getDelegatedView();if(null==r||!r.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,n);this.setEventData(e,{targetView:r,action:"move"});var i=Ic.create(r.cell.getPosition());r.setEventData(e,{moving:!1,offset:i.diff(t,n),restrict:this.graph.hook.getRestrictArea(r)})}},{key:"dragNode",value:function(e,t,n){var r=this.cell,i=this.graph,o=i.getGridSize(),a=this.getEventData(e),s=a.offset,u=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,n,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);var c=Md.snapToGrid(t+s.x,o),l=Md.snapToGrid(n+s.y,o);r.setPosition(c,l,{restrict:u,deep:!0,ui:!0}),i.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))}},{key:"stopNodeDragging",value:function(e,t,n){var r=this.getEventData(e);r.embedding&&this.finalizeEmbedding(e,r),r.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,n,this.cell)),r.moving=!1,r.embedding=!1}},{key:"autoScrollGraph",value:function(e,t){var n=this.graph.scroller.widget;n&&n.autoScroll(e,t)}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Qp);!function(e){e.toStringTag="X6.".concat(e.name),e.isNodeView=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate&&"function"===typeof r.update&&"function"===typeof r.findPortElem&&"function"===typeof r.resize&&"function"===typeof r.rotate&&"function"===typeof r.translate}}(Ey||(Ey={})),Ey.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Ey.registry.register("node",Ey,!0);var Oy=py("text"),Sy=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),t}(vy("text",{view:Oy,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));!function(e){var t=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"confirmUpdate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(xf.a)(Object(Ac.a)(t.prototype),"confirmUpdate",this).call(this,e,n);return this.hasAction(r,"scale")&&(this.resize(),r=this.removeAction(r,"scale")),r}}]),t}(Ey);e.View=t,t.config({actions:{attrs:["scale"]}}),Ey.registry.register(Oy,t)}(Sy||(Sy={}));var Ay=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).length=0,n.comparator=r.comparator||"zIndex",n.clean(),e&&n.reset(e,{silent:!0}),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,n){var r,i,o=this;"number"===typeof t?(r=t,i=Object.assign({merge:!1},n)):(r=this.length,i=Object.assign({merge:!1},t)),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var a,s=Array.isArray(e)?e:[e],u=this.comparator&&"number"!==typeof t&&!1!==i.sort,c=this.comparator||null,l=!1,f=[],h=[];(s.forEach(function(e){var t=o.get(e);t?i.merge&&!e.isSameStore(t)&&(t.setProp(e.getProp(),n),h.push(t),u&&!l&&(l=null==c||"function"===typeof c?t.hasChanged():"string"===typeof c?t.hasChanged(c):c.some(function(e){return t.hasChanged(e)}))):(f.push(e),o.reference(e))}),f.length)&&(u&&(l=!0),(a=this.cells).splice.apply(a,[r,0].concat(f)),this.length=this.cells.length);return l&&this.sort({silent:!0}),i.silent||(f.forEach(function(e,t){var n={cell:e,index:r+t,options:i};o.trigger("added",n),i.dryrun||e.notify("added",Object.assign({},n))}),l&&this.trigger("sorted"),(f.length||h.length)&&this.trigger("updated",{added:f,merged:h,removed:[],options:i})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],r=this.removeCells(n,t);return!t.silent&&r.length>0&&this.trigger("updated",{options:t,removed:r,added:[],merged:[]}),Array.isArray(e)?r:r[0]}},{key:"removeCells",value:function(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=this.get(e[r]);if(null!=i){var o=this.cells.indexOf(i);this.cells.splice(o,1),this.length-=1,delete this.map[i.id],n.push(i),this.unreference(i),t.dryrun||i.remove(),t.silent||(this.trigger("removed",{cell:i,index:o,options:t}),t.dryrun||i.notify("removed",{cell:i,index:o,options:t}))}}return n}},{key:"reset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.cells.slice();if(r.forEach(function(e){return t.unreference(e)}),this.clean(),this.add(e,Object.assign({silent:!0},n)),!n.silent){var i=this.cells.slice();this.trigger("reseted",{options:n,previous:r,current:i});var o=[],a=[];i.forEach(function(e){r.some(function(t){return t.id===e.id})||o.push(e)}),r.forEach(function(e){i.some(function(t){return t.id===e.id})||a.push(e)}),this.trigger("updated",{options:n,added:o,removed:a,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(null==e)return null;var t="string"===typeof e||"number"===typeof e?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=this.comparator&&(this.cells=r.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var n=t.cell;this.trigger("cell:".concat(e),t),n&&(n.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:n})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),t}(Tp),Ty=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new Ay(n),e.setup(),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"notify",value:function(e,t){this.trigger(e,t);var n=this.graph;return n&&("sorted"===e||"reseted"===e||"updated"===e?n.trigger("model:".concat(e),t):n.trigger(e,t)),this}},{key:"setup",value:function(){var e=this,t=this.collection;t.on("sorted",function(){return e.notify("sorted",null)}),t.on("updated",function(t){return e.notify("updated",t)}),t.on("cell:change:zIndex",function(){return e.sortOnChangeZ()}),t.on("added",function(t){var n=t.cell;e.onCellAdded(n)}),t.on("removed",function(t){var n=t.cell;e.onCellRemoved(n,t.options),e.notify("cell:removed",t),n.isNode()?e.notify("node:removed",Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&e.notify("edge:removed",Object.assign(Object.assign({},t),{edge:n}))}),t.on("reseted",function(t){e.onReset(t.current),e.notify("reseted",t)}),t.on("edge:change:source",function(t){var n=t.edge;return e.onEdgeTerminalChanged(n,"source")}),t.on("edge:change:target",function(t){var n=t.edge;e.onEdgeTerminalChanged(n,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(e){var t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}},{key:"onCellRemoved",value:function(e,t){var n=e.id;if(e.isEdge()){delete this.edges[n];var r=e.getSource(),i=e.getTarget();if(r&&r.cell){var o=this.outgoings[r.cell],a=o?o.indexOf(n):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.outgoings[r.cell])}if(i&&i.cell){var s=this.incomings[i.cell],u=s?s.indexOf(n):-1;u>=0&&(s.splice(u,1),0===s.length&&delete this.incomings[i.cell])}}else delete this.nodes[n];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}},{key:"onReset",value:function(e){var t=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(function(e){return t.onCellAdded(e)})}},{key:"onEdgeTerminalChanged",value:function(e,t){var n="source"===t?this.outgoings:this.incomings,r=e.previous(t);if(r&&r.cell){var i=n[r.cell],o=i?i.indexOf(e.id):-1;o>=0&&(i.splice(o,1),0===i.length&&delete n[r.cell])}var a=e.getTerminal(t);if(a&&a.cell){var s=n[a.cell]||[];-1===s.indexOf(e.id)&&s.push(e.id),n[a.cell]=s}}},{key:"prepareCell",value:function(e,t){return e.model||t&&t.dryrun||(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}},{key:"resetCells",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map(function(e){return t.prepareCell(e,Object.assign(Object.assign({},n),{dryrun:!0}))}),this.collection.reset(e,n),e.map(function(e){return t.prepareCell(e,{options:n})}),this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getCells();if(0===t.length)return this;var n=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",function(){for(var e=t.sort(function(e,t){return(e.isEdge()?1:2)-(t.isEdge()?1:2)});e.length>0;){var r=e.shift();r&&r.remove(n)}},n),this}},{key:"addNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=cy.isNode(e)?e:this.createNode(e);return this.addCell(n,t),n}},{key:"createNode",value:function(e){return cy.create(e)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=xy.isEdge(e)?e:this.createEdge(e);return this.addCell(n,t),n}},{key:"createEdge",value:function(e){return xy.create(e)}},{key:"addCell",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)?this.addCells(e,n):(this.collection.has(e)||this.addings.has(e)||(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,n),n),e.eachChild(function(e){return t.addCell(e,n)}),this.addings.delete(e)),this)}},{key:"addCells",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length;if(0===r)return this;var i=Object.assign(Object.assign({},n),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(function(e){t.addCell(e,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e?this.getCell(e):e;return n&&this.has(n)?this.collection.remove(n,t):null}},{key:"updateCellId",value:function(e,t){this.startBatch("update",{id:t}),e.prop("id",t);var n=e.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(e).forEach(function(n){var r=n.getSourceCell(),i=n.getTargetCell();r===e&&n.setSource(Object.assign(Object.assign({},n.getSource()),{cell:t})),i===e&&n.setTarget(Object.assign(Object.assign({},n.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),n}},{key:"removeCells",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length?this.batchUpdate("remove",function(){return e.map(function(e){return t.removeCell(e,n)})}):[]}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConnectedEdges(e);return n.forEach(function(e){e.remove(t)}),n}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e?e:e.id;this.getConnectedEdges(e).forEach(function(e){var r=e.getSourceCell(),i=e.getTargetCell();r&&r.id===n&&e.setSource({x:0,y:0},t),i&&i.id===n&&e.setTarget({x:0,y:0},t)})}},{key:"has",value:function(e){return this.collection.has(e)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(e){return this.collection.indexOf(e)}},{key:"getCell",value:function(e){return this.collection.get(e)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var e=this.collection.first();return e&&e.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var e=this.collection.last();return e&&e.getZIndex()||0}},{key:"getCellsFromCache",value:function(e){var t=this;return e?Object.keys(e).map(function(e){return t.getCell(e)}).filter(function(e){return null!=e}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(e){var t=this,n="string"===typeof e?e:e.id,r=this.outgoings[n];return r?r.map(function(e){return t.getCell(e)}).filter(function(e){return e&&e.isEdge()}):null}},{key:"getIncomingEdges",value:function(e){var t=this,n="string"===typeof e?e:e.id,r=this.incomings[n];return r?r.map(function(e){return t.getCell(e)}).filter(function(e){return e&&e.isEdge()}):null}},{key:"getConnectedEdges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i="string"===typeof e?this.getCell(e):e;if(null==i)return r;var o={},a=n.indirect,s=n.incoming,u=n.outgoing;null==s&&null==u&&(s=u=!0);var c=function e(n,i){var c=i?t.getOutgoingEdges(n):t.getIncomingEdges(n);if(null!=c&&c.forEach(function(t){o[t.id]||(r.push(t),o[t.id]=!0,a&&(s&&e(t,!1),u&&e(t,!0)))}),a&&n.isEdge()){var l=i?n.getTargetCell():n.getSourceCell();l&&l.isEdge()&&(o[l.id]||(r.push(l),e(l,i)))}};if(u&&c(i,!0),s&&c(i,!1),n.deep){var l=i.getDescendants({deep:!0}),f={};l.forEach(function(e){e.isNode()&&(f[e.id]=!0)});var h=function(e,i){var a=i?t.getOutgoingEdges(e.id):t.getIncomingEdges(e.id);null!=a&&a.forEach(function(e){if(!o[e.id]){var t=e.getSourceCell(),i=e.getTargetCell();if(!n.enclosed&&t&&f[t.id]&&i&&f[i.id])return;r.push(e),o[e.id]=!0}})};l.forEach(function(e){e.isEdge()||(u&&h(e,!0),s&&h(e,!1))})}return r}},{key:"isBoundary",value:function(e,t){var n="string"===typeof e?this.getCell(e):e,r=t?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==r||0===r.length}},{key:"getBoundaryNodes",value:function(e){var t=this,n=[];return Object.keys(this.nodes).forEach(function(r){if(t.isBoundary(r,e)){var i=t.getCell(r);i&&n.push(i)}}),n}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(e){return this.isBoundary(e,!0)}},{key:"isLeaf",value:function(e){return this.isBoundary(e,!1)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.incoming,r=t.outgoing;null==n&&null==r&&(n=r=!0);var i=this.getConnectedEdges(e,t).reduce(function(i,o){var a=o.hasLoop(t),s=o.getSourceCell(),u=o.getTargetCell();return n&&s&&s.isNode()&&!i[s.id]&&(!a&&(s===e||t.deep&&s.isDescendantOf(e))||(i[s.id]=s)),r&&u&&u.isNode()&&!i[u.id]&&(!a&&(u===e||t.deep&&u.isDescendantOf(e))||(i[u.id]=u)),i},{});if(e.isEdge()){if(n){var o=e.getSourceCell();o&&o.isNode()&&!i[o.id]&&(i[o.id]=o)}if(r){var a=e.getTargetCell();a&&a.isNode()&&!i[a.id]&&(i[a.id]=a)}}return Object.keys(i).map(function(e){return i[e]})}},{key:"isNeighbor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.incoming,i=n.outgoing;return null==r&&null==i&&(r=i=!0),this.getConnectedEdges(e,n).some(function(e){var n=e.getSourceCell(),o=e.getTargetCell();return!(!r||!n||n.id!==t.id)||!(!i||!o||o.id!==t.id)})}},{key:"getSuccessors",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return this.search(e,function(i,o){i!==e&&t.matchDistance(o,n.distance)&&r.push(i)},Object.assign(Object.assign({},n),{outgoing:!0})),r}},{key:"isSuccessor",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1;return this.search(e,function(o,a){if(o===t&&o!==e&&n.matchDistance(a,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{outgoing:!0})),i}},{key:"getPredecessors",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return this.search(e,function(i,o){i!==e&&t.matchDistance(o,n.distance)&&r.push(i)},Object.assign(Object.assign({},n),{incoming:!0})),r}},{key:"isPredecessor",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1;return this.search(e,function(o,a){if(o===t&&o!==e&&n.matchDistance(a,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{incoming:!0})),i}},{key:"matchDistance",value:function(e,t){return null==t||("function"===typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}},{key:"getCommonAncestor",value:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){t&&(Array.isArray(t)?e.push.apply(e,Object(fu.a)(t)):e.push(t))}),ay.getCommonAncestor.apply(ay,e)}},{key:"getSubGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i={},o=[],a=[],s=function(e){i[e.id]||(r.push(e),i[e.id]=e,e.isEdge()&&a.push(e),e.isNode()&&o.push(e))};return e.forEach(function(e){(s(e),n.deep)&&e.getDescendants({deep:!0}).forEach(function(e){return s(e)})}),a.forEach(function(e){var t=e.getSourceCell(),n=e.getTargetCell();t&&!i[t.id]&&(r.push(t),i[t.id]=t,t.isNode()&&o.push(t)),n&&!i[n.id]&&(r.push(n),i[n.id]=n,n.isNode()&&o.push(n))}),o.forEach(function(e){t.getConnectedEdges(e,n).forEach(function(e){var t=e.getSourceCell(),n=e.getTargetCell();!i[e.id]&&t&&i[t.id]&&n&&i[n.id]&&(r.push(e),i[e.id]=e)})}),r}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getSubGraph(e,t);return this.cloneCells(n)}},{key:"cloneCells",value:function(e){return ay.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){var n="number"===typeof e?{x:e,y:t||0}:e;return this.getNodes().filter(function(e){return e.getBBox().containsPoint(n)})}},{key:"getNodesInArea",value:function(e,t,n,r,i){var o="number"===typeof e?new Lc(e,t,n,r):Lc.create(e),a="number"===typeof e?i:t,s=a&&a.strict;return this.getNodes().filter(function(e){var t=e.getBBox();return s?o.containsRect(t):o.isIntersectWithRect(t)})}},{key:"getEdgesInArea",value:function(e,t,n,r,i){var o="number"===typeof e?new Lc(e,t,n,r):Lc.create(e),a="number"===typeof e?i:t,s=a&&a.strict;return this.getEdges().filter(function(e){var t=e.getBBox();return 0===t.width?t.inflate(1,0):0===t.height&&t.inflate(0,1),s?o.containsRect(t):o.isIntersectWithRect(t)})}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(n):this.getNodesFromPoint(n[t.by])).filter(function(t){return e.id!==t.id&&!t.isDescendantOf(e)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ay.getCellsBBox(e,t)}},{key:"search",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.breadthFirst?this.breadthFirstSearch(e,t,n):this.depthFirstSearch(e,t,n)}},{key:"breadthFirstSearch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],o={},a={};i.push(e),a[e.id]=0;for(var u=function(){var e=i.shift();return null==e||o[e.id]?"continue":(o[e.id]=!0,!1===s.call(t,n,e,a[e.id])?"continue":void n.getNeighbors(e,r).forEach(function(t){a[t.id]=a[e.id]+1,i.push(t)}))};i.length>0;)u()}},{key:"depthFirstSearch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],o={},a={};i.push(e),a[e.id]=0;for(var u=function(){var e=i.pop();if(null==e||o[e.id])return"continue";if(o[e.id]=!0,!1===s.call(t,n,e,a[e.id]))return"continue";var u=n.getNeighbors(e,r),c=i.length;u.forEach(function(t){a[t.id]=a[e.id]+1,i.splice(c,0,t)})};i.length>0;)u()}},{key:"getShortestPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};this.getEdges().forEach(function(e){var t=e.getSourceCellId(),i=e.getTargetCellId();t&&i&&(r[t]||(r[t]=[]),r[i]||(r[i]=[]),r[t].push(i),n.directed||r[i].push(t))});var i="string"===typeof e?e:e.id,o=Pp.run(r,i,n.weight),a=[],s="string"===typeof t?t:t.id;for(o[s]&&a.push(s);s=o[s];)a.unshift(s);return a}},{key:"translate",value:function(e,t,n){return this.getCells().filter(function(e){return!e.hasParent()}).forEach(function(r){return r.translate(e,t,n)}),this}},{key:"resize",value:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)}},{key:"resizeCells",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getCellsBBox(n);if(i){var o=Math.max(e/i.width,0),a=Math.max(t/i.height,0),s=i.getOrigin();n.forEach(function(e){return e.scale(o,a,s,r)})}return this}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.toJSON(this.getCells(),e)}},{key:"parseJSON",value:function(e){return t.fromJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.parseJSON(e);return this.resetCells(n,t),this}},{key:"startBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}},{key:"batchUpdate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startBatch(e,n);var r=t();return this.stopBatch(e,n),r}},{key:"hasActiveBatch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.batches);return(Array.isArray(t)?t:[t]).some(function(t){return e.batches[t]>0})}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Tp);!function(e){e.toStringTag="X6.".concat(e.name),e.isModel=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"===typeof r.addNode&&"function"===typeof r.addEdge&&null!=r.collection}}(Ty||(Ty={})),function(e){e.toJSON=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{cells:e.map(function(e){return e.toJSON(t)})}},e.fromJSON=function(e){var t=[];return Array.isArray(e)?t.push.apply(t,Object(fu.a)(e)):(e.cells&&t.push.apply(t,Object(fu.a)(e.cells)),e.nodes&&e.nodes.forEach(function(e){null==e.shape&&(e.shape="rect"),t.push(e)}),e.edges&&e.edges.forEach(function(e){null==e.shape&&(e.shape="edge"),t.push(e)})),t.map(function(e){var t=e.shape;if(t){if(cy.registry.exist(t))return cy.create(e);if(xy.registry.exist(t))return xy.create(e)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(Ty||(Ty={}));var My,_y=".text-block-content",jy=py("text-block"),Py=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;Object(xf.a)(Object(Ac.a)(t.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var n=t.key;"content"===n?e.updateContent(e.getContent()):"size"===n&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){A.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Object(T.a)({foreignObject:Object.assign({},e)},_y,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){A.SUPPORT_FOREIGNOBJECT?this.setAttrs(Object(T.a)({},_y,{html:e?o.sanitizeHTML(e):""})):this.setAttrs(Object(T.a)({},_y,{text:e}))}},{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}}]),t}(cy);(My=Py||(Py={})).config({type:jy,view:jy,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',A.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(_y.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(_y.substr(1),'"/>'),"</g>"].join(""),attrs:Object(T.a)({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},_y,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),cy.registry.register(jy,My),function(e){var t=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"confirmUpdate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(xf.a)(Object(Ac.a)(t.prototype),"confirmUpdate",this).call(this,e,n);return this.hasAction(r,"content")&&(this.updateContent(),r=this.removeAction(r,"content")),r}},{key:"update",value:function(e){if(A.SUPPORT_FOREIGNOBJECT)Object(xf.a)(Object(Ac.a)(t.prototype),"update",this).call(this,e);else{var n=this.cell,r=Object.assign({},e||n.getAttrs());delete r[_y],Object(xf.a)(Object(Ac.a)(t.prototype),"update",this).call(this,r),e&&!i.has(e,_y)||this.updateContent(e)}}},{key:"updateContent",value:function(e){if(A.SUPPORT_FOREIGNOBJECT)Object(xf.a)(Object(Ac.a)(t.prototype),"update",this).call(this,e);else{var n=this.cell,r=(e||n.getAttrs())[_y],o=c.breakText(n.getContent(),n.getSize(),r,{svgDocument:this.graph.view.svg}),a=Object(T.a)({},_y,i.merge({},r,{text:o}));Object(xf.a)(Object(Ac.a)(t.prototype),"update",this).call(this,a)}}}]),t}(Ey);e.View=t,function(e){e.config({bootstrap:["render","content"],actions:A.SUPPORT_FOREIGNOBJECT?{}:{size:"content",content:"content"}}),Ey.registry.register(jy,e)}(t=e.View||(e.View={}))}(Py||(Py={}));var Ny=hy.define({shape:"empty"});function Ry(e){return[{tagName:e,selector:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body"},{tagName:"text",selector:"label"}]}function Dy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={constructorName:e,markup:Ry(e,n.selector),attrs:Object(T.a)({},e,Object.assign({},hy.bodyAttr))};return(n.parent||hy).define(i.merge(r,t,{shape:e}))}var Iy=Dy("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),Ly=cy.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},hy.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},hy.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},hy.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},hy.labelAttr),{refY2:15})}}),Fy=Dy("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),By=hy.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},hy.bodyAttr),{lateral:10}),top:Object.assign(Object.assign({},hy.bodyAttr),{refCx:"50%",refRx:"50%",cy:10,ry:10})},attrHooks:{lateral:{set:function(e,t){var n=t.refBBox,r=a.isPercentage(e);r&&(e=parseFloat(e)/100);var i=n.x,o=n.y,s=n.width,u=n.height,c=r?u*e:e,l=.551784*(s/2),f=.551784*c,h=i+s/2,d=i+s,p=o+c,g=p-c,v=o+u-c,y=o+u;return{d:["M",i,p,"L",i,v,"C",i,v+f,h-l,y,h,y,"C",h+l,y,d,v+f,d,v,"L",d,p,"C",d,p-f,h+l,g,h,g,"C",h-l,g,i,p-f,i,p,"Z"].join(" ")}}}},knob:{enabled:!0,position:function(e){return{x:0,y:e.node.attr("body/lateral")}},onMouseMove:function(e){var t=e.node,n=e.data,r=e.deltaY;if(0!==r){var i=t.getBBox(),o=t.attr("body/lateral");null==n.round&&(n.round=o);var s=i.height/2,u=a.clamp(n.round+r,0,s);u!==o&&t.attr({body:{lateral:u},top:{cy:u,ry:u}})}}}}),zy=Dy("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),Vy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Uy=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,n){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",t.pointsToString(e),n),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}},{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}}]),t}(hy);!function(e){function t(e){return"string"===typeof e?e:e.map(function(e){return Array.isArray(e)?e.join(","):Ic.isPointLike(e)?"".concat(e.x,", ").concat(e.y):""}).join(" ")}e.pointsToString=t,e.config({propHooks:function(e){var n=e.points,r=Vy(e,["points"]);if(n){var o=t(n);o&&i.setByPath(r,"attrs/body/refPoints",o)}return r}})}(Uy||(Uy={}));var Gy,Hy=Dy("polygon",{},{parent:Uy}),Wy=Dy("polyline",{},{parent:Uy}),qy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Xy=hy.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(e){var t=e.path,n=qy(e,["path"]);return t&&i.setByPath(n,"attrs/body/refD",t),n}}),$y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Yy=hy.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},A.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:c.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},hy.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(e){var t=e.text,n=$y(e,["text"]);return t&&i.setByPath(n,"attrs/label/text",t),n},attrHooks:{text:{set:function(e,t){var n=t.cell,r=t.view,i=t.refBBox,o=t.elem,a=t.attrs;if(!(o instanceof HTMLElement)){var u=a.style||{},c={text:e,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},u),f=Wh.presets.textWrap;return s.call(f.set,this,c,{cell:n,view:r,elem:o,refBBox:i,attrs:l}),{fill:u.color||null}}o.textContent=e},position:function(e,t){var n=t.refBBox;if(t.elem instanceof SVGElement)return n.getCenter()}}}}),Ky=Dy("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:gy()},{selector:"image"}),Jy=Dy("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:gy()}),Zy=Dy("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:gy()}),Qy=Dy("image-inscribed",{propHooks:gy(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),em=xy.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),tm=xy.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),nm=xy.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),rm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("html",e)}},{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}}]),t}(hy);!function(e){var t=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){var e=this;Object(xf.a)(Object(Ac.a)(t.prototype),"init",this).call(this),this.cell.on("change:*",function(){e.graph.hook.shouldUpdateHTMLComponent(e.cell)&&e.renderHTMLComponent()})}},{key:"confirmUpdate",value:function(e){var n=this,r=Object(xf.a)(Object(Ac.a)(t.prototype),"confirmUpdate",this).call(this,e);return this.handleAction(r,t.action,function(){return n.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var e=this.selectors.foContent;if(e){var t=this.$(e).empty(),n=this.graph.hook.getHTMLComponent(this.cell);n&&("string"===typeof n?t.html(n):t.append(n))}}}]),t}(Ey);e.View=t,function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),Ey.registry.register("html-view",e)}(t=e.View||(e.View={}))}(rm||(rm={})),(Gy=rm||(rm={})).config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},qp.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),cy.registry.register("html",Gy),(rm||(rm={})).componentRegistry=Cf.create({type:"html componnet"});var im=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},om=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).delay=10,n.throttle=2,n.threshold=5,n.changeCount=0,n.timestamp=0,n.options=Object.assign(Object.assign({},t.defaultOptions),e),n.graph.model.on("cell:change:*",n.onModelChanged,Object(xp.a)(n)),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onModelChanged",value:function(){if(!this.disabled){var e=((new Date).getTime()-this.timestamp)/1e3;e>this.delay||this.changeCount>=this.threshold&&e>this.throttle?(this.save(),this.reset()):this.changeCount+=1}}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=(new Date).getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}},{key:"graph",get:function(){return this.options.graph}}]),t}(Mp);im([Mp.dispose()],om.prototype,"dispose",null),(om||(om={})).defaultOptions={delay:10,throttle:2,threshold:5};var am,sm=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).graph=e,n.init(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){}},{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}}]),t}(Sp),um=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cm=function(e){function t(e){var n;Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).graph=e;var r=qp.parseJSONMarkup(t.markup),i=r.selectors,o=r.fragment;return n.background=i.background,n.grid=i.grid,n.svg=i.svg,n.defs=i.defs,n.viewport=i.viewport,n.primer=i.primer,n.stage=i.stage,n.decorator=i.decorator,n.overlay=i.overlay,n.container=n.options.container,n.restore=t.snapshoot(n.container),n.$(n.container).addClass(n.prefixClassName("graph")).append(o),n.delegateEvents(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"delegateEvents",value:function(){var e=this.constructor;return Object(xf.a)(Object(Ac.a)(t.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return"mousedown"===e.type&&2===e.button||(!(!this.options.guard||!this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&ay.isCell(t.cell))&&(this.svg!==e.target&&this.container!==e.target&&!_.a.contains(this.svg,e.target))))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){this.options.preventDefaultDblClick&&e.preventDefault();var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){var r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onDblClick(t,r.x,r.y):this.graph.trigger("blank:dblclick",{e:t,x:r.x,y:r.y})}}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;var r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onClick(t,r.x,r.y):this.graph.trigger("blank:click",{e:t,x:r.x,y:r.y})}}},{key:"onContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault();var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){var r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onContextMenu(t,r.x,r.y):this.graph.trigger("blank:contextmenu",{e:t,x:r.x,y:r.y})}}},{key:"delegateDragEvents",value:function(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});var n=this.constructor;this.delegateDocumentEvents(n.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){return this.getEventData(e).mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){this.options.preventDefaultMouseDown&&t.preventDefault();var r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onMouseDown(t,r.x,r.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:r.x,y:r.y})),this.delegateDragEvents(t,n)}}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),n=t.startPosition;if((!n||n.x!==e.clientX||n.y!==e.clientY)&&(null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,!(t.mouseMovedCount<=this.options.moveThreshold))){var r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY),o=t.currentView;o?o.onMouseMove(r,i.x,i.y):this.graph.trigger("blank:mousemove",{e:r,x:i.x,y:i.y}),this.setEventData(r,t)}}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY),r=this.getEventData(e).currentView;r?r.onMouseUp(t,n.x,n.y):this.graph.trigger("blank:mouseup",{e:t,x:n.x,y:n.y}),e.isPropagationStopped()||this.onClick(_.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){var r=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(r===n)return;n.onMouseEnter(t)}else{if(r)return;this.graph.trigger("graph:mouseenter",{e:t})}}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){var r=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(r===n)return;n.onMouseLeave(t)}else{if(r)return;this.graph.trigger("graph:mouseleave",{e:t})}}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n)){var r=t.originalEvent,i=this.graph.snapToGrid(r.clientX,r.clientY),o=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));n?n.onMouseWheel(t,i.x,i.y,o):this.graph.trigger("blank:mousewheel",{e:t,delta:o,x:i.x,y:i.y})}}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,n=t.getAttribute("event")||t.getAttribute("data-event");if(n){var r=this.findView(t);if(r){var i=this.normalizeEvent(e);if(this.guard(i,r))return;var o=this.graph.snapToGrid(i.clientX,i.clientY);r.onCustomEvent(i,n,o.x,o.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var n=e.currentTarget,r=n.getAttribute("magnet");if(r&&"false"!==r.toLowerCase()){var i=this.findView(n);if(i){var o=this.normalizeEvent(e);if(this.guard(o,i))return;var a=this.graph.snapToGrid(o.clientX,o.clientY);s.call(t,this.graph,i,o,n,a.x,a.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(e,t,n,r,i){e.onMagnetMouseDown(t,n,r,i)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(e,t,n,r,i){e.onMagnetDblClick(t,n,r,i)})}},{key:"onMagnetContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault(),this.handleMagnetEvent(e,function(e,t,n,r,i){e.onMagnetContextMenu(t,n,r,i)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,n=this.findView(t);if(n){var r=this.normalizeEvent(e);if(this.guard(r,n))return;var i=this.graph.snapToGrid(r.clientX,r.clientY);n.onLabelMouseDown(r,i.x,i.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}},{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}}]),t}(Fp);um([Fp.dispose()],cm.prototype,"dispose",null),function(e){var t="".concat(_d.prefixCls,"-graph");e.markup=[{ns:c.ns.xhtml,tagName:"div",selector:"background",className:"".concat(t,"-background")},{ns:c.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(t,"-grid")},{ns:c.ns.svg,tagName:"svg",selector:"svg",className:"".concat(t,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":c.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(t,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(t,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(t,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(t,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(t,"-svg-overlay")}]}]}],e.snapshoot=function(e){var t=e.cloneNode();return e.childNodes.forEach(function(e){return t.appendChild(e)}),function(){for(c.empty(e);e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(var n=0,r=t.attributes.length;n<r;n+=1){var i=t.attributes[n];e.setAttribute(i.name,i.value)}t.childNodes.forEach(function(t){return e.appendChild(t)})}}}(cm||(cm={})),function(e){var t,n=_d.prefixCls;e.events=(t={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Object(T.a)(t,"mouseenter  .".concat(n,"-cell"),"onMouseEnter"),Object(T.a)(t,"mouseleave  .".concat(n,"-cell"),"onMouseLeave"),Object(T.a)(t,"mouseenter  .".concat(n,"-cell-tools"),"onMouseEnter"),Object(T.a)(t,"mouseleave  .".concat(n,"-cell-tools"),"onMouseLeave"),Object(T.a)(t,"mousedown   .".concat(n,"-cell [event]"),"onCustomEvent"),Object(T.a)(t,"touchstart  .".concat(n,"-cell [event]"),"onCustomEvent"),Object(T.a)(t,"mousedown   .".concat(n,"-cell [data-event]"),"onCustomEvent"),Object(T.a)(t,"touchstart  .".concat(n,"-cell [data-event]"),"onCustomEvent"),Object(T.a)(t,"dblclick    .".concat(n,"-cell [magnet]"),"onMagnetDblClick"),Object(T.a)(t,"contextmenu .".concat(n,"-cell [magnet]"),"onMagnetContextMenu"),Object(T.a)(t,"mousedown   .".concat(n,"-cell [magnet]"),"onMagnetMouseDown"),Object(T.a)(t,"touchstart  .".concat(n,"-cell [magnet]"),"onMagnetMouseDown"),Object(T.a)(t,"dblclick    .".concat(n,"-cell [data-magnet]"),"onMagnetDblClick"),Object(T.a)(t,"contextmenu .".concat(n,"-cell [data-magnet]"),"onMagnetContextMenu"),Object(T.a)(t,"mousedown   .".concat(n,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(T.a)(t,"touchstart  .".concat(n,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(T.a)(t,"dragstart   .".concat(n,"-cell image"),"onImageDragStart"),Object(T.a)(t,"mousedown   .".concat(n,"-edge .").concat(n,"-edge-label"),"onLabelMouseDown"),Object(T.a)(t,"touchstart  .".concat(n,"-edge .").concat(n,"-edge-label"),"onLabelMouseDown"),t),e.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(cm||(cm={})),function(e){(am||(am={})).checkScroller=function(e,t){return function(n,r,i){var o=i.value;i.value=function(){if(null==this.scroller.widget){var n="Shoule enable scroller to use method '".concat(r,"'");if(!1!==e)throw console.error(n),new Error(n);return!1!==t&&console.warn(n),this}for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return o.call.apply(o,[this].concat(a))}}}}();var lm=".x6-graph {\n  position: relative;\n  outline: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n@keyframes halo-pie-visibility {\n  0% {\n    visibility: hidden;\n  }\n  100% {\n    visibility: visible;\n  }\n}\n@keyframes halo-pie-opening {\n  0% {\n    transform: scale(0.4) rotate(-20deg);\n  }\n  100% {\n    transform: scale(1) rotate(0);\n  }\n}\n.x6-widget-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  background-size: 20px 20px;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle.hidden {\n  display: none;\n}\n.x6-widget-handle-selected {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.x6-widget-handle-remove {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: pointer;\n}\n.x6-widget-handle-remove:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-rotate {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-rotate:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-resize {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n  cursor: se-resize;\n}\n.x6-widget-handle-resize:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-clone {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-clone:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-link {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.x6-widget-handle-link:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-fork {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-fork:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-direction {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-direction:hover {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {\n  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-se {\n  right: -25px;\n  bottom: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-nw {\n  top: -21px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-n {\n  top: -22px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-e {\n  top: -webkit-calc(40%);\n  top: calc(50% - 10px);\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-ne {\n  top: -21px;\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-w {\n  top: 50%;\n  left: -25px;\n  margin-top: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-sw {\n  bottom: -25px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-s {\n  bottom: -24px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {\n  width: 15px;\n  height: 15px;\n  font-size: 15px;\n  background-size: 15px 15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {\n  right: -19px;\n  bottom: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {\n  top: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {\n  top: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {\n  top: -webkit-calc(42%);\n  top: calc(50% - 8px);\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {\n  top: -19px;\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {\n  left: -19px;\n  margin-top: -8px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {\n  bottom: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {\n  bottom: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {\n  width: 10px;\n  height: 10px;\n  font-size: 10px;\n  background-size: 10px 10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {\n  right: -15px;\n  bottom: -13px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {\n  top: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {\n  top: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {\n  top: -webkit-calc(45%);\n  top: calc(50% - 5px);\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {\n  top: -13px;\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {\n  left: -15px;\n  margin-top: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {\n  bottom: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {\n  bottom: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-toolbar {\n  position: absolute;\n  top: -50px;\n  display: table-row;\n  padding: 7px 5px;\n}\n.x6-widget-handle-toolbar::after {\n  position: absolute;\n  top: 100%;\n  left: 10px;\n  width: 0;\n  height: 0;\n  margin-top: 4px;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  content: '';\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  position: relative;\n  display: table-cell;\n  min-width: 20px;\n  margin: 0 2px;\n  background-position: 3px 3px;\n  background-size: 16px 16px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle::after {\n  position: absolute;\n  bottom: -11px;\n  width: 100%;\n  content: '';\n}\n.x6-widget-handle-pie {\n  position: absolute;\n  top: -webkit-calc(0%);\n  top: calc(50% - 50px);\n  right: -50px;\n  z-index: 1;\n  display: none;\n  width: 100px;\n  height: 100px;\n  margin: -2px -2px 0 0;\n  border-radius: 50%;\n  cursor: default;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie .x6-widget-handle {\n  width: 1px;\n  height: auto;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie-slice-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible !important;\n}\n.x6-widget-handle-pie-slice-img,\n.x6-widget-handle-pie-slice-txt {\n  display: none;\n  pointer-events: none;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='e'] {\n  top: calc(50% - 50px);\n  right: -50px;\n  left: auto;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='w'] {\n  top: calc(50% - 50px);\n  right: auto;\n  left: -52px;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='n'] {\n  top: -50px;\n  right: auto;\n  bottom: auto;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie[data-pie-toggle-position='s'] {\n  top: auto;\n  right: auto;\n  bottom: -52px;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie-opened {\n  display: block;\n  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;\n  animation-timing-function: step-end, ease;\n  animation-delay: 0s, 0.1s;\n}\n.x6-widget-handle-pie-toggle {\n  position: absolute;\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  z-index: 2;\n  display: block;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 20px 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: visiblePainted;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle-pie-toggle-pos-e {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  bottom: auto;\n  left: auto;\n}\n.x6-widget-handle-pie-toggle-pos-w {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: auto;\n  bottom: auto;\n  left: -15px;\n}\n.x6-widget-handle-pie-toggle-pos-n {\n  top: -15px;\n  right: auto;\n  bottom: auto;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-pos-s {\n  top: auto;\n  right: auto;\n  bottom: -15px;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-opened {\n  transition: 0.1s background-image;\n}\n.x6-widget-handle-toolbar {\n  position: static;\n  display: inline-block;\n  margin-top: -50px;\n  margin-left: 45px;\n  white-space: nowrap;\n  vertical-align: top;\n  background-color: #f5f5f5;\n  border-bottom: 3px solid #333;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px #222;\n}\n.x6-widget-handle-toolbar::after {\n  top: -12px;\n  left: 55px;\n  margin-top: 0;\n  border-top: 6px solid #333;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  display: inline-block;\n  vertical-align: top;\n}\n.x6-widget-handle-toolbar .x6-widget-handle:hover::after {\n  border-bottom: 4px solid #fc6cb8;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-rotate {\n  position: absolute;\n  top: 100%;\n  right: 100%;\n  margin-top: 3px;\n  margin-right: 6px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,\n.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {\n  border-bottom: none;\n}\n.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {\n  margin-left: 4px;\n}\n.x6-widget-handle-pie {\n  box-sizing: content-box;\n  background-color: #f5f5f5;\n  border: 2px solid #404040;\n}\n.x6-widget-handle-pie-slice {\n  fill: transparent;\n  stroke: #e9e9e9;\n  stroke-width: 1;\n}\n.x6-widget-handle-pie-slice:hover {\n  fill: #fff;\n}\n.x6-widget-handle-pie-slice-img {\n  display: block;\n}\n.x6-widget-handle-selected .x6-widget-handle-pie-slice {\n  fill: #fff;\n}\n.x6-widget-handle-pie-toggle {\n  background-color: #f6f6f6;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  background-size: 16px 16px;\n  border: 2px solid #3b425f;\n}\n.x6-widget-handle-pie-toggle:hover {\n  background-color: #fff;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  border-color: #fd6eb6;\n}\n.x6-widget-handle-pie-toggle-opened {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-pie-toggle-opened:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-halo {\n  position: absolute;\n  pointer-events: none;\n}\n.x6-widget-halo-content {\n  position: absolute;\n  top: 100%;\n  padding: 6px;\n  font-size: 10px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-halo-handles + .x6-widget-halo-content {\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 25px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 20px;\n}\n.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {\n  right: 0;\n  left: 0;\n  margin-top: 10px;\n}\n.x6-widget-halo-content {\n  color: #fff;\n  background-color: #6a6b8a;\n}\n.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {\n  position: absolute;\n  right: 100%;\n  bottom: 100%;\n  margin-right: 6px;\n  margin-bottom: 3px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {\n  background-color: #fff;\n  border-radius: 50%;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar {\n  margin-top: -60px;\n  margin-left: -18px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {\n  top: -22px;\n  left: -9px;\n}\n.x6-widget-minimap {\n  position: relative;\n  display: table-cell;\n  box-sizing: border-box;\n  overflow: hidden;\n  text-align: center;\n  vertical-align: middle;\n  background-color: #fff;\n  user-select: none;\n}\n.x6-widget-minimap .x6-graph {\n  display: inline-block;\n  box-shadow: 0 0 4px 0 #eee;\n  cursor: pointer;\n}\n.x6-widget-minimap .x6-graph > svg {\n  pointer-events: none;\n  shape-rendering: optimizeSpeed;\n}\n.x6-widget-minimap .x6-graph .x6-node * {\n  /* stylelint-disable-next-line */\n  vector-effect: initial;\n}\n.x6-widget-minimap-viewport {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -2px 0 0 -2px;\n  border: 2px solid #31d0c6;\n  cursor: move;\n}\n.x6-widget-minimap-viewport-zoom {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 12px;\n  height: 12px;\n  margin: 0 -6px -6px 0;\n  background-color: #fff;\n  border: 2px solid #31d0c6;\n  border-radius: 50%;\n  cursor: nwse-resize;\n}\n.x6-graph-scroller {\n  position: relative;\n  box-sizing: border-box;\n  overflow: scroll;\n  outline: none;\n}\n.x6-graph-scroller-content {\n  position: relative;\n}\n.x6-graph-scroller-background {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-scroller .x6-graph {\n  position: absolute;\n  display: inline-block;\n  margin: 0;\n  box-shadow: none;\n}\n.x6-graph-scroller .x6-graph > svg {\n  display: block;\n}\n.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {\n  box-shadow: 0 0 4px 0 #eee;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-graph-pagebreak {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-pagebreak-vertical {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 1px;\n  border-left: 1px dashed #bdbdbd;\n}\n.x6-graph-pagebreak-horizontal {\n  position: absolute;\n  right: 0;\n  left: 0;\n  box-sizing: border-box;\n  height: 1px;\n  border-top: 1px dashed #bdbdbd;\n}\n.x6-widget-selection {\n  position: absolute;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n.x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  position: absolute;\n  opacity: 1;\n  pointer-events: none;\n}\n.x6-widget-snapline-horizontal {\n  border-bottom: 1px solid #2ecc71;\n}\n.x6-widget-snapline-vertical {\n  border-right: 1px solid #2ecc71;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  -webkit-appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n.x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n.x6-widget-knob {\n  position: absolute;\n  box-sizing: border-box;\n  width: 16px;\n  height: 16px;\n  margin-top: -8px;\n  margin-left: -8px;\n  cursor: pointer;\n  user-select: none;\n}\n.x6-widget-knob::before,\n.x6-widget-knob::after {\n  position: absolute;\n  transform: rotate(45deg);\n  content: '';\n}\n.x6-widget-knob::before {\n  top: 4px;\n  left: 4px;\n  box-sizing: border-box;\n  width: 8px;\n  height: 8px;\n  background-color: #fff;\n}\n.x6-widget-knob::after {\n  top: 5px;\n  left: 5px;\n  box-sizing: border-box;\n  width: 6px;\n  height: 6px;\n  background-color: #fca000;\n}\n.x6-graph-print {\n  position: relative;\n}\n.x6-graph-print .x6-graph-print-ready {\n  display: none;\n}\n.x6-graph-print .x6-graph-print-preview {\n  overflow: hidden !important;\n  background: #fff !important;\n}\n@media print {\n  html,\n  html > body.x6-graph-printing {\n    position: relative !important;\n    width: 100% !important;\n    height: 100% !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n  html > body.x6-graph-printing > * {\n    display: none !important;\n  }\n  html > body.x6-graph-printing > .x6-graph-print {\n    display: block !important;\n  }\n  .x6-graph-print {\n    top: 0 !important;\n    left: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    page-break-after: always;\n    background: #fff !important;\n  }\n  .x6-graph-print .x6-graph-print-ready {\n    display: none;\n  }\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n",fm=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},hm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){_d.autoInsertCSS&&t.ensure()}},{key:"dispose",value:function(){t.clean()}}]),t}(sm);fm([hm.dispose()],hm.prototype,"dispose",null),function(e){var t,n=0;e.ensure=function(){if(!((n+=1)>1)&&!A.isApplyingHMR()){(t=document.createElement("style")).setAttribute("type","text/css"),t.textContent=lm;var e=document.querySelector("head");e&&e.insertBefore(t,e.firstChild)}},e.clean=function(){(n-=1)>0||(t&&t.parentNode&&t.parentNode.removeChild(t),t=null)}}(hm||(hm={}));var dm,pm,gm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},vm=function(){function e(){Object(Es.a)(this,e)}return Object(Oc.a)(e,[{key:"initHandles",value:function(){var e,t=this;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(e){return t.addHandle(e)}),"pie"===this.handleOptions.type){if(this.pie.toggles){var n=dm.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(e){var r=t.$("<div/>");t.applyAttrs(r,e.attrs),r.addClass(n).addClass("".concat(n,"-pos-").concat(e.position||"e")).attr("data-name",e.name).appendTo(t.container),t.$pieToggles[e.name]=r})}this.setPieIcons()}if(this.$handleContainer){var r=this.handleOptions.type||"surround";this.$handleContainer.addClass(dm.wrap).addClass(dm.animate).addClass("".concat(dm.handle,"-").concat(r))}this.delegateEvents((e={},Object(T.a)(e,"mousedown .".concat(dm.handle),"onHandleMouseDown"),Object(T.a)(e,"touchstart .".concat(dm.handle),"onHandleMouseDown"),Object(T.a)(e,"mousedown .".concat(dm.pieToggle),"onPieToggleMouseDown"),Object(T.a)(e,"touchstart .".concat(dm.pieToggle),"onPieToggleMouseDown"),e))}},{key:"onHandleMouseDown",value:function(e){var t=this.$(e.currentTarget).closest(".".concat(dm.handle)).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),"mousedown"===e.type&&2===e.button?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}},{key:"onHandleMouseMove",value:function(e){var t=this.getEventData(e).action;t&&this.triggerHandleAction(t,"mousemove",e)}},{key:"onHandleMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.triggerHandleAction(t,"mouseup",e),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(e,t,n,r){n.preventDefault(),n.stopPropagation();var i=this.normalizeEvent(n),o=this.getEventData(i),a=this.graph.snapToGrid(i.clientX,i.clientY),s=this.graph.snapToGrid(o.clientX,o.clientY),u=a.x-s.x,c=a.y-s.y;this.trigger("action:".concat(e,":").concat(t),Object.assign({e:i,dx:u,dy:c,x:a.x,y:a.y,offsetX:n.clientX-o.startX,offsetY:n.clientY-o.startY},r)),o.clientX=n.clientX,o.clientY=n.clientY}},{key:"onPieToggleMouseDown",value:function(e){e.stopPropagation();var t=this.$(e.target).closest(".".concat(dm.pieToggle)).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}},{key:"setPieIcons",value:function(){var e=this;"pie"===this.handleOptions.type&&this.$handleContainer.find(".".concat(dm.handle)).each(function(t,n){var r=e.$(n),i=r.attr("data-action"),o=dm.pieSlice,a=e.getHandle(i);if(!a||!a.icon){var s=window.getComputedStyle(n,":before").getPropertyValue("content");if(s&&"none"!==s){var u=r.find(".".concat(o,"-txt"));u.length&&al.create(u[0]).text(s.replace(/['"]/g,""))}var c=r.css("background-image");if(c){var l=c.match(/url\(['"]?([^'"]+)['"]?\)/);if(l){var f=l[1],h=r.find(".".concat(o,"-img"));h.length>0&&al.create(h[0]).attr("xlink:href",f)}}}})}},{key:"getHandleIdx",value:function(e){return this.handles.findIndex(function(t){return t.name===e})}},{key:"hasHandle",value:function(e){return this.getHandleIdx(e)>=0}},{key:"getHandle",value:function(e){return this.handles.find(function(t){return t.name===e})}},{key:"renderHandle",value:function(e){var t=this.$("<div/>").addClass("".concat(dm.handle," ").concat(dm.handle,"-").concat(e.name)).attr("data-action",e.name).prop("draggable",!1);if("pie"===this.handleOptions.type){var n=this.getHandleIdx(e.name),r=this.pie,i=r.outerRadius,o=r.innerRadius,a=(i+o)/2,s=new Ic(i,i),u=kc.toRad(r.sliceAngle),l=n*u+kc.toRad(r.startAngle),f=l+u,h=c.createSlicePathData(o,i,l,f),d=al.create("svg").addClass("".concat(dm.pieSlice,"-svg")),p=al.create("path").addClass(dm.pieSlice).attr("d",h).translate(i,i),g=Ic.fromPolar(a,-l-u/2,s).toJSON(),v=r.iconSize,y=al.create("image").attr(g).addClass("".concat(dm.pieSlice,"-img"));g.y=g.y+v-2;var m=al.create("text",{"font-size":v}).attr(g).addClass("".concat(dm.pieSlice,"-txt"));y.attr({width:v,height:v}),y.translate(-v/2,-v/2),m.translate(-v/2,-v/2),d.append([p,y,m]),t.append(d.node)}else t.addClass("".concat(dm.handle,"-pos-").concat(e.position)),e.content&&("string"===typeof e.content?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}},{key:"addHandle",value:function(e){var t=this;if(!this.hasHandle(e.name)){this.handles.push(e);var n=e.events;n&&Object.keys(n).forEach(function(r){var i=n[r],o="action:".concat(e.name,":").concat(r);"string"===typeof i?t.on(o,t[i],t):t.on(o,i)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}},{key:"addHandles",value:function(e){var t=this;return e.forEach(function(e){return t.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(e){var t=this,n=this.getHandleIdx(e),r=this.handles[n];return r&&(r.events&&Object.keys(r.events).forEach(function(n){t.off("action:".concat(e,":").concat(n))}),this.getHandleElem(e).remove(),this.handles.splice(n,1)),this}},{key:"changeHandle",value:function(e,t){var n=this.getHandle(e);return n&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},n),t))),this}},{key:"toggleHandle",value:function(e,t){var n=this.getHandle(e);if(n){var r=this.getHandleElem(e),i="".concat(dm.handle,"-selected");void 0===t&&(t=!r.hasClass(i)),r.toggleClass(i,t);var o=t?n.iconSelected:n.icon;o&&this.updateHandleIcon(r,o)}return this}},{key:"selectHandle",value:function(e){return this.toggleHandle(e,!0)}},{key:"deselectHandle",value:function(e){return this.toggleHandle(e,!1)}},{key:"deselectAllHandles",value:function(){var e=this;return this.handles.forEach(function(t){return e.deselectHandle(t.name)}),this}},{key:"getHandleElem",value:function(e){return this.$handleContainer.find(".".concat(dm.handle,"-").concat(e))}},{key:"updateHandleIcon",value:function(e,t){if("pie"===this.handleOptions.type){var n=e.find(".".concat(dm.pieSliceImg));this.$(n[0]).attr("xlink:href",t||"")}else e.css("background-image",t?"url(".concat(t,")"):"")}},{key:"isRendered",value:function(){return null!=this.$handleContainer}},{key:"isOpen",value:function(e){return!!this.isRendered()&&(e?this.$pieToggles[e].hasClass(dm.pieToggleOpened):this.$handleContainer.hasClass("".concat(dm.pieOpended)))}},{key:"toggleState",value:function(e){var t=this;if(this.isRendered()){var n=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(e){t.$pieToggles[e].removeClass(dm.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:e}),n.removeClass(dm.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){var r=this.pie.toggles,i=r&&r.find(function(t){return t.name===e});i&&n.attr({"data-pie-toggle-name":i.name,"data-pie-toggle-position":i.position}),this.$pieToggles[e].addClass(dm.pieToggleOpened)}n.addClass(dm.pieOpended)}}}},{key:"applyAttrs",value:function(e,t){if(t){var n=Fp.$(e);Object.keys(t).forEach(function(e){var r=n.find(e).addBack().filter(e),i=t[e],o=i.class,a=gm(i,["class"]);o&&r.addClass(o),r.attr(a)})}}},{key:"handleClassName",get:function(){return dm.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},e.defaultPieOptions),this.handleOptions.pie)}}]),e}();(vm||(vm={})).defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]},(pm=dm||(dm={})).handle=Fp.prototype.prefixClassName("widget-handle"),pm.wrap="".concat(pm.handle,"-wrap"),pm.animate="".concat(pm.handle,"-animate"),pm.pieOpended="".concat(pm.handle,"-pie-opened"),pm.pieToggle="".concat(pm.handle,"-pie-toggle"),pm.pieToggleOpened="".concat(pm.handle,"-pie-toggle-opened"),pm.pieSlice="".concat(pm.handle,"-pie-slice"),pm.pieSliceImg="".concat(pm.handle,"-pie-slice-img");var ym=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},mm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},bm=function(e){function t(e){var n;Object(Es.a)(this,t),n=Object(Sc.a)(this,Object(Ac.a)(t).call(this));var r=e,i=r.view,o=r.cell,a=r.node,s=r.edge,u=r.graph,c=mm(r,["view","cell","node","edge","graph"]);i?(n.view=i,n.cell=i.cell,n.graph=i.graph,n.model=n.graph.model):(o||s||a)&&u&&(n.cell=a||s||o,n.view=u.renderer.findViewByCell(n.cell),n.graph=u,n.model=n.graph.model);var l=n.constructor;return!1!==e.clearAll&&l.removeInstances(n.graph),l.register(Object(xp.a)(n)),n.init(c),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){!1!==this.options.clearOnBlankMouseDown&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){!1!==this.options.clearOnBlankMouseDown&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){return this.stopListening(),this.constructor.unregister(this),Object(xf.a)(Object(Ac.a)(t.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){null==t&&(t=e.graph);var n=this.ensureCache(),r=n[t.view.cid];null==r&&(r=n[t.view.cid]={}),r[e.cid]=e}},{key:"unregister",value:function(e,t){null==t&&(t=e.graph);var n=this.ensureCache();n[t.view.cid]&&delete n[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache()[e.view.cid];t&&Object.keys(t).forEach(function(e){var n=t[e];n&&n.remove()})}},{key:"getInstances",value:function(e){return this.ensureCache()[e.view.cid]||{}}}]),t}(Fp);bm.instanceCache=new WeakMap,ym([Fp.dispose()],bm.prototype,"dispose",null);var wm,xm,Cm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(e){this.options=Object.assign({},e),this.render(),this.startListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(xf.a)(Object(Ac.a)(t.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(xf.a)(Object(Ac.a)(t.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){return this.container=document.createElement("div"),c.addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&c.addClass(this.container,this.options.className),this.view.addClass(wm.KNOB),this.graph.container.appendChild(this.container),this.update(),this}},{key:"remove",value:function(){return this.view.removeClass(wm.KNOB),Object(xf.a)(Object(Ac.a)(t.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.metadata){var e=this.metadata,t=e.update,n=e.position,r={knob:this,cell:this.cell,node:this.node};if(n){var i=n.call(this.graph,Object.assign({},r));if(i){var o=this.graph.matrix(),a=this.node.getBBox(),s=kc.normalize(this.node.getAngle()),u=Ic.create(i);0!==s&&u.rotate(-s,{x:a.width/2,y:a.height/2}),u.translate(a).scale(o.a,o.d).translate(o.e,o.f),this.container.style.left="".concat(u.x,"px"),this.container.style.top="".concat(u.y,"px")}}t&&t.call(this.graph,Object.assign({},r))}}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display=""}},{key:"onTransform",value:function(){this.hide()}},{key:"onTransformed",value:function(){this.show()}},{key:"onKnobMouseDown",value:function(e){var t=e.knob;this.cid!==t.cid&&this.hide()}},{key:"onKnobMouseUp",value:function(){this.show()}},{key:"notify",value:function(e,t){if(this.view){var n=this.view.normalizeEvent(t),r=this.graph.snapToGrid(n.clientX,n.clientY);this.view.notify("cell:".concat(e),{e:n,view:this.view,node:this.node,cell:this.cell,x:r.x,y:r.y,knob:this}),this.cell.isNode()?this.view.notify("node:".concat(e),{e:n,view:this.view,node:this.node,cell:this.cell,x:r.x,y:r.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:".concat(e),{e:n,view:this.view,edge:this.cell,cell:this.cell,x:r.x,y:r.y,knob:this})}}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(wm.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e:e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),n=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,n&&(n.addClass(wm.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){var r=this.graph.matrix(),i=(e.clientX-t.originX)/r.a,o=(e.clientY-t.originY)/r.d,a=this.node.getAngle(),s=new Ic(i,o).rotate(a);this.metadata.onMouseMove.call(this.graph,{e:e,data:t,deltaX:s.x,deltaY:s.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.getEventData(e),n=this.graph.findViewByCell(this.node);t.knobbing&&(n&&n.removeClass(wm.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e:e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}},{key:"node",get:function(){return this.cell}},{key:"metadata",get:function(){var e=this.cell.prop("knob");return Array.isArray(e)?null!=this.options.index?e[this.options.index]:null:e}}]),t}(bm);(xm=wm||(wm={})).KNOB="has-widget-knob",xm.KNOBBING="node-knobbing",xm.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"};var km,Em=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.root="widget-minimap",e.viewport="".concat(e.root,"-viewport"),e.zoom="".concat(e.viewport,"-zoom")}(km||(km={}));var Om,Sm,Am=function(e){function t(e){var n;Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=Object.assign(Object.assign({},Om.defaultOptions),e),n.updateViewport=s.debounce(n.updateViewport.bind(Object(xp.a)(n)),0),n.container=document.createElement("div"),n.$container=n.$(n.container).addClass(n.prefixClassName(km.root));var r=document.createElement("div");n.container.appendChild(r),n.$viewport=n.$("<div>").addClass(n.prefixClassName(km.viewport)),n.options.scalable&&(n.zoomHandle=n.$("<div>").addClass(n.prefixClassName(km.zoom)).appendTo(n.$viewport).get(0)),n.$container.append(n.$viewport).css({width:n.options.width,height:n.options.height,padding:n.options.padding}),n.options.container&&n.options.container.appendChild(n.container),n.sourceGraph=n.graph;var i=Object.assign(Object.assign({},n.options.graphOptions),{container:r,model:n.sourceGraph.model,frozen:!0,async:n.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return n.targetGraph=n.options.createGraph?n.options.createGraph(i):new zb(i),n.targetGraph.renderer.unfreeze(),n.updatePaper(n.sourceGraph.options.width,n.sourceGraph.options.height),n.startListening(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"startListening",value:function(){var e;this.scroller?this.$graphContainer.on("scroll".concat(this.getEventNamespace()),this.updateViewport):this.sourceGraph.on("translate",this.updateViewport,this),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Object(T.a)(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Object(T.a)(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):this.sourceGraph.off("translate",this.updateViewport,this),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}},{key:"updatePaper",value:function(e,t){var n,r;"object"===typeof e?(n=e.width,r=e.height):(n=e,r=t);var i=this.sourceGraph.options,o=this.sourceGraph.transform.getScale(),a=this.options.width-2*this.options.padding,s=this.options.height-2*this.options.padding;n/=o.sx,r/=o.sy,this.ratio=Math.min(a/n,s/r);var u=this.ratio,c=i.x*u/o.sx,l=i.y*u/o.sy;return n*=u,r*=u,this.targetGraph.resizeGraph(n,r),this.targetGraph.translate(c,l),this.targetGraph.scale(u,u),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.ratio,t=this.sourceGraph.transform.getScale(),n=null;if(this.scroller)n=this.scroller.clientToLocalPoint(0,0);else{var r=this.sourceGraph.matrix();n=new Ic(-r.e/r.a,-r.f/r.d)}var i=this.$(this.targetGraph.container).position(),o=this.targetGraph.translate();o.ty=o.ty||0,this.geometry={top:i.top+n.y*e+o.ty,left:i.left+n.x*e+o.tx,width:this.$graphContainer.innerWidth()*e/t.sx,height:this.$graphContainer.innerHeight()*e/t.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),n=t.target===this.zoomHandle?"zooming":"panning",r=this.sourceGraph.translate(),i=r.tx,o=r.ty,a={action:n,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:i,translateY:o};this.delegateDocumentEvents(Om.documentEvents,a)}},{key:"doAction",value:function(e){var t=this,n=this.normalizeEvent(e),r=n.clientX,i=n.clientY,o=n.data;switch(o.action){case"panning":var a=this.sourceGraph.transform.getScale(),s=(r-o.clientX)*a.sx,u=(i-o.clientY)*a.sy;this.scroller?(this.graphContainer.scrollLeft=o.scrollLeft+s/this.ratio,this.graphContainer.scrollTop=o.scrollTop+u/this.ratio):this.sourceGraph.translate(o.translateX-s/this.ratio,o.translateY-u/this.ratio);break;case"zooming":var c=o.scale,l=o.geometry,f=1+(o.clientX-r)/l.width/c.sx;o.frameId&&cancelAnimationFrame(o.frameId),o.frameId=requestAnimationFrame(function(){t.sourceGraph.zoom(f*o.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})})}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents()}},{key:"scrollTo",value:function(e){var t,n,r=this.normalizeEvent(e),i=this.targetGraph.translate();if(i.ty=i.ty||0,null==r.offsetX){var o=this.$(this.targetGraph.container).offset();t=r.pageX-o.left,n=r.pageY-o.top}else t=r.offsetX,n=r.offsetY;var a=(t-i.tx)/this.ratio,s=(n-i.ty)/this.ratio;this.sourceGraph.centerPoint(a,s)}},{key:"dispose",value:function(){this.remove()}},{key:"graph",get:function(){return this.options.graph}},{key:"scroller",get:function(){return this.graph.scroller.widget}},{key:"graphContainer",get:function(){return this.scroller?this.scroller.container:this.graph.container}},{key:"$graphContainer",get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}}]),t}(Fp);Em([Fp.dispose()],Am.prototype,"dispose",null),(Sm=Om||(Om={})).defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(e){return new zb(e)}},Sm.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"};var Tm=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Mm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},_m=function(e){function t(e){var n;Object(Es.a)(this,t),n=Object(Sc.a)(this,Object(Ac.a)(t).call(this));var r=e.graph,i=Mm(e,["graph"]);return n.graph=r,n.options=Object.assign({tolerance:10},i),n.render(),n.parseFilter(),n.disabled||n.startListening(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$horizontal=this.$(document.createElement("div")).addClass(this.horizontalClassName),this.$vertical=this.$(document.createElement("div")).addClass(this.verticalClassName),this.$container.hide().addClass(this.containerClassName).append([this.$horizontal,this.$vertical]),this.options.className&&this.$container.addClass(this.options.className)}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(t){"string"===typeof t?e.filterShapes[t]=!0:e.filterCells[t.id]=!0}):"function"===typeof t&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,n=e.data;"resize"===t&&this.snapOnResizing(n.cell,n)}},{key:"captureCursorOffset",value:function(e){var t=e.view,n=e.x,r=e.y,i=t.getDelegatedView();if(i&&this.isNodeMovable(i)){var o=t.cell.getPosition();this.offset={x:n-o.x,y:r-o.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var n=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var i=this.graph.renderer.findViewByCell(e);if(i&&i.cell.isNode()){var o,a,s,u,c,l,f=e.getBBox(),h=f.bbox(e.getAngle()),d=h.getTopLeft(),p=h.getBottomRight(),g=kc.normalize(e.getAngle()),v=this.options.tolerance||0,y={vertical:0,horizontal:0},m=t.direction,b=t.trueDirection,w=t.relativeDirection;-1!==b.indexOf("right")?y.vertical=p.x:y.vertical=d.x,-1!==b.indexOf("bottom")?y.horizontal=p.y:y.horizontal=d.y,this.model.getNodes().some(function(t){if(n.isIgnored(e,t))return!1;var i=t.getBBox().bbox(t.getAngle()),f=i.getTopLeft(),d=i.getBottomRight(),g={vertical:[f.x,d.x],horizontal:[f.y,d.y]},m={};return Object.keys(g).forEach(function(e){var t=e,n=g[t].map(function(e){return{position:e,distance:Math.abs(e-y[t])}}).filter(function(e){return e.distance<=v});m[t]=r.sortBy(n,function(e){return e.distance})}),null==o&&m.vertical.length>0&&(o=m.vertical[0].position,a=Math.min(h.y,i.y),s=Math.max(p.y,d.y)-a),null==u&&m.horizontal.length>0&&(u=m.horizontal[0].position,c=Math.min(h.x,i.x),l=Math.max(p.x,d.x)-c),null!=o&&null!=u}),this.hide();var x=0,C=0;null==u&&null==o||(null!=o&&(x=-1!==b.indexOf("right")?o-p.x:d.x-o),null!=u&&(C=-1!==b.indexOf("bottom")?u-p.y:d.y-u));var k=0,E=0;if(g%90===0)90===g||270===g?(k=C,E=x):(k=x,E=C);else{var O=g>=0&&g<90?1:g>=90&&g<180?4:g>=180&&g<270?3:2;null!=u&&null!=o&&(x<C?(C=0,u=void 0):(x=0,o=void 0));var S=kc.toRad(g%90);x&&(k=3===O?x/Math.cos(S):x/Math.sin(S)),C&&(E=3===O?C/Math.cos(S):C/Math.sin(S));var A=1===O||3===O;switch(w){case"top":case"bottom":E=C?C/(A?Math.cos(S):Math.sin(S)):x/(A?Math.sin(S):Math.cos(S));break;case"left":case"right":k=x?x/(A?Math.cos(S):Math.sin(S)):C/(A?Math.sin(S):Math.cos(S))}}switch(w){case"top":case"bottom":k=0;break;case"left":case"right":E=0}var T=this.graph.getGridSize(),M=Math.max(f.width+k,T),_=Math.max(f.height+E,T);t.minWidth&&t.minWidth>T&&(M=Math.max(M,t.minWidth)),t.minHeight&&t.minHeight>T&&(_=Math.max(_,t.minHeight)),t.maxWidth&&(M=Math.min(M,t.maxWidth)),t.maxHeight&&(_=Math.min(_,t.maxHeight)),t.preserveAspectRatio&&(E<k?_=M*(f.height/f.width):M=_*(f.width/f.height)),M===f.width&&_===f.height||(e.resize(M,_,{direction:m,relativeDirection:w,trueDirection:b,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(i)}),s&&(s+=_-f.height),l&&(l+=M-f.width));var j=e.getBBox().bbox(g);o&&Math.abs(j.x-o)>1&&Math.abs(j.width+j.x-o)>1&&(o=void 0),u&&Math.abs(j.y-u)>1&&Math.abs(j.height+j.y-u)>1&&(u=void 0),this.update({verticalLeft:o,verticalTop:a,verticalHeight:s,horizontalTop:u,horizontalLeft:c,horizontalWidth:l})}}}},{key:"snapOnMoving",value:function(e){var t=this,n=e.view,r=e.e,i=e.x,o=e.y,a=n.getEventData(r).delegatedView||n;if(this.isNodeMovable(a)){var s,u,c,l,f,h,d=a.cell,p=d.getSize(),g=d.getPosition(),v=new Lc(i-this.offset.x,o-this.offset.y,p.width,p.height),y=d.getAngle(),m=v.getCenter(),b=v.bbox(y),w=b.getTopLeft(),x=b.getBottomRight(),C=this.options.tolerance||0,k=0,E=0;if(this.model.getNodes().some(function(e){if(t.isIgnored(d,e))return!1;var n=e.getBBox().bbox(e.getAngle()),r=n.getCenter(),i=n.getTopLeft(),o=n.getBottomRight();return null==s&&(Math.abs(r.x-m.x)<C?(s=r.x,k=.5):Math.abs(i.x-w.x)<C?(s=i.x,k=0):Math.abs(i.x-x.x)<C?(s=i.x,k=1):Math.abs(o.x-x.x)<C?(s=o.x,k=1):Math.abs(o.x-w.x)<C&&(s=o.x),null!=s&&(u=Math.min(b.y,n.y),c=Math.max(x.y,o.y)-u)),null==l&&(Math.abs(r.y-m.y)<C?(l=r.y,E=.5):Math.abs(i.y-w.y)<C?l=i.y:Math.abs(i.y-x.y)<C?(l=i.y,E=1):Math.abs(o.y-x.y)<C?(l=o.y,E=1):Math.abs(o.y-w.y)<C&&(l=o.y),null!=l&&(f=Math.min(b.x,n.x),h=Math.max(x.x,o.x)-f)),null!=s&&null!=l}),this.hide(),null!=l||null!=s){null!=l&&(b.y=l-E*b.height),null!=s&&(b.x=s-k*b.width);var O=b.getCenter(),S=O.x-v.width/2,A=O.y-v.height/2,T=S-g.x,M=A-g.y;0===T&&0===M||(d.translate(T,M,{snapped:!0,restrict:this.graph.hook.getRestrictArea(a)}),h&&(h+=T),c&&(c+=M)),this.update({verticalLeft:s,verticalTop:u,verticalHeight:c,horizontalTop:l,horizontalLeft:f,horizontalWidth:h})}}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&s.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){var t=this.graph.matrix(),n=t.a,r=t.d,i=t.e,o=t.f,a=this.options.sharp,s=null!=this.graph.scroller.widget;e.horizontalTop?this.$horizontal.css({top:e.horizontalTop*r+o,left:a?e.horizontalLeft*n+i:s?"-300%":0,width:a?e.horizontalWidth*n:s?"700%":"100%"}).show():this.$horizontal.hide(),e.verticalLeft?this.$vertical.css({left:e.verticalLeft*n+i,top:a?e.verticalTop*r+o:s?"-300%":0,height:a?e.verticalHeight*r:s?"700%":"100%"}).show():this.$vertical.hide(),this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.$container.show(),this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.$container.hide(),this.resetTimer();var t=this.options.clean,n="number"===typeof t?t:!1!==t?3e3:0;return n>0&&(this.timer=window.setTimeout(function(){e.unmount()},n)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}},{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return!0!==this.options.enabled||!0!==this.graph.options.snapline.enabled}}]),t}(Fp);Tm([Fp.dispose()],_m.prototype,"dispose",null);var jm,Pm=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Nm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){this.model.hasActiveBatch(t.SORT_DELAYING_BATCHES)||this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var n=e.name,r=e.data;if(!this.isFrozen()){var i=this.model;if(!this.isAsync()){var o=t.UPDATE_DELAYING_BATCHES;o.includes(n)&&!i.hasActiveBatch(o)&&this.updateViews(r)}var a=t.SORT_DELAYING_BATCHES;a.includes(n)&&!i.hasActiveBatch(a)&&this.sortViews()}}},{key:"onCellAdded",value:function(e){var t=e.cell,n=e.options,r=n.position;this.isAsync()||"number"!==typeof r?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var n=e.cell,r=e.options,i=this.findViewByCell(n);i&&this.requestViewUpdate(i,t.FLAG_REMOVE,i.priority,r)}},{key:"onCellZIndexChanged",value:function(e){var n=e.cell,r=e.options;if("approx"===this.options.sorting){var i=this.findViewByCell(n);i&&this.requestViewUpdate(i,t.FLAG_INSERT,i.priority,r)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,n=e.current,r=e.options;n||this.processEdgeOnTerminalVisibleChanged(t,!1);var i=this.findViewByCell(t);!n&&i?this.removeView(t):n&&null==i&&this.renderView(t,r),n&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){this.model.getConnectedEdges(e).forEach(function(n){var r=function(e,t){return e.getSourceCellId()!==t.id?e.getSourceCell():e.getTargetCellId()!==t.id?e.getTargetCell():null}(n,e);(null==r||r.isVisible())&&(t?n.show():n.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var n="source"===t?e.getSourceCellId():e.getTargetCellId(),r=n?this.model.getCell(n):null;return!(r&&!r.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Qp.isCellView(e))for(var n=e.cell,r=this.model.getConnectedEdges(n),i=0,o=r.length;i<o;i+=1){var a=r[i],s=this.findViewByCell(a);if(s){var u=["update"];a.getTargetCell()===n&&u.push("target"),a.getSourceCell()===n&&u.push("source"),this.scheduleViewUpdate(s,s.getFlag(u),s.priority,t)}}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!Qp.isCellView(e))return!1;var n=e.cell;if(n.isNode())return!1;var r=e;if(n.isEdge()&&0===(t&e.getFlag(["source","target"]))){var i=0,o=this.findViewByCell(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o),r.updateTerminalMagnet("source"));var a=0,s=this.findViewByCell(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(a=this.dumpView(s),r.updateTerminalMagnet("target")),0===i&&0===a)return!this.dumpView(r)}return!1}},{key:"scheduleViewUpdate",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.cid,a=this.updates,s=a.priorities[r];s||(s=a.priorities[r]={});var u=s[o]||0;(u&n)!==n&&(u||(a.count+=1),n&t.FLAG_REMOVE&&u&t.FLAG_INSERT?s[o]^=t.FLAG_INSERT:n&t.FLAG_INSERT&&u&t.FLAG_REMOVE&&(s[o]^=t.FLAG_REMOVE),s[o]|=n,this.graph.hook.onViewUpdated(e,n,i))}},{key:"requestViewUpdate",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.scheduleViewUpdate(e,n,r,i);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==i.async||this.model.hasActiveBatch(t.UPDATE_DELAYING_BATCHES))){var a=this.updateViews(i);o&&this.graph.trigger("render:done",{stats:a,options:i})}}},{key:"dumpView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return 0;var n=e.cid,r=this.updates.priorities[e.priority],i=this.registerMountedView(e)|r[n];return delete r[n],i?this.updateView(e,i,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.findViewByCell(e);return null==n?null:(this.dumpView(n,t),n)}},{key:"updateView",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)return 0;if(Qp.isCellView(e)){if(n&t.FLAG_REMOVE)return this.removeView(e.cell),0;n&t.FLAG_INSERT&&(this.insertView(e),n^=t.FLAG_INSERT)}return n?e.confirmUpdate(n,r):0}},{key:"updateViews",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,i=0,o=t.MIN_PRIORITY;do{r+=1,i+=(e=this.updateViewsBatch(n)).updatedCount,o=Math.min(e.priority,o)}while(!e.empty);return{priority:o,batchCount:r,updatedCount:i}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.updates,r=n.priorities,i=e.batchSize||t.UPDATE_BATCH_SIZE,o=!0,a=t.MIN_PRIORITY,u=0,c=0,l=0,f=0,h=e.checkView||this.options.checkView;"function"!==typeof h&&(h=null);e:for(var d=0,p=r.length;d<p;d+=1){var g=r[d];for(var v in g){if(l>=i){o=!1;break e}var y=Fp.views[v];if(y){var m=g[v];if(0===(m&t.FLAG_REMOVE)){var b=v in n.unmounted;if(h&&!s.call(h,this.graph,{view:y,unmounted:b})){b||(this.registerUnmountedView(y),y.unmount()),n.unmounted[v]|=m,delete g[v],c+=1;continue}b&&(m|=t.FLAG_INSERT,u+=1),m|=this.registerMountedView(y)}var w=y,x=this.updateView(y,m,e);if(x>0){var C=w.cell;C&&C.isEdge()&&(w.hasAction(x,"source")&&!this.isEdgeTerminalVisible(C,"source")&&(x=w.removeAction(x,"source"),x|=t.FLAG_REMOVE),w.hasAction(x,"target")&&!this.isEdgeTerminalVisible(C,"target")&&(x=w.removeAction(x,"target"),x|=t.FLAG_REMOVE))}x>0&&(g[v]=x,!this.graph.hook.onViewPostponed(w,x,e)||g[v])?(f+=1,o=!1):(a>d&&(a=d),l+=1,delete g[v])}else delete g[v]}}return{empty:o,priority:a,mountedCount:u,unmountedCount:c,updatedCount:l,postponedCount:f}}},{key:"updateViewsAsync",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{processed:0,priority:t.MIN_PRIORITY},i=this.updates,o=i.animationId;if(o){if(c.cancelAnimationFrame(o),0===r.processed){var a=n.before;"function"===typeof a&&s.call(a,this.graph,this.graph)}var u=this.updateViewsBatch(n),l=this.checkViewImpl({checkView:n.checkView,mountedBatchSize:t.MOUNT_BATCH_SIZE-u.mountedCount,unmountedBatchSize:t.MOUNT_BATCH_SIZE-u.unmountedCount}),f=r.processed,h=i.count,d=l.mountedCount,p=l.unmountedCount;u.updatedCount>0&&(f+=u.updatedCount+u.unmountedCount,r.priority=Math.min(u.priority,r.priority),u.empty&&0===d?(u.priority=r.priority,u.mountedCount+=d,u.unmountedCount+=p,this.graph.trigger("render:done",{stats:u,options:n}),r.processed=0,i.count=0):r.processed=f);var g=n.progress;if(h&&"function"===typeof g&&s.call(g,this.graph,{total:h,done:u.empty,current:f}),i.animationId!==o)return}i.animationId=c.requestAnimationFrame(function(){e.updateViewsAsync(n,r)})}},{key:"registerMountedView",value:function(e){var t=e.cid,n=this.updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var r=n.unmounted[t]||0;return delete n.unmounted[t],r}},{key:"registerUnmountedView",value:function(e){var n=e.cid,r=this.updates;if(n in r.unmounted)return 0;r.unmounted[n]|=t.FLAG_INSERT;var i=r.unmounted[n];return r.unmountedCids.push(n),delete r.mounted[n],i}},{key:"isViewMounted",value:function(e){return null!=e&&e.cid in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return Qp.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return Qp.views[e]})}},{key:"checkMountedViews",value:function(e,t){var n=0;if("function"!==typeof e)return n;for(var r=this.updates,i=r.mounted,o=r.mountedCids,a=null==t?o.length:Math.min(o.length,t),u=0;u<a;u+=1){var c=o[u];if(c in i){var l=Qp.views[c];if(null!=l)if(s.call(e,this.graph,{view:l,unmounted:!0}))o.push(c);else n+=1,this.registerUnmountedView(l)&&l.unmount()}}return o.splice(0,a),n}},{key:"checkUnmountedViews",value:function(e,t){var n=0;"function"!==typeof e&&(e=null);for(var r=this.updates,i=r.unmounted,o=r.unmountedCids,a=null==t?o.length:Math.min(o.length,t),u=0;u<a;u+=1){var c=o[u];if(c in i){var l=Qp.views[c];if(null!=l)if(!e||s.call(e,this.graph,{view:l,unmounted:!1})){n+=1;var f=this.registerMountedView(l);f&&this.scheduleViewUpdate(l,f,l.priority,{mounting:!0})}else o.push(c)}}return o.splice(0,a),n}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,n=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,n>0?Math.min(this.updates.unmountedCids.length-n,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:n}}},{key:"checkView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).key,t=this.updates,n=this.options.frozen,r=t.freezeKey;if(e&&e!==r){if(n&&r)return;t.frozen=n,t.freezeKey=e}this.options.frozen=!0;var i=t.animationId;t.animationId=null,this.isAsync()&&null!=i&&c.cancelAnimationFrame(i),this.graph.trigger("freeze",{key:e})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.key,r=this.updates,i=r.freezeKey;if((!n||!i||n===i)&&(r.freezeKey=null,!n||n!==i||!r.frozen)){var o=function(){e.options.frozen=r.frozen=!1,r.sort&&(e.sortViews(),r.sort=!1);var i=t.after;i&&s.call(i,e.graph,e.graph),e.graph.trigger("unfreeze",{key:n})};if(this.isAsync()){this.freeze();var a=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(t){var n=t.done,r=t.current,i=t.total;a&&s.call(a,e.graph,{done:n,current:r,total:i}),n&&o()}}))}else this.updateViews(t),o()}}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,r=e.length;n<r;n+=1)this.renderView(e[n],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var n=t.cid,r=this.updates,i=r.mounted,o=r.unmounted;t.remove(),delete this.views[e.id],delete i[n],delete o[n]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var n=e.views[t];n&&e.removeView(n.cell)}),this.views={}}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,i=this.views,o=0,a=i[r];if(e.isVisible()&&(!e.isEdge()||this.isEdgeTerminalVisible(e,"source")&&this.isEdgeTerminalVisible(e,"target"))){if(a)o=t.FLAG_INSERT;else{var s=this.graph.hook.createCellView(e);s&&((a=i[e.id]=s).graph=this.graph,o=this.registerUnmountedView(a)|a.getBootstrapFlag())}a&&this.requestViewUpdate(a,o,a.priority,n)}}},{key:"isExactSorting",value:function(){return"exact"===this.options.sorting}},{key:"sortViews",value:function(){this.isExactSorting()&&(this.isFrozen()?this.updates.sort=!0:this.sortViewsExact())}},{key:"sortElements",value:function(e,t){var n=e.map(function(e){var t=e.parentNode,n=t.insertBefore(document.createTextNode(""),e.nextSibling);return function(e){if(t===e)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(e,n),t.removeChild(n)}});e.sort(t).forEach(function(e,t){return n[t](e)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(e,n){var r=t.getCell(e.getAttribute("data-cell-id")||""),i=t.getCell(n.getAttribute("data-cell-id")||""),o=r.getZIndex()||0,a=i.getZIndex()||0;return o===a?0:o<a?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null==this.zPivots&&(this.zPivots={});var t=this.zPivots,n=t[e];if(n)return n;n=t[e]=document.createComment("z-index:".concat(e+1));var r=-1/0;for(var i in t){var o=+i;o<e&&o>r&&(r=o)}var a=this.view.stage;if(r!==-1/0){var s=t[r];a.insertBefore(n,s.nextSibling)}else a.insertBefore(n,a.firstChild);return n}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var n=e.zPivots[t];n&&n.parentNode&&n.parentNode.removeChild(n)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":var n=e.cell.getZIndex(),r=this.addZPivot(n);t.insertBefore(e.container,r);break;case"exact":default:t.appendChild(e.container)}}},{key:"findViewByCell",value:function(e){if(null==e)return null;var t=ay.isCell(e)?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(null==e)return null;var t="string"===typeof e?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var n=this.view.findAttr("data-cell-id",t);if(n)return this.views[n]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,n={x:e.x,y:e.y};return this.model.getCells().map(function(e){return t.findViewByCell(e)}).filter(function(e){return null!=e&&c.getBBox(e.container,{target:t.view.stage}).containsPoint(n)})}},{key:"findEdgeViewsInArea",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Lc.create(e);return this.model.getEdges().map(function(e){return t.findViewByCell(e)}).filter(function(e){if(e){var i=c.getBBox(e.container,{target:t.view.stage});return 0===i.width?i.inflate(1,0):0===i.height&&i.inflate(0,1),n.strict?r.containsRect(i):r.isIntersectWithRect(i)}return!1})}},{key:"findViewsInArea",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Lc.create(e);return this.model.getNodes().map(function(e){return t.findViewByCell(e)}).filter(function(e){if(e){var i=c.getBBox(e.container,{target:t.view.stage});return n.strict?r.containsRect(i):r.isIntersectWithRect(i)}return!1})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),t}(sm);Pm([sm.dispose()],Nm.prototype,"dispose",null),(jm=Nm||(Nm={})).FLAG_INSERT=1<<30,jm.FLAG_REMOVE=1<<29,jm.MOUNT_BATCH_SIZE=1e3,jm.UPDATE_BATCH_SIZE=1e3,jm.MIN_PRIORITY=2,jm.SORT_DELAYING_BATCHES=["add","to-front","to-back"],jm.UPDATE_DELAYING_BATCHES=["translate"];var Rm=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Dm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.size||"auto auto",n=e.position||"center",r=this.graph.transform.getScale(),i=this.graph.translate();if("object"===typeof n){var o=i.tx+r.sx*(n.x||0),a=i.ty+r.sy*(n.y||0);n="".concat(o,"px ").concat(a,"px")}"object"===typeof t&&(t=Lc.fromSize(t).scale(r.sx,r.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=n}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof HTMLImageElement){var n=this.optionsCache;if(!n||n.image===t.image){var r,o=t.opacity,a=t.size,s=t.repeat||"no-repeat",u=kd.registry.get(s);if("function"===typeof u){var c=t.quality||1;e.width*=c,e.height*=c;var l=u(e,t);if(!(l instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=l.toDataURL("image/png"),s=t.repeat&&s!==t.repeat?t.repeat:"repeat","object"===typeof a?(a.width*=l.width/e.width,a.height*=l.height/e.height):void 0===a&&(t.size={width:l.width/c,height:l.height/c})}else r=e.src,void 0===a&&(t.size={width:e.width,height:e.height});null!=n&&"object"===typeof t.size&&t.image===n.image&&t.repeat===n.repeat&&t.quality===n.quality&&(n.size=i.clone(t.size));var f=this.elem.style;f.backgroundImage="url(".concat(r,")"),f.backgroundRepeat=s,f.opacity=null==o||o>=1?"":"".concat(o),this.updateBackgroundImage(t)}}else this.elem.style.backgroundImage=""}},{key:"updateBackgroundColor",value:function(e){this.elem.style.backgroundColor=e||""}},{key:"updateBackgroundOptions",value:function(e){this.graph.options.background=e}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(e){var t=this,n=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(n.color),n.image){this.optionsCache=i.clone(n);var r=document.createElement("img");r.onload=function(){return t.drawBackgroundImage(r,e)},r.setAttribute("crossorigin","anonymous"),r.src=n.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}},{key:"elem",get:function(){return this.view.background}}]),t}(sm);Rm([sm.dispose()],Dm.prototype,"dispose",null);var Im,Lm=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Fm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Bm=function(e){function t(e){var n;Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).padding={left:0,top:0,right:0,bottom:0},n.options=Im.getOptions(e);var r=n.graph.transform.getScale();n.sx=r.sx,n.sy=r.sy;var i=n.options.width||n.graph.options.width,o=n.options.height||n.graph.options.height;n.container=document.createElement("div"),n.$container=n.$(n.container).addClass(n.prefixClassName(Im.containerClass)).css({width:i,height:o}),n.options.pageVisible&&n.$container.addClass(n.prefixClassName(Im.pagedClass)),n.options.className&&n.$container.addClass(n.options.className);var a=n.graph.container;a.parentNode&&n.$container.insertBefore(a);var s=a.getAttribute("style");if(s){var u={};s.split(";").forEach(function(e){var t=e.trim();if(t){var n=t.split(":");n.length&&(u[n[0].trim()]=n[1]?n[1].trim():"")}}),Object.keys(u).forEach(function(e){"width"!==e&&"height"!==e&&(a.style[e]="",n.container.style[e]=u[e])})}return n.content=document.createElement("div"),n.$content=n.$(n.content).addClass(n.prefixClassName(Im.contentClass)).css({width:n.graph.options.width,height:n.graph.options.height}),n.background=document.createElement("div"),n.$background=n.$(n.background).addClass(n.prefixClassName(Im.backgroundClass)),n.$content.append(n.background),n.options.pageVisible||n.$content.append(n.graph.view.grid),n.$content.append(a),n.$content.appendTo(n.container),n.startListening(),n.options.pageVisible||n.graph.grid.update(),n.backgroundManager=new t.Background(Object(xp.a)(n)),n.options.autoResize||n.update(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"enableAutoResize",value:function(){this.options.autoResize=!0}},{key:"disableAutoResize",value:function(){this.options.autoResize=!1}},{key:"onUpdate",value:function(){!this.graph.isAsync()&&this.options.autoResize&&this.update()}},{key:"onBatchStop",value:function(e){!this.graph.isAsync()&&this.options.autoResize&&Nm.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,n=e||cm.events;this.delegatedHandlers=Object.keys(n).reduce(function(e,r){var i=n[r];if(-1===r.indexOf(" "))if("function"===typeof i)e[r]=i;else{var o=t.graph.view[i];"function"===typeof o&&(o=o.bind(t.graph.view),e[r]=o)}return e},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(e){t.delegateEvent(e,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,n=e.target;if(this.options.pageVisible)t=this.options.background?this.background===n:this.content===n;else{var r=this.graph.view;t=r.background===n||r.grid===n}if(t){var i=this.delegatedHandlers[e.type];"function"===typeof i&&i.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;this.options.autoResize&&t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,n=e.sy,r=e.ox,i=e.oy;this.updateScale(t,n),(r||i)&&(this.centerPoint(r,i),this.updatePageBreak()),"function"===typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"storeClientSize",value:function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"restoreClientSize",value:function(){this.cachedClientSize=null}},{key:"beforeManipulation",value:function(){(A.IS_IE||A.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(A.IS_IE||A.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageSize",value:function(e,t){null!=e&&(this.options.pageWidth=e),null!=t&&(this.options.pageHeight=t),this.updatePageBreak()}},{key:"updatePageBreak",value:function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var e=this.graph.options.width,t=this.graph.options.height,n=this.options.pageWidth*this.sx,r=this.options.pageHeight*this.sy;if(e>n||t>r){for(var i=!1,o=document.createElement("div"),a=1,s=Math.floor(e/n);a<s;a+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:a*n}).appendTo(o),i=!0;for(var u=1,l=Math.floor(t/r);u<l;u+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:u*r}).appendTo(o),i=!0;i&&(c.addClass(o,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(o),this.pageBreak=o)}}}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.autoResizeOptions||this.options.fitTocontentOptions;"function"===typeof t&&(t=s.call(t,this,this));var n=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(n))}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,n=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=n),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=n),"object"===typeof e.padding?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*n,bottom:(e.padding.bottom||0)*n}:"number"===typeof e.padding&&(e.padding*=t),this.options.autoResize||(e.contentArea=Lc.create()),e}},{key:"updateScale",value:function(e,t){var n=this.graph.options,r=e/this.sx,i=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(n.x*r,n.y*i),this.graph.resizeGraph(n.width*r,n.height*i)}},{key:"scrollbarPosition",value:function(e,t,n){if(null==e&&null==t)return{left:this.container.scrollLeft,top:this.container.scrollTop};var r={};return"number"===typeof e&&(r.scrollLeft=e),"number"===typeof t&&(r.scrollTop=t),n&&n.animation?this.$container.animate(r,n.animation):this.$container.prop(r),this}},{key:"scrollToPoint",value:function(e,t,n){var r=this.getClientSize(),i=this.graph.matrix(),o={};return"number"===typeof e&&(o.scrollLeft=e-r.width/2+i.e+(this.padding.left||0)),"number"===typeof t&&(o.scrollTop=t-r.height/2+i.f+(this.padding.top||0)),n&&n.animation?this.$container.animate(o,n.animation):this.$container.prop(o),this}},{key:"scrollToContent",value:function(e){var t=this.sx,n=this.sy,r=this.graph.getContentArea().getCenter();return this.scrollToPoint(r.x*t,r.y*n,e)}},{key:"scrollToCell",value:function(e,t){var n=this.sx,r=this.sy,i=e.getBBox().getCenter();return this.scrollToPoint(i.x*n,i.y*r,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,n){var r,i=this.graph.matrix(),o=i.a,a=i.d,s=-i.e,u=-i.f,c=s+this.graph.options.width,l=u+this.graph.options.height;if(this.storeClientSize(),"number"===typeof e||"number"===typeof t){r=n;var f=this.getVisibleArea().getCenter();"number"===typeof e?e*=o:e=f.x,"number"===typeof t?t*=a:t=f.y}else r=e,e=(s+c)/2,t=(u+l)/2;if(r&&r.padding)return this.positionPoint({x:e,y:t},"50%","50%",r);var h=this.getPadding(),d=this.getClientSize(),p=d.width/2,g=d.height/2,v=p-h.left-e+s,y=p-h.right+e-c,m=g-h.top-t+u,b=g-h.bottom+t-l;this.addPadding(Math.max(v,0),Math.max(y,0),Math.max(m,0),Math.max(b,0));var w=this.scrollToPoint(e,t,r||void 0);return this.restoreClientSize(),w}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var n=this.graph.getContentArea(t);return this.positionRect(n,e,t)}},{key:"positionCell",value:function(e,t,n){var r=e.getBBox();return this.positionRect(r,t,n)}},{key:"positionRect",value:function(e,t,n){var r=Lc.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%",n);case"top":return this.positionPoint(r.getTopCenter(),"50%",0,n);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0,n);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%",n);case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%",n);case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%",n);case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%",n);case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%",n);case"top-left":return this.positionPoint(r.getTopLeft(),0,0,n);default:return this}}},{key:"positionPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.padding,o=Fm(r,["padding"]),s=a.normalizeSides(i),u=Lc.fromSize(this.getClientSize()),c=u.clone().moveAndExpand({x:s.left,y:s.top,width:-s.right-s.left,height:-s.top-s.bottom});(t=a.normalizePercentage(t,Math.max(0,c.width)))<0&&(t=c.width+t),(n=a.normalizePercentage(n,Math.max(0,c.height)))<0&&(n=c.height+n);var l=c.getTopLeft().translate(t,n),f=u.getCenter().diff(l),h=this.zoom(),d=f.scale(1/h,1/h),p=Ic.create(e).translate(d);return this.centerPoint(p.x,p.y,o)}},{key:"zoom",value:function(e,t){if(null==e)return this.sx;var n,r;t=t||{};var i=this.getClientSize(),o=this.clientToLocalPoint(i.width/2,i.height/2),a=e,s=e;if(t.absolute||(a+=this.sx,s+=this.sy),t.scaleGrid&&(a=Math.round(a/t.scaleGrid)*t.scaleGrid,s=Math.round(s/t.scaleGrid)*t.scaleGrid),t.maxScale&&(a=Math.min(t.maxScale,a),s=Math.min(t.maxScale,s)),t.minScale&&(a=Math.max(t.minScale,a),s=Math.max(t.minScale,s)),a=this.graph.transform.clampScale(a),s=this.graph.transform.clampScale(s),t.center){var u=a/this.sx,c=s/this.sy;n=t.center.x-(t.center.x-o.x)/u,r=t.center.y-(t.center.y-o.y)/c}else n=o.x,r=o.y;return this.beforeManipulation(),this.graph.transform.scale(a,s),this.centerPoint(n,r),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Lc.create(e),r=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:r.options.x,y:r.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),r.transform.scaleContentToFitImpl(t,!1);var i=n.getCenter();return this.centerPoint(i.x,i.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,n){var r,i,o=this;"object"===typeof e?(n=t,t=e.y,e=e.x):t=t,null==n&&(n={});var a=this.sx,u=Math.max(n.scale||a,1e-6),c=this.getClientSize(),l=new Ic(e,t),f=this.clientToLocalPoint(c.width/2,c.height/2);if(a===u){var h=f.diff(l).scale(a,a).round();r="translate(".concat(h.x,"px,").concat(h.y,"px)")}else{var d=u/(a-u)*l.distance(f),p=f.clone().move(l,d),g=this.localToBackgroundPoint(p).round();r="scale(".concat(u/a,")"),i="".concat(g.x,"px ").concat(g.y,"px")}var v=n.onTransitionEnd;return this.$container.addClass(Im.transitionClassName),this.$content.off(Im.transitionEventName).on(Im.transitionEventName,function(n){o.syncTransition(u,{x:e,y:t}),"function"===typeof v&&s.call(v,o,n.originalEvent)}).css({transform:r,transformOrigin:i,transition:"transform",transitionDuration:n.duration||"1s",transitionDelay:n.delay,transitionTimingFunction:n.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass(Im.transitionClassName),this.$content.off(Im.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Lc.create(e),r=t.maxScale||1/0,i=t.minScale||Number.MIN_VALUE,o=t.scaleGrid||null,a=t.visibility||1,s=t.center?Ic.create(t.center):n.getCenter(),u=this.getClientSize(),c=u.width*a,l=u.height*a,f=new Lc(s.x-c/2,s.y-l/2,c,l).getMaxUniformScaleToFit(n,s);return f=Math.min(f,r),o&&(f=Math.floor(f/o)*o),f=Math.max(i,f),this.transitionToPoint(s,Object.assign({scale:f},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),n=t.clientX-this.clientX,r=t.clientY-this.clientY;this.container.scrollTop-=r,this.container.scrollLeft-=n,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e:e})}},{key:"clientToLocalPoint",value:function(e,t){var n="object"===typeof e?e.x:e,r="object"===typeof e?e.y:t,i=this.graph.matrix();return n+=this.container.scrollLeft-this.padding.left-i.e,r+=this.container.scrollTop-this.padding.top-i.f,new Ic(n/i.a,r/i.d)}},{key:"localToBackgroundPoint",value:function(e,t){var n="object"===typeof e?Ic.create(e):new Ic(e,t),r=this.graph.matrix(),i=this.padding;return c.transformPoint(n,r).translate(i.left,i.top)}},{key:"resize",value:function(e,t){var n=null!=e?e:this.container.clientWidth,r=null!=t?t:this.container.clientHeight;"number"===typeof n&&(n=Math.round(n)),"number"===typeof r&&(r=Math.round(r)),this.options.width=n,this.options.height=r,this.$container.css({width:n,height:r}),this.update()}},{key:"getClientSize",value:function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var n=this.container,r=n.getBoundingClientRect(),i=0,o=0;return e<=r.left+10&&(i=-10),t<=r.top+10&&(o=-10),e>=r.right-10&&(i=10),t>=r.bottom-10&&(o=10),0!==i&&(n.scrollLeft+=i),0!==o&&(n.scrollTop+=o),{scrollerX:i,scrollerY:o}}},{key:"addPadding",value:function(e,t,n,r){var i=this.getPadding();this.padding={left:Math.round(i.left+(e||0)),top:Math.round(i.top+(n||0)),bottom:Math.round(i.bottom+(r||0)),right:Math.round(i.right+(t||0))},i=this.padding,this.$content.css({width:i.left+this.graph.options.width+i.right,height:i.top+this.graph.options.height+i.bottom});var o=this.graph.container;return o.style.left="".concat(this.padding.left,"px"),o.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return"function"===typeof e?a.normalizeSides(s.call(e,this,this)):a.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),n={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},r=c.transformRectangle(n,e.inverse());return r.x-=(this.padding.left||0)/this.sx,r.y-=(this.padding.top||0)/this.sy,r}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getBBox(),r=this.getVisibleArea();return t.strict?r.containsRect(n):r.isIntersectWithRect(n)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}},{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}}]),t}(Fp);function zm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n){var i=n.graph,o=i.view.normalizeEvent(t),a=i.snapToGrid(o.clientX,o.clientY);n.notify(e,Object.assign({e:o,view:n,node:n.cell,cell:n.cell,x:a.x,y:a.y},r))}}Lm([Fp.dispose()],Bm.prototype,"dispose",null),function(e){var t=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this,e.graph))).scroller=e,e.options.background&&n.draw(e.options.background),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"updateBackgroundOptions",value:function(e){this.scroller.options.background=e}},{key:"elem",get:function(){return this.scroller.background}}]),t}(Dm);e.Background=t}(Bm||(Bm={})),function(e){e.containerClass="graph-scroller",e.panningClass="".concat(e.containerClass,"-panning"),e.pannableClass="".concat(e.containerClass,"-pannable"),e.pagedClass="".concat(e.containerClass,"-paged"),e.contentClass="".concat(e.containerClass,"-content"),e.backgroundClass="".concat(e.containerClass,"-background"),e.transitionClassName="transition-in-progress",e.transitionEventName="transitionend.graph-scroller-transition",e.defaultOptions={padding:function(){var e=this.getClientSize(),t=Math.max(this.options.minVisibleWidth||0,1)||1,n=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(e.width-t,0),i=Math.max(e.height-n,0);return{left:r,top:i,right:r,bottom:i}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0},e.getOptions=function(t){var n=i.merge({},e.defaultOptions,t);return null==n.pageWidth&&(n.pageWidth=t.graph.options.width),null==n.pageHeight&&(n.pageHeight=t.graph.options.height),n}}(Im||(Im={}));var Vm,Um=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Gm=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=i.merge({},Vm.defaultOptions,e),n.options.model&&(n.options.collection=n.options.model.collection),n.options.collection?n.collection=n.options.collection:(n.collection=new Ay([],{comparator:Vm.depthComparator}),n.options.collection=n.collection),n.boxCount=0,n.createContainer(),n.initHandles(),n.startListening(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"startListening",value:function(){var e,t=this.graph,n=this.collection;this.delegateEvents((e={},Object(T.a)(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Object(T.a)(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),n.on("added",this.onCellAdded,this),n.on("removed",this.onCellRemoved,this),n.on("reseted",this.onReseted,this),n.on("updated",this.onCollectionUpdated,this),n.on("node:change:position",this.onNodePositionChanged,this),n.on("cell:changed",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onGraphTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,n=e.options,r=this.options,i=r.showNodeSelectionBox,o=r.pointerEvents,a=n.ui,s=n.selection,u=!this.translating;if(u=(u=u&&(!0!==i||"none"===o))&&a&&!s){this.translating=!0;var c=t.position(),l=t.previous("position"),f=c.x-l.x,h=c.y-l.y;0===f&&0===h||this.translateSelectedNodes(f,h,t,n),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.dryrun=!0;var n=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(n,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(t.batch){var n=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(n,Object.assign(Object.assign({},t),{ui:!0})),this}var r=this.cells,i=this.filter(Array.isArray(e)?e:[e]),o={},a={};r.forEach(function(e){return o[e.id]=e}),i.forEach(function(e){return a[e.id]=e});var s=[],u=[];return i.forEach(function(e){o[e.id]||s.push(e)}),r.forEach(function(e){a[e.id]||u.push(e)}),u.length&&this.unselect(u,Object.assign(Object.assign({},t),{ui:!0})),s.length&&this.select(s,Object.assign(Object.assign({},t),{ui:!0})),0===u.length&&0===s.length&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.length&&(!1===e.batch?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){var t,n;e=this.normalizeEvent(e),this.clean();var r=this.graph.container;if(null!=e.offsetX&&null!=e.offsetY&&r.contains(e.target))t=e.offsetX,n=e.offsetY;else{var i=this.$(r).offset(),o=r.scrollLeft,a=r.scrollTop;t=e.clientX-i.left+window.pageXOffset+o,n=e.clientY-i.top+window.pageYOffset+a}this.$container.css({top:n,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:n,scrollerX:0,scrollerY:0}),this.delegateDocumentEvents(Vm.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,n=this.options.filter;return Array.isArray(n)?e.filter(function(e){return!n.includes(e)&&!n.includes(e.shape)}):"function"===typeof n?e.filter(function(e){return s.call(n,t.graph,e)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,n=this.getEventData(e);switch(n.action){case"selecting":var r=this.$container.width(),i=this.$container.height(),o=this.$container.offset(),a=t.pageToLocal(o.left,o.top),s=t.transform.getScale();r/=s.sx,i/=s.sy;var u=new Lc(a.x,a.y,r,i),c=this.getCellViewsInArea(u).map(function(e){return e.cell});this.reset(c,{batch:!0}),this.hideRubberband();break;case"translating":var l=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){var f=n;this.updateSelectedNodesPosition({dx:f.clientX-f.originX,dy:f.clientY-f.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,l.x,l.y);break;default:this.clean()}}},{key:"onMouseUp",value:function(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){this.options.following||e.stopPropagation();var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var n=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:n});var r=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,r.x,r.y),this.delegateDocumentEvents(Vm.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}},{key:"getSelectionOffset",value:function(e,t){var n=e.x-t.clientX,r=e.y-t.clientY,i=this.graph.hook.getRestrictArea();if(i){var o=this.collection.toArray(),a=ay.getCellsBBox(o,{deep:!0})||Lc.create(),s=i.x-a.x,u=i.y-a.y,c=i.x+i.width-(a.x+a.width),l=i.y+i.height-(a.y+a.height);if(n<s&&(n=s),r<u&&(r=u),c<n&&(n=c),l<r&&(r=l),!this.options.following){var f=e.x-t.originX,h=e.y-t.originY;n=f<=s||f>=c?0:n,r=h<=u||h>=l?0:r}}return{dx:n,dy:r}}},{key:"updateSelectedNodesPosition",value:function(e){var t=e.dx,n=e.dy;if(t||n)if(this.translateSelectedNodes(t,n),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var r=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(t*r.sx),top:"+=".concat(n*r.sy)})}}},{key:"autoScrollGraph",value:function(e,t){var n=this.graph.scroller.widget;return n?n.autoScroll(e,t):{scrollerX:0,scrollerY:0}}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),n=this.getEventData(t);switch(n.action){case"selecting":var r=n;!0!==r.moving&&(this.$container.appendTo(this.graph.container),this.showRubberband(),r.moving=!0);var i=this.autoScrollGraph(t.clientX,t.clientY),o=i.scrollerX,a=i.scrollerY;r.scrollerX+=o,r.scrollerY+=a;var s=t.clientX-r.clientX+r.scrollerX,u=t.clientY-r.clientY+r.scrollerY,c=parseInt(this.$container.css("left"),10),l=parseInt(this.$container.css("top"),10);this.$container.css({left:s<0?r.offsetX+s:c,top:u<0?r.offsetY+u:l,width:Math.abs(s),height:Math.abs(u)});break;case"translating":var f=this.graph.snapToGrid(t.clientX,t.clientY),h=n,d=this.getSelectionOffset(f,h);this.options.following?this.updateSelectedNodesPosition(d):this.updateContainerPosition(d),d.dx&&(h.clientX=f.x),d.dy&&(h.clientY=f.y),this.notifyBoxEvent("box:mousemove",e,f.x,f.y)}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,n,r){var i=this,o={},a=[];if(n&&(o[n.id]=!0),this.collection.toArray().forEach(function(e){e.getDescendants({deep:!0}).forEach(function(e){o[e.id]=!0})}),r&&r.translateBy){var s=this.graph.getCellById(r.translateBy);s&&(o[s.id]=!0,s.getDescendants({deep:!0}).forEach(function(e){o[e.id]=!0}),a.push(s))}this.collection.toArray().forEach(function(n){if(!o[n.id]){var s=Object.assign(Object.assign({},r),{selection:i.cid,exclude:a});n.translate(e,t,s),i.graph.model.getConnectedEdges(n).forEach(function(n){o[n.id]||(n.translate(e,t,s),o[n.id]=!0)})}})}},{key:"getCellViewsInArea",value:function(e){var t=this.graph,n={strict:this.options.strict},r=[];return this.options.rubberNode&&(r=this.options.useCellGeometry?r.concat(t.model.getNodesInArea(e,n).map(function(e){return t.renderer.findViewByCell(e)}).filter(function(e){return null!=e})):r.concat(t.renderer.findViewsInArea(e,n))),this.options.rubberEdge&&(r=this.options.useCellGeometry?r.concat(t.model.getEdgesInArea(e,n).map(function(e){return t.renderer.findViewByCell(e)}).filter(function(e){return null!=e})):r.concat(t.renderer.findEdgeViewsInArea(e,n))),r}},{key:"notifyBoxEvent",value:function(e,t,n,r){var i=this.getEventData(t).activeView;this.trigger(e,{e:t,view:i,x:n,y:r,cell:i.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(e){return t.removeCellUnSelectedClassName(e)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Vm.classNames.rubberband)).removeClass(this.prefixClassName(Vm.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Vm.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Vm.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Vm.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Vm.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Vm.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Vm.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainerPosition",value:function(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:"+=".concat(e.dx),top:"+=".concat(e.dy)})}},{key:"updateContainer",value:function(){var e=this,t={x:1/0,y:1/0},n={x:0,y:0};this.collection.toArray().filter(function(t){return e.canShowSelectionBox(t)}).forEach(function(r){var i=e.graph.renderer.findViewByCell(r);if(i){var o=i.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,o.x),t.y=Math.min(t.y,o.y),n.x=Math.max(n.x,o.x+o.width),n.y=Math.max(n.y,o.y+o.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:n.x-t.x,height:n.y-t.y}).attr("data-selection-length",this.collection.length);var r=this.options.content;if(r)if("function"===typeof r){var i=s.call(r,this.graph,this,this.$selectionContent[0]);i&&this.$selectionContent.html(i)}else this.$selectionContent.html(r);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&!0===this.options.showNodeSelectionBox||e.isEdge()&&!0===this.options.showEdgeSelectionBox}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var n=t.getBBox({useCellGeometry:this.options.useCellGeometry}),r=this.boxClassName;this.$("<div/>").addClass(r).addClass("".concat(r,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,n){var r=e.$(n).remove().attr("data-cell-id"),i=e.collection.get(r);i&&e.createSelectionBox(i)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var n=this.collection.get(t);if(n)return this.graph.renderer.findViewByCell(n)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,n=e.previous,r=e.current;this.destroyAllSelectionBoxes(n),r.forEach(function(e){t.listenCellRemoveEvent(e),t.createSelectionBox(e)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,n=e.added,r=e.removed,i=e.options;n.forEach(function(e){t.trigger("cell:selected",{cell:e,options:i}),t.graph.trigger("cell:selected",{cell:e,options:i}),e.isNode()?(t.trigger("node:selected",{cell:e,options:i,node:e}),t.graph.trigger("node:selected",{cell:e,options:i,node:e})):e.isEdge()&&(t.trigger("edge:selected",{cell:e,options:i,edge:e}),t.graph.trigger("edge:selected",{cell:e,options:i,edge:e}))}),r.forEach(function(e){t.trigger("cell:unselected",{cell:e,options:i}),t.graph.trigger("cell:unselected",{cell:e,options:i}),e.isNode()?(t.trigger("node:unselected",{cell:e,options:i,node:e}),t.graph.trigger("node:unselected",{cell:e,options:i,node:e})):e.isEdge()&&(t.trigger("edge:unselected",{cell:e,options:i,edge:e}),t.graph.trigger("edge:unselected",{cell:e,options:i,edge:e}))});var o={added:n,removed:r,options:i,selected:this.cells};this.trigger("selection:changed",o),this.graph.trigger("selection:changed",o)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,n=this.collection.toArray(),r=ay.getCellsBBox(n).getCenter(),i=this.graph.snapToGrid(t.clientX,t.clientY),o=n.reduce(function(e,t){return e[t.id]=kc.normalize(t.getAngle()),e},{});this.setEventData(t,{center:r,angles:o,start:i.theta(r)})}},{key:"doRotate",value:function(e){var t=this,n=e.e,r=this.getEventData(n),i=this.graph.options.rotating.grid,o="function"===typeof i?s.call(i,this.graph,null):i,a=this.graph.snapToGrid(n.clientX,n.clientY),u=r.start-a.theta(r.center);r.rotated||(r.rotated=!0),Math.abs(u)>.001&&(this.collection.toArray().forEach(function(e){var n=Md.snapToGrid(r.angles[e.id]+u,o||15);e.rotate(n,{absolute:!0,center:r.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,n=e.e,r=this.getEventData(n);r.rotated&&(r.rotated=!1,this.collection.toArray().forEach(function(e){zm("node:rotated",n,t.graph.findViewByCell(e))}))}},{key:"startResize",value:function(e){var t=e.e,n=this.graph.getGridSize(),r=this.collection.toArray(),i=ay.getCellsBBox(r),o=r.map(function(e){return e.getBBox()}),a=o.reduce(function(e,t){return t.width<e?t.width:e},1/0),s=o.reduce(function(e,t){return t.height<e?t.height:e},1/0);this.setEventData(t,{bbox:i,cells:this.graph.model.getSubGraph(r),minWidth:n*i.width/a,minHeight:n*i.height/s})}},{key:"doResize",value:function(e){var t=e.e,n=e.dx,r=e.dy,i=this.eventData(t),o=i.bbox,a=o.width,s=o.height,u=Math.max(a+n,i.minWidth),c=Math.max(s+r,i.minHeight);i.resized||(i.resized=!0),(Math.abs(a-u)>.001||Math.abs(s-c)>.001)&&(this.graph.model.resizeCells(u,c,i.cells,{selection:this.cid}),o.width=u,o.height=c,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,n=e.e,r=this.eventData(n);r.resized&&(r.resized=!1,this.collection.toArray().forEach(function(e){zm("node:resized",n,t.graph.findViewByCell(e))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}},{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Vm.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}}]),t}(Fp);Um([Fp.dispose()],Gm.prototype,"dispose",null),i.applyMixins(Gm,vm),function(e){var t="widget-selection";e.classNames={root:t,inner:"".concat(t,"-inner"),box:"".concat(t,"-box"),content:"".concat(t,"-content"),rubberband:"".concat(t,"-rubberband"),selected:"".concat(t,"-selected")},e.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(e){return o.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]},e.depthComparator=function(e){return e.getAncestors().length}}(Vm||(Vm={}));var Hm,Wm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(e){this.options=Object.assign(Object.assign({},Hm.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Object(T.a)(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Object(T.a)(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Object(T.a)(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Object(T.a)(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(xf.a)(Object(Ac.a)(t.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(xf.a)(Object(Ac.a)(t.prototype),"stopListening",this).call(this)}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),n=t.clone().addClass(this.rotateClassName),r=Hm.POSITIONS.map(function(n){return t.clone().addClass(e.resizeClassName).attr("data-position",n)});this.empty(),this.$container.append(r,n)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(Hm.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var n=kc.normalize(this.node.getAngle()),r=0!==n?"rotate(".concat(n,"deg)"):"";return this.$container.css({transform:r,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(Hm.NODE_CLS),Object(xf.a)(Object(Ac.a)(t.prototype),"remove",this).call(this)}},{key:"onKnobMouseDown",value:function(){this.startHandle()}},{key:"onKnobMouseUp",value:function(){this.stopHandle()}},{key:"updateResizerDirections",value:function(){var e=this,t=kc.normalize(this.node.getAngle()),n=Math.floor(t*(Hm.DIRECTIONS.length/360));if(n!==this.prevShift){var r=Hm.DIRECTIONS.slice(n).concat(Hm.DIRECTIONS.slice(0,n)),i=function(t){return"".concat(e.containerClassName,"-cursor-").concat(t)};this.$container.find(".".concat(this.resizeClassName)).removeClass(Hm.DIRECTIONS.map(function(e){return i(e)}).join(" ")).each(function(t,n){e.$(n).addClass(i(r[t]))}),this.prevShift=n}}},{key:"getTrueDirection",value:function(e){var t=kc.normalize(this.node.getAngle()),n=Hm.POSITIONS.indexOf(e);return n+=Math.floor(t*(Hm.POSITIONS.length/360)),n%=Hm.POSITIONS.length,Hm.POSITIONS[n]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position"),n=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),zm("node:resize:mousedown",e,n)}},{key:"prepareResizing",value:function(e,t){var n=this.getTrueDirection(t),r=0,i=0;t.split("-").forEach(function(e){r={left:-1,right:1}[e]||r,i={top:-1,bottom:1}[e]||i});var o=this.toValidResizeDirection(t),a={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[o],s=kc.normalize(this.node.getAngle());this.setEventData(e,{selector:a,direction:o,trueDirection:n,relativeDirection:t,angle:s,resizeX:r,resizeY:i,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.graph.findViewByCell(this.node),n=this.node.getBBox().getCenter(),r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY);this.setEventData(e,{center:n,action:"rotating",angle:kc.normalize(this.node.getAngle()),start:Ic.create(i).theta(n)}),this.startAction(e),zm("node:rotate:mousedown",e,t)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),n=this.getEventData(e);if(n.action){var r=this.normalizeEvent(e),i=r.clientX,o=r.clientY,s=this.graph.scroller.widget,u=this.options.restrictedResizing;if(!0===u||"number"===typeof u){var c=!0===u?0:u,l=s?Math.max(c,8):c,f=this.graph.container.getBoundingClientRect();i=a.clamp(i,f.left+l,f.right-l),o=a.clamp(o,f.top+l,f.bottom-l)}else this.options.autoScrollOnResizing&&s&&s.autoScroll(i,o);var h=this.graph.snapToGrid(i,o),d=this.graph.getGridSize(),p=this.node,g=this.options;if("resizing"===n.action){(n=n).resized||(t&&(t.addClass("node-resizing"),zm("node:resize",e,t)),n.resized=!0);var v=p.getBBox(),y=Ic.create(h).rotate(n.angle,v.getCenter()).diff(v[n.selector]),m=n.resizeX?y.x*n.resizeX:v.width,b=n.resizeY?y.y*n.resizeY:v.height,w=m,x=b;if(m=Md.snapToGrid(m,d),b=Md.snapToGrid(b,d),m=Math.max(m,g.minWidth||d),b=Math.max(b,g.minHeight||d),m=Math.min(m,g.maxWidth||1/0),b=Math.min(b,g.maxHeight||1/0),g.preserveAspectRatio){var C=v.width*b/v.height,k=v.height*m/v.width;m<C?b=k:m=C}var E=n.relativeDirection;if(g.allowReverse&&(w<=-m||x<=-b)){var O;"left"===E?w<=-m&&(O="right"):"right"===E?w<=-m&&(O="left"):"top"===E?x<=-b&&(O="bottom"):"bottom"===E?x<=-b&&(O="top"):"top-left"===E?w<=-m&&x<=-b?O="bottom-right":w<=-m?O="top-right":x<=-b&&(O="bottom-left"):"top-right"===E?w<=-m&&x<=-b?O="bottom-left":w<=-m?O="top-left":x<=-b&&(O="bottom-right"):"bottom-left"===E?w<=-m&&x<=-b?O="top-right":w<=-m?O="bottom-right":x<=-b&&(O="top-left"):"bottom-right"===E&&(w<=-m&&x<=-b?O="top-left":w<=-m?O="bottom-left":x<=-b&&(O="top-right"));var S=O;this.stopHandle();var A=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat(S,'"]'));this.startHandle(A[0]),this.prepareResizing(e,S),this.onMouseMove(e)}if(v.width!==m||v.height!==b){var T={ui:!0,direction:n.direction,relativeDirection:n.relativeDirection,trueDirection:n.trueDirection,minWidth:g.minWidth,minHeight:g.minHeight,maxWidth:g.maxWidth,maxHeight:g.maxHeight,preserveAspectRatio:!0===g.preserveAspectRatio};p.resize(m,b,T),zm("node:resizing",e,t)}zm("node:resize:mousemove",e,t)}else if("rotating"===n.action){(n=n).rotated||(t&&(t.addClass("node-rotating"),zm("node:rotate",e,t)),n.rotated=!0);var M=p.getAngle(),_=n.start-Ic.create(h).theta(n.center),j=n.angle+_;g.rotateGrid&&(j=Md.snapToGrid(j,g.rotateGrid)),M!==j&&(p.rotate(j,{absolute:!0}),zm("node:rotating",e,t)),zm("node:rotate:mousemove",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.graph.findViewByCell(this.node),n=this.getEventData(e);n.action&&(this.stopAction(e),this.model.stopBatch("resizing"===n.action?"resize":"rotate",{cid:this.cid}),"resizing"===n.action?zm("node:resize:mouseup",e,t):"rotating"===n.action&&zm("node:rotate:mouseup",e,t))}},{key:"startHandle",value:function(e){if(this.handle=e||null,this.$container.addClass("".concat(this.containerClassName,"-active")),e){this.$(e).addClass("".concat(this.containerClassName,"-active-handle"));var t=e.getAttribute("data-position");if(t){var n=Hm.DIRECTIONS[Hm.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(n))}}}},{key:"stopHandle",value:function(){if(this.$container.removeClass("".concat(this.containerClassName,"-active")),this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle"));var e=this.handle.getAttribute("data-position");if(e){var t=Hm.DIRECTIONS[Hm.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Hm.documentEvents,e.data)}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),n=this.getEventData(e);t&&(t.removeClass("node-".concat(n.action)),"resizing"===n.action&&n.resized?zm("node:resized",e,t):"rotating"===n.action&&n.rotated&&zm("node:rotated",e,t))}},{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}}]),t}(bm);!function(e){e.NODE_CLS="has-widget-transform",e.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],e.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],e.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},e.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}}(Hm||(Hm={}));var qm,Xm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};!function(e){(qm||(qm={})).parseOptionGroup=function(e,t,n){var r={};return Object.keys(n||{}).forEach(function(i){var o=n[i];r[i]="function"===typeof o?o.call(e,t):o}),r}}(),function(e){e.get=function(t){var n=t.grid,r=(t.panning,t.selecting,t.embedding,t.snapline,t.resizing,t.rotating,t.knob,t.clipboard,t.history,t.scroller,t.minimap,t.keyboard,t.mousewheel,Xm(t,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"])),o=t.container;if(null==o)throw new Error("Ensure the container of the graph is specified and valid");null==r.width&&(r.width=o.clientWidth),null==r.height&&(r.height=o.clientHeight);var a=i.merge({},e.defaults,r),s={size:10,visible:!1};return a.grid="number"===typeof n?{size:n,visible:!1}:"boolean"===typeof n?Object.assign(Object.assign({},s),{visible:n}):Object.assign(Object.assign({},s),n),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(function(e){var n=t[e];"boolean"===typeof n?a[e].enabled=n:a[e]=Object.assign(Object.assign({},a[e]),n)}),a.background&&a.scroller.enabled&&null==a.scroller.background&&(a.scroller.background=a.background,delete a.background),a}}(qm||(qm={})),(qm||(qm={})).defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Md.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Md.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(e){var t=e.type,n=e.sourceView,r=e.targetView;return null!=("target"===t?r:n)},createEdge:function(){return new em}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}};var $m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ym=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"isDefined",value:function(e){return null!=this.svg.getElementById(e)}},{key:"filter",value:function(e){var t=e.id,n=e.name;if(t||(t="filter-".concat(n,"-").concat(this.cid,"-").concat(o.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var r=rd.registry.get(n);if(null==r)return rd.registry.onNotFound(n);var i=r(e.args||{}),a=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});al.create(qp.sanitize(i),a).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,n=e.type;if(t||(t="gradient-".concat(n,"-").concat(this.cid,"-").concat(o.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var r=e.stops.map(function(e){var t=null!=e.opacity&&Number.isFinite(e.opacity)?e.opacity:1;return'<stop offset="'.concat(e.offset,'" stop-color="').concat(e.color,'" stop-opacity="').concat(t,'"/>')}),i="<".concat(n,">").concat(r.join(""),"</").concat(n,">"),a=Object.assign({id:t},e.attrs);al.create(i,a).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,n=e.refX,r=e.refY,i=e.markerUnits,a=e.markerOrient,s=e.tagName,u=e.children,l=$m(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),f=t;if(f||(f="marker-".concat(this.cid,"-").concat(o.hashcode(JSON.stringify(e)))),!this.isDefined(f)){"path"!==s&&delete l.d;var h=al.create("marker",{refX:n,refY:r,id:f,overflow:"visible",orient:null!=a?a:"auto",markerUnits:i||"userSpaceOnUse"},u?u.map(function(e){var t=e.tagName,n=$m(e,["tagName"]);return al.create("".concat(t)||"path",c.kebablizeAttrs(Object.assign(Object.assign({},l),n)))}):[al.create(s||"path",c.kebablizeAttrs(l))]);this.defs.appendChild(h.node)}return f}},{key:"remove",value:function(e){var t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}}]),t}(sm),Km=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Jm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Zm=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var n=this.graph.matrix(),r=this.getInstance(),i=Array.isArray(e)?e:[e];this.patterns.forEach(function(e,o){var a="pattern_".concat(o),s=n.a||1,u=n.d||1,l=e.update,f=e.markup,h=Jm(e,["update","markup"]),d=Object.assign(Object.assign(Object.assign({},h),i[o]),{sx:s,sy:u,ox:n.e||0,oy:n.f||0,width:t*s,height:t*u});r.has(a)||r.add(a,al.create("pattern",{id:a,patternUnits:"userSpaceOnUse"},al.createVectors(f)).node);var p=r.get(a);"function"===typeof l&&l(p.childNodes[0],d);var g=d.ox%d.width;g<0&&(g+=d.width);var v=d.oy%d.height;v<0&&(v+=d.height),c.attr(p,{x:g,y:v,width:d.width,height:d.height})});var o=(new XMLSerializer).serializeToString(r.root),a="url(data:image/svg+xml;base64,".concat(btoa(o),")");this.elem.style.backgroundImage=a}},{key:"getInstance",value:function(){return this.instance||(this.instance=new cd),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(null==t)return[Object.assign(Object.assign({},cd.presets.dot),e.args)];var n=cd.registry.get(t);if(n){var r=e.args||[];return Array.isArray(r)||(r=[r]),Array.isArray(n)?n.map(function(e,t){return Object.assign(Object.assign({},e),r[t])}):[Object.assign(Object.assign({},n),r[0])]}return cd.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}},{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}}]),t}(sm);Km([sm.dispose()],Zm.prototype,"dispose",null);var Qm,eb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"getClientMatrix",value:function(){return c.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new Ic(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){return("number"===typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var n=Ic.create(e,t);return c.transformPoint(n,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var n=Ic.create(e,t);return c.transformPoint(n,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){return("number"===typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r);return c.transformRectangle(i,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r);return c.transformRectangle(i,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,n,r){return("number"===typeof e?this.localToGraphRect(e,t,n,r):this.localToGraphRect(e)).translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var n=Ic.create(e,t);return c.transformPoint(n,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var n=Ic.create(e,t);return c.transformPoint(n,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(e,t){var n=Ic.create(e,t);return c.transformPoint(n,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(e,t){var n=Ic.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(n)}},{key:"graphToLocalRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r);return c.transformRectangle(i,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r);return c.transformRectangle(i,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r);return c.transformRectangle(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(e,t,n,r){var i=Lc.create(e,t,n,r),o=this.getPageOffset();return i.x-=o.x,i.y-=o.y,this.graphToLocalRect(i)}}]),t}(sm),tb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nb=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).widget=e.graph.hook.createSnapline(),e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"dispose",value:function(){this.widget.dispose()}}]),t}(sm);tb([sm.dispose()],nb.prototype,"dispose",null),function(e){function t(e){var t=[],n=[];return Array.isArray(e)?t.push.apply(t,Object(fu.a)(e)):e.split("|").forEach(function(e){-1===e.indexOf("&")?t.push(e):n.push.apply(n,Object(fu.a)(e.split("&")))}),{or:t,and:n}}e.parse=t,e.equals=function(e,n){if(null!=e&&null!=n){var r=t(e),i=t(n),o=r.or.sort(),a=i.or.sort(),s=r.and.sort(),u=i.and.sort(),c=function(e,t){return e.length===t.length&&(0===e.length||e.every(function(e,n){return e===t[n]}))};return c(o,a)&&c(s,u)}return null==e&&null==n},e.isMatch=function(e,n,r){if(null==n||Array.isArray(n)&&0===n.length)return!r||!0!==e.altKey&&!0!==e.ctrlKey&&!0!==e.metaKey&&!0!==e.shiftKey;var i=t(n),o=i.or,a=i.and,s=function(t){var n="".concat(t.toLowerCase(),"Key");return!0===e[n]};return o.some(function(e){return s(e)})&&a.every(function(e){return s(e)})}}(Qm||(Qm={}));var rb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ib=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){var e=[],t=this.widgetOptions.pannable;(e="object"===typeof t?t.eventTypes||[]:["leftMouseDown"]).includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}},{key:"stopListening",value:function(){var e=[],t=this.widgetOptions.pannable;(e="object"===typeof t?t.eventTypes||[]:["leftMouseDown"]).includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}},{key:"onRightMouseDown",value:function(e){var t=this;2===e.button&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"preparePanning",value:function(e){var t=this,n=e.e;this.widget&&(this.allowPanning(n,!0)||this.allowPanning(n)&&!this.graph.selection.allowRubberband(n,!0))&&(this.updateClassName(!0),this.widget.startPanning(n),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&Qm.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(null!=this.widget){var t=this.widget.container,n=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(c.addClass(t,n),t.dataset.panning=(!!e).toString()):c.removeClass(t,n)}}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"enableAutoResize",value:function(){this.widget&&this.widget.enableAutoResize()}},{key:"disableAutoResize",value:function(){this.widget&&this.widget.disableAutoResize()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}},{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return!!this.widgetOptions&&("object"===typeof this.widgetOptions.pannable?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable)}}]),t}(sm);rb([sm.dispose()],ib.prototype,"dispose",null);var ob=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ab=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},sb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.disabled||this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.disabled||this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){this.disabled&&!e||this.widget.clean()}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}},{key:"commonOptions",get:function(){var e=this.instanceOptions;e.enabled;return ab(e,["enabled"])}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return!0!==this.instanceOptions.enabled}}]),t}(sm);ob([sm.dispose()],sb.prototype,"dispose",null);var ub=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cb=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).highlights={},e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,n=e.magnet,r=e.options,i=void 0===r?{}:r,o=this.resolveHighlighter(i);if(o){var a=this.getHighlighterId(n,o);if(!this.highlights[a]){var s=o.highlighter;s.highlight(t,n,Object.assign({},o.args)),this.highlights[a]={cellView:t,magnet:n,highlighter:s,args:o.args}}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,n=e.options,r=void 0===n?{}:n,i=this.resolveHighlighter(r);if(i){var o=this.getHighlighterId(t,i);this.unhighlight(o)}}},{key:"resolveHighlighter",value:function(e){var t=this.options,n=e.highlighter;if(null==n){var r=e.type;n=r&&t.highlighting[r]||t.highlighting.default}if(null==n)return null;var i="string"===typeof n?{name:n}:n,o=i.name,a=Pd.registry.get(o);return null==a?Pd.registry.onNotFound(o):(Pd.check(o,a),{name:o,highlighter:a,args:i.args||{}})}},{key:"getHighlighterId",value:function(e,t){return c.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),t}(sm);ub([cb.dispose()],cb.prototype,"dispose",null);var lb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fb=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).widgets=new Map,e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var n=this.graph.hook.createTransform(t,{clearAll:!0});n&&this.widgets.set(t,n)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var n=this.graph.hook.createTransform(t,{clearAll:!1});n&&this.widgets.set(t,n)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var n=this.widgets.get(t);n&&n.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),c.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=c.createSVGMatrix(e),n=c.matrixToTransformString(t);this.viewport.setAttribute("transform",n),this.viewportMatrix=t,this.viewportTransformString=n}},{key:"resize",value:function(e,t){var n=void 0===e?this.options.width:e,r=void 0===t?this.options.height:t;this.options.width=n,this.options.height=r,"number"===typeof n&&(n=Math.round(n)),"number"===typeof r&&(r=Math.round(r)),this.container.style.width=null==n?"":"".concat(n,"px"),this.container.style.height=null==r?"":"".concat(r,"px");var i=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},i)),this}},{key:"getComputedSize",value:function(){var e=this.options.width,t=this.options.height;return a.isNumber(e)||(e=this.container.clientWidth),a.isNumber(t)||(t=this.container.clientHeight),{width:e,height:t}}},{key:"getScale",value:function(){return c.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e=this.clampScale(e),t=this.clampScale(t),n||r){var i=this.getTranslation(),o=i.tx-n*(e-1),a=i.ty-r*(t-1);o===i.tx&&a===i.ty||this.translate(o,a)}var s=this.getMatrix();return s.a=e,s.d=t,this.setMatrix(s),this.graph.trigger("scale",{sx:e,sy:t,ox:n,oy:r}),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return a.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var n=e,r=e,i=this.getScale(),o=this.getComputedSize(),a=o.width/2,s=o.height/2;if(t.absolute||(n+=i.sx,r+=i.sy),t.scaleGrid&&(n=Math.round(n/t.scaleGrid)*t.scaleGrid,r=Math.round(r/t.scaleGrid)*t.scaleGrid),t.maxScale&&(n=Math.min(t.maxScale,n),r=Math.min(t.maxScale,r)),t.minScale&&(n=Math.max(t.minScale,n),r=Math.max(t.minScale,r)),t.center&&(a=t.center.x,s=t.center.y),n=this.clampScale(n),r=this.clampScale(r),a||s){var u=this.getTranslation(),c=a-(a-u.tx)*(n/i.sx),l=s-(s-u.ty)*(r/i.sy);c===u.tx&&l===u.ty||this.translate(c,l)}return this.scale(n,r),this}},{key:"getRotation",value:function(){return c.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,n){if(null==t||null==n){var r=c.getBBox(this.graph.view.stage);t=r.width/2,n=r.height/2}var i=this.getMatrix().translate(t,n).rotate(e).translate(-t,-n);return this.setMatrix(i),this}},{key:"getTranslation",value:function(){return c.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var n=this.getMatrix();n.e=e||0,n.f=t||0,this.setMatrix(n);var r=this.getTranslation();return this.options.x=r.tx,this.options.y=r.ty,this.graph.trigger("translate",Object.assign({},r)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,n,r){if("object"===typeof e){var i=e;e=i.gridWidth||1,t=i.gridHeight||1,n=i.padding||0,r=i}else e=e||1,t=t||1,n=n||0,null==r&&(r={});var o=a.normalizeSides(n),s=r.border||0,u=r.contentArea?Lc.create(r.contentArea):this.getContentArea(r);s>0&&u.inflate(s);var c=this.getScale(),l=this.getTranslation(),f=c.sx,h=c.sy;u.x*=f,u.y*=h,u.width*=f,u.height*=h;var d=Math.max(Math.ceil((u.width+u.x)/e),1)*e,p=Math.max(Math.ceil((u.height+u.y)/t),1)*t,g=0,v=0;("negative"===r.allowNewOrigin&&u.x<0||"positive"===r.allowNewOrigin&&u.x>=0||"any"===r.allowNewOrigin)&&(g=Math.ceil(-u.x/e)*e,d+=g+=o.left),("negative"===r.allowNewOrigin&&u.y<0||"positive"===r.allowNewOrigin&&u.y>=0||"any"===r.allowNewOrigin)&&(v=Math.ceil(-u.y/t)*t,p+=v+=o.top),d+=o.right,p+=o.bottom,d=Math.max(d,r.minWidth||0),p=Math.max(p,r.minHeight||0),d=Math.min(d,r.maxWidth||Number.MAX_SAFE_INTEGER),p=Math.min(p,r.maxHeight||Number.MAX_SAFE_INTEGER);var y=this.getComputedSize(),m=d!==y.width||p!==y.height;return(g!==l.tx||v!==l.ty)&&this.translate(g,v),m&&this.resize(d,p),new Lc(-g/f,-v/h,d/f,p/h)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n.contentArea){var i=n.contentArea;e=this.graph.localToGraph(i),t=Ic.create(i)}else e=this.getContentBBox(n),t=this.graph.graphToLocal(e);if(e.width&&e.height){var o,s=a.normalizeSides(n.padding),u=n.minScale||0,c=n.maxScale||Number.MAX_SAFE_INTEGER,l=n.minScaleX||u,f=n.maxScaleX||c,h=n.minScaleY||u,d=n.maxScaleY||c;if(n.viewportArea)o=n.viewportArea;else{var p=this.getComputedSize(),g=this.getTranslation();o={x:g.tx,y:g.ty,width:p.width,height:p.height}}o=Lc.create(o).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});var v=this.getScale(),y=o.width/e.width*v.sx,m=o.height/e.height*v.sy;!1!==n.preserveAspectRatio&&(y=m=Math.min(y,m));var b=n.scaleGrid;if(b&&(y=b*Math.floor(y/b),m=b*Math.floor(m/b)),y=a.clamp(y,l,f),m=a.clamp(m,h,d),this.scale(y,m),r){var w=this.options,x=o.x-t.x*y-w.x,C=o.y-t.y*m-w.y;this.translate(x,C)}}}},{key:"getContentArea",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useCellGeometry?this.model.getAllCellsBBox()||new Lc:c.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=Lc.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Lc.create(e),r=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:r.options.x,y:r.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var i=n.getCenter();return this.centerPoint(i.x,i.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var n=this.getComputedSize(),r=this.getScale(),i=this.getTranslation(),o=n.width/2,a=n.height/2;t="number"===typeof t?t:a,e=o-(e="number"===typeof e?e:o)*r.sx,t=a-t*r.sy,i.tx===e&&i.ty===t||this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e).getCenter();this.centerPoint(t.x,t.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,n){var r=this.getComputedSize();(t=a.normalizePercentage(t,Math.max(0,r.width)))<0&&(t=r.width+t),(n=a.normalizePercentage(n,Math.max(0,r.height)))<0&&(n=r.height+n);var i=this.getTranslation(),o=this.getScale(),s=t-e.x*o.sx,u=n-e.y*o.sy;i.tx===s&&i.ty===u||this.translate(s,u)}},{key:"positionRect",value:function(e,t){var n=Lc.create(e);switch(t){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var n=e.getBBox();return this.positionRect(n,t)}},{key:"positionContent",value:function(e,t){var n=this.graph.getContentArea(t);return this.positionRect(n,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}},{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return!0===this.options.selecting.enabled}}]),t}(sm);lb([fb.dispose()],fb.prototype,"dispose",null);var hb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},db=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).movedMap=new WeakMap,e.unselectMap=new WeakMap,e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0))&&this.startRubberband(t)}},{key:"onBlankClick",value:function(){this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&Qm.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,n=e.cell,r=this.widgetOptions,i=this.disabled;!i&&this.movedMap.has(n)&&((i=!1===r.selectCellOnMoved)||(i=!1===r.selectNodeOnMoved&&n.isNode()),i||(i=!1===r.selectEdgeOnMoved&&n.isEdge())),i||(!1===r.multiple||!t.ctrlKey&&!t.metaKey?this.reset(n):this.unselectMap.has(n)?this.unselectMap.delete(n):this.isSelected(n)?this.unselect(n):this.select(n)),this.movedMap.delete(n)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,n=e.cell;this.disabled||!1!==this.widgetOptions.multiple&&(t.ctrlKey||t.metaKey)&&(this.unselect(n),this.unselectMap.set(n,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(e){return"string"===typeof e?t.graph.getCellById(e):e}).filter(function(e){return null!=e})}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getCells(e);return n.length&&(this.isMultiple()?this.widget.select(n,t):this.reset(n.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.widget.clean(e),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return!1!==this.widgetOptions.multiple}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}},{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return!0!==this.widgetOptions.enabled||!0!==this.widgetOptions.rubberband}},{key:"disabled",get:function(){return!0!==this.widgetOptions.enabled}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}}]),t}(sm);hb([sm.dispose()],db.prototype,"dispose",null);var pb,gb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},vb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},yb=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).batchCommands=null,n.batchLevel=0,n.lastBatchIndex=-1,n.freezed=!1,n.handlers=[],n.graph=e.graph,n.model=e.graph.model,n.options=pb.getOptions(e),n.validator=new t.Validator({history:Object(xp.a)(n),cancelInvalid:n.options.cancelInvalid}),n.clean(),n.startListening(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.validator).validate.apply(t,[e].concat(r)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,n){e.handlers[n]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[n])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,n){e.model.off(t,e.handlers[n])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:!!e&&e.batch,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var n=Array.isArray(e)?pb.sortBatchCommands(e):[e],r=n.length-1;r>=0;r-=1){var o=n[r],a=Object.assign(Object.assign({},t),i.pick(o.options,this.options.revertOptionsList||[]));this.executeCommand(o,!0,a)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var n=Array.isArray(e)?pb.sortBatchCommands(e):[e],r=0;r<n.length;r+=1){var o=n[r],a=Object.assign(Object.assign({},t),i.pick(o.options,this.options.applyOptionsList||[]));this.executeCommand(o,!1,a)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,n){var r=this.model,i=r.getCell(e.data.id),o=e.event;if(pb.isAddEvent(o)&&t||pb.isRemoveEvent(o)&&!t)i.remove(n);else if(pb.isAddEvent(o)&&!t||pb.isRemoveEvent(o)&&t){var a=e.data;a.node?r.addNode(a.props,n):a.edge&&r.addEdge(a.props,n)}else if(pb.isChangeEvent(o)){var u=e.data,c=u.key;if(c){var l=t?u.prev[c]:u.next[c];i.prop(c,l,n)}}else{var f=this.options.executeCommand;f&&s.call(f,this,e,t,n)}}},{key:"addCommand",value:function(e,t){if(!this.freezed&&!this.disabled){var n=t,r=n.options||{};if(!r.dryrun&&!(pb.isAddEvent(e)&&this.options.ignoreAdd||pb.isRemoveEvent(e)&&this.options.ignoreRemove||pb.isChangeEvent(e)&&this.options.ignoreChange)){var o=this.options.beforeAddCommand;if(null==o||!1!==s.call(o,this,e,t)){"cell:change:*"===e&&(e="cell:change:".concat(n.key));var a,u=n.cell,c=Ty.isModel(u);if(this.batchCommands){a=this.batchCommands[Math.max(this.lastBatchIndex,0)];var l=c&&!a.modelChange||a.data.id!==u.id,f=a.event!==e;if(this.lastBatchIndex>=0&&(l||f)){var h=this.batchCommands.findIndex(function(t){return(c&&t.modelChange||t.data.id===u.id)&&t.event===e});h<0||pb.isAddEvent(e)||pb.isRemoveEvent(e)?a=this.createCommand({batch:!0}):(a=this.batchCommands[h],this.batchCommands.splice(h,1)),this.batchCommands.push(a),this.lastBatchIndex=this.batchCommands.length-1}}else a=this.createCommand({batch:!1});if(pb.isAddEvent(e)||pb.isRemoveEvent(e)){var d=a.data;return a.event=e,a.options=r,d.id=u.id,d.props=i.cloneDeep(u.toJSON()),u.isEdge()?d.edge=!0:u.isNode()&&(d.node=!0),this.push(a,r)}if(pb.isChangeEvent(e)){var p=t.key,g=a.data;return a.batch&&a.event||(a.event=e,a.options=r,g.key=p,null==g.prev&&(g.prev={}),g.prev[p]=i.clone(u.previous(p)),c?a.modelChange=!0:g.id=u.id),null==g.next&&(g.next={}),g.next[p]=i.clone(u.prop(p)),this.push(a,r)}var v=this.options.afterAddCommand;v&&s.call(v,this,e,t,a),this.push(a,r)}}}}},{key:"initBatchCommand",value:function(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}},{key:"storeBatchCommand",value:function(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),n=[],r=function(){var e=t.shift(),r=e.event,o=e.data.id;if(null!=r&&(null!=o||e.modelChange)){if(pb.isAddEvent(r)){var a=t.findIndex(function(e){return pb.isRemoveEvent(e.event)&&e.data.id===o});if(a>=0)return t=t.filter(function(e,t){return a<t||e.data.id!==o}),"continue"}else if(pb.isRemoveEvent(r)){var s=t.findIndex(function(e){return pb.isAddEvent(e.event)&&e.data.id===o});if(s>=0)return t.splice(s,1),"continue"}else if(pb.isChangeEvent(r)){var u=e.data;if(i.isEqual(u.prev,u.next))return"continue"}n.push(e)}};t.length>0;)r();return n}},{key:"notify",value:function(e,t,n){var r=null==t?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:r,options:n}),this.emit("change",{cmds:r,options:n})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.notify("add",e,t))}},{key:"disabled",get:function(){return!0!==this.options.enabled}}]),t}(Tp);gb([Tp.dispose()],yb.prototype,"dispose",null),function(e){var t=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).map={},n.command=e.history,n.cancelInvalid=!1!==e.cancelInvalid,n.command.on("add",n.onCommandAdded,Object(xp.a)(n)),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"onCommandAdded",value:function(e){var t=this,n=e.cmds;return Array.isArray(n)?n.every(function(e){return t.isValidCommand(e)}):this.isValidCommand(n)}},{key:"isValidCommand",value:function(e){if(e.options&&!1===e.options.validation)return!0;var t=e.event&&this.map[e.event]||[],n=null;return t.forEach(function(t){var r=0;!function i(o){var a=t[r];r+=1;try{if(!a)return void(n=o);a(o,e,i)}catch(o){i(o)}}(n)}),!n||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:n}),!1)}},{key:"validate",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Array.isArray(e)?e:e.split(/\s+/);return r.forEach(function(e){if("function"!==typeof e)throw new Error("".concat(o.join(" ")," requires callback functions."))}),o.forEach(function(e){null==t.map[e]&&(t.map[e]=[]),t.map[e].push(r)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),t}(Tp);gb([Tp.dispose()],t.prototype,"dispose",null),e.Validator=t}(yb||(yb={})),function(e){e.isAddEvent=function(e){return"cell:added"===e},e.isRemoveEvent=function(e){return"cell:removed"===e},e.isChangeEvent=function(e){return null!=e&&e.startsWith("cell:change:")},e.getOptions=function(t){t.graph;var n=vb(t,["graph"]),r=["cell:added","cell:removed","cell:change:*"],i=["batch:start","batch:stop"],o=t.eventNames?t.eventNames.filter(function(t){return!(e.isChangeEvent(t)||r.includes(t)||i.includes(t))}):r;return Object.assign(Object.assign({},n),{eventNames:o,applyOptionsList:t.applyOptionsList||["propertyPath"],revertOptionsList:t.revertOptionsList||["propertyPath"]})},e.sortBatchCommands=function(t){for(var n=[],r=0,i=t.length;r<i;r+=1){var o=t[r],a=null;if(e.isAddEvent(o.event))for(var s=o.data.id,u=0;u<r;u+=1)if(t[u].data.id===s){a=u;break}null!==a?n.splice(a,0,o):n.push(o)}return n}}(pb||(pb={}));var mb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}},{key:"widgetOptions",get:function(){return this.options.minimap}}]),t}(sm);mb([sm.dispose()],bb.prototype,"dispose",null);var wb=n(409),xb=n.n(wb),Cb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kb=function(e){function t(e){var n;Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=e;var r=n.graph.scroller.widget;return n.container=r?r.container:n.graph.container,e.global?n.target=document:(n.target=n.container,n.disabled||n.target.setAttribute("tabindex","-1"),n.graph.on("cell:mouseup",n.focus,Object(xp.a)(n)),n.graph.on("blank:mouseup",n.focus,Object(xp.a)(n))),n.mousetrap=t.createMousetrap(Object(xp.a)(n)),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,n){this.mousetrap.bind(this.getKeys(e),t,n)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(e){this.isInputEvent(e.e)||this.target.focus({preventScroll:!0})}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(e){return t.formatkey(e)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),n=this.options.format;return n?s.call(n,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target;return!!t&&(t===this.target||t===document.body||c.contains(this.container,t))}},{key:"isInputEvent",value:function(e){var t=e.target;return"input"===(t&&t.tagName.toLowerCase())}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e),n=this.isInputEvent(e);if(t){var r=e.keyCode||e.which;if(n&&(8===r||46===r))return!1;if(this.options.guard)return s.call(this.options.guard,this.graph,e)}return t}},{key:"dispose",value:function(){this.mousetrap.reset()}},{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return!0!==this.options.enabled}}]),t}(Sp);Cb([Sp.dispose()],kb.prototype,"dispose",null),function(e){(kb||(kb={})).createMousetrap=function(e){var t=new xb.a(e.target),n=t.stopCallback;return t.stopCallback=function(r,i,o){return!e.isEnabledForEvent(r)||!!n&&n.call(t,r,i,o)},t}}();var Eb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ob=function(e){function t(e){var n;Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=e,n.cumulatedFactor=1;var r=n.graph.scroller.widget;return n.container=r?r.container:n.graph.container,n.target=n.options.global?document:n.container,n.mousewheelHandle=new c.MouseWheelHandle(n.target,n.onMouseWheel.bind(Object(xp.a)(n)),n.allowMouseWheel.bind(Object(xp.a)(n))),n.options.enabled&&n.enable(!0),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(e){var t=e.originalEvent||e,n=this.options.guard;return(null==n||n.call(this.graph,t))&&Qm.isMatch(t,this.options.modifiers)}},{key:"onMouseWheel",value:function(e){var t=e.originalEvent||e,n=this.options.guard;if((null==n||n.call(this.graph,t))&&Qm.isMatch(t,this.options.modifiers)){var r=this.options.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*r*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var i=this.graph.scroller.widget,o=this.currentScale,s=this.graph.transform.clampScale(o*this.cumulatedFactor),u=this.options.minScale||Number.MIN_SAFE_INTEGER,c=this.options.maxScale||Number.MAX_SAFE_INTEGER;if((s=a.clamp(s,u,c))!==o)if(i)if(this.options.zoomAtMousePosition){var l=this.graph.coord.clientToLocalPoint(this.startPos);i.zoom(s,{absolute:!0,center:l.clone()})}else i.zoom(s,{absolute:!0});else if(this.options.zoomAtMousePosition){var f=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.zoom(s,{absolute:!0,center:f.clone()})}else this.graph.zoom(s,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}},{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return!0!==this.options.enabled}}]),t}(Sp);Eb([Sp.dispose()],Ob.prototype,"dispose",null);var Sb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ab=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"show",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign(Object.assign({},t.defaultOptions),n),i=this.createPrintPages(r);r.ready(i,function(t){return e.showPrintWindow(t,r)},{sheetSize:this.getSheetSize(r)})}},{key:"showPrintWindow",value:function(e,t){var n=this;if(e){var r=_()(document.body),i=_()(this.view.container),o=this.view.prefixClassName("graph-printing");r.addClass(o);var a=i.children().detach();e.forEach(function(e){e.removeClass("".concat(n.className,"-preview")).addClass("".concat(n.className,"-ready")).appendTo(r)});var s=!1,u=function u(){s||(s=!0,r.removeClass(o),e.forEach(function(e){return e.remove()}),i.append(a),_()("#".concat(n.styleSheetId)).remove(),n.graph.trigger("after:print",t),_()(window).off("afterprint",u))};_()(window).one("afterprint",u),setTimeout(u,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var n=_()("<div/>").addClass(this.className),r=_()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&n.addClass("".concat(this.className,"-size-").concat(t.size));var i=al.create(this.view.svg).clone(),o=i.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));r.append(i.node);var a=this.getSheetSize(t),s=this.graph.transform.getGraphArea(),u=this.graph.transform.getScale(),l=this.graph.translate(),f=c.createSVGMatrix().translate(l.tx/u.sx,l.ty/u.sy),h=this.getPageInfo(s,e,a),d=h.scale,p=h.bbox;return r.css({left:0,top:0}),i.attr({width:p.width*d,height:p.height*d,style:"position:relative",viewBox:[p.x,p.y,p.width,p.height].join(" ")}),o.attr("transform",c.matrixToTransformString(f)),n.append(r),n.addClass("".concat(this.className,"-preview")),{$page:n,sheetSize:a}}},{key:"createPrintPages",value:function(e){var t,n=this,r=this.getPrintArea(e),i=[];if(e.page){var o=this.getPageSize(r,e.page);this.getPageAreas(r,o).forEach(function(r){t=n.createPrintPage(r,e),i.push(t.$page)})}else t=this.createPrintPage(r,e),i.push(t.$page);if(t){var a={width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight};this.updatePrintStyle(a,e)}return i}},{key:"updatePrintStyle",value:function(e,t){var n=Object.keys(e).reduce(function(t,n){return"".concat(t," ").concat(n,":").concat(e[n],";")},""),r=a.normalizeSides(t.margin),i=t.marginUnit||"",o=t.sheetUnit||"",s="\n      @media print {\n        .".concat(this.className,".").concat(this.className,"-ready {\n          ").concat(n,"\n        }\n\n        @page {\n          margin:\n          ").concat([r.top+i,r.right+i,r.bottom+i,r.left+i].join(" "),";\n          size: ").concat(t.sheet.width+o," ").concat(t.sheet.height+o,";\n\n        .").concat(this.className,".").concat(this.className,"-preview {\n          ").concat(n,"\n        }\n      }"),u=this.styleSheetId,c=_()("#".concat(u));c.length?c.html(s):_()("head").append('\'<style type="text/css" id="'.concat(u,'">').concat(s,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var n=a.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom})}return t}},{key:"getPageSize",value:function(e,t){if("object"===typeof t){var n=t,r={width:n.width,height:n.height};return null==r.width&&(r.width=Math.ceil(e.width/(n.columns||1))),null==r.height&&(r.height=Math.ceil(e.height/(n.rows||1))),r}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var n=[],r=t.width,i=t.height,o=0,a=0;o<e.height&&a<200;o+=i,a+=1)for(var s=0,u=0;s<e.width&&u<200;s+=r,u+=1)n.push(new Lc(e.x+s,e.y+o,r,i));return n}},{key:"getSheetSize",value:function(e){var t=e.sheet,n=a.normalizeSides(e.margin),r=e.marginUnit||"",i=e.sheetUnit||"",o="calc(".concat(t.width).concat(i," - ").concat(n.left+n.right).concat(r,")"),s="calc(".concat(t.height).concat(i," - ").concat(n.top+n.bottom).concat(r,")"),u=fc.measure(o,s);return{cssWidth:o,cssHeight:s,width:u.width,height:u.height}}},{key:"getPageInfo",value:function(e,t,n){var r=new Lc(t.x-e.x,t.y-e.y,t.width,t.height),i=r.width/r.height,o=n.width/n.height;return{bbox:r,scale:o<i?n.width/r.width:n.height/r.height,fitHorizontal:o<i}}},{key:"dispose",value:function(){}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}}]),t}(sm);Sb([sm.dispose()],Ab.prototype,"dispose",null),(Ab||(Ab={})).defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(e,t){return t(e)}};var Tb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"toSVG",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.graph.trigger("before:export",n);var r=this.view.svg,i=al.create(r).clone(),o=i.node,a=i.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),u=n.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),c=n.preserveDimensions;if(c){var l="boolean"===typeof c?u:c;i.attr({width:l.width,height:l.height})}if(i.removeAttribute("style").attr("viewBox",[u.x,u.y,u.width,u.height].join(" ")),a.removeAttribute("transform"),!1!==n.copyStyles){for(var f=r.ownerDocument,h=Array.from(r.querySelectorAll("*")),d=Array.from(o.querySelectorAll("*")),p=f.styleSheets.length,g=[],v=p-1;v>=0;v-=1)g[v]=f.styleSheets[v],f.styleSheets[v].disabled=!0;var y={};h.forEach(function(e,t){var n=window.getComputedStyle(e,null),r={};Object.keys(n).forEach(function(e){r[e]=n.getPropertyValue(e)}),y[t]=r}),p!==f.styleSheets.length&&g.forEach(function(e,t){f.styleSheets[t]=e});for(var m=0;m<p;m+=1)f.styleSheets[m].disabled=!1;var b={};h.forEach(function(e,t){var n=window.getComputedStyle(e,null),r=y[t],i={};Object.keys(n).forEach(function(e){n.getPropertyValue(e)!==r[e]&&(i[e]=n.getPropertyValue(e))}),b[t]=i}),d.forEach(function(e,t){_()(e).css(b[t])})}var w=n.stylesheet;if("string"===typeof w){var x=r.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(w);i.prepend(al.create("style",{type:"text/css"},[x]))}var C=function(){var r=n.beforeSerialize;if("function"===typeof r){var i=s.call(r,t.graph,o);i instanceof SVGSVGElement&&(o=i)}var a=(new XMLSerializer).serializeToString(o).replace(/&nbsp;/g,"\xa0");t.graph.trigger("after:export",n),e(a)};if(n.serializeImages){var k=i.find("image").map(function(e){return new Promise(function(t){var n=e.attr("xlink:href")||e.attr("href");Mu.imageToDataUri(n,function(n,r){!n&&r&&e.attr("xlink:href",r),t()})})});Promise.all(k).then(C)}else C()}},{key:"toDataURL",value:function(e,t){var n=t.viewBox||this.graph.getContentBBox(),r=a.normalizeSides(t.padding);t.width&&t.height&&(r.left+r.right>=t.width&&(r.left=r.right=0),r.top+r.bottom>=t.height&&(r.top=r.bottom=0));var i=new Lc(-r.left,-r.top,r.left+r.right,r.top+r.bottom);if(t.width&&t.height){var o=n.width+r.left+r.right,s=n.height+r.top+r.bottom;i.scale(o/t.width,s/t.height)}n=Lc.create(n).moveAndExpand(i);var u="number"===typeof t.width&&"number"===typeof t.height?{width:t.width,height:t.height}:n,c=t.ratio?parseFloat(t.ratio):1;Number.isFinite(c)&&0!==c||(c=1);var l={width:Math.max(Math.round(u.width*c),1),height:Math.max(Math.round(u.height*c),1)},f=document.createElement("canvas"),h=f.getContext("2d");f.width=l.width,f.height=l.height;var d=l.width-1,p=l.height-1;h.fillStyle="rgb(1,1,1)",h.fillRect(d,p,1,1);var g=h.getImageData(d,p,1,1).data;if(1!==g[0]||1!==g[1]||1!==g[2])throw new Error("size exceeded");var v=new Image;v.onload=function(){var n=document.createElement("canvas");n.width=l.width,n.height=l.height;var r=n.getContext("2d");r.fillStyle=t.backgroundColor||"white",r.fillRect(0,0,l.width,l.height);try{r.drawImage(v,0,0,l.width,l.height);var i=n.toDataURL(t.type,t.quality);e(i)}catch(o){}},this.toSVG(function(e){v.src="data:image/svg+xml,".concat(encodeURIComponent(e))},Object.assign(Object.assign({},t),{viewBox:n,serializeImages:!0,preserveDimensions:Object.assign({},l)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),t}(sm),Mb=function(e){function t(){var e;return Object(Es.a)(this,t),(e=Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))).widgets=new Map,e}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var n=this.graph.hook.createKnob(t,{clearAll:!0});n&&this.widgets.set(t,n)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var n=this.graph.hook.createKnob(t,{clearAll:!1});n&&this.widgets.set(t,n)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var n=this.widgets.get(t);n&&n.forEach(function(e){return e.dispose()}),this.widgets.delete(t)}}},{key:"isSelectionEnabled",get:function(){return!0===this.options.selecting.enabled}}]),t}(sm),_b=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},jb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){var e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new c.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}},{key:"stopListening",value:function(){var e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&Qm.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),n=t.clientX-this.clientX,r=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(n,r)}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(c.addClass(e,t),c.removeClass(e,n)):(c.removeClass(e,t),c.addClass(e,n)):(c.removeClass(e,t),c.removeClass(e,n))}},{key:"onRightMouseDown",value:function(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}},{key:"allowMouseWheel",value:function(e){return this.pannable&&!e.ctrlKey}},{key:"onMouseWheel",value:function(e,t,n){e.ctrlKey||this.graph.translateBy(-t,-n)}},{key:"autoPanning",value:function(e,t){var n=this.graph.getGraphArea(),r=0,i=0;e<=n.left+10&&(r=-10),t<=n.top+10&&(i=-10),e>=n.right-10&&(r=10),t>=n.bottom-10&&(i=10),0===r&&0===i||this.graph.translateBy(-r,-i)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}},{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&!0===this.widgetOptions.enabled}}]),t}(sm);_b([sm.dispose()],jb.prototype,"dispose",null);var Pb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Nb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"hasScroller",value:function(){return null!=this.graph.scroller.widget}},{key:"getContainer",value:function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}},{key:"init",value:function(){var e=this,t=this.options.autoResize;if(t){var n="boolean"===typeof t?this.getContainer():t;mf.bind(n,function(){var t=e.getContainer(),n=t.offsetWidth,r=t.offsetHeight;e.resize(n,r)})}}},{key:"resize",value:function(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}},{key:"resizeGraph",value:function(e,t){this.graph.transform.resize(e,t)}},{key:"resizeScroller",value:function(e,t){this.graph.scroller.resize(e,t)}},{key:"resizePage",value:function(e,t){var n=this.graph.scroller.widget;n&&n.updatePageSize(e,t)}},{key:"dispose",value:function(){mf.clear(this.getContainer())}}]),t}(sm);Pb([sm.dispose()],Nb.prototype,"dispose",null);var Rb,Db=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ib=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};!function(e){e.hook=function(e,t){return function(n,r,i){var o=i.value,a=t||r;i.value=function(){for(var t=this.options[a],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(null!=t){this.getNativeValue=o.bind.apply(o,[this].concat(r));var u=s.call.apply(s,[t,this.graph].concat(r));if(this.getNativeValue=null,null!=u||!0===e&&null===u)return u}return o.call.apply(o,[this].concat(r))}}},e.after=function(e){return function(t,n,r){var i=r.value,o=e||n;r.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.call.apply(i,[this].concat(t)),a=this.options[o];return null!=a&&(r=s.call.apply(s,[a,this.graph].concat(t))&&r),r}}}}(Rb||(Rb={}));var Lb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new Ty;return e.graph=this.graph,e}},{key:"createView",value:function(){return new cm(this.graph)}},{key:"createRenderer",value:function(){return new Nm(this.graph)}},{key:"createDefsManager",value:function(){return new Ym(this.graph)}},{key:"createGridManager",value:function(){return new Zm(this.graph)}},{key:"createCoordManager",value:function(){return new eb(this.graph)}},{key:"createKnobManager",value:function(){return new Mb(this.graph)}},{key:"createTransform",value:function(e,t){var n=this.getTransformOptions(e);return n.resizable||n.rotatable?new Wm(Object.assign(Object.assign({node:e,graph:this.graph},n),t)):(n.clearAll&&Wm.removeInstances(this.graph),null)}},{key:"createKnob",value:function(e,t){var n=this,r=qm.parseOptionGroup(this.graph,e,this.options.knob),i=Object.assign(Object.assign({},r),t);i.clearAll&&Cm.removeInstances(this.graph),i.clearAll=!1;var o=e.prop("knob"),a=[];return(Array.isArray(o)?o:[o]).forEach(function(t,o){t&&!1!==t.enabled&&("function"===typeof t.enabled&&!1===t.enabled.call(n.graph,e)||r.enabled&&a.push(new Cm(Object.assign({node:e,index:o,graph:n.graph},i))))}),a}},{key:"getTransformOptions",value:function(e){var t=qm.parseOptionGroup(this.graph,e,this.options.resizing),n=qm.parseOptionGroup(this.graph,e,this.options.rotating),r=qm.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},r),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:null!=t.restrict?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:n.enabled,rotateGrid:n.grid})}},{key:"createTransformManager",value:function(){return new fb(this.graph)}},{key:"createHighlightManager",value:function(){return new cb(this.graph)}},{key:"createBackgroundManager",value:function(){return new Dm(this.graph)}},{key:"createClipboard",value:function(){return new Ub}},{key:"createClipboardManager",value:function(){return new sb(this.graph)}},{key:"createSnapline",value:function(){return new _m(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new nb(this.graph)}},{key:"createSelection",value:function(){return new Gm(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new db(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new yb(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new Bm(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new ib(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,n=Ib(e,["enabled"]);return t?new Am(Object.assign({graph:this.graph},n)):null}},{key:"createMiniMapManager",value:function(){return new bb(this.graph)}},{key:"createKeyboard",value:function(){return new kb(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new Ob(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new Ab(this.graph)}},{key:"createFormatManager",value:function(){return new Tb(this.graph)}},{key:"createPanningManager",value:function(){return new jb(this.graph)}},{key:"createSizeManager",value:function(){return new Nb(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,n=null!=t.allowBlank?t.allowBlank:t.dangling;if("function"!==typeof n)return!!n;var r=this.graph.findViewByCell(e),i=e.getSourceCell(),o=e.getTargetCell(),a=this.graph.findViewByCell(i),u=this.graph.findViewByCell(o);return s.call(n,this.graph,{edge:e,edgeView:r,sourceCell:i,targetCell:o,sourceView:a,targetView:u,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})}},{key:"validateEdge",value:function(e,t,n){if(!this.allowConnectToBlank(e)){var r=e.getSourceCellId(),i=e.getTargetCellId();if(!r||!i)return!1}var o=this.options.connecting.validateEdge;return!o||s.call(o,this.graph,{edge:e,type:t,previous:n})}},{key:"validateMagnet",value:function(e,t,n){if("passive"!==t.getAttribute("magnet")){var r=this.options.connecting.validateMagnet;return!r||s.call(r,this.graph,{e:n,magnet:t,view:e,cell:e.cell})}return!1}},{key:"getDefaultEdge",value:function(e,t){var n,r=this.options.connecting.createEdge;return r&&(n=s.call(r,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),null==n&&(n=new em),n}},{key:"validateConnection",value:function(e,t,n,r,i,o,a){var u=this,c=this.options.connecting,l=c.allowLoop,f=c.allowNode,h=c.allowEdge,d=c.allowPort,p=null!=c.allowMulti?c.allowMulti:c.multi,g=c.validateConnection,v=o?o.cell:null,y="target"===i?n:e,m="target"===i?r:t,b=!0,w=function(c){var l="source"===i?a?a.port:null:v?v.getSourcePortId():null,f="target"===i?a?a.port:null:v?v.getTargetPortId():null;return s.call(c,u.graph,{edge:v,edgeView:o,sourceView:e,targetView:n,sourcePort:l,targetPort:f,sourceMagnet:t,targetMagnet:r,sourceCell:e?e.cell:null,targetCell:n?n.cell:null,type:i})};if(null!=l&&("boolean"===typeof l?l||e!==n||(b=!1):b=w(l)),b&&null!=d&&("boolean"===typeof d?!d&&m&&(b=!1):b=w(d)),b&&null!=h&&("boolean"===typeof h?!h&&ky.isEdgeView(y)&&(b=!1):b=w(h)),b&&null!=f&&("boolean"===typeof f?f||null==y||Ey.isNodeView(y)&&null==m&&(b=!1):b=w(f)),b&&null!=p&&o){var x=o.cell,C="source"===i?a:x.getSource(),k="target"===i?a:x.getTarget(),E=a?this.graph.getCellById(a.cell):null;if(C&&k&&C.cell&&k.cell&&E)if("function"===typeof p)b=w(p);else{var O=this.model.getConnectedEdges(E,{outgoing:"source"===i,incoming:"target"===i});if(O.length)if("withPort"===p)O.some(function(e){var t=e.getSource(),n=e.getTarget();return t&&n&&t.cell===C.cell&&n.cell===k.cell&&null!=t.port&&t.port===C.port&&null!=n.port&&n.port===k.port})&&(b=!1);else if(!p){O.some(function(e){var t=e.getSource(),n=e.getTarget();return t&&n&&t.cell===C.cell&&n.cell===k.cell})&&(b=!1)}}}return b&&null!=g&&(b=w(g)),b}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict,n="function"===typeof t?s.call(t,this.graph,e):t;return"number"===typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}},{key:"onViewUpdated",value:function(e,t,n){t&Nm.FLAG_INSERT||n.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,n)}},{key:"onViewPostponed",value:function(e,t,n){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={graph:this.graph},n=this.getCellView(e);if(n)return new n(e,t);var r=e.view;if(null!=r&&"string"===typeof r){var i=Qp.registry.get(r);return i?new i(e,t):Qp.registry.onNotFound(r)}return e.isNode()?new Ey(e,t):e.isEdge()?new ky(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return"string"===typeof t&&(t=rm.componentRegistry.get(t)||t),i.isPlainObject(t)&&(t=t.render),"function"===typeof t?s.call(t,this.graph,e):t}},{key:"shouldUpdateHTMLComponent",value:function(e){var t=e.getHTML();if("string"===typeof t&&(t=rm.componentRegistry.get(t)||t),i.isPlainObject(t)){var n=t.shouldComponentUpdate;return"function"===typeof n?s.call(n,this.graph,e):!!n}return!1}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),t}(sm);Db([Rb.hook()],Lb.prototype,"createModel",null),Db([Rb.hook()],Lb.prototype,"createView",null),Db([Rb.hook()],Lb.prototype,"createRenderer",null),Db([Rb.hook()],Lb.prototype,"createDefsManager",null),Db([Rb.hook()],Lb.prototype,"createGridManager",null),Db([Rb.hook()],Lb.prototype,"createCoordManager",null),Db([Rb.hook()],Lb.prototype,"createKnobManager",null),Db([Rb.hook()],Lb.prototype,"createTransform",null),Db([Rb.hook()],Lb.prototype,"createKnob",null),Db([Rb.hook()],Lb.prototype,"createTransformManager",null),Db([Rb.hook()],Lb.prototype,"createHighlightManager",null),Db([Rb.hook()],Lb.prototype,"createBackgroundManager",null),Db([Rb.hook()],Lb.prototype,"createClipboard",null),Db([Rb.hook()],Lb.prototype,"createClipboardManager",null),Db([Rb.hook()],Lb.prototype,"createSnapline",null),Db([Rb.hook()],Lb.prototype,"createSnaplineManager",null),Db([Rb.hook()],Lb.prototype,"createSelection",null),Db([Rb.hook()],Lb.prototype,"createSelectionManager",null),Db([Rb.hook()],Lb.prototype,"allowRubberband",null),Db([Rb.hook()],Lb.prototype,"createHistoryManager",null),Db([Rb.hook()],Lb.prototype,"createScroller",null),Db([Rb.hook()],Lb.prototype,"createScrollerManager",null),Db([Rb.hook()],Lb.prototype,"allowPanning",null),Db([Rb.hook()],Lb.prototype,"createMiniMap",null),Db([Rb.hook()],Lb.prototype,"createMiniMapManager",null),Db([Rb.hook()],Lb.prototype,"createKeyboard",null),Db([Rb.hook()],Lb.prototype,"createMouseWheel",null),Db([Rb.hook()],Lb.prototype,"createPrintManager",null),Db([Rb.hook()],Lb.prototype,"createFormatManager",null),Db([Rb.hook()],Lb.prototype,"createPanningManager",null),Db([Rb.hook()],Lb.prototype,"createSizeManager",null),Db([Rb.after()],Lb.prototype,"onViewUpdated",null),Db([Rb.after()],Lb.prototype,"onViewPostponed",null),Db([Rb.hook()],Lb.prototype,"getCellView",null),Db([Rb.hook(!0)],Lb.prototype,"createCellView",null),Db([Rb.hook()],Lb.prototype,"getHTMLComponent",null),Db([Rb.hook()],Lb.prototype,"shouldUpdateHTMLComponent",null),Db([Rb.hook()],Lb.prototype,"onEdgeLabelRendered",null),Db([Rb.hook()],Lb.prototype,"onPortRendered",null),Db([Rb.hook()],Lb.prototype,"onToolItemCreated",null);var Fb,Bb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},zb=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=qm.get(e),n.css=new hm(Object(xp.a)(n)),n.hook=new Lb(Object(xp.a)(n)),n.view=n.hook.createView(),n.defs=n.hook.createDefsManager(),n.coord=n.hook.createCoordManager(),n.transform=n.hook.createTransformManager(),n.knob=n.hook.createKnobManager(),n.highlight=n.hook.createHighlightManager(),n.grid=n.hook.createGridManager(),n.background=n.hook.createBackgroundManager(),n.model=n.hook.createModel(),n.renderer=n.hook.createRenderer(),n.clipboard=n.hook.createClipboardManager(),n.snapline=n.hook.createSnaplineManager(),n.selection=n.hook.createSelectionManager(),n.history=n.hook.createHistoryManager(),n.scroller=n.hook.createScrollerManager(),n.minimap=n.hook.createMiniMapManager(),n.keyboard=n.hook.createKeyboard(),n.mousewheel=n.hook.createMouseWheel(),n.print=n.hook.createPrintManager(),n.format=n.hook.createFormatManager(),n.panning=n.hook.createPanningManager(),n.size=n.hook.createSizeManager(),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"isNode",value:function(e){return e.isNode()}},{key:"isEdge",value:function(e){return e.isEdge()}},{key:"resetCells",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.resetCells(e,t),this}},{key:"clearCells",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.model.clear(e),this}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.model.toJSON(e)}},{key:"parseJSON",value:function(e){return this.model.parseJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.fromJSON(e,t),this}},{key:"getCellById",value:function(e){return this.model.getCell(e)}},{key:"addNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addNode(e,t)}},{key:"addNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addCell(e.map(function(e){return cy.isNode(e)?e:t.createNode(e)}),n)}},{key:"createNode",value:function(e){return this.model.createNode(e)}},{key:"removeNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addEdge(e,t)}},{key:"addEdges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addCell(e.map(function(e){return xy.isEdge(e)?e:t.createEdge(e)}),n)}},{key:"removeEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"createEdge",value:function(e){return this.model.createEdge(e)}},{key:"addCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addCell(e,t),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"removeCells",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCells(e,t)}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeConnectedEdges(e,t)}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.disconnectConnectedEdges(e,t),this}},{key:"hasCell",value:function(e){return this.model.has(e)}},{key:"getCell",value:function(e){return this.model.getCell(e)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(e){return this.model.getOutgoingEdges(e)}},{key:"getIncomingEdges",value:function(e){return this.model.getIncomingEdges(e)}},{key:"getConnectedEdges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getConnectedEdges(e,t)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(e){return this.model.isRoot(e)}},{key:"isLeafNode",value:function(e){return this.model.isLeaf(e)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getNeighbors(e,t)}},{key:"isNeighbor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isNeighbor(e,t,n)}},{key:"getSuccessors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getSuccessors(e,t)}},{key:"isSuccessor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isSuccessor(e,t,n)}},{key:"getPredecessors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getPredecessors(e,t)}},{key:"isPredecessor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isPredecessor(e,t,n)}},{key:"getCommonAncestor",value:function(){var e;return(e=this.model).getCommonAncestor.apply(e,arguments)}},{key:"getSubGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getSubGraph(e,t)}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.cloneSubGraph(e,t)}},{key:"cloneCells",value:function(e){return this.model.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){return this.model.getNodesFromPoint(e,t)}},{key:"getNodesInArea",value:function(e,t,n,r,i){return this.model.getNodesInArea(e,t,n,r,i)}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getNodesUnderNode(e,t)}},{key:"searchCell",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.search(e,t,n),this}},{key:"getShortestPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.getShortestPath(e,t,n)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getCellsBBox(e,t)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.model.startBatch(e,t)}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.model.stopBatch(e,t)}},{key:"batchUpdate",value:function(e,t,n){var r="string"===typeof e?e:"update",i="string"===typeof e?t:e,o="function"===typeof t?n:t;this.startBatch(r,o);var a=i();return this.stopBatch(r,o),a}},{key:"updateCellId",value:function(e,t){return this.model.updateCellId(e,t)}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.renderer.freeze(e),this}},{key:"unfreeze",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.renderer.unfreeze(e),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(e){return this.renderer.setAsync(e),this}},{key:"findView",value:function(e){return ay.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}},{key:"findViews",value:function(e){return Lc.isRectangleLike(e)?this.findViewsInArea(e):Ic.isPointLike(e)?this.findViewsFromPoint(e):[]}},{key:"findViewByCell",value:function(e){return this.renderer.findViewByCell(e)}},{key:"findViewByElem",value:function(e){return this.renderer.findViewByElem(e)}},{key:"findViewsFromPoint",value:function(e,t){var n="number"===typeof e?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(n)}},{key:"findViewsInArea",value:function(e,t,n,r,i){var o="number"===typeof e?{x:e,y:t,width:n,height:r}:e,a="number"===typeof e?i:t;return this.renderer.findViewsInArea(o,a)}},{key:"isViewMounted",value:function(e){return this.renderer.isViewMounted(e)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(e){return"undefined"===typeof e?this.transform.getMatrix():(this.transform.setMatrix(e),this)}},{key:"resize",value:function(e,t){return this.size.resize(e,t),this}},{key:"resizeGraph",value:function(e,t){return this.size.resizeGraph(e,t),this}},{key:"resizeScroller",value:function(e,t){return this.size.resizeScroller(e,t),this}},{key:"resizePage",value:function(e,t){return this.size.resizePage(e,t),this}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"undefined"===typeof e?this.transform.getScale():(this.transform.scale(e,t,n,r),this)}},{key:"zoom",value:function(e,t){var n=this.scroller.widget;if(n){if("undefined"===typeof e)return n.zoom();n.zoom(e,t)}else{if("undefined"===typeof e)return this.transform.getZoom();this.transform.zoom(e,t)}return this}},{key:"zoomTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.scroller.widget;n?n.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0}))}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.scroller.widget;return n?n.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}},{key:"rotate",value:function(e,t,n){return"undefined"===typeof e?this.transform.getRotation():(this.transform.rotate(e,t,n),this)}},{key:"translate",value:function(e,t){return"undefined"===typeof e?this.transform.getTranslation():(this.transform.translate(e,t),this)}},{key:"translateBy",value:function(e,t){var n=this.translate(),r=n.tx+e,i=n.ty+t;return this.translate(r,i)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.getContentArea(e)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.getContentBBox(e)}},{key:"fitToContent",value:function(e,t,n,r){return this.transform.fitToContent(e,t,n,r)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.scaleContentToFit(e),this}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,n){var r=this.scroller.widget;return r?r.centerPoint(e,t,n):this.transform.centerPoint(e,t),this}},{key:"centerContent",value:function(e){var t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}},{key:"centerCell",value:function(e,t){var n=this.scroller.widget;return n?n.centerCell(e,t):this.transform.centerCell(e),this}},{key:"positionPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.scroller.widget;return i?i.positionPoint(e,t,n,r):this.transform.positionPoint(e,t,n),this}},{key:"positionRect",value:function(e,t,n){var r=this.scroller.widget;return r?r.positionRect(e,t,n):this.transform.positionRect(e,t),this}},{key:"positionCell",value:function(e,t,n){var r=this.scroller.widget;return r?r.positionCell(e,t,n):this.transform.positionCell(e,t),this}},{key:"positionContent",value:function(e,t){var n=this.scroller.widget;return n?n.positionContent(e,t):this.transform.positionContent(e,t),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(e,t){return this.coord.snapToGrid(e,t)}},{key:"pageToLocal",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.pageToLocalRect(e,t,n,r):this.coord.pageToLocalPoint(e,t)}},{key:"localToPage",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.localToPageRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.localToPageRect(e,t,n,r):this.coord.localToPagePoint(e,t)}},{key:"clientToLocal",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.clientToLocalRect(e,t,n,r):this.coord.clientToLocalPoint(e,t)}},{key:"localToClient",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.localToClientRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.localToClientRect(e,t,n,r):this.coord.localToClientPoint(e,t)}},{key:"localToGraph",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.localToGraphRect(e,t,n,r):this.coord.localToGraphPoint(e,t)}},{key:"graphToLocal",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.graphToLocalRect(e,t,n,r):this.coord.graphToLocalPoint(e,t)}},{key:"clientToGraph",value:function(e,t,n,r){return Lc.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r?this.coord.clientToGraphRect(e,t,n,r):this.coord.clientToGraphPoint(e,t)}},{key:"defineFilter",value:function(e){return this.defs.filter(e)}},{key:"defineGradient",value:function(e){return this.defs.gradient(e)}},{key:"defineMarker",value:function(e){return this.defs.marker(e)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(e){return this.grid.setGridSize(e),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(e){return this.grid.draw(e),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(e,t){var n=this.scroller.widget;return null==n||null!=this.options.background&&t?this.background.draw(e):n.backgroundManager.draw(e),this}},{key:"clearBackground",value:function(e){var t=this.scroller.widget;return null==t||null!=this.options.background&&e?this.background.clear():t.backgroundManager.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(e){return null!=e?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.clipboard.copy(e,t),this}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.clipboard.cut(e,t),this}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return this.clipboard.paste(e,t)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(e){return null!=e?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.history.undo(e),this}},{key:"undoAndCancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.history.cancel(e),this}},{key:"redo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.history.redo(e),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.history.clean(e)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(e){return null!=e?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(e,t,n){return this.keyboard.on(e,t,n),this}},{key:"unbindKey",value:function(e,t){return this.keyboard.off(e,t),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}},{key:"enablePanning",value:function(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}},{key:"lockScroller",value:function(){var e;null===(e=this.scroller.widget)||void 0===e||e.lock()}},{key:"unlockScroller",value:function(){var e;null===(e=this.scroller.widget)||void 0===e||e.unlock()}},{key:"updateScroller",value:function(){var e;null===(e=this.scroller.widget)||void 0===e||e.update()}},{key:"getScrollbarPosition",value:function(){return this.scroller.widget.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(e,t,n){return this.scroller.widget.scrollbarPosition(e,t,n),this}},{key:"scrollToPoint",value:function(e,t,n){return this.scroller.widget.scrollToPoint(e,t,n),this}},{key:"scrollToContent",value:function(e){return this.scroller.widget.scrollToContent(e),this}},{key:"scrollToCell",value:function(e,t){return this.scroller.widget.scrollToCell(e,t),this}},{key:"transitionToPoint",value:function(e,t,n){return this.scroller.widget.transitionToPoint(e,t,n),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.scroller.widget.transitionToRect(e,t),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(e){return null!=e?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(e){return null!=e?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return!1!==this.selection.widget.options.movable}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(e){return null!=e?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(e){return null!=e?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return!0===this.selection.widget.options.strict}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(e){return null!=e?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(e){this.selection.setModifiers(e)}},{key:"setSelectionFilter",value:function(e){return this.selection.setFilter(e),this}},{key:"setSelectionDisplayContent",value:function(e){return this.selection.setContent(e),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(e){return this.selection.clean(e),this}},{key:"resetSelection",value:function(e,t){return this.selection.reset(e,t),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(e){return this.selection.isSelected(e)}},{key:"select",value:function(e,t){return this.selection.select(e,t),this}},{key:"unselect",value:function(e,t){return this.selection.unselect(e,t),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(e){if(null==e)return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this;e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline())}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(e){return this.snapline.widget.setFilter(e),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return!0===this.snapline.widget.options.resizing}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(e){return null!=e?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return!0===this.snapline.widget.options.sharp}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(e){return null!=e?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(e){return this.snapline.widget.options.tolerance=e,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.format.toSVG(e,t)}},{key:"toDataURL",value:function(e,t){this.format.toDataURL(e,t)}},{key:"toPNG",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.format.toPNG(e,t)}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.format.toJPEG(e,t)}},{key:"printPreview",value:function(e){this.print.show(e)}},{key:"dispose",value:function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}},{key:"container",get:function(){return this.view.container}},{key:Symbol.toStringTag,get:function(){return t.toStringTag}}]),t}(Tp);Bb([am.checkScroller()],zb.prototype,"lockScroller",null),Bb([am.checkScroller()],zb.prototype,"unlockScroller",null),Bb([am.checkScroller()],zb.prototype,"updateScroller",null),Bb([am.checkScroller()],zb.prototype,"getScrollbarPosition",null),Bb([am.checkScroller()],zb.prototype,"setScrollbarPosition",null),Bb([am.checkScroller()],zb.prototype,"scrollToPoint",null),Bb([am.checkScroller()],zb.prototype,"scrollToContent",null),Bb([am.checkScroller()],zb.prototype,"scrollToCell",null),Bb([am.checkScroller()],zb.prototype,"transitionToPoint",null),Bb([am.checkScroller()],zb.prototype,"transitionToRect",null),Bb([Tp.dispose()],zb.prototype,"dispose",null),(Fb=zb||(zb={})).View=cm,Fb.Hook=Lb,Fb.Renderer=Nm,Fb.Keyboard=kb,Fb.MouseWheel=Ob,Fb.BaseManager=sm,Fb.DefsManager=Ym,Fb.GridManager=Zm,Fb.CoordManager=eb,Fb.PrintManager=Ab,Fb.FormatManager=Tb,Fb.MiniMapManager=bb,Fb.HistoryManager=yb,Fb.SnaplineManager=nb,Fb.ScrollerManager=ib,Fb.ClipboardManager=sb,Fb.TransformManager=fb,Fb.HighlightManager=cb,Fb.BackgroundManager=Dm,Fb.SelectionManager=db,function(e){e.toStringTag="X6.".concat(e.name),e.isGraph=function(t){if(null==t)return!1;if(t instanceof e)return!0;var n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&null!=r.hook&&null!=r.view&&null!=r.model}}(zb||(zb={})),function(e){e.render=function(t,n){var r=t instanceof HTMLElement?new e({container:t}):new e(t);return null!=n&&r.fromJSON(n),r}}(zb||(zb={})),function(e){e.registerNode=cy.registry.register,e.registerEdge=xy.registry.register,e.registerView=Qp.registry.register,e.registerAttr=Wh.registry.register,e.registerGrid=cd.registry.register,e.registerFilter=rd.registry.register,e.registerNodeTool=bg.registry.register,e.registerEdgeTool=xg.registry.register,e.registerBackground=kd.registry.register,e.registerHighlighter=Pd.registry.register,e.registerPortLayout=Xd.registry.register,e.registerPortLabelLayout=vp.registry.register,e.registerMarker=Eh.registry.register,e.registerRouter=Rv.registry.register,e.registerConnector=Yv.registry.register,e.registerAnchor=Ig.registry.register,e.registerEdgeAnchor=Vg.registry.register,e.registerConnectionPoint=Qg.registry.register,e.registerConnectionStrategy=Up.registry.register,e.registerHTMLComponent=rm.componentRegistry.register}(zb||(zb={})),function(e){e.unregisterNode=cy.registry.unregister,e.unregisterEdge=xy.registry.unregister,e.unregisterView=Qp.registry.unregister,e.unregisterAttr=Wh.registry.unregister,e.unregisterGrid=cd.registry.unregister,e.unregisterFilter=rd.registry.unregister,e.unregisterNodeTool=bg.registry.unregister,e.unregisterEdgeTool=xg.registry.unregister,e.unregisterBackground=kd.registry.unregister,e.unregisterHighlighter=Pd.registry.unregister,e.unregisterPortLayout=Xd.registry.unregister,e.unregisterPortLabelLayout=vp.registry.unregister,e.unregisterMarker=Eh.registry.unregister,e.unregisterRouter=Rv.registry.unregister,e.unregisterConnector=Yv.registry.unregister,e.unregisterAnchor=Ig.registry.unregister,e.unregisterEdgeAnchor=Vg.registry.unregister,e.unregisterConnectionPoint=Qg.registry.unregister,e.unregisterConnectionStrategy=Up.registry.unregister,e.unregisterHTMLComponent=rm.componentRegistry.unregister}(zb||(zb={}));var Vb,Ub=function(){function e(){Object(Es.a)(this,e),this.cells=[]}return Object(Oc.a)(e,[{key:"copy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object.assign({},n);var i=(Ty.isModel(t)?t:t.model).cloneSubGraph(e,n);this.cells=r.sortBy(Object.keys(i).map(function(e){return i[e]}),function(e){return e.isEdge()?2:1}),this.serialize(n)}},{key:"cut",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.copy(e,t,n),(zb.isGraph(t)?t.model:t).batchUpdate("cut",function(){e.forEach(function(e){return e.remove()})})}},{key:"paste",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(Object.assign({},this.options),n),i=r.offset,o=r.edgeProps,a=r.nodeProps,s=20,u=20;i&&(s="number"===typeof i?i:i.dx,u="number"===typeof i?i:i.dy),this.deserialize(r);var c=this.cells;c.forEach(function(e){e.model=null,e.removeProp("zIndex"),(s||u)&&e.translate(s,u),a&&e.isNode()&&e.prop(a),o&&e.isEdge()&&e.prop(o)});var l=zb.isGraph(e)?e.model:e;return l.batchUpdate("paste",function(){l.addCells(t.cells)}),this.copy(c,e,n),c}},{key:"serialize",value:function(e){!1!==e.useLocalStorage&&Vb.save(this.cells)}},{key:"deserialize",value:function(e){if(e.useLocalStorage){var t=Vb.fetch();t&&(this.cells=t)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],Vb.clean()}}]),e}();!function(e){var t="".concat(_d.prefixCls,".clipboard.cells");e.save=function(e){if(window.localStorage){var n=e.map(function(e){return e.toJSON()});localStorage.setItem(t,JSON.stringify(n))}},e.fetch=function(){if(window.localStorage){var e=localStorage.getItem(t),n=e?JSON.parse(e):[];if(n)return Ty.fromJSON(n)}},e.clean=function(){window.localStorage&&localStorage.removeItem(t)}}(Vb||(Vb={}));var Gb,Hb=function(){function e(t){Object(Es.a)(this,e),this.halo=t}return Object(Oc.a)(e,[{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(e){return this.options.useCellGeometry?e.cell.getBBox():e.getBBox()},content:function(e){var t=o.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),n=e.cell,r=n.getBBox();return t({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(n.getAngle())})},magnet:function(e){return e.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(e){var t=e.x,n=e.y;this.halo.startBatch();var r=this.graph,i=this.createEdgeConnectedToSource();i.setTarget({x:t,y:n}),this.model.addEdge(i,{validation:!1,halo:this.halo.cid,async:!1}),r.view.undelegateEvents(),this.edgeView=r.renderer.findViewByCell(i),this.edgeView.prepareArrowheadDragging("target",{x:t,y:n,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),n=this.graph.hook.getDefaultEdge(this.view,e);return n.setSource(t),n}},{key:"getMagnet",value:function(e,t){var n=this.options.magnet;if("function"===typeof n){var r=s.call(n,this.halo,e,t);if(r instanceof SVGElement)return r}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(e,t){var n={cell:e.cell.id};if(t!==e.container){var r=t.getAttribute("port");r?n.port=r:n.selector=e.getSelector(t)}return n}},{key:"doLink",value:function(e){var t=e.e,n=e.x,r=e.y;this.edgeView&&this.edgeView.onMouseMove(t,n,r)}},{key:"stopLink",value:function(e){var t=e.e,n=e.x,r=e.y,i=this.edgeView;if(i){i.onMouseUp(t,n,r);var o=i.cell;o.hasLoop()&&this.makeLoopEdge(o),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:o}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(e){var t=null,n=null,r=this.options.loopEdgeWidth,i=this.graph.options,o=new Lc(0,0,i.width,i.height),a=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(e){var i=null,s=0,u=0;switch(e){case"top":i=new Ic(a.x+a.width/2,a.y-r),s=r/2;break;case"bottom":i=new Ic(a.x+a.width/2,a.y+a.height+r),s=r/2;break;case"left":i=new Ic(a.x-r,a.y+a.height/2),u=r/2;break;case"right":i=new Ic(a.x+a.width+r,a.y+a.height/2),u=r/2}return!!i&&(t=i.translate(-s,-u),n=i.translate(s,u),o.containsPoint(t)&&o.containsPoint(n))})&&t&&n&&e.setVertices([t,n])}},{key:"startResize",value:function(e){var t=e.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(kc.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),zm("node:resize",t,this.view)}},{key:"doResize",value:function(e){var t=e.e,n=e.dx,r=e.dy,i=this.node.getSize(),o=Math.max(i.width+(this.flip?n:r),1),a=Math.max(i.height+(this.flip?r:n),1);this.node.resize(o,a,{absolute:!0}),zm("node:resizing",t,this.view)}},{key:"stopResize",value:function(e){var t=e.e;this.view.removeClass("node-resizing"),zm("node:resized",t,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(e){var t=e.e,n=e.x,r=e.y;this.halo.startBatch();var i=this.options.clone(this.cell,{clone:!0});if(!ay.isCell(i))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,n,r),this.model.addCell(i,{halo:this.halo.cid,async:!1});var o=this.graph.renderer.findViewByCell(i);o.onMouseDown(t,n,r),this.halo.setEventData(t,{cloneView:o})}},{key:"centerNodeAtCursor",value:function(e,t,n){var r=e.getBBox().getCenter(),i=t-r.x,o=n-r.y;e.translate(i,o)}},{key:"doClone",value:function(e){var t=e.e,n=e.x,r=e.y,i=this.halo.getEventData(t).cloneView;i&&i.onMouseMove(t,n,r)}},{key:"stopClone",value:function(e){var t=e.e,n=e.x,r=e.y,i=this.halo.getEventData(t).cloneView;i&&i.onMouseUp(t,n,r),this.halo.stopBatch()}},{key:"startFork",value:function(e){var t=e.e,n=e.x,r=e.y;this.halo.startBatch();var i=this.options.clone(this.cell,{fork:!0});if(!ay.isCell(i))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,n,r),this.model.addCell(i,{halo:this.halo.cid,async:!1});var o=this.createEdgeConnectedToSource(),a=this.graph.renderer.findViewByCell(i),s=this.getMagnet(a,"target"),u=this.getEdgeTerminal(a,s);o.setTarget(u),this.model.addEdge(o,{halo:this.halo.cid,async:!1}),a.onMouseDown(t,n,r),this.halo.setEventData(t,{cloneView:a})}},{key:"doFork",value:function(e){var t=e.e,n=e.x,r=e.y,i=this.halo.getEventData(t).cloneView;i&&i.onMouseMove(t,n,r)}},{key:"stopFork",value:function(e){var t=e.e,n=e.x,r=e.y,i=this.halo.getEventData(t).cloneView;i&&i.onMouseUp(t,n,r),this.halo.stopBatch()}},{key:"startRotate",value:function(e){var t=this,n=e.e,r=e.x,i=e.y;this.halo.startBatch();var o=this.node.getBBox().getCenter(),a=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(e,t){return t.isNode()&&e.push(t),e},a),this.halo.setEventData(n,{center:o,nodes:a,rotateStartAngles:a.map(function(e){return e.getAngle()}),clientStartAngle:new Ic(r,i).theta(o)}),a.forEach(function(e){var r=t.graph.findViewByCell(e);r&&(r.addClass("node-rotating"),zm("node:rotate",n,r))})}},{key:"doRotate",value:function(e){var t=this,n=e.e,r=e.x,i=e.y,o=this.halo.getEventData(n),a=o.clientStartAngle-new Ic(r,i).theta(o.center);o.nodes.forEach(function(e,r){var i=o.rotateStartAngles[r],s=Md.snapToGrid(i+a,t.options.rotateGrid);e.rotate(s,{absolute:!0,center:o.center,halo:t.halo.cid}),zm("node:rotating",n,t.graph.findViewByCell(e))})}},{key:"stopRotate",value:function(e){var t=this,n=e.e;this.halo.getEventData(n).nodes.forEach(function(e){var r=t.graph.findViewByCell(e);r.removeClass("node-rotating"),zm("node:rotated",n,r)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}},{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}}]),e}(),Wb=function(){function e(t){Object(Es.a)(this,e),this.halo=t}return Object(Oc.a)(e,[{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(e){return e.graph.localToGraph(e.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}},{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}}]),e}(),qb=function(e){function t(){return Object(Es.a)(this,t),Object(Sc.a)(this,Object(Ac.a)(t).apply(this,arguments))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"init",value:function(e){this.options=i.merge(t.defaultOptions,this.cell.isNode()?new Hb(this).getPresets():this.cell.isEdge()?new Wb(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,n=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),n.on("halo:destroy",this.remove,this),e.on("*",this.update,this),n.on("scale",this.update,this),n.on("translate",this.update,this),Object(xf.a)(Object(Ac.a)(t.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,n=this.graph,r=this.view.cell;this.undelegateEvents(),r.off("removed",this.remove,this),e.off("reseted",this.remove,this),n.off("halo:destroy",this.remove,this),e.off("*",this.update,this),n.off("scale",this.update,this),n.off("translate",this.update,this),Object(xf.a)(Object(Ac.a)(t.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(Gb.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(Gb.NODE_CLS),Object(xf.a)(Object(Ac.a)(t.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,n=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var r="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(r,!this.$handleContainer.hasClass(r)&&e.width<n&&e.height<n),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),"surround"!==this.type&&"toolbar"!==this.type||this.hasHandle("fork")&&this.toggleFork()}}},{key:"updateContent",value:function(){var e=this.options.content;if("function"===typeof e){var t=s.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,n="function"===typeof t?s.call(t,this,e):t;return Lc.create(Object.assign({x:0,y:0,width:1,height:1},n))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),n=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!n),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}},{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}}]),t}(bm);(qb||(qb={})).defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(e){return e.clone().removeZIndex()}},Object.getOwnPropertyNames(vm.prototype).forEach(function(e){"constructor"!==e&&Object.defineProperty(qb.prototype,e,Object.getOwnPropertyDescriptor(vm.prototype,e))}),(Gb||(Gb={})).NODE_CLS="has-widget-halo";var Xb,$b,Yb=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Kb=function(e){function t(e){var n;return Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).options=Object.assign(Object.assign({},t.defaults),e),n.container=document.createElement("div"),n.$container=n.$(n.container).addClass(n.prefixClassName("widget-dnd")),n.draggingGraph=new zb(Object.assign(Object.assign({},n.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),n.$container.append(n.draggingGraph.container),n}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"start",value:function(e,n){var r=n;r.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=e,this.prepareDragging(e,r.clientX,r.clientY);var i=this.updateNodePosition(r.clientX,r.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:r,node:e,cell:e,view:this.draggingView,x:i.x,y:i.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(t.documentEvents,r.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,n){var r=this.draggingGraph,i=r.model,o=this.options.getDragNode(e,{sourceNode:e,draggingGraph:r,targetGraph:this.targetGraph});o.position(0,0);var a=5;if(this.isSnaplineEnabled()&&(a+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var s=this.targetGraph.transform.getScale();r.scale(s.sx,s.sy),a*=Math.max(s.sx,s.sy)}else r.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),i.resetCells([o]);var u=r.findViewByCell(o);u.undelegateEvents(),u.cell.off("changed"),r.fitToContent({padding:a,allowNewOrigin:"any"});var c=u.getBBox();this.geometryBBox=u.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(c.getTopLeft()),this.draggingNode=o,this.draggingView=u,this.draggingBBox=o.getBBox(),this.padding=a,this.originOffset=this.updateGraphPosition(t,n)}},{key:"updateGraphPosition",value:function(e,t){var n=document.body.scrollTop||document.documentElement.scrollTop,r=this.delta,i=this.geometryBBox,o=this.padding||5,a={left:e-r.x-i.width/2-o,top:t-r.y-i.height/2-o+n};return this.draggingGraph&&this.$container.offset(a),a}},{key:"updateNodePosition",value:function(e,t){var n=this.targetGraph.clientToLocal(e,t),r=this.draggingBBox;return n.x-=r.width/2,n.y-=r.height/2,this.draggingNode.position(n.x,n.y),n}},{key:"snap",value:function(e){var t=e.cell,n=e.current,r=e.options,i=t;if(r.snapped){var o=this.draggingBBox;i.position(o.x+r.tx,o.y+r.ty,{silent:!0}),this.draggingView.translate(),i.position(n.x,n.y,{silent:!0}),this.snapOffset={x:r.tx,y:r.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var n=this.normalizeEvent(e),r=n.clientX,i=n.clientY;this.updateGraphPosition(r,i);var o=this.updateNodePosition(r,i),a=this.targetGraph.options.embedding.enabled,s=(a||this.isSnaplineEnabled())&&this.isInsideValidArea({x:r,y:i});if(a){t.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var u=t.getEventData(n);s?t.processEmbedding(n,u):t.clearEmbedding(u),this.candidateEmbedView=u.candidateEmbedView}this.isSnaplineEnabled()&&(s?this.snapline.snapOnMoving({e:n,view:t,x:o.x,y:o.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,n=this.draggingNode;if(n){var r=this.normalizeEvent(e),i=this.draggingView,o=this.draggingBBox,a=this.snapOffset,u=o.x,c=o.y;a&&(u+=a.x,c+=a.y),n.position(u,c,{silent:!0});var l=this.drop(n,{x:r.clientX,y:r.clientY}),f=function(e){e?(t.onDropped(n),t.targetGraph.options.embedding.enabled&&i&&(i.setEventData(r,{cell:e,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),i.finalizeEmbedding(r,i.getEventData(r)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};s.isAsync(l)?(this.undelegateDocumentEvents(),l.then(f)):f(l)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var n=this.options.animation;if(n){var r="object"===typeof n&&n.duration||150,i="object"===typeof n&&n.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,r,i,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,n=this.targetGraph,r=this.targetScroller;if(r)if(r.options.autoResize)t=this.getDropArea(r.container);else{var i=this.getDropArea(r.container);t=this.getDropArea(n.container).intersectsWithRect(i)}else t=this.getDropArea(n.container);return t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),n=t.offset(),r=document.body.scrollTop||document.documentElement.scrollTop,i=document.body.scrollLeft||document.documentElement.scrollLeft;return Lc.create({x:n.left+parseInt(t.css("border-left-width"),10)-i,y:n.top+parseInt(t.css("border-top-width"),10)-r,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var n=this;if(this.isInsideValidArea(t)){var r=this.targetGraph,i=r.model,o=r.clientToLocal(t),a=this.sourceNode,u=this.options.getDropNode(e,{sourceNode:a,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),c=u.getBBox();o.x+=c.x-c.width/2,o.y+=c.y-c.height/2;var l=this.snapOffset?1:r.getGridSize();u.position(Md.snapToGrid(o.x,l),Md.snapToGrid(o.y,l)),u.removeZIndex();var f=this.options.validateNode,h=!f||f(u,{sourceNode:a,draggingNode:e,droppingNode:u,targetGraph:r,draggingGraph:this.draggingGraph});return"boolean"===typeof h?h?(i.addCell(u,{stencil:this.cid}),u):null:s.toDeferredBoolean(h).then(function(e){return e?(i.addCell(u,{stencil:n.cid}),u):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}},{key:"dispose",value:function(){this.remove()}},{key:"targetScroller",get:function(){var e=this.options.target;return zb.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return zb.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}}]),t}(Fp);Yb([Fp.dispose()],Kb.prototype,"dispose",null),(Xb=Kb||(Kb={})).defaults={animation:!1,getDragNode:function(e){return e.clone()},getDropNode:function(e){return e.clone()}},Xb.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"},function(e){e.getMaxDim=function(e,t){return e.reduce(function(e,n){return Math.max(n.getSize()[t],e)},0)},e.getNodesInRow=function(e,t,n){for(var r=[],i=n*t,o=i+n;i<o;i+=1)r.push(e[i]);return r},e.getNodesInColumn=function(e,t,n){for(var r=[],i=t,o=e.length;i<o;i+=n)r.push(e[i]);return r},e.accumulate=function(e,t){return e.reduce(function(e,t,n){return e.push(e[n]+t),e},[t||0])}}($b||($b={}));var Jb,Zb,Qb=function(e){function t(e){var n;(Object(Es.a)(this,t),(n=Object(Sc.a)(this,Object(Ac.a)(t).call(this))).graphs={},n.$groups={},n.options=Object.assign(Object.assign({},t.defaultOptions),e),n.dnd=new Kb(n.options),n.onSearch=s.debounce(n.onSearch,200),n.container=document.createElement("div"),n.$container=n.$(n.container).addClass(n.prefixClassName(Jb.base)).attr("data-not-found-text",n.options.notFoundText||"No matches found"),n.options.collapsable=e.collapsable&&e.groups&&e.groups.some(function(e){return!1!==e.collapsable}),n.options.collapsable)&&(n.$container.addClass("collapsable"),e.groups&&e.groups.every(function(e){return e.collapsed||!1===e.collapsable})&&n.$container.addClass("collapsed"));n.$("<div/>").addClass(n.prefixClassName(Jb.title)).html(n.options.title).appendTo(n.$container),e.search&&n.$container.addClass("searchable").append(n.renderSearch()),n.$content=n.$("<div/>").addClass(n.prefixClassName(Jb.content)).appendTo(n.$container);var r=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach(function(t){var i=n.$("<div/>").addClass(n.prefixClassName(Jb.group)).attr("data-name",t.name);(null==t.collapsable&&e.collapsable||!1!==t.collapsable)&&i.addClass("collapsable"),i.toggleClass("collapsed",!0===t.collapsed);var o=n.$("<h3/>").addClass(n.prefixClassName(Jb.groupTitle)).html(t.title||t.name),a=n.$("<div/>").addClass(n.prefixClassName(Jb.groupContent)),s=t.graphOptions,u=new zb(Object.assign(Object.assign(Object.assign({},r),s),{container:document.createElement("div"),model:r.model||new Ty,width:t.graphWidth||e.stencilGraphWidth,height:t.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));a.append(u.container),i.append(o,a).appendTo(n.$content),n.$groups[t.name]=i,n.graphs[t.name]=u});else{var i=new zb(Object.assign(Object.assign({},r),{container:document.createElement("div"),model:r.model||new Ty,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));n.$content.append(i.container),n.graphs[Zb.defaultGroupName]=i}return n.startListening(),Object(Sc.a)(n,Object(xp.a)(n))}return Object(Tc.a)(t,e),Object(Oc.a)(t,[{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(Jb.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Jb.searchText)))}},{key:"startListening",value:function(){var e,t=this,n=this.prefixClassName(Jb.title),r=this.prefixClassName(Jb.searchText),i=this.prefixClassName(Jb.groupTitle);this.delegateEvents((e={},Object(T.a)(e,"click .".concat(n),"onTitleClick"),Object(T.a)(e,"touchstart .".concat(n),"onTitleClick"),Object(T.a)(e,"click .".concat(i),"onGroupTitleClick"),Object(T.a)(e,"touchstart .".concat(i),"onGroupTitleClick"),Object(T.a)(e,"input .".concat(r),"onSearch"),Object(T.a)(e,"focusin .".concat(r),"onSearchFocusIn"),Object(T.a)(e,"focusout .".concat(r),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(e){t.graphs[e].on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){e.graphs[t].off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var n=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(t){e[t]&&n.loadGroup(e[t],t)}),this}},{key:"loadGroup",value:function(e,t){var n=this.getModel(t);if(n){var r=e.map(function(e){return cy.isNode(e)?e:cy.create(e)});n.resetCells(r)}var i=this.getGroup(t),o=this.options.stencilGraphHeight;i&&null!=i.graphHeight&&(o=i.graphHeight);var a=i&&i.layout||this.options.layout;if(a&&n&&s.call(a,this,n,i),!o){var u=this.getGraph(t);u.fitToContent({minWidth:u.options.width,gridHeight:1,padding:i&&i.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,n=e.node;this.dnd.start(n,t)}},{key:"filter",value:function(e,t){var n=this,r=Object.keys(this.graphs).reduce(function(r,i){var o=n.graphs[i],a=i===Zb.defaultGroupName?null:i,u=o.model.getNodes().filter(function(r){var i=!1;i="function"===typeof t?s.call(t,n,r,e,a,n):"boolean"===typeof t?t:n.isCellMatched(r,e,t,e.toLowerCase()!==e);var u=o.renderer.findViewByCell(r);return u&&u.$(u.container).toggleClass("unmatched",!i),i}),c=u.length>0,l=n.options,f=new Ty;return f.resetCells(u),l.layout&&s.call(l.layout,n,f,n.getGroup(i)),n.$groups[i]&&n.$groups[i].toggleClass("unmatched",!c),o.fitToContent({gridWidth:1,gridHeight:1,padding:l.stencilGraphPadding||10}),r||c},!1);this.$container.toggleClass("not-found",!r)}},{key:"isCellMatched",value:function(e,t,n,r){return!t||!n||Object.keys(n).some(function(i){if("*"===i||e.shape===i){var o=n[i];return"boolean"===typeof o?o:(Array.isArray(o)?o:[o]).some(function(n){var i=e.getPropByPath(n);return null!=i&&(i="".concat(i),r||(i=i.toLowerCase()),i.indexOf(t)>=0)})}return!1})}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,n=this.$(e.target).closest(".".concat(this.prefixClassName(Jb.group)));this.toggleGroup(n.attr("data-name")||"");var r=Object.keys(this.$groups).every(function(e){var n=t.getGroup(e),r=t.$groups[e];return n&&!1===n.collapsable||r.hasClass("collapsed")});this.$container.toggleClass("collapsed",r)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||Zb.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return null!=e&&t&&t.length?t.find(function(t){return t.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){return this.$groups[e].hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"resizeGroup",value:function(e,t){var n=this.graphs[e];return n&&n.resize(t.width,t.height),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){e.graphs[t].view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}},{key:"targetScroller",get:function(){var e=this.options.target;return zb.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return zb.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}}]),t}(Fp);(Qb||(Qb={})).defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(e,t){var n={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ty.isModel(e)?e:(new Ty).resetCells(e,{sort:!1,dryrun:!0}),r=n.getNodes(),i=t.columns||1,o=Math.ceil(r.length/i),a=t.dx||0,s=t.dy||0,u=!1!==t.center,c=!0===t.resizeToFit,l=t.marginX||0,f=t.marginY||0,h=[],d=t.columnWidth;if("compact"===d)for(var p=0;p<i;p+=1){var g=$b.getNodesInColumn(r,p,i);h.push($b.getMaxDim(g,"width")+a)}else{null!=d&&"auto"!==d||(d=$b.getMaxDim(r,"width")+a);for(var v=0;v<i;v+=1)h.push(d)}var y=$b.accumulate(h,l),m=[],b=t.rowHeight;if("compact"===b)for(var w=0;w<o;w+=1){var x=$b.getNodesInRow(r,w,i);m.push($b.getMaxDim(x,"height")+s)}else{null!=b&&"auto"!==b||(b=$b.getMaxDim(r,"height")+s);for(var C=0;C<o;C+=1)m.push(b)}var k=$b.accumulate(m,f);n.startBatch("layout"),r.forEach(function(e,n){var r=n%i,o=Math.floor(n/i),l=h[r],f=m[o],d=0,p=0,g=e.getSize();if(c){var v=l-2*a,b=f-2*s,w=g.height*(g.width?v/g.width:1),x=g.width*(g.height?b/g.height:1);f<w?v=x:b=w,g={width:v,height:b},e.setSize(g,t)}u&&(d=(l-g.width)/2,p=(f-g.height)/2),e.position(y[r]+a+d,k[o]+s+p,t)}),n.stopBatch("layout")}(e,Object.assign(Object.assign(Object.assign({},n),this.options.layoutOptions),t?t.layoutOptions:{}))}},Kb.defaults),function(e){e.base="widget-stencil",e.title="".concat(e.base,"-title"),e.search="".concat(e.base,"-search"),e.searchText="".concat(e.search,"-text"),e.content="".concat(e.base,"-content"),e.group="".concat(e.base,"-group"),e.groupTitle="".concat(e.group,"-title"),e.groupContent="".concat(e.group,"-content")}(Jb||(Jb={})),(Zb||(Zb={})).defaultGroupName="__default__",_d.trackable&&setTimeout(function(){if(_d.trackable){var e=new Image,t=Object.assign(Object.assign({},_d.trackInfo),{version:Rd,pg:document.URL,r:(new Date).getTime(),x6:!0,page_type:"syslog"}),n=encodeURIComponent(JSON.stringify([t]));e.src="".concat("https://kcart.alipay.com/web/bi.do","?BIProfile=merge&d=").concat(n)}},3e3),n.d(t,"h",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"j",function(){return bf}),n.d(t,"f",function(){return cy}),n.d(t,"b",function(){return xy}),n.d(t,"e",function(){return qp}),n.d(t,"g",function(){return Ey}),n.d(t,"l",function(){return eg}),n.d(t,"d",function(){return zb}),n.d(t,"k",function(){return O}),n.d(t,"a",function(){return S}),n.d(t,"i",function(){return E})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){e.exports=function(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(e,t,n){"use strict";n.d(t,"a",function(){return k}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return M}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return _});var r=n(96),i=n(5),o=n.n(i),a=(n(139),n(65)),s=n(412),u=n(74),c=n(48),l=n(274),f=n.n(l),h=(n(129),n(128)),d=n(126),p=n.n(d),g=function(e){var t=Object(s.a)();return t.displayName=e,t},v=g("Router-History"),y=g("Router"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e})),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return o.a.createElement(y.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(v.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.a.Component);o.a.Component;o.a.Component;var b={},w=1e4,x=0;function C(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=b[n]||(b[n]={});if(r[e])return r[e];var i=[],o={regexp:f()(e,i,t),keys:i};return x<w&&(r[e]=o,x++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),d=e===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:a.reduce(function(e,t,n){return e[t.name]=h[n],e},{})}},null)}var k=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(y.Consumer,null,function(t){t||Object(u.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?C(n.pathname,e.props):t.match,i=Object(c.a)({},t,{location:n,match:r}),a=e.props,s=a.children,l=a.component,f=a.render;return Array.isArray(s)&&function(e){return 0===o.a.Children.count(e)}(s)&&(s=null),o.a.createElement(y.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):f?f(i):null:"function"===typeof s?s(i):null)})},t}(o.a.Component);function E(e){return"/"===e.charAt(0)?e:"/"+e}function O(e,t){if(!e)return t;var n=E(e);return 0!==t.pathname.indexOf(n)?t:Object(c.a)({},t,{pathname:t.pathname.substr(n.length)})}function S(e){return"string"===typeof e?e:Object(a.e)(e)}function A(e){return function(){Object(u.a)(!1)}}function T(){}o.a.Component;var M=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(y.Consumer,null,function(t){t||Object(u.a)(!1);var n,r,i=e.props.location||t.location;return o.a.Children.forEach(e.props.children,function(e){if(null==r&&o.a.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?C(i.pathname,Object(c.a)({},e.props,{path:a})):t.match}}),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null})},t}(o.a.Component);function _(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=Object(h.a)(t,["wrappedComponentRef"]);return o.a.createElement(y.Consumer,null,function(t){return t||Object(u.a)(!1),o.a.createElement(e,Object(c.a)({},r,t,{ref:n}))})};return n.displayName=t,n.WrappedComponent=e,p()(n,e)}o.a.useContext},function(e,t,n){"use strict";var r=n(51),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0;var u=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i},c=Object.prototype.toString;var l=function(e){return c.call(e)},f="[object Null]",h="[object Undefined]",d=r.a?r.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?h:f:d&&d in Object(e)?u(e):l(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";var r=n(223),i=n(27),o=n(112);var a=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},s=Object.prototype.hasOwnProperty;var u=function(e){if(!Object(i.a)(e))return a(e);var t=Object(o.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n},c=n(56);t.a=function(e){return Object(c.a)(e)?Object(r.a)(e,!0):u(e)}},function(e,t,n){var r=n(132),i=n(67),o=n(296),a=n(76).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},function(e,t,n){"use strict";var r=n(44),i=n(33),o="[object Symbol]";t.a=function(e){return"symbol"==typeof e||Object(i.a)(e)&&Object(r.a)(e)==o}},function(e,t,n){"use strict";var r=n(36).a.Symbol;t.a=r},function(e,t,n){var r=n(54),i=n(240),o=n(67),a=n(173),s=n(245),u=n(292),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(s&&o(l,e)?c[e]=l[e]:c[e]=f("Symbol."+e)),c[e]}},function(e,t,n){var r=n(41);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(105))},function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){"use strict";var r=n(109),i=n(110);t.a=function(e){return null!=e&&Object(i.a)(e.length)&&!Object(r.a)(e)}},function(e,t,n){"use strict";var r=n(62),i=n(221),o=n(222);t.a=function(e,t){return Object(o.a)(Object(i.a)(e,t,r.a),e+"")}},function(e,t,n){e.exports=n(366)},function(e,t,n){var r=n(132),i=n(54),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(r||(r={}))},function(e,t,n){"use strict";var r=n(38),i=n(83).Graph;function o(e,t,n,i){var o;do{o=r.uniqueId(i)}while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function a(e){return r.max(r.map(e.nodes(),function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n}))}e.exports={addDummyNode:o,simplify:function(e){var t=(new i).setGraph(e.graph());return r.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,i=e.x,o=e.y,a=t.x-i,s=t.y-o,u=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(e){var t=r.map(r.range(a(e)+1),function(){return[]});return r.forEach(e.nodes(),function(n){var i=e.node(n),o=i.rank;r.isUndefined(o)||(t[o][i.order]=n)}),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank}));r.forEach(e.nodes(),function(n){var i=e.node(n);r.has(i,"rank")&&(i.rank-=t)})},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank})),n=[];r.forEach(e.nodes(),function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=e.graph().nodeRankFactor;r.forEach(n,function(t,n){r.isUndefined(t)&&n%o!==0?--i:i&&r.forEach(t,function(t){e.node(t).rank+=i})})},addBorderNode:function(e,t,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return o(e,"border",i,t)},maxRank:a,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict";var r=n(143),i=n(113);t.a=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?Object(i.a)(n,c,l):Object(r.a)(n,c,l)}return n}},function(e,t,n){"use strict";var r=n(109),i=n(36).a["__core-js_shared__"],o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var a=function(e){return!!o&&o in e},s=n(27),u=n(104),c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,h=l.toString,d=f.hasOwnProperty,p=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var g=function(e){return!(!Object(s.a)(e)||a(e))&&(Object(r.a)(e)?p:c).test(Object(u.a)(e))};var v=function(e,t){return null==e?void 0:e[t]};t.a=function(e,t){var n=v(e,t);return g(n)?n:void 0}},function(e,t,n){"use strict";var r=n(48);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var a=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=a.length;h>=0;h--){var d=a[h];"."===d?o(a,h):".."===d?(o(a,h),f++):f&&(o(a,h),f--)}if(!c)for(;f--;f)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var p=a.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every(function(r){return e(t[r],n[r])})}return!1},c=n(74);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(e,t,n,i){var o;"string"===typeof e?(o=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(o=Object(r.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}n.d(t,"a",function(){return k}),n.d(t,"b",function(){return M}),n.d(t,"d",function(){return j}),n.d(t,"c",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return p});var m=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var w="popstate",x="hashchange";function C(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),m||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,f=void 0===u?b:u,v=o.keyLength,k=void 0===v?6:v,E=e.basename?d(l(e.basename)):"";function O(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return E&&(o=h(o,E)),g(o,r,n)}function S(){return Math.random().toString(36).substr(2,k)}var A=y();function T(e){Object(r.a)(z,e),z.length=t.length,A.notifyListeners(z.location,z.action)}function M(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(O(e.state))}function _(){P(O(C()))}var j=!1;function P(e){if(j)j=!1,T();else{A.confirmTransitionTo(e,"POP",f,function(t){t?T({action:"POP",location:e}):function(e){var t=z.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(j=!0,I(i))}(e)})}}var N=O(C()),R=[N.key];function D(e){return E+p(e)}function I(e){t.go(e)}var L=0;function F(e){1===(L+=e)&&1===e?(window.addEventListener(w,M),i&&window.addEventListener(x,_)):0===L&&(window.removeEventListener(w,M),i&&window.removeEventListener(x,_))}var B=!1;var z={length:t.length,action:"POP",location:N,createHref:D,push:function(e,r){var i=g(e,r,S(),z.location);A.confirmTransitionTo(i,"PUSH",f,function(e){if(e){var r=D(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var u=R.indexOf(z.location.key),c=R.slice(0,u+1);c.push(i.key),R=c,T({action:"PUSH",location:i})}else window.location.href=r}})},replace:function(e,r){var i=g(e,r,S(),z.location);A.confirmTransitionTo(i,"REPLACE",f,function(e){if(e){var r=D(i),o=i.key,a=i.state;if(n)if(t.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var u=R.indexOf(z.location.key);-1!==u&&(R[u]=i.key),T({action:"REPLACE",location:i})}else window.location.replace(r)}})},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=A.appendListener(e);return F(1),function(){F(-1),t()}}};return z}var E="hashchange",O={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function S(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function A(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function T(e){window.location.replace(S(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),m||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?b:i,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?d(l(e.basename)):"",f=O[s],v=f.encodePath,w=f.decodePath;function x(){var e=w(A());return u&&(e=h(e,u)),g(e)}var C=y();function k(e){Object(r.a)(z,e),z.length=t.length,C.notifyListeners(z.location,z.action)}var M=!1,_=null;function j(){var e,t,n=A(),r=v(n);if(n!==r)T(r);else{var i=x(),a=z.location;if(!M&&(t=i,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(_===p(i))return;_=null,function(e){if(M)M=!1,k();else{C.confirmTransitionTo(e,"POP",o,function(t){t?k({action:"POP",location:e}):function(e){var t=z.location,n=D.lastIndexOf(p(t));-1===n&&(n=0);var r=D.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(M=!0,I(i))}(e)})}}(i)}}var P=A(),N=v(P);P!==N&&T(N);var R=x(),D=[p(R)];function I(e){t.go(e)}var L=0;function F(e){1===(L+=e)&&1===e?window.addEventListener(E,j):0===L&&window.removeEventListener(E,j)}var B=!1;var z={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=S(window.location.href)),n+"#"+v(u+p(e))},push:function(e,t){var n=g(e,void 0,void 0,z.location);C.confirmTransitionTo(n,"PUSH",o,function(e){if(e){var t=p(n),r=v(u+t);if(A()!==r){_=t,function(e){window.location.hash=e}(r);var i=D.lastIndexOf(p(z.location)),o=D.slice(0,i+1);o.push(t),D=o,k({action:"PUSH",location:n})}else k()}})},replace:function(e,t){var n=g(e,void 0,void 0,z.location);C.confirmTransitionTo(n,"REPLACE",o,function(e){if(e){var t=p(n),r=v(u+t);A()!==r&&(_=t,T(r));var i=D.indexOf(p(z.location));-1!==i&&(D[i]=t),k({action:"REPLACE",location:n})}})},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=C.appendListener(e);return F(1),function(){F(-1),t()}}};return z}function _(e,t,n){return Math.min(Math.max(e,t),n)}function j(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=y();function f(e){Object(r.a)(w,e),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=_(s,0,o.length-1),v=o.map(function(e){return g(e,void 0,"string"===typeof e?h():e.key||h())}),m=p;function b(e){var t=_(w.index+e,0,w.entries.length-1),r=w.entries[t];l.confirmTransitionTo(r,"POP",n,function(e){e?f({action:"POP",location:r,index:t}):f()})}var w={length:v.length,action:"POP",location:v[d],index:d,entries:v,createHref:m,push:function(e,t){var r=g(e,t,h(),w.location);l.confirmTransitionTo(r,"PUSH",n,function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),f({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,t){var r=g(e,t,h(),w.location);l.confirmTransitionTo(r,"REPLACE",n,function(e){e&&(w.entries[w.index]=r,f({action:"REPLACE",location:r}))})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return w}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]};t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";(function(e){var r=n(36),i=n(208),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||i.a;t.a=u}).call(this,n(272)(e))},function(e,t,n){"use strict";var r=n(44),i=n(33),o="[object Arguments]";var a=function(e){return Object(i.a)(e)&&Object(r.a)(e)==o},s=Object.prototype,u=s.hasOwnProperty,c=s.propertyIsEnumerable,l=a(function(){return arguments}())?a:function(e){return Object(i.a)(e)&&u.call(e,"callee")&&!c.call(e,"callee")};t.a=l},function(e,t,n){"use strict";var r=n(55),i=n(56),o=n(114),a=n(27);t.a=function(e,t,n){if(!Object(a.a)(n))return!1;var s=typeof t;return!!("number"==s?Object(i.a)(n)&&Object(o.a)(t,n.length):"string"==s&&t in n)&&Object(r.a)(n[t],e)}},function(e,t,n){"use strict";var r=/\s/;var i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t},o=/^\s+/;var a=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e},s=n(27),u=n(50),c=NaN,l=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt;t.a=function(e){if("number"==typeof e)return e;if(Object(u.a)(e))return c;if(Object(s.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(s.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=f.test(e);return n||h.test(e)?d(e.slice(2),n?2:8):l.test(e)?c:+e}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=!0,i="Invariant failed";function o(e,t){if(!e){if(r)throw new Error(i);var n="function"===typeof t?t():t;throw new Error(n?i+": "+n:i)}}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(97),i=n(282),o=n(23),a=n(171),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r;try{r={clone:n(754),constant:n(262),each:n(331),filter:n(334),has:n(345),isArray:n(45),isEmpty:n(830),isFunction:n(158),isUndefined:n(346),keys:n(107),map:n(347),reduce:n(349),size:n(833),transform:n(839),union:n(840),values:n(354)}}catch(i){}r||(r=window._),e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";t.a=function(e){return function(t){return e(t)}}},function(e,t,n){"use strict";(function(e){var r=n(216),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.a.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();t.a=s}).call(this,n(272)(e))},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(748)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r;try{r=n(752)}catch(i){}r||(r=window.graphlib),e.exports=r},function(e,t,n){var r=n(314),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(49),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},,,function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(24),i=n(251);e.exports=r?i:function(e){return Map.prototype.entries.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r=n(44),i=n(110),o=n(33),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return Object(o.a)(e)&&Object(i.a)(e.length)&&!!a[Object(r.a)(e)]},u=n(79),c=n(80),l=c.a&&c.a.isTypedArray,f=l?Object(u.a)(l):s;t.a=f},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return W});var r,i,o,a,s,u,c,l,f,h,d,p,g,v,y,m,b,w,x,C,k,E,O,S,A=n(14),T=n.n(A),M=n(20),_=n.n(M),j=n(15),P=n.n(j),N=n(10),R=n.n(N),D=n(11),I=n.n(D),L=n(16),F=n.n(L),B=(n(42),n(0)),z=n(9),V=n(17),U=n(60);function G(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=(r=Object(z.injectable)(),i=Object(z.inject)(V.a.MeshComponentManager),o=Object(z.inject)(V.a.GeometryComponentManager),a=Object(z.inject)(V.a.MaterialComponentManager),s=Object(z.inject)(V.a.CullableComponentManager),u=Object(z.inject)(V.a.TransformComponentManager),c=Object(z.inject)(V.a.HierarchyComponentManager),l=Object(z.inject)(V.a.Systems),f=Object(z.named)(V.a.FrameGraphSystem),h=Object(z.inject)(V.a.RenderEngine),d=Object(z.inject)(V.a.ResourcePool),r((S=O=function(){function e(){var t=this;R()(this,e),P()(this,"mesh",v,this),P()(this,"geometry",y,this),P()(this,"material",m,this),P()(this,"cullable",b,this),P()(this,"transform",w,this),P()(this,"hierarchy",x,this),P()(this,"frameGraphSystem",C,this),P()(this,"engine",k,this),P()(this,"resourcePool",E,this),this.modelCache={},this.setup=function(e,t,n){var r=e.createRenderTarget(t,"color buffer",{width:1,height:1,usage:U.a.RENDER_ATTACHMENT|U.a.SAMPLED|U.a.COPY_SRC});n.data={output:t.write(e,r)}},this.execute=function(){var e=_()(T.a.mark(function e(n,r,i){var o,a,s,u,c,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getResourceNode(r.data.output),a=t.resourcePool.getOrCreateResource(o.resource),s=G(i),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=11;break}return c=u.value,e.next=9,t.initView(c);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),s.e(e.t0);case 16:return e.prev=16,s.f(),e.finish(16);case 19:l=t.engine.getCanvas(),a.resize({width:l.width,height:l.height}),t.engine.setScissor({enable:!1}),t.engine.clear({framebuffer:a,color:i[0].getClearColor(),depth:1}),t.engine.useFramebuffer(a,function(){var e,n=G(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.renderView(r)}}catch(o){n.e(o)}finally{n.f()}});case 24:case"end":return e.stop()}},e,null,[[3,13,16,19]])}));return function(t,n,r){return e.apply(this,arguments)}}()}return I()(e,[{key:"renderView",value:function(e){var t=e.getScene(),n=e.getCamera(),r=n.getViewTransform(),i=B.b.multiply(B.b.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var o=e.getViewport(),a=o.x,s=o.y,u=o.width,c=o.height;this.engine.viewport({x:a,y:s,width:u,height:c});var l,f=G(t.getEntities());try{for(f.s();!(l=f.n()).done;){var h=l.value;this.renderMesh(h,{camera:n,view:e,viewMatrix:r})}}catch(d){f.e(d)}finally{f.f()}}},{key:"renderMesh",value:function(e,t){var n=t.camera,r=t.view,i=t.viewMatrix,o=this.mesh.getComponentByEntity(e);if(o&&o.visible){var a=o.material,s=o.geometry;if(s&&!s.dirty&&a){var u=this.transform.getComponentByEntity(e),c=B.b.multiply(B.b.create(),i,u.worldTransform),l=r.getViewport(),f=l.width,h=l.height;a.setUniform({projectionMatrix:n.getPerspective(),modelViewMatrix:c,modelMatrix:u.worldTransform,viewMatrix:i,cameraPosition:n.getPosition(),u_viewport:[f,h]}),o.model&&(o.model.draw({uniforms:a.uniforms.reduce(function(e,t){return e[t.name]=t.data,e},{})}),a.uniforms.forEach(function(e){e.dirty=!1}),a.dirty=!1)}}}},{key:"initMesh",value:function(){var e=_()(T.a.mark(function e(t,n){var r,i,o,a,s,u,c,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.mesh.getComponentByEntity(t)){e.next=3;break}return e.abrupt("return");case 3:if(i=r.material,(o=r.geometry)&&!o.dirty&&i){e.next=7;break}return e.abrupt("return");case 7:if(r.model){e.next=24;break}if(a="m-".concat(i.entity,"-g-").concat(o.entity),!this.modelCache[a]){e.next=12;break}return r.model=this.modelCache[a],e.abrupt("return");case 12:return i.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),s=this.engine,u=s.createModel,c=s.createAttribute,l={vs:i.vertexShaderGLSL,fs:i.fragmentShaderGLSL,defines:i.defines,attributes:o.attributes.reduce(function(e,t){return t.data&&t.buffer&&(e[t.name]=c({buffer:t.buffer,attributes:t.attributes,arrayStride:t.arrayStride,stepMode:t.stepMode,divisor:"vertex"===t.stepMode?0:1})),e},{}),uniforms:i.uniforms.reduce(function(e,t){return e[t.name]=t.data,e},{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},i.cull&&(l.cull=i.cull),i.depth&&(l.depth=i.depth),i.blend&&(l.blend=i.blend),o.indicesBuffer&&(l.elements=o.indicesBuffer),o.maxInstancedCount&&(l.instances=o.maxInstancedCount,l.count=o.vertexCount||3),e.next=22,u(l);case 22:r.model=e.sent,this.modelCache[a]=r.model;case 24:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"initView",value:function(){var e=_()(T.a.mark(function e(t){var n,r,i,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getScene(),r=G(n.getEntities()),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=10;break}return o=i.value,e.next=8,this.initMesh(o,t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),O.IDENTIFIER="Render Pass",g=S,v=F()(g.prototype,"mesh",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=F()(g.prototype,"geometry",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=F()(g.prototype,"material",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=F()(g.prototype,"cullable",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=F()(g.prototype,"transform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=F()(g.prototype,"hierarchy",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=F()(g.prototype,"frameGraphSystem",[l,f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=F()(g.prototype,"engine",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=F()(g.prototype,"resourcePool",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=g))||p)},function(e,t,n){"use strict";var r=n(116);var i=function(){this.__data__=new r.a,this.size=0};var o=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},u=n(117),c=n(127),l=200;var f=function(e,t){var n=this.__data__;if(n instanceof r.a){var i=n.__data__;if(!u.a||i.length<l-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new c.a(i)}return n.set(e,t),this.size=n.size,this};function h(e){var t=this.__data__=new r.a(e);this.size=t.size}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=a,h.prototype.has=s,h.prototype.set=f;t.a=h},,function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){var r=n(82);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,n){var r=n(23),i=n(41),o=n(52)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(158),i=n(256);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(810),i=n(820),o=n(123),a=n(45),s=n(827);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0;t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(e,t,n){"use strict";var r=n(56),i=n(33);t.a=function(e){return Object(i.a)(e)&&Object(r.a)(e)}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return h});var r,i=n(111),o=n.n(i),a=n(10),s=n.n(a),u=n(11),c=n.n(u),l=n(0),f=n(201);!function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"}(r||(r={}));var h=function(){function e(t){if(s()(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new f.a)}return c()(e,[{key:"extractFromVPMatrix",value:function(e){var t=o()(e,16),n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=t[8],d=t[9],p=t[10],g=t[11],v=t[12],y=t[13],m=t[14],b=t[15];l.d.set(this.planes[0].normal,a-n,f-s,g-h),this.planes[0].distance=-(b-v),l.d.set(this.planes[1].normal,a+n,f+s,g+h),this.planes[1].distance=-(b+v),l.d.set(this.planes[2].normal,a+r,f+u,g+d),this.planes[2].distance=-(b+y),l.d.set(this.planes[3].normal,a-r,f-u,g-d),this.planes[3].distance=-(b-y),l.d.set(this.planes[4].normal,a-i,f-c,g-p),this.planes[4].distance=-(b-m),l.d.set(this.planes[5].normal,a+i,f+c,g+p),this.planes[5].distance=-(b+m),this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag()})}}]),e}()},function(e,t,n){"use strict";var r=Function.prototype.toString;t.a=function(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(97),i=n(76),o=n(152);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(317),i=n(258),o=n(99);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n(68),i=n(49);function o(e,t,n,i,o){var a={},s="number"===typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var c=a[u];if(Array.isArray(c))for(var l=0,f=c;l<f.length;l++){var h=f[l];if(h.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(i),a[u]=c,Reflect.defineMetadata(e,a,t)}function a(e,t){Reflect.decorate(e,t)}function s(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"===typeof n?a([s(n,e)],t):"string"===typeof n?Reflect.decorate([e],t,n):a([e],t)}},function(e,t,n){"use strict";var r=n(44),i=n(27),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.a=function(e){if(!Object(i.a)(e))return!1;var t=Object(r.a)(e);return t==a||t==s||t==o||t==u}},function(e,t,n){"use strict";var r=9007199254740991;t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,n){var r=n(926),i=n(927),o=n(368),a=n(928);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(150);t.a=function(e,t,n){"__proto__"==t&&r.a?Object(r.a)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){"use strict";var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=n(57),i=n(72);t.a=function(e){return Object(r.a)(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&Object(i.a)(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}},function(e,t,n){"use strict";var r=function(){this.__data__=[],this.size=0},i=n(55);var o=function(e,t){for(var n=e.length;n--;)if(Object(i.a)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)};var u=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]};var c=function(e){return o(this.__data__,e)>-1};var l=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=s,f.prototype.get=u,f.prototype.has=c,f.prototype.set=l;t.a=f},function(e,t,n){"use strict";var r=n(64),i=n(36),o=Object(r.a)(i.a,"Map");t.a=o},function(e,t,n){var r=n(394),i=n(393),o=n(401),a=n(271),s=n(402),u=[0,0];e.exports.computeMiter=function(e,t,n,a,c){return r(e,n,a),o(e,e),i(t,-e[1],e[0]),i(u,-n[1],n[0]),c/s(t,u)},e.exports.normal=function(e,t){return i(e,-t[1],t[0]),e},e.exports.direction=function(e,t,n){return a(e,t,n),o(e,e),e}},function(e,t,n){var r=n(24),i=n(251);e.exports=r?i:function(e){return Set.prototype.values.call(e)}},function(e,t,n){var r=n(765),i=n(770);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(135),i=n(766),o=n(767),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:u&&u in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(317),i=n(790),o=n(99);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var r=0;t.id=function(){return r++}},function(e,t,n){"use strict";n.d(t,"a",function(){return D});var r,i,o,a,s,u,c,l,f,h,d,p,g,v=n(14),y=n.n(v),m=n(20),b=n.n(m),w=n(15),x=n.n(w),C=n(10),k=n.n(C),E=n(11),O=n.n(E),S=n(16),A=n.n(S),T=(n(42),n(9)),M=n(17),_=n(224),j=n(93);function P(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R={NONE:0,ENCODE:1,HIGHLIGHT:2},D=(r=Object(T.injectable)(),i=Object(T.inject)(M.a.RenderEngine),o=Object(T.inject)(M.a.ResourcePool),a=Object(T.inject)(M.a.RenderPassFactory),s=Object(T.inject)(M.a.MeshComponentManager),r((g=p=function(){function e(){var t=this;k()(this,e),x()(this,"engine",l,this),x()(this,"resourcePool",f,this),x()(this,"renderPassFactory",h,this),x()(this,"mesh",d,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(e,t,n){var r=e.createRenderTarget(t,"picking fbo",{width:1,height:1});n.data={output:t.write(e,r)},t.hasSideEffect=!0},this.execute=function(){var e=b()(y.a.mark(function e(n,r,i){var o,a,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.views=i,!t.alreadyInRendering){e.next=3;break}return e.abrupt("return");case 3:o=P(i);try{for(s=function(){var e=a.value,i=e.getViewport(),o=i.width,s=i.height;t.alreadyInRendering=!0;var u=n.getResourceNode(r.data.output);t.pickingFBO=t.resourcePool.getOrCreateResource(u.resource),t.pickingFBO.resize({width:o,height:s}),t.engine.useFramebuffer(t.pickingFBO,function(){t.engine.clear({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=t.renderPassFactory(j.a.IDENTIFIER),i=[],o=P(e.getScene().getEntities());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t.mesh.getComponentByEntity(a);s.material.setUniform("u_PickingStage",R.ENCODE),i.push(s)}}catch(u){o.e(u)}finally{o.f()}r.renderView(e),i.forEach(function(e){e.material.setUniform("u_PickingStage",R.HIGHLIGHT)}),t.alreadyInRendering=!1})},o.s();!(a=o.n()).done;)s()}catch(u){o.e(u)}finally{o.f()}case 5:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.pick=function(e,n){var r,i,o=e.x,a=e.y,s=t.engine,u=s.readPixels,c=s.useFramebuffer,l=n.getViewport(),f=l.width,h=l.height,d=o*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>f||d<0||p>h||p<0))return c(t.pickingFBO,function(){0===(r=u({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(i=Object(_.a)(r),t.highlightEnabled&&t.highlightPickedFeature(r,n))}),i}}return O()(e,[{key:"enableHighlight",value:function(e){this.highlightEnabled=e}},{key:"setHighlightColor",value:function(e){this.highlightColor=e}},{key:"highlightPickedFeature",value:function(e,t){if(e){var n,r=P(t.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.mesh.getComponentByEntity(i).material;o.setUniform("u_PickingStage",R.HIGHLIGHT),o.setUniform("u_PickingColor",[e[0],e[1],e[2]]),o.setUniform("u_HighlightColor",this.highlightColor)}}catch(a){r.e(a)}finally{r.f()}}}}]),e}(),p.IDENTIFIER="PixelPicking Pass",c=g,l=A()(c.prototype,"engine",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=A()(c.prototype,"resourcePool",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=A()(c.prototype,"renderPassFactory",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=A()(c.prototype,"mesh",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(e,t,n){"use strict";var r=n(129),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(t),g=u(n),v=0;v<a.length;++v){var y=a[v];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!s||!s[y])){var m=h(n,y);try{c(t,y,m)}catch(b){}}}}return t}},function(e,t,n){"use strict";var r=n(64),i=Object(r.a)(Object,"create");var o=function(){this.__data__=i?i(null):{},this.size=0};var a=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;var c=function(e){var t=this.__data__;if(i){var n=t[e];return n===s?void 0:n}return u.call(t,e)?t[e]:void 0},l=Object.prototype.hasOwnProperty;var f=function(e){var t=this.__data__;return i?void 0!==t[e]:l.call(t,e)},h="__lodash_hash_undefined__";var d=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?h:t,this};function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}p.prototype.clear=o,p.prototype.delete=a,p.prototype.get=c,p.prototype.has=f,p.prototype.set=d;var g=p,v=n(116),y=n(117);var m=function(){this.size=0,this.__data__={hash:new g,map:new(y.a||v.a),string:new g}};var b=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var w=function(e,t){var n=e.__data__;return b(t)?n["string"==typeof t?"string":"hash"]:n.map};var x=function(e){var t=w(this,e).delete(e);return this.size-=t?1:0,t};var C=function(e){return w(this,e).get(e)};var k=function(e){return w(this,e).has(e)};var E=function(e,t){var n=w(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function O(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}O.prototype.clear=m,O.prototype.delete=x,O.prototype.get=C,O.prototype.has=k,O.prototype.set=E;t.a=O},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";e.exports=n(994)},function(e,t,n){var r=n(281),i=n(238);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(54),i=n(106),o=n(67),a=n(239),s=n(284),u=n(153),c=u.get,l=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!h&&e[t]&&(c=!0):delete e[t],c?e[t]=n:i(e,t,n)):c?e[t]=n:a(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||s(this)})},function(e,t,n){var r=n(54);e.exports=r},function(e,t,n){var r=n(76).f,i=n(67),o=n(52)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(84).Symbol;e.exports=r},function(e,t,n){(function(e){var r=n(84),i=n(786),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u}).call(this,n(228)(e))},function(e,t,n){var r=n(795),i=n(253),o=n(796),a=n(326),s=n(797),u=n(121),c=n(315),l=c(r),f=c(i),h=c(o),d=c(a),p=c(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=g},function(e,t,n){var r=n(121),i=n(90),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){e.exports=n(992)()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(0),u=function(){function e(t,n){i()(this,e),this.center=void 0,this.halfExtents=void 0,this.min=s.d.create(),this.max=s.d.create(),this.update(t,n)}return a()(e,[{key:"update",value:function(e,t){this.center=e||s.d.create(),this.halfExtents=t||s.d.fromValues(.5,.5,.5),this.min=s.d.sub(this.min,this.center,this.halfExtents),this.max=s.d.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,t){s.d.add(this.center,t,e),s.d.scale(this.center,this.center,.5),s.d.sub(this.halfExtents,t,e),s.d.scale(this.halfExtents,this.halfExtents,.5),s.d.copy(this.min,e),s.d.copy(this.max,t)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){var t=this.center,n=t[0],r=t[1],i=t[2],o=this.halfExtents,a=o[0],s=o[1],u=o[2],c=n-a,l=n+a,f=r-s,h=r+s,d=i-u,p=i+u,g=e.center,v=g[0],y=g[1],m=g[2],b=e.halfExtents,w=b[0],x=b[1],C=b[2],k=v-w,E=v+w,O=y-x,S=y+x,A=m-C,T=m+C;k<c&&(c=k),E>l&&(l=E),O<f&&(f=O),S>h&&(h=S),A<d&&(d=A),T>p&&(p=T),t[0]=.5*(c+l),t[1]=.5*(f+h),t[2]=.5*(d+p),o[0]=.5*(l-c),o[1]=.5*(h-f),o[2]=.5*(p-d),this.min[0]=c,this.min[1]=f,this.min[2]=d,this.max[0]=l,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2]}},{key:"containsPoint",value:function(e){var t=this.getMin(),n=this.getMax();return!(e[0]<t[0]||e[0]>n[0]||e[1]<t[1]||e[1]>n[1]||e[2]<t[2]||e[2]>n[2])}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?s.d.copy(s.d.create(),this.min):272===e.pnVertexFlag?s.d.fromValues(this.min[0],this.min[1],this.max[2]):257===e.pnVertexFlag?s.d.fromValues(this.min[0],this.max[1],this.min[2]):256===e.pnVertexFlag?s.d.fromValues(this.min[0],this.max[1],this.max[2]):17===e.pnVertexFlag?s.d.fromValues(this.max[0],this.min[1],this.min[2]):16===e.pnVertexFlag?s.d.fromValues(this.max[0],this.min[1],this.max[2]):1===e.pnVertexFlag?s.d.fromValues(this.max[0],this.max[1],this.min[2]):s.d.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?s.d.copy(s.d.create(),this.max):272===e.pnVertexFlag?s.d.fromValues(this.max[0],this.max[1],this.min[2]):257===e.pnVertexFlag?s.d.fromValues(this.max[0],this.min[1],this.max[2]):256===e.pnVertexFlag?s.d.fromValues(this.max[0],this.min[1],this.min[2]):17===e.pnVertexFlag?s.d.fromValues(this.min[0],this.max[1],this.max[2]):16===e.pnVertexFlag?s.d.fromValues(this.min[0],this.max[1],this.min[2]):1===e.pnVertexFlag?s.d.fromValues(this.min[0],this.min[1],this.max[2]):s.d.fromValues(this.min[0],this.min[1],this.min[2])}}]),e}()},function(e,t,n){"use strict";var r=n(44),i=n(142),o=n(33),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);t.a=function(e){if(!Object(o.a)(e)||Object(r.a)(e)!=a)return!1;var t=Object(i.a)(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(e,t,n){"use strict";var r=n(219),i=Object(r.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,n){"use strict";var r=n(113),i=n(55),o=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var a=e[t];o.call(e,t)&&Object(i.a)(a,n)&&(void 0!==n||t in e)||Object(r.a)(e,t,n)}},function(e,t,n){"use strict";var r=n(151);t.a=function(e){var t=new e.constructor(e.byteLength);return new r.a(t).set(new r.a(e)),t}},function(e,t,n){"use strict";var r=n(36);t.a=function(){return r.a.Date.now()}},function(e,t,n){"use strict";t.a=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){"use strict";var r=n(94),i=n(113),o=n(55);var a=function(e,t,n){(void 0===n||Object(o.a)(e[t],n))&&(void 0!==n||t in e)||Object(i.a)(e,t,n)},s=n(148),u=n(218),c=n(220),l=n(217),f=n(225),h=n(71),d=n(26),p=n(102),g=n(70),v=n(109),y=n(27),m=n(141),b=n(91);var w=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]},x=n(210);var C=function(e,t,n,r,i,o,s){var C=w(e,n),k=w(t,n),E=s.get(k);if(E)a(e,n,E);else{var O=o?o(C,k,n+"",e,t,s):void 0,S=void 0===O;if(S){var A=Object(d.a)(k),T=!A&&Object(g.a)(k),M=!A&&!T&&Object(b.a)(k);O=k,A||T||M?Object(d.a)(C)?O=C:Object(p.a)(C)?O=Object(l.a)(C):T?(S=!1,O=Object(u.a)(k,!0)):M?(S=!1,O=Object(c.a)(k,!0)):O=[]:Object(m.a)(k)||Object(h.a)(k)?(O=C,Object(h.a)(C)?O=Object(x.a)(C):Object(y.a)(C)&&!Object(v.a)(C)||(O=Object(f.a)(k))):S=!1}S&&(s.set(k,O),i(O,k,r,o,s),s.delete(k)),a(e,n,O)}},k=n(46);t.a=function e(t,n,i,o,u){t!==n&&Object(s.a)(n,function(s,c){if(u||(u=new r.a),Object(y.a)(s))C(t,n,c,i,e,o,u);else{var l=o?o(w(t,c),s,c+"",t,n,u):void 0;void 0===l&&(l=s),a(t,c,l)}},k.a)}},function(e,t,n){"use strict";var r=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}();t.a=r},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r,i,o,a,s,u,c,l,f,h=n(14),d=n.n(h),p=n(20),g=n.n(p),v=n(15),y=n.n(v),m=n(10),b=n.n(m),w=n(16),x=n.n(w),C=(n(42),n(9)),k=n(17),E=n(60),O=n(93),S=(r=Object(C.injectable)(),i=Object(C.inject)(k.a.RenderEngine),o=Object(C.inject)(k.a.ResourcePool),r((f=l=function e(){var t=this;b()(this,e),y()(this,"engine",u,this),y()(this,"resourcePool",c,this),this.model=void 0,this.setup=function(e,t,n){var r=e.getPass(O.a.IDENTIFIER);if(r){var i=e.createRenderTarget(t,"render to screen",{width:1,height:1});n.data={input:t.read(r.data.output),output:t.write(e,i)}}},this.execute=function(){var e=g()(d.a.mark(function e(n,r){var i,o,a,s,u,c,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.engine,o=i.createModel,a=i.createAttribute,s=i.createBuffer,t.model){e.next=6;break}return e.next=4,o({vs:t.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\nlayout(location = 0) out vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}":"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:t.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\n\nlayout(location = 0) in vec2 v_UV;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\n}":"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",attributes:{a_Position:a({buffer:s({data:[-4,-4,4,-4,0,4],type:E.a.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:u=e.sent,t.model=u;case 6:c=n.getResourceNode(r.data.input),l=t.resourcePool.getOrCreateResource(c.resource),t.engine.useFramebuffer(null,function(){t.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:{u_Texture:l}})});case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.tearDown=function(){t.model=void 0}},l.IDENTIFIER="Copy Pass",s=f,u=x()(s.prototype,"engine",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=x()(s.prototype,"resourcePool",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(e,t,n){"use strict";var r=n(64),i=function(){try{var e=Object(r.a)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.a=i},function(e,t,n){"use strict";var r=n(36).a.Uint8Array;t.a=r},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,i,o,a=n(652),s=n(54),u=n(75),c=n(106),l=n(67),f=n(172),h=n(154),d=s.WeakMap;if(a){var p=new d,g=p.get,v=p.has,y=p.set;r=function(e,t){return y.call(p,e,t),t},i=function(e){return g.call(p,e)||{}},o=function(e){return v.call(p,e)}}else{var m=f("state");h[m]=!0,r=function(e,t){return c(e,m,t),t},i=function(e){return l(e,m)?e[m]:{}},o=function(e){return l(e,m)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports={}},function(e,t,n){var r=n(242),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(238);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(121),i=n(78),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==u}},function(e,t,n){var r=n(180),i=n(181);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}},function(e,t,n){var r=n(785),i=n(90),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(787),i=n(183),o=n(257),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(138),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n(68);function i(e){return"function"===typeof e?e.name:"symbol"===typeof e?e.toString():e}function o(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(e){var t="Object";null!==e.implementationType&&(t=o(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)})),r},t.circularDependencyToException=function e(t){t.childRequests.forEach(function(t){if(function e(t,n){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===n||e(t.parentRequest,n))}(t,t.serviceIdentifier)){var n=function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(t).reverse().join(" --\x3e ");throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)})},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(e){n+=e.toString()+"\n"})," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=o},function(e,t,n){"use strict";n(367);var r,i,o,a,s,u=n(9),c=n(407),l=n.n(c),f=n(34),h=n(15),d=n.n(h),p=n(10),g=n.n(p),v=n(11),y=n.n(v),m=n(16),b=n.n(m),w=(n(42),n(17)),x=n(60),C=(r=Object(u.injectable)(),i=Object(u.inject)(w.a.RenderEngine),r((a=function(){function e(){g()(this,e),d()(this,"engine",s,this),this.resourcePool={}}return y()(e,[{key:"getOrCreateResource",value:function(e){if(!this.resourcePool[e.name]){var t=e.descriptor,n=t.width,r=t.height,i=t.usage;this.resourcePool[e.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:x.a.CLAMP_TO_EDGE,wrapT:x.a.CLAMP_TO_EDGE,usage:i})})}return this.resourcePool[e.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),e}(),s=b()(a.prototype,"engine",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o),k=n(211),E=n(213),O=n(195),S=n(196),A=n(197),T=n(198),M=n(199),_=n(200),j=n(149),P=n(125),N=n(93),R=n(202),D=n(203),I=n(29),L=n.n(I),F=n(30),B=n.n(F),z=n(21),V=n.n(z);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=V()(e);if(t){var i=V()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return B()(this,n)}}var G=function(e){L()(n,e);var t=U(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).name=void 0,r.name=e.name||"",r}return n}(f.a),H=n(204),W=n(205),q=n(206),X=n(207),$=n(212);n.d(t,"a",function(){return K});var Y=new u.Container;l()(Y,!1);function K(){var e=new u.Container;return e.parent=Y,e.bind(w.a.Systems).to(H.a).inSingletonScope().whenTargetNamed(w.a.SceneGraphSystem),e.bind(w.a.Systems).to(k.a).inSingletonScope().whenTargetNamed(w.a.FrameGraphSystem),e.bind(w.a.Systems).to(_.a).inSingletonScope().whenTargetNamed(w.a.MeshSystem),e.bind(w.a.Systems).to(O.a).inSingletonScope().whenTargetNamed(w.a.GeometrySystem),e.bind(w.a.Systems).to(A.a).inSingletonScope().whenTargetNamed(w.a.MaterialSystem),e.bind(w.a.Systems).to(R.a).inSingletonScope().whenTargetNamed(w.a.RendererSystem),e.bind(w.a.ResourcePool).to(C).inSingletonScope(),e.bind(w.a.ConfigService).to(q.a).inSingletonScope(),e.bind(w.a.InteractorService).to(X.a).inSingletonScope(),e.bind(w.a.RenderPass).to(N.a).inSingletonScope().whenTargetNamed(N.a.IDENTIFIER),e.bind(w.a.RenderPass).to(j.a).inSingletonScope().whenTargetNamed(j.a.IDENTIFIER),e.bind(w.a.RenderPass).to(P.a).inSingletonScope().whenTargetNamed(P.a.IDENTIFIER),e.bind(w.a.RenderPassFactory).toFactory(function(e){return function(t){return e.container.getNamed(w.a.RenderPass,t)}}),e}Y.bind(w.a.ShaderModuleService).to($.a).inSingletonScope(),Y.bind(w.a.NameComponentManager).toConstantValue(new f.b(G)),Y.bind(w.a.HierarchyComponentManager).toConstantValue(new f.b(D.a)),Y.bind(w.a.TransformComponentManager).toConstantValue(new f.b(W.a)),Y.bind(w.a.MeshComponentManager).toConstantValue(new f.b(M.a)),Y.bind(w.a.CullableComponentManager).toConstantValue(new f.b(T.a)),Y.bind(w.a.GeometryComponentManager).toConstantValue(new f.b(E.a)),Y.bind(w.a.MaterialComponentManager).toConstantValue(new f.b(S.a))},,function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",function(){return r})},,function(e,t,n){e.exports={EPSILON:n(391),create:n(392),clone:n(960),fromValues:n(961),copy:n(962),set:n(393),equals:n(963),exactEquals:n(964),add:n(394),subtract:n(271),sub:n(965),multiply:n(395),mul:n(966),divide:n(396),div:n(967),inverse:n(968),min:n(969),max:n(970),rotate:n(971),floor:n(972),ceil:n(973),round:n(974),scale:n(975),scaleAndAdd:n(976),distance:n(397),dist:n(977),squaredDistance:n(398),sqrDist:n(978),length:n(399),len:n(979),squaredLength:n(400),sqrLen:n(980),negate:n(981),normalize:n(401),dot:n(402),cross:n(982),lerp:n(983),random:n(984),transformMat2:n(985),transformMat2d:n(986),transformMat3:n(987),transformMat4:n(988),forEach:n(989),limit:n(990)}},,function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return c});var r=n(226);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"===typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function u(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var a=e,l=t,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function g(){if(d)throw new Error(i(3));return l}function v(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),f=null}}}function y(e){if(!u(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=a(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:s.INIT}),(r={dispatch:y,subscribe:v,getState:g,replaceReducer:function(e){if("function"!==typeof e)throw new Error(i(10));a=e,y({type:s.REPLACE})}})[o]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[o]=function(){return this},e},r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];0,"function"===typeof e[o]&&(n[o]=e[o])}var a,u=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:s.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))})}(n)}catch(c){a=c}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},s=0;s<u.length;s++){var c=u[s],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}o[c]=h,r=r||h!==f}return(r=r||u.length!==Object.keys(e).length)?o:e}}function f(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"===typeof e)return f(e,t);if("object"!==typeof e||null===e)throw new Error(i(16));var n={};for(var r in e){var o=e[r];"function"===typeof o&&(n[r]=f(o,t))}return n}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),o=function(){throw new Error(i(15))},a={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(e){return e(a)});return o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}.apply(void 0,s)(n.dispatch),Object(r.a)(Object(r.a)({},n),{},{dispatch:o})}}}},function(e,t,n){var r=n(75);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(240),i=n(173),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r,i=n(23),o=n(660),a=n(243),s=n(154),u=n(661),c=n(283),l=n(172),f=l("IE_PROTO"),h=function(){},d=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}p=r?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):function(){var e,t=c("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F}();for(var e=a.length;e--;)delete p.prototype[a[e]];return p()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[f]=e):n=p(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(176),i=n(760),o=n(761),a=n(762),s=n(763),u=n(764);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},function(e,t,n){var r=n(755),i=n(756),o=n(757),a=n(758),s=n(759);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(134);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(120)(Object,"create");e.exports=r},function(e,t,n){var r=n(779);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(181),i=n(134),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(316);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(318)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(263),i=n(808)(r);e.exports=i},function(e,t,n){var r=n(188),i=n(162);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(45),i=n(266),o=n(822),a=n(341);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(123),i=n(350),o=n(351);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var r=n(134),i=n(99),o=n(182),a=n(78);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(38);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),function n(i){var o=e.node(i);if(r.has(t,i))return o.rank;t[i]=!0;var a=r.min(r.map(e.outEdges(i),function(t){return n(t.w)-e.edge(t).minlen}));a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0);return o.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},function(e,t,n){"use strict";var r=n(60);n.d(t,"gl",function(){return r.a});n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=-1,i=1;function o(){return i++}},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r,i,o,a,s,u,c,l=n(14),f=n.n(l),h=n(20),d=n.n(h),p=n(15),g=n.n(p),v=n(10),y=n.n(v),m=n(11),b=n.n(m),w=n(16),x=n.n(w),C=(n(42),n(9)),k=n(1),E=n(17),O=n(60),S=(r=Object(C.injectable)(),i=Object(C.inject)(E.a.GeometryComponentManager),o=Object(C.inject)(E.a.RenderEngine),r((s=function(){function e(){y()(this,e),g()(this,"geometry",u,this),g()(this,"engine",c,this)}return b()(e,[{key:"execute",value:function(){var e=d()(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.geometry.forEach(function(e,n){n.dirty&&(n.attributes.forEach(function(e){if(e.dirty&&e.data){var n;if(e.buffer)null===(n=e.buffer)||void 0===n||n.subData({data:e.data,offset:0});else e.buffer=t.engine.createBuffer({data:e.data,type:O.a.FLOAT});e.dirty=!1}}),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=t.engine.createElements({data:n.indices,count:n.indices.length,type:O.a.UNSIGNED_INT,usage:O.a.STATIC_DRAW})),n.dirty=!1)});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.geometry.forEach(function(e,t){t.indicesBuffer&&t.indicesBuffer.destroy(),t.attributes.forEach(function(e){e.buffer&&e.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3}).vertexCount,t=Object(k.createEntity)();return this.geometry.create(t,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(e){var t=e.maxInstancedCount,n=e.vertexCount,r=Object(k.createEntity)();return this.geometry.create(r,{maxInstancedCount:t,vertexCount:n})}}]),e}(),u=x()(s.prototype,"geometry",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=x()(s.prototype,"engine",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n(8),i=n.n(r),o=n(10),a=n.n(o),s=n(11),u=n.n(s),c=n(28),l=n.n(c),f=n(29),h=n.n(f),d=n(30),p=n.n(d),g=n(21),v=n.n(g),y=n(1);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var x=function(e){h()(n,e);var t=w(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.defines={},r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:y.gl.BACK},r.depth={enable:!0},r.blend=void 0,r.entity=void 0,r.type=void 0,Object.assign(l()(r),e),r}return u()(n,[{key:"setDefines",value:function(e){return this.defines=b(b({},this.defines),e),this}},{key:"setCull",value:function(e){return this.cull=e,this}},{key:"setDepth",value:function(e){return this.depth=e,this}},{key:"setBlend",value:function(e){return this.blend=e,this}},{key:"setUniform",value:function(e,t){var n=this;if("string"!==typeof e)return Object.keys(e).forEach(function(t){return n.setUniform(t,e[t])}),this;var r=this.uniforms.find(function(t){return t.name===e});return r?(r.dirty=!0,r.data=t):this.uniforms.push({name:e,dirty:!0,data:t}),this.dirty=!0,this}}]),n}(n(34).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r,i,o,a,s,u,c,l,f,h=n(8),d=n.n(h),p=n(14),g=n.n(p),v=n(20),y=n.n(v),m=n(15),b=n.n(m),w=n(10),x=n.n(w),C=n(11),k=n.n(C),E=n(16),O=n.n(E),S=(n(42),n(9)),A=n(1),T=n(17);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){d()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=(r=Object(S.injectable)(),i=Object(S.inject)(T.a.MaterialComponentManager),o=Object(S.inject)(T.a.RenderEngine),a=Object(S.inject)(T.a.ShaderModuleService),r((u=function(){function e(){x()(this,e),b()(this,"material",c,this),b()(this,"engine",l,this),b()(this,"shaderModule",f,this)}return k()(e,[{key:"execute",value:function(){var e=y()(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(e){var t=Object(A.createEntity)(),n=e.vertexShader,r=e.fragmentShader,i=[];if(!this.engine.supportWebGPU){var o="material-".concat(t);this.shaderModule.registerModule(o,{vs:e.vertexShader,fs:e.fragmentShader});var a=this.shaderModule.getModule(o);n=a.vs,r=a.fs,a.uniforms&&(i=Object.keys(a.uniforms).map(function(e){return{dirty:!0,name:e,data:a.uniforms[e]}}))}return this.material.create(t,_(_({vertexShaderGLSL:n,fragmentShaderGLSL:r},e),{},{uniforms:i}))}}]),e}(),c=O()(u.prototype,"material",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=O()(u.prototype,"engine",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=O()(u.prototype,"shaderModule",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r,i=n(10),o=n.n(i),a=n(28),s=n.n(a),u=n(29),c=n.n(u),l=n(30),f=n.n(l),h=n(21),d=n.n(h),p=n(34);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}!function(e){e[e.Standard=0]="Standard"}(r||(r={}));var v=function(e){c()(n,e);var t=g(n);function n(e){var i;return o()(this,n),(i=t.call(this,e)).strategy=r.Standard,i.visibilityPlaneMask=0,i.visible=!1,Object.assign(s()(i),e),i}return n}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(10),i=n.n(r),o=n(28),a=n.n(o),s=n(29),u=n.n(s),c=n(30),l=n.n(c),f=n(21),h=n.n(f),d=n(34),p=n(140);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(e){u()(n,e);var t=g(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).material=void 0,r.geometry=void 0,r.aabb=new p.a,r.aabbDirty=!0,r.model=void 0,r.visible=!0,r.children=[],Object.assign(a()(r),e),r}return n}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return D});var r,i,o,a,s,u,c,l,f,h,d,p,g,v=n(14),y=n.n(v),m=n(20),b=n.n(m),w=n(15),x=n.n(w),C=n(10),k=n.n(C),E=n(11),O=n.n(E),S=n(16),A=n.n(S),T=(n(42),n(0)),M=n(9),_=n(17),j=n(103),P=n(224);function N(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=(r=Object(M.injectable)(),i=Object(M.inject)(_.a.MeshComponentManager),o=Object(M.inject)(_.a.CullableComponentManager),a=Object(M.inject)(_.a.GeometryComponentManager),s=Object(M.inject)(_.a.HierarchyComponentManager),u=Object(M.inject)(_.a.TransformComponentManager),r((l=function(){function e(){k()(this,e),x()(this,"mesh",f,this),x()(this,"cullable",h,this),x()(this,"geometry",d,this),x()(this,"hierarchy",p,this),x()(this,"transform",g,this),this.planes=void 0}return O()(e,[{key:"setFrustumPlanes",value:function(e){this.planes=e}},{key:"execute",value:function(){var e=b()(y.a.mark(function e(t){var n,r,i,o,a,s,u,c,l,f,h,d,p,g,v,m,b,w,x,C,k;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=N(t);try{for(n.s();!(r=n.n()).done;){i=r.value,o=i.getScene(),a=i.getCamera(),s=N(o.getEntities());try{for(s.s();!(u=s.n()).done;)c=u.value,(l=this.mesh.getComponentByEntity(c))&&(f=this.hierarchy.getComponentByEntity(c),h=this.cullable.getComponentByEntity(c),d=l.geometry,p=this.transform.getComponentByEntity(c),d&&d.aabb&&p&&l.aabbDirty&&(g=p.worldTransform,v=d.aabb,m=v.center,b=v.halfExtents,w=T.d.transformMat4(T.d.create(),m,g),x=Object(P.b)(g,T.a.create()),C=T.d.transformMat3(T.d.create(),b,x),l.aabb.update(w,C),l.aabbDirty=!1),h&&d&&(k=this.cullable.getComponentByEntity((null===f||void 0===f?void 0:f.parentID)||-1),h.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(l.aabb,(null===k||void 0===k?void 0:k.visibilityPlaneMask)||j.b.INDETERMINATE,this.planes||a.getFrustum().planes),h.visible=h.visibilityPlaneMask!==j.b.OUTSIDE))}catch(y){s.e(y)}finally{s.f()}}}catch(y){n.e(y)}finally{n.f()}case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n){if(t===j.b.OUTSIDE||t===j.b.INSIDE)return t;for(var r=j.b.INSIDE,i=0,o=n.length;i<o;++i){var a=i<31?1<<i:0;if(!(i<31&&0===(t&a))){var s=n[i],u=s.normal,c=s.distance;if(T.d.dot(u,e.getNegativeFarPoint(n[i]))+c>0)return j.b.OUTSIDE;T.d.dot(u,e.getPositiveFarPoint(n[i]))+c>0&&(r|=a)}}return r}}]),e}(),f=A()(l.prototype,"mesh",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=A()(l.prototype,"cullable",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=A()(l.prototype,"geometry",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=A()(l.prototype,"hierarchy",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=A()(l.prototype,"transform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=l))||c)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(0),u=function(){function e(t,n){i()(this,e),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=n||s.d.fromValues(0,1,0),this.updatePNVertexFlag()}return a()(e,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return s.d.dot(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/s.d.len(this.normal);s.d.scale(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),o=i>=0&&i<=1;return o&&n&&s.d.lerp(n,e,t,i),o}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r,i,o,a,s,u,c,l,f,h,d,p,g=n(14),v=n.n(g),y=n(20),m=n.n(y),b=n(15),w=n.n(b),x=n(10),C=n.n(x),k=n(11),E=n.n(k),O=n(16),S=n.n(O),A=(n(42),n(9)),T=n(17),M=n(149),_=n(125),j=n(93),P=(r=Object(A.injectable)(),i=Object(A.inject)(T.a.Systems),o=Object(A.named)(T.a.FrameGraphSystem),a=Object(A.inject)(T.a.RenderPassFactory),s=Object(A.inject)(T.a.ConfigService),u=Object(A.inject)(T.a.ResourcePool),r((l=function(){function e(){C()(this,e),w()(this,"frameGraphSystem",f,this),w()(this,"renderPassFactory",h,this),w()(this,"configService",d,this),w()(this,"resourcePool",p,this)}return E()(e,[{key:"execute",value:function(){var e=m()(v.a.mark(function e(t){var n,r,i,o,a,s,u,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.renderPassFactory(j.a.IDENTIFIER),r=n.setup,i=n.execute,this.frameGraphSystem.addPass(j.a.IDENTIFIER,r,i),o=this.renderPassFactory(M.a.IDENTIFIER),a=o.setup,s=o.execute,u=o.tearDown,c=this.frameGraphSystem.addPass(M.a.IDENTIFIER,a,s,u),this.frameGraphSystem.present(c.data.output);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(e,t){return this.renderPassFactory(_.a.IDENTIFIER).pick(e,t)}}]),e}(),f=S()(l.prototype,"frameGraphSystem",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=S()(l.prototype,"renderPassFactory",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=S()(l.prototype,"configService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=S()(l.prototype,"resourcePool",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=l))||c)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(10),i=n.n(r),o=n(28),a=n.n(o),s=n(29),u=n.n(s),c=n(30),l=n.n(c),f=n(21),h=n.n(f);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var p=function(e){u()(n,e);var t=d(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).parentID=void 0,Object.assign(a()(r),e),r}return n}(n(34).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r,i,o,a,s,u,c,l,f,h=n(14),d=n.n(h),p=n(20),g=n.n(p),v=n(15),y=n.n(v),m=n(10),b=n.n(m),w=n(11),x=n.n(w),C=n(16),k=n.n(C),E=(n(42),n(0)),O=n(9),S=n(17),A=(r=Object(O.injectable)(),i=Object(O.inject)(S.a.HierarchyComponentManager),o=Object(O.inject)(S.a.TransformComponentManager),a=Object(O.inject)(S.a.MeshComponentManager),r((u=function(){function e(){b()(this,e),y()(this,"hierarchy",c,this),y()(this,"transform",l,this),y()(this,"mesh",f,this)}return x()(e,[{key:"execute",value:function(){var e=g()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var e=this;this.transform.forEach(function(t,n){(n.isDirty()||n.isLocalDirty())&&(e.setMeshAABBDirty(e.mesh.getComponentByEntity(t)),n.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var e=this;this.hierarchy.forEach(function(t,n){var r=e.transform.getComponentByEntity(t),i=e.transform.getComponentByEntity(n.parentID);null!==r&&null!==i&&r.updateTransformWithParent(i)})}},{key:"attach",value:function(e,t,n){this.hierarchy.contains(e)&&this.detach(e),this.hierarchy.create(e,{parentID:t});var r=this.mesh.getComponentByEntity(t);if(this.setMeshAABBDirty(r),r&&-1===r.children.indexOf(e)&&r.children.push(e),this.hierarchy.getCount()>1)for(var i=this.hierarchy.getCount()-1;i>0;--i)for(var o=this.hierarchy.getEntity(i),a=0;a<i;++a){if(this.hierarchy.getComponent(a).parentID===o){this.hierarchy.moveItem(i,a),++i;break}}this.hierarchy.getComponentByEntity(e);var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t));var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e),s=this.transform.getComponentByEntity(t)),u.parent=s,!n&&s&&(u.matrixTransform(E.b.invert(E.b.create(),s.worldTransform)),u.updateTransform()),s&&u.updateTransformWithParent(s)}},{key:"detach",value:function(e){var t=this.hierarchy.getComponentByEntity(e);if(null!==t){var n=this.transform.getComponentByEntity(e);null!==n&&(n.parent=null,n.applyTransform()),this.hierarchy.removeKeepSorted(e);var r=this.mesh.getComponentByEntity(t.parentID);if(r){var i=r.children.indexOf(e);r.children.splice(i,1)}this.setMeshAABBDirty(r)}}},{key:"detachChildren",value:function(e){var t=this.mesh.getComponentByEntity(e);t&&(t.children=[]);for(var n=0;n<this.hierarchy.getCount();){var r;if((null===(r=this.hierarchy.getComponent(n))||void 0===r?void 0:r.parentID)===e){var i=this.hierarchy.getEntity(n);this.detach(i)}else++n}}},{key:"setMeshAABBDirty",value:function(e){e&&(e.aabbDirty=!0)}}]),e}(),c=k()(u.prototype,"hierarchy",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=k()(u.prototype,"transform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=k()(u.prototype,"mesh",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(28),u=n.n(s),c=n(29),l=n.n(c),f=n(30),h=n.n(f),d=n(21),p=n.n(d),g=n(0);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var y=function(e){l()(n,e);var t=v(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).dirtyFlag=void 0,r.localDirtyFlag=void 0,r.parent=null,r.localPosition=g.d.fromValues(0,0,0),r.localRotation=g.c.fromValues(0,0,0,1),r.localScale=g.d.fromValues(1,1,1),r.localTransform=g.b.create(),r.position=g.d.fromValues(0,0,0),r.rotation=g.c.fromValues(0,0,0,1),r.scaling=g.d.fromValues(1,1,1),r.worldTransform=g.b.create(),r.matrixTransform=function(){var e=g.b.create();return function(t){g.b.multiply(e,r.getLocalTransform(),t),g.b.getScaling(r.localScale,e),g.b.getTranslation(r.localPosition,e),g.b.getRotation(r.localRotation,e)}}(),r.rotateRollPitchYaw=function(){var e=g.c.create(),t=g.c.create(),n=g.c.create();return function(i,o,a){r.setDirty(),g.c.fromEuler(e,i,0,0),g.c.fromEuler(t,0,o,0),g.c.fromEuler(n,0,0,a),g.c.multiply(r.localRotation,e,r.localRotation),g.c.multiply(r.localRotation,r.localRotation,t),g.c.multiply(r.localRotation,n,r.localRotation),g.c.normalize(r.localRotation,r.localRotation)}}(),r.lerp=function(){var e=g.d.create(),t=g.c.create(),n=g.d.create(),i=g.d.create(),o=g.c.create(),a=g.d.create();return function(s,u,c){r.setDirty(),g.b.getScaling(e,s.worldTransform),g.b.getTranslation(n,s.worldTransform),g.b.getRotation(t,s.worldTransform),g.b.getScaling(i,u.worldTransform),g.b.getTranslation(a,u.worldTransform),g.b.getRotation(o,u.worldTransform),g.d.lerp(r.localScale,e,i,c),g.c.slerp(r.localRotation,t,o,c),g.d.lerp(r.localPosition,n,a,c)}}(),r.translate=function(){var e=g.d.create();return function(t){return g.d.add(e,r.getPosition(),t),r.setPosition(e),r.setDirty(!0),u()(r)}}(),r.translateLocal=function(e){return g.d.transformQuat(e,e,r.localRotation),g.d.add(r.localPosition,r.localPosition,e),r.setLocalDirty(!0),u()(r)},r.setPosition=function(){var e=g.b.create();return function(t){return r.position=t,r.setLocalDirty(!0),null===r.parent?g.d.copy(r.localPosition,t):(g.b.copy(e,r.parent.worldTransform),g.b.invert(e,e),g.d.transformMat4(r.localPosition,t,e)),u()(r)}}(),r.rotate=function(){var e=g.c.create();return function(t){if(null===r.parent)g.c.multiply(r.localRotation,r.localRotation,t),g.c.normalize(r.localRotation,r.localRotation);else{var n=r.getRotation(),i=r.parent.getRotation();g.c.copy(e,i),g.c.invert(e,e),g.c.multiply(e,e,t),g.c.multiply(r.localRotation,t,n),g.c.normalize(r.localRotation,r.localRotation)}return r.setLocalDirty(),u()(r)}}(),r.rotateLocal=function(e){return g.c.multiply(r.localRotation,r.localRotation,e),g.c.normalize(r.localRotation,r.localRotation),r.setLocalDirty(!0),u()(r)},r.setRotation=function(){var e=g.c.create();return function(t){return null===r.parent?g.c.copy(r.localRotation,t):(g.c.copy(e,r.parent.getRotation()),g.c.invert(e,e),g.c.copy(r.localRotation,e),g.c.mul(r.localRotation,r.localRotation,t)),r.setLocalDirty(!0),u()(r)}}(),r}return a()(n,[{key:"setLocalPosition",value:function(e){g.d.copy(this.localPosition,e),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(e){g.d.copy(this.localScale,e),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(e){return g.c.copy(this.localRotation,e),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.localDirtyFlag|=n.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&null===this.parent&&(g.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(e){g.b.multiply(this.worldTransform,e.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),g.b.getScaling(this.localScale,this.worldTransform),g.b.getTranslation(this.localPosition,this.worldTransform),g.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=g.d.fromValues(0,0,0),this.localRotation=g.c.fromValues(0,0,0,1),this.localScale=g.d.fromValues(1,1,1)}},{key:"scaleLocal",value:function(e){return this.setLocalDirty(),g.d.multiply(this.localScale,this.localScale,e),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(g.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return g.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return g.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return g.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),n}(n(34).a);y.DIRTY=1},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,i=n(10),o=n.n(i),a=n(11),s=n.n(a),u=n(9),c=Object(u.injectable)()(r=function(){function e(){o()(this,e),this.config=void 0}return s()(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),e}())||r},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r,i,o=n(10),a=n.n(o),s=n(11),u=n.n(s),c=n(9);!function(e){e.PANSTART="PANSTART",e.PANEND="PANEND",e.PANMOVE="PANMOVE",e.PINCH="PINCH",e.KEYDOWN="KEYDOWN",e.KEYUP="KEYUP",e.HOVER="HOVER"}(i||(i={}));var l=Object(c.injectable)()(r=function(){function e(){a()(this,e)}return u()(e,[{key:"listen",value:function(e){}},{key:"on",value:function(e,t){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),e}())||r},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";var r=n(63),i=n(46);t.a=function(e){return Object(r.a)(e,Object(i.a)(e))}},function(e,t,n){"use strict";var r=n(111),i=n.n(r),o=n(14),a=n.n(o),s=n(20),u=n.n(s),c=n(15),l=n.n(c),f=n(10),h=n.n(f),d=n(11),p=n.n(d),g=n(16),v=n.n(g),y=(n(42),n(9)),m=n(17),b=function e(){h()(this,e),this.index=void 0},w=function e(){h()(this,e),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},x=function(){function e(){h()(this,e),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return p()(e,[{key:"read",value:function(e){return this.reads.find(function(t){return t.index===e.index})||this.reads.push(e),e}},{key:"sample",value:function(e){return this.read(e),e}},{key:"write",value:function(e,t){if(this.writes.find(function(e){return e.index===t.index}))return t;var n=e.getResourceNode(t);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=e.createResourceNode(n.resource);return e.getResourceNode(r).writer=this,this.writes.push(r),r}}]),e}(),C=n(29),k=n.n(C),E=n(30),O=n.n(E),S=n(21),A=n.n(S);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var i=A()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O()(this,n)}}var M,_,j,P,N,R=function(e){k()(n,e);var t=T(n);function n(){var e;h()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).version=0,e.refs=0,e.name=void 0,e.imported=void 0,e.priority=void 0,e.discardStart=!0,e.discardEnd=!1,e.descriptor=void 0,e.resource=void 0,e}return p()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}(function e(){h()(this,e),this.first=void 0,this.last=void 0}),D=function e(){h()(this,e),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function I(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",function(){return F});var F=(M=Object(y.injectable)(),_=Object(y.inject)(m.a.RenderEngine),M((P=function(){function e(){h()(this,e),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],l()(this,"engine",N,this)}return p()(e,[{key:"execute",value:function(){var e=u()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.compile(),e.next=3,this.executePassNodes(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(e){e.tearDown&&e.tearDown()}),this.reset()}},{key:"addPass",value:function(e,t,n,r){var i=new w;i.execute=n,r&&(i.tearDown=r),i.name=e;var o=new x;return o.name=e,this.passNodes.push(o),this.frameGraphPasses.push(i),t(this,o,i),i}},{key:"getPass",value:function(e){return this.frameGraphPasses.find(function(t){return t.name===e})}},{key:"compile",value:function(){var e,t=this,n=I(this.passNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach(function(e){t.resourceNodes[e.index].readerCount++})}}catch(j){n.e(j)}finally{n.f()}var i,o=[],a=I(this.resourceNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;0===s.readerCount&&o.push(s)}}catch(j){a.e(j)}finally{a.f()}for(;o.length;){var u=o.pop(),c=u&&u.writer;if(c&&0===--c.refCount){var l,f=I(c.reads);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=this.resourceNodes[h.index];0===--d.readerCount&&o.push(d)}}catch(j){f.e(j)}finally{f.f()}}}this.resourceNodes.forEach(function(e){e.resource.refs+=e.readerCount});var p,g=I(this.passNodes);try{for(g.s();!(p=g.n()).done;){var v=p.value;if(v.refCount){var y,m=I(v.reads);try{for(m.s();!(y=m.n()).done;){var b=y.value,w=this.resourceNodes[b.index].resource;w.first=w.first?w.first:v,w.last=v}}catch(j){m.e(j)}finally{m.f()}var x,C=I(v.writes);try{for(C.s();!(x=C.n()).done;){var k=x.value,E=this.resourceNodes[k.index].resource;E.first=E.first?E.first:v,E.last=v}}catch(j){C.e(j)}finally{C.f()}}}}catch(j){g.e(j)}finally{g.f()}for(var O=0;O<2;O++){var S,A=I(this.resourceNodes);try{for(A.s();!(S=A.n()).done;){var T=S.value.resource;if(T.priority===O&&T.refs){var M=T.first,_=T.last;M&&_&&(M.devirtualize.push(T),_.destroy.push(T))}}}catch(j){A.e(j)}finally{A.f()}}}},{key:"executePassNodes",value:function(){var e=u()(a.a.mark(function e(t){var n,r,o,s,u,c,l,f,h,d,p,g,v;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=I(this.passNodes.entries()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=18;break}if(o=i()(r.value,2),s=o[0],!(u=o[1]).refCount){e.next=16;break}c=I(u.devirtualize);try{for(c.s();!(l=c.n()).done;)l.value.preExecuteDevirtualize(this.engine)}catch(a){c.e(a)}finally{c.f()}f=I(u.destroy);try{for(f.s();!(h=f.n()).done;)h.value.preExecuteDestroy(this.engine)}catch(a){f.e(a)}finally{f.f()}return e.next=12,this.frameGraphPasses[s].execute(this,this.frameGraphPasses[s],t);case 12:d=I(u.devirtualize);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDevirtualize(this.engine)}catch(a){d.e(a)}finally{d.f()}g=I(u.destroy);try{for(g.s();!(v=g.n()).done;)v.value.postExecuteDestroy(this.engine)}catch(a){g.e(a)}finally{g.f()}case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:this.reset();case 27:case"end":return e.stop()}},e,this,[[1,20,23,26]])}));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(e){return this.resourceNodes[e.index]}},{key:"createResourceNode",value:function(e){var t=new D;t.resource=e,t.version=e.version,this.resourceNodes.push(t);var n=new b;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(e,t,n){var r=new R;return r.name=t,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(e,t,n){var r=new R;return r.name=t,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(e){this.addPass("Present",function(t,n){n.read(e),n.hasSideEffect=!0},u()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})))}}]),e}(),N=v()(P.prototype,"engine",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=P))||j)},function(e,t,n){"use strict";var r=n(8),i=n.n(r),o=n(10),a=n.n(o),s=n(11),u=n.n(s),c=n(9);var l,f=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function h(e){var t={};return{content:e=e.replace(f,function(e,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce(function(e,t){return e.push(Number(t.trim())),e},[]):new Array(function(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16}return t}(n)).fill(0)}return t[o]=a,"uniform ".concat(n," ").concat(o,";\n")}),uniforms:t}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"a",function(){return y});var g=/precision\s+(high|low|medium)p\s+float/,v=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,y=Object(c.injectable)()(l=function(){function e(){a()(this,e),this.moduleCache={},this.rawContentCache={}}return u()(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"})}},{key:"registerModule",value:function(e,t){if(!this.rawContentCache[e]){var n=t.vs,r=void 0===n?"":n,i=t.fs,o=void 0===i?"":i,a=t.uniforms,s=h(r),u=s.content,c=s.uniforms,l=h(o),f=l.content,d=l.uniforms;this.rawContentCache[e]={fs:f,uniforms:p(p(p({},c),d),a),vs:u}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var t=this;if(this.moduleCache[e])return this.moduleCache[e];var n,r=this.rawContentCache[e].vs||"",i=this.rawContentCache[e].fs||"",o=this.processModule(r,[],"vs"),a=o.content,s=o.includeList,u=this.processModule(i,[],"fs"),c=u.content,l=u.includeList,f=c,h=(n=s.concat(l).concat(e),n.filter(function(e,t,n){return n.indexOf(e)===t})).reduce(function(e,n){return p(p({},e),t.rawContentCache[n].uniforms)},{});return g.test(c)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+c),this.moduleCache[e]={fs:f.trim(),uniforms:h,vs:a.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,t,n){var r=this;return{content:e.replace(v,function(e,i){var o=i.split(" ")[0].replace(/"/g,"");if(t.indexOf(o)>-1)return"";var a=r.rawContentCache[o][n];return t.push(o),r.processModule(a||"",t,n).content}),includeList:t}}}]),e}())||l},function(e,t,n){"use strict";var r=n(8),i=n.n(r),o=n(10),a=n.n(o),s=n(11),u=n.n(s),c=n(28),l=n.n(c),f=n(29),h=n.n(f),d=n(30),p=n.n(d),g=n(21),v=n.n(g),y=n(0),m=n(34),b=n(69),w=n.n(b),x=9007199254740991,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Arguments]"]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object Boolean]"]=C["[object DataView]"]=C["[object Date]"]=C["[object Error]"]=C["[object Function]"]=C["[object Map]"]=C["[object Number]"]=C["[object Object]"]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object WeakMap]"]=!1;var k=Object.prototype.toString;var E=function(e){return function(e){return!!e&&"object"===w()(e)}(e)&&function(e){return"number"===typeof e&&e>-1&&e%1===0&&e<=x}(e.length)&&!!C[k.call(e)]};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}n.d(t,"a",function(){return T});var T=function(e){h()(n,e);var t=A(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=0,r.maxInstancedCount=void 0,r.aabb=void 0,r.entity=void 0,Object.assign(l()(r),e),r}return u()(n,[{key:"setAttribute",value:function(e,t,n,r){var i=this.attributes.find(function(t){return t.name===e});return i?(i.data=t,i.dirty=!0):this.attributes.push(S(S({dirty:!0,name:e,data:t},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(e){return this.indices=new Uint32Array(e.buffer?e.buffer:e),this.dirty=!0,this}},{key:"applyMatrix",value:function(e){var t=this.attributes.find(function(e){return"position"===e.name}),n=this.attributes.find(function(e){return"normal"===e.name});if(t&&(t.dirty=!0,t.data&&t.data.length))for(var r=0;r<t.data.length;r+=3){var i=y.e.fromValues(t.data[r],t.data[r+1],t.data[r+2],1);y.e.transformMat4(i,i,e),E(t.data)?t.data.set([i[0],i[1],i[2]],r):(t.data[r]=i[0],t.data[r+1]=i[1],t.data[r+2]=i[2])}if(n){var o=y.a.normalFromMat4(y.a.create(),e);if(n.data&&n.data.length)for(var a=0;a<n.data.length;a+=3){var s=y.d.fromValues(n.data[a],n.data[a+1],n.data[a+2]);y.d.transformMat3(s,s,o),y.d.normalize(s,s),E(n.data)?n.data.set([s[0],s[1],s[2]],a):(n.data[a]=s[0],n.data[a+1]=s[1],n.data[a+2]=s[2])}}}}]),n}(m.a)},,,function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(105))},function(e,t,n){"use strict";t.a=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){"use strict";(function(e){var r=n(36),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(272)(e))},function(e,t,n){"use strict";t.a=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";var r=n(144);t.a=function(e,t){var n=t?Object(r.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){"use strict";var r=n(146),i=Math.max;t.a=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);++a<s;)u[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(u),Object(r.a)(e,this,c)}}},function(e,t,n){"use strict";var r=n(209),i=n(150),o=n(62),a=i.a?function(e,t){return Object(i.a)(e,"toString",{configurable:!0,enumerable:!1,value:Object(r.a)(t),writable:!0})}:o.a,s=800,u=16,c=Date.now;var l=function(e){var t=0,n=0;return function(){var r=c(),i=u-(r-n);if(n=r,i>0){if(++t>=s)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(a);t.a=l},function(e,t,n){"use strict";var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},i=n(71),o=n(26),a=n(70),s=n(114),u=n(91),c=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(o.a)(e),l=!n&&Object(i.a)(e),f=!n&&!l&&Object(a.a)(e),h=!n&&!l&&!f&&Object(u.a)(e),d=n||l||f||h,p=d?r(e.length,String):[],g=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Object(s.a)(v,g))||p.push(v);return p}},function(e,t,n){"use strict";var r=n(111),i=n.n(r);n(0);function o(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(e){var t=i()(e,3);return t[0]+256*t[1]+65536*t[2]-1}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var r=n(27),i=Object.create,o=function(){function e(){}return function(t){if(!Object(r.a)(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),a=n(142),s=n(112);t.a=function(e){return"function"!=typeof e.constructor||Object(s.a)(e)?{}:o(Object(a.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(275);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},,,,,,,function(e,t,n){var r=n(97),i=n(280),o=n(152),a=n(130),s=n(171),u=n(67),c=n(282),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(54),i=n(106);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(24),i=n(285);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(287),i=n(243).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(237);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(82);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(e,t,n){var r=n(247),i=n(131),o=n(658);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){var r={};r[n(52)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(687).charAt,i=n(153),o=n(249),a=i.set,s=i.getterFor("String Iterator");o(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(22),i=n(688),o=n(298),a=n(299),s=n(133),u=n(106),c=n(131),l=n(52),f=n(24),h=n(157),d=n(297),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,v=l("iterator"),y=function(){return this};e.exports=function(e,t,n,l,d,m,b){i(n,t,l);var w,x,C,k=function(e){if(e===d&&T)return T;if(!g&&e in S)return S[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",O=!1,S=e.prototype,A=S[v]||S["@@iterator"]||d&&S[d],T=!g&&A||k(d),M="Array"==t&&S.entries||A;if(M&&(w=o(M.call(new e)),p!==Object.prototype&&w.next&&(f||o(w)===p||(a?a(w,p):"function"!=typeof w[v]&&u(w,v,y)),s(w,E,!0,!0),f&&(h[E]=y))),"values"==d&&A&&"values"!==A.name&&(O=!0,T=function(){return A.call(this)}),f&&!b||S[v]===T||u(S,v,T),h[t]=T,d)if(x={values:k("values"),keys:m?T:k("keys"),entries:k("entries")},b)for(C in x)!g&&!O&&C in S||c(S,C,x[C]);else r({target:t,proto:!0,forced:g||O},x);return x}},function(e,t,n){var r=n(294),i=n(157),o=n(52)("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(23),i=n(250);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";var r=n(77);e.exports=s;var i="\0",o="\0",a="\x01";function s(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function u(e,t){e[t]?e[t]++:e[t]=1}function c(e,t){--e[t]||delete e[t]}function l(e,t,n,o){var s=""+t,u=""+n;if(!e&&s>u){var c=s;s=u,u=c}return s+a+u+a+(r.isUndefined(o)?i:o)}function f(e,t){return l(e,t.v,t.w,t.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(e){return this._label=e,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._in[t])})},s.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._out[t])})},s.prototype.setNodes=function(e,t){var n=arguments,i=this;return r.each(e,function(e){n.length>1?i.setNode(e,t):i.setNode(e)}),this},s.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=o,this._children[e]={},this._children[o][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},s.prototype.node=function(e){return this._nodes[e]},s.prototype.hasNode=function(e){return r.has(this._nodes,e)},s.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},s.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t=o;else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},s.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},s.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==o)return t}},s.prototype.children=function(e){if(r.isUndefined(e)&&(e=o),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if(e===o)return this.nodes();if(this.hasNode(e))return[]}},s.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},s.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},s.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},s.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},s.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),r.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var i={};return this._isCompound&&r.each(t.nodes(),function(e){t.setParent(e,function e(r){var o=n.parent(r);return void 0===o||t.hasNode(o)?(i[r]=o,o):o in i?i[o]:e(o)}(e))}),t},s.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(e,t){var n=this,i=arguments;return r.reduce(e,function(e,r){return i.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r}),this},s.prototype.setEdge=function(){var e,t,n,i,o=!1,a=arguments[0];"object"===typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(e=a,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=l(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return o&&(this._edgeLabels[s]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=o?i:this._defaultEdgeLabelFn(e,t,n);var c=function(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};r&&(s.name=r);return s}(this._isDirected,e,t,n);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[s]=c,u(this._preds[t],e),u(this._sucs[e],t),this._in[t][s]=c,this._out[e][s]=c,this._edgeCount++,this},s.prototype.edge=function(e,t,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(e,t,n){var i=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],c(this._preds[t],e),c(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},s.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=r.values(n);return t?r.filter(i,function(e){return e.v===t}):i}},s.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=r.values(n);return t?r.filter(i,function(e){return e.w===t}):i}},s.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},function(e,t,n){var r=n(120)(n(84),"Map");e.exports=r},function(e,t,n){var r=n(771),i=n(778),o=n(780),a=n(781),s=n(782);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){(function(e){var r=n(314),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s}).call(this,n(228)(e))},function(e,t,n){var r=n(184),i=n(788),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(321),i=n(322),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return o.call(e,t)}))}:i;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(327);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(264),i=n(107);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(807)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(45),i=n(138),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(260),i=n(841);e.exports=function e(t,n,o,a,s){var u=-1,c=t.length;for(o||(o=i),s||(s=[]);++u<c;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(e,t,n){var r=n(138);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===u?s===s&&!r(s):n(s,u)))var u=s,c=a}return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(270),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(269),i=n(375),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){e.exports={graphlib:n(83),layout:n(865),debug:n(924),util:{time:n(61).time,notime:n(61).notime},version:n(925)}},function(e,t,n){var r=n(996);e.exports=d,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(s+=e.slice(a,d),a=d+f.length,h)s+=h[1];else{var p=e[a],g=n[2],v=n[3],y=n[4],m=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var x=null!=g&&null!=p&&p!==g,C="+"===b||"*"===b,k="?"===b||"*"===b,E=n[2]||l,O=y||m;r.push({name:v||o++,prefix:g||"",delimiter:E,optional:k,repeat:C,partial:x,asterisk:!!w,pattern:O?c(O):w?".*":"[^"+u(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');o+=l.prefix+f}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),a+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),g=a.slice(-p.length)===p;return i||(a=(g?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&g?"":"(?="+p+"|$)",l(new RegExp("^"+a,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(5),i=n.n(r),o=(n(139),i.a.createContext(null));var a=function(e){e()},s=function(){return a},u={notify:function(){}};var c=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=u,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=u)},e}(),l="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var f=function(e){var t=e.store,n=e.context,a=e.children,s=Object(r.useMemo)(function(){var e=new c(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),u=Object(r.useMemo)(function(){return t.getState()},[t]);l(function(){var e=s.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,u]);var f=n||o;return i.a.createElement(f.Provider,{value:s},a)},h=n(66),d=n(92),p=n(126),g=n.n(p),v=n(129),y=[],m=[null,null];function b(e,t){var n=e[1];return[t.payload,n+1]}function w(e,t,n){l(function(){return e.apply(void 0,t)},n)}function x(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function C(e,t,n,r,i,o,a,s,u,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===o.current?a.current||u():(o.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var k=function(){return[null,0]};function E(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,u=n.methodName,l=void 0===u?"connectAdvanced":u,f=n.renderCountProp,p=void 0===f?void 0:f,E=n.shouldHandleStateChanges,O=void 0===E||E,S=n.storeKey,A=void 0===S?"store":S,T=(n.withRef,n.forwardRef),M=void 0!==T&&T,_=n.context,j=void 0===_?o:_,P=Object(d.a)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),N=j;return function(t){var n=t.displayName||t.name||"Component",o=s(n),a=Object(h.a)({},P,{getDisplayName:s,methodName:l,renderCountProp:p,shouldHandleStateChanges:O,storeKey:A,displayName:o,wrappedComponentName:n,WrappedComponent:t}),u=P.pure;var f=u?r.useMemo:function(e){return e()};function E(n){var o=Object(r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=Object(d.a)(n,["reactReduxForwardedRef"]);return[n.context,e,t]},[n]),s=o[0],u=o[1],l=o[2],p=Object(r.useMemo)(function(){return s&&s.Consumer&&Object(v.isContextConsumer)(i.a.createElement(s.Consumer,null))?s:N},[s,N]),g=Object(r.useContext)(p),E=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(g)&&Boolean(g.store);var S=E?n.store:g.store,A=Object(r.useMemo)(function(){return function(t){return e(t.dispatch,a)}(S)},[S]),T=Object(r.useMemo)(function(){if(!O)return m;var e=new c(S,E?null:g.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[S,E,g]),M=T[0],_=T[1],j=Object(r.useMemo)(function(){return E?g:Object(h.a)({},g,{subscription:M})},[E,g,M]),P=Object(r.useReducer)(b,y,k),R=P[0][0],D=P[1];if(R&&R.error)throw R.error;var I=Object(r.useRef)(),L=Object(r.useRef)(l),F=Object(r.useRef)(),B=Object(r.useRef)(!1),z=f(function(){return F.current&&l===L.current?F.current:A(S.getState(),l)},[S,R,l]);w(x,[L,I,B,l,z,F,_]),w(C,[O,S,M,A,L,I,B,F,_,D],[S,M,A]);var V=Object(r.useMemo)(function(){return i.a.createElement(t,Object(h.a)({},z,{ref:u}))},[u,t,z]);return Object(r.useMemo)(function(){return O?i.a.createElement(p.Provider,{value:j},V):V},[p,V,j])}var S=u?i.a.memo(E):E;if(S.WrappedComponent=t,S.displayName=E.displayName=o,M){var T=i.a.forwardRef(function(e,t){return i.a.createElement(S,Object(h.a)({},e,{reactReduxForwardedRef:t}))});return T.displayName=o,T.WrappedComponent=t,g()(T,t)}return g()(S,t)}}function O(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function S(e,t){if(O(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!O(e[n[i]],t[n[i]]))return!1;return!0}function A(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function T(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function M(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=T(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=T(i),i=r(t,n)),i},r}}var _=[function(e){return"function"===typeof e?M(e):void 0},function(e){return e?void 0:A(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?A(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}];var j=[function(e){return"function"===typeof e?M(e):void 0},function(e){return e?void 0:A(function(){return{}})}];function P(e,t,n){return Object(h.a)({},n,e,t)}var N=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return P}}];function R(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function D(e,t,n,r,i){var o,a,s,u,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,a),g=!l(i,o);return o=i,a=d,p&&g?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):p?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):g?function(){var t=e(o,a),r=!h(t,s);return s=t,r&&(c=n(s,u,a)),c}():c}return function(i,l){return d?p(i,l):(s=e(o=i,a=l),u=t(r,a),c=n(s,u,a),d=!0,c)}}function I(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Object(d.a)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?D:R)(a,s,u,e,o)}function L(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function F(e,t){return e===t}function B(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?E:n,i=t.mapStateToPropsFactories,o=void 0===i?j:i,a=t.mapDispatchToPropsFactories,s=void 0===a?_:a,u=t.mergePropsFactories,c=void 0===u?N:u,l=t.selectorFactory,f=void 0===l?I:l;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,g=void 0===p?F:p,v=a.areOwnPropsEqual,y=void 0===v?S:v,m=a.areStatePropsEqual,b=void 0===m?S:m,w=a.areMergedPropsEqual,x=void 0===w?S:w,C=Object(d.a)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),k=L(e,o,"mapStateToProps"),E=L(t,s,"mapDispatchToProps"),O=L(n,c,"mergeProps");return r(f,Object(h.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:k,initMapDispatchToProps:E,initMergeProps:O,pure:l,areStatesEqual:g,areOwnPropsEqual:y,areStatePropsEqual:b,areMergedPropsEqual:x},C))}}var z=B();var V,U=n(81);n.d(t,"a",function(){return f}),n.d(t,"b",function(){return z}),V=U.unstable_batchedUpdates,a=V},,function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(646);function i(){}var o=null,a={};function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==i&&d(e,this)}function u(e,t){for(;3===e._V;)e=e._W;if(s._Y&&s._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){r(function(){var n=1===e._V?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(n){return o=n,a}}(n,e._W);r===a?l(t.promise,o):c(t.promise,r)}else 1===e._V?c(t.promise,e._W):l(t.promise,e._W)})}(e,t)}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=function(e){try{return e.then}catch(t){return o=t,a}}(t);if(n===a)return l(e,o);if(n===e.then&&t instanceof s)return e._V=3,e._W=t,void f(e);if("function"===typeof n)return void d(n.bind(t),e)}e._V=1,e._W=t,f(e)}function l(e,t){e._V=2,e._W=t,s._Z&&s._Z(e,t),f(e)}function f(e){if(1===e._U&&(u(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)u(e,e._X[t]);e._X=null}}function h(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function d(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(r){return o=r,a}}(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==a||(n=!0,l(t,o))}e.exports=s,s._Y=null,s._Z=null,s._0=i,s.prototype.then=function(e,t){if(this.constructor!==s)return function(e,t,n){return new e.constructor(function(r,o){var a=new s(i);a.then(r,o),u(e,new h(t,n,a))})}(this,e,t);var n=new s(i);return u(this,new h(e,t,n)),n}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(82),i=n(237),o="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(97),i=n(82),o=n(283);e.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(54),i=n(75),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(285),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(54),i=n(239),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(67),i=n(653),o=n(236),a=n(76);e.exports=function(e,t){for(var n=i(t),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(67),i=n(130),o=n(654).indexOf,a=n(154);e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(82),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,n){"use strict";var r=n(171),i=n(76),o=n(152);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){var r=n(75),i=n(244),o=n(52)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(245);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r,i,o=n(54),a=n(657),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(247),i=n(237),o=n(52)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(287),i=n(243);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(52);t.f=r},function(e,t,n){"use strict";var r,i,o,a=n(298),s=n(106),u=n(67),c=n(52),l=n(24),f=c("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):h=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var r=n(67),i=n(156),o=n(172),a=n(689),s=o("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){var r=n(23),i=n(690);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(23);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(52),i=n(157),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(52)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(22),i=n(54),o=n(289),a=n(131),s=n(304),u=n(31),c=n(305),l=n(75),f=n(82),h=n(302),d=n(133),p=n(697);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),y=g?"set":"add",m=i[e],b=m&&m.prototype,w=m,x={},C=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof m||!(v||b.forEach&&!f(function(){(new m).entries().next()}))))w=n.getConstructor(t,e,g,y),s.REQUIRED=!0;else if(o(e,!0)){var k=new w,E=k[y](v?{}:-0,1)!=k,O=f(function(){k.has(1)}),S=h(function(e){new m(e)}),A=!v&&f(function(){for(var e=new m,t=5;t--;)e[y](t,t);return!e.has(-0)});S||((w=t(function(t,n){c(t,w,e);var r=p(new m,t,w);return void 0!=n&&u(n,r[y],r,g),r})).prototype=b,b.constructor=w),(O||A)&&(C("delete"),C("has"),g&&C("get")),(A||E)&&C(y),v&&b.clear&&delete b.clear}return x[e]=w,r({global:!0,forced:w!=m},x),d(w,e),v||n.setStrong(w,e,g),w}},function(e,t,n){var r=n(154),i=n(75),o=n(67),a=n(76).f,s=n(173),u=n(696),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},h=function(e){a(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},d=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!f(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},getWeakData:function(e,t){if(!o(e,c)){if(!f(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},onFreeze:function(e){return u&&d.REQUIRED&&f(e)&&!o(e,c)&&h(e),e}};r[c]=!0},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var r=n(76).f,i=n(174),o=n(698),a=n(53),s=n(305),u=n(31),c=n(249),l=n(699),f=n(97),h=n(304).fastKey,d=n(153),p=d.set,g=d.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=r&&u(r,e[c],e,n)}),d=g(t),v=function(e,t,n){var r,i,o=d(e),a=y(e,t);return a?a.value=n:(o.last=a={index:i=h(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},y=function(e,t){var n,r=d(e),i=h(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){for(var e=d(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=d(this),n=y(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),f?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=d(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!y(this,e)}}),o(l.prototype,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),f&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=g(t),o=g(r);c(e,t,function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){var r=n(54),i=n(700),o=n(701),a=n(106),s=n(52),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var h=r[f],d=h&&h.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(g){d[u]=l}if(d[c]||a(d,c,f),i[f])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(g){d[p]=o[p]}}}},function(e,t,n){"use strict";var r=n(41),i=n(53),o=n(31);e.exports=function(e){var t,n,a,s,u=arguments.length,c=u>1?arguments[1]:void 0;return r(this),(t=void 0!==c)&&r(c),void 0==e?new this:(n=[],t?(a=0,s=i(c,u>2?arguments[2]:void 0,2),o(e,function(e){n.push(s(e,a++))})):o(e,n.push,n),new this(n))}},function(e,t,n){"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}},function(e,t,n){"use strict";var r=n(23),i=n(41);e.exports=function(){for(var e,t=r(this),n=i(t.delete),o=!0,a=0,s=arguments.length;a<s;a++)e=n.call(t,arguments[a]),o=o&&e;return!!o}},function(e,t,n){"use strict";var r=n(23);e.exports=function(e,t){var n,i=r(this),o=arguments.length>2?arguments[2]:void 0;if("function"!=typeof t&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(e)?(n=i.get(e),"function"==typeof t&&(n=t(n),i.set(e,n))):"function"==typeof o&&(n=o(),i.set(e,n)),n}},,function(e,t,n){var r=n(175),i=n(255),o=n(180),a=n(783),s=n(789),u=n(319),c=n(320),l=n(792),f=n(793),h=n(324),d=n(794),p=n(137),g=n(798),v=n(799),y=n(329),m=n(45),b=n(136),w=n(803),x=n(78),C=n(805),k=n(107),E=n(122),O=1,S=2,A=4,T="[object Arguments]",M="[object Function]",_="[object GeneratorFunction]",j="[object Object]",P={};P[T]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[j]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[M]=P["[object WeakMap]"]=!1,e.exports=function e(t,n,N,R,D,I){var L,F=n&O,B=n&S,z=n&A;if(N&&(L=D?N(t,R,D,I):N(t)),void 0!==L)return L;if(!x(t))return t;var V=m(t);if(V){if(L=g(t),!F)return c(t,L)}else{var U=p(t),G=U==M||U==_;if(b(t))return u(t,F);if(U==j||U==T||G&&!D){if(L=B||G?{}:y(t),!F)return B?f(t,s(L,t)):l(t,a(L,t))}else{if(!P[U])return D?t:{};L=v(t,U,F)}}I||(I=new r);var H=I.get(t);if(H)return H;I.set(t,L),C(t)?t.forEach(function(r){L.add(e(r,n,N,r,t,I))}):w(t)&&t.forEach(function(r,i){L.set(i,e(r,n,N,i,t,I))});var W=V?void 0:(z?B?d:h:B?E:k)(t);return i(W||t,function(r,i){W&&(r=t[i=r]),o(L,i,e(r,n,N,i,t,I))}),L}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(105))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,n){var r=n(120),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},function(e,t,n){var r=n(784),i=n(160),o=n(45),a=n(136),s=n(182),u=n(161),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),h=!n&&!l&&!f&&u(e),d=n||l||f||h,p=d?r(e.length,String):[],g=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,g))||p.push(v);return p}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){(function(e){var r=n(84),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(228)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(260),i=n(185),o=n(259),a=n(322),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,n){var r=n(325),i=n(259),o=n(107);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(260),i=n(45);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t,n){var r=n(120)(n(84),"Set");e.exports=r},function(e,t,n){var r=n(84).Uint8Array;e.exports=r},function(e,t,n){var r=n(261);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(330),i=n(185),o=n(184);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(78),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){e.exports=n(332)},function(e,t,n){var r=n(255),i=n(186),o=n(333),a=n(45);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(e,t,n){var r=n(123);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(321),i=n(809),o=n(100),a=n(45);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},function(e,t,n){var r=n(812),i=n(90);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(337),i=n(815),o=n(338),a=1,s=2;e.exports=function(e,t,n,u,c,l){var f=n&a,h=e.length,d=t.length;if(h!=d&&!(f&&d>h))return!1;var p=l.get(e),g=l.get(t);if(p&&g)return p==t&&g==e;var v=-1,y=!0,m=n&s?new r:void 0;for(l.set(e,t),l.set(t,e);++v<h;){var b=e[v],w=t[v];if(u)var x=f?u(w,b,v,t,e,l):u(b,w,v,e,t,l);if(void 0!==x){if(x)continue;y=!1;break}if(m){if(!i(t,function(e,t){if(!o(m,t)&&(b===e||c(b,e,n,u,l)))return m.push(t)})){y=!1;break}}else if(b!==w&&!c(b,w,n,u,l)){y=!1;break}}return l.delete(e),l.delete(t),y}},function(e,t,n){var r=n(254),i=n(813),o=n(814);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(78);e.exports=function(e){return e===e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(825);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(826),i=n(343);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(188),i=n(160),o=n(45),a=n(182),s=n(256),u=n(162);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var h=u(t[c]);if(!(f=null!=e&&n(e,h)))break;e=e[h]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&s(l)&&a(h,l)&&(o(e)||i(e))}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(829),i=n(343);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(189),i=n(100),o=n(348),a=n(45);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t,n){var r=n(186),i=n(99);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,function(e,r,i){o[++n]=t(e,r,i)}),o}},function(e,t,n){var r=n(831),i=n(186),o=n(100),a=n(832),s=n(45);e.exports=function(e,t,n){var u=s(e)?r:a,c=arguments.length<3;return u(e,o(t,4),n,c,i)}},function(e,t,n){var r=n(842),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);++a<s;)u[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(u),r(e,this,c)}}},function(e,t,n){var r=n(843),i=n(844)(r);e.exports=i},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var r=n(99),i=n(90);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){var r=n(853),i=n(107);e.exports=function(e){return null==e?[]:r(e,i(e))}},function(e,t,n){var r=n(77),i=n(356);e.exports=function(e,t,n,r){return function(e,t,n,r){var o,a,s={},u=new i,c=function(e){var t=e.v!==o?e.v:e.w,r=s[t],i=n(e),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(t,c))};e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},u.add(e,n)});for(;u.size()>0&&(o=u.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return s}(e,String(t),n||o,r||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(77);function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(e){return e.key})},i.prototype.has=function(e){return r.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var i=this._arr,o=i.length;return n[e]=o,i.push({key:e,priority:t}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},i.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},function(e,t,n){var r=n(77);e.exports=function(e){var t=0,n=[],i={},o=[];return e.nodes().forEach(function(a){r.has(i,a)||function a(s){var u=i[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach(function(e){r.has(i,e)?i[e].onStack&&(u.lowlink=Math.min(u.lowlink,i[e].index)):(a(e),u.lowlink=Math.min(u.lowlink,i[e].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(s!==c);o.push(l)}}(a)}),o}},function(e,t,n){var r=n(77);function i(e){var t={},n={},i=[];if(r.each(e.sinks(),function a(s){if(r.has(n,s))throw new o;r.has(t,s)||(n[s]=!0,t[s]=!0,r.each(e.predecessors(s),a),delete n[s],i.push(s))}),r.size(t)!==e.nodeCount())throw new o;return i}function o(){}e.exports=i,i.CycleException=o,o.prototype=new Error},function(e,t,n){var r=n(77);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],a={};return r.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,i,o,a,s){r.has(o,n)||(o[n]=!0,i||s.push(n),r.each(a(n),function(n){e(t,n,i,o,a,s)}),i&&s.push(n))}(e,t,"post"===n,a,i,o)}),o}},function(e,t,n){var r=n(872),i=1/0,o=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e===e?e:0:0===e?e:0}},function(e,t,n){var r=n(267);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(181),i=n(134);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(38),i=n(83).Graph,o=n(192).slack;function a(e,t){return r.forEach(e.nodes(),function n(i){r.forEach(t.nodeEdges(i),function(r){var a=r.v,s=i===a?r.w:a;e.hasNode(s)||o(t,r)||(e.setNode(s,{}),e.setEdge(i,s,{}),n(s))})}),e.nodeCount()}function s(e,t){return r.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return o(t,n)})}function u(e,t,n){r.forEach(e.nodes(),function(e){t.node(e).rank+=n})}e.exports=function(e){var t,n,r=new i({directed:!1}),c=e.nodes()[0],l=e.nodeCount();r.setNode(c,{});for(;a(r,e)<l;)t=s(r,e),n=r.hasNode(t.v)?o(e,t):-o(e,t),u(r,e,n);return r}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return _()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",g={};function v(){}function y(){}function m(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==n&&r.call(x,o)&&(b=x);var C=m.prototype=v.prototype=Object.create(b);function k(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var n;this._invoke=function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=C.constructor=m,m.constructor=y,y.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},k(E.prototype),E.prototype[a]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(C),u(C,s,"Generator"),C[o]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(function(e,t){var n;!function(n){!function(r){var i="object"===typeof t?t:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),o=a(n);function a(e,t){return function(n,r){"function"!==typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}"undefined"===typeof i.Reflect?i.Reflect=n:o=a(i.Reflect,o),function(t){var n=Object.prototype.hasOwnProperty,r="function"===typeof Symbol,i=r&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:u?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:u?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),f="object"===typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/webapp"})&&"true"===Object({NODE_ENV:"production",PUBLIC_URL:"/webapp"}).REFLECT_METADATA_USE_MAP_POLYFILL,h=f||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}():Map,d=f||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(f||"function"!==typeof WeakMap?function(){var e=16,t=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){var n=o(e,!0);return n[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+s()}while(c.has(t,e));return t[e]=!0,e}function o(e,t){if(!n.call(e,r)){if(!t)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var t=function(e){if("function"===typeof Uint8Array)return"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e);return a(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function g(e,t,n){var r=p.get(e);if(x(r)){if(!n)return;r=new h,p.set(e,r)}var i=r.get(t);if(x(i)){if(!n)return;i=new h,r.set(t,i)}return i}function v(e,t,n){var r=g(t,n,!1);return!x(r)&&!!r.has(e)}function y(e,t,n){var r=g(t,n,!1);if(!x(r))return r.get(e)}function m(e,t,n,r){var i=g(n,r,!0);i.set(e,t)}function b(e,t){var n=[],r=g(e,t,!1);if(x(r))return n;for(var i=r.keys(),a=function(e){var t=M(e,o);if(!A(t))throw new TypeError;var n=t.call(e);if(!k(n))throw new TypeError;return n}(i),s=0;;){var u=_(a);if(!u)return n.length=s,n;var c=u.value;try{n[s]=c}catch(l){try{j(a)}finally{throw l}}s++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function x(e){return void 0===e}function C(e){return null===e}function k(e){return"object"===typeof e?null!==e:"function"===typeof e}function E(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=M(e,i);if(void 0!==r){var o=r.call(e,n);if(k(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(A(n)){var r=n.call(e);if(!k(r))return r}var i=e.valueOf;if(A(i)){var r=i.call(e);if(!k(r))return r}}else{var i=e.valueOf;if(A(i)){var r=i.call(e);if(!k(r))return r}var o=e.toString;if(A(o)){var r=o.call(e);if(!k(r))return r}}throw new TypeError}(e,"default"===n?"number":n)}function O(e){var t=E(e,3);return"symbol"===typeof t?t:function(e){return""+e}(t)}function S(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function A(e){return"function"===typeof e}function T(e){return"function"===typeof e}function M(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!A(n))throw new TypeError;return n}}function _(e){var t=e.next();return!t.done&&t}function j(e){var t=e.return;t&&t.call(e)}function P(e){var t=Object.getPrototypeOf(e);if("function"!==typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!==typeof i?t:i===e?t:i}function N(e){return e.__=void 0,delete e.__,e}t("decorate",function(e,t,n,r){if(x(n)){if(!S(e))throw new TypeError;if(!T(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!x(i)&&!C(i)){if(!T(i))throw new TypeError;t=i}}return t}(e,t)}if(!S(e))throw new TypeError;if(!k(t))throw new TypeError;if(!k(r)&&!x(r)&&!C(r))throw new TypeError;return C(r)&&(r=void 0),n=O(n),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=e[i],a=o(t,n,r);if(!x(a)&&!C(a)){if(!k(a))throw new TypeError;r=a}}return r}(e,t,n,r)}),t("metadata",function(e,t){return function(n,r){if(!k(n))throw new TypeError;if(!x(r)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;m(e,t,n,r)}}),t("defineMetadata",function(e,t,n,r){if(!k(n))throw new TypeError;x(r)||(r=O(r));return m(e,t,n,r)}),t("hasMetadata",function(e,t,n){if(!k(t))throw new TypeError;x(n)||(n=O(n));return function e(t,n,r){var i=v(t,n,r);if(i)return!0;var o=P(n);if(!C(o))return e(t,o,r);return!1}(e,t,n)}),t("hasOwnMetadata",function(e,t,n){if(!k(t))throw new TypeError;x(n)||(n=O(n));return v(e,t,n)}),t("getMetadata",function(e,t,n){if(!k(t))throw new TypeError;x(n)||(n=O(n));return function e(t,n,r){var i=v(t,n,r);if(i)return y(t,n,r);var o=P(n);if(!C(o))return e(t,o,r);return}(e,t,n)}),t("getOwnMetadata",function(e,t,n){if(!k(t))throw new TypeError;x(n)||(n=O(n));return y(e,t,n)}),t("getMetadataKeys",function(e,t){if(!k(e))throw new TypeError;x(t)||(t=O(t));return function e(t,n){var r=b(t,n);var i=P(t);if(null===i)return r;var o=e(i,n);if(o.length<=0)return r;if(r.length<=0)return o;var a=new d;var s=[];for(var u=0,c=r;u<c.length;u++){var l=c[u],f=a.has(l);f||(a.add(l),s.push(l))}for(var h=0,p=o;h<p.length;h++){var l=p[h],f=a.has(l);f||(a.add(l),s.push(l))}return s}(e,t)}),t("getOwnMetadataKeys",function(e,t){if(!k(e))throw new TypeError;x(t)||(t=O(t));return b(e,t)}),t("deleteMetadata",function(e,t,n){if(!k(t))throw new TypeError;x(n)||(n=O(n));var r=g(t,n,!1);if(x(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||(p.delete(t),!0)})}(o)}()}(n||(n={}))}).call(this,n(278),n(105))},function(e,t,n){var r=n(369);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n(49),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n(68);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n(68),i=n(49),o=n(85),a=n(108),s=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=s,t.inject=function(e){return function(t,n,s){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var u=new o.Metadata(i.INJECT_TAG,e);"number"===typeof s?a.tagParameter(t,n,s,u):a.tagProperty(t,n,u)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n(49),i=n(124),o=n(85),a=n(936),s=function(){function e(e,t,n,s){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new a.QueryableString(t||""),this.metadata=new Array;var u=null;"string"===typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some(function(e){return r.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})})},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===r.NAMED_TAG})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return r.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})}):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(269),i=n(270),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n(49),i=n(85);t.traverseAncerstors=function e(t,n){var r=t.parentRequest;return null!==r&&(!!n(r)||e(r,n))};var o=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=o;var a=o(r.NAMED_TAG);t.namedConstraint=a;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"===typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i=n(140);function o(e){for(var t=new i.a,n=r.d.fromValues(e[0],e[1],e[2]),o=r.d.fromValues(e[0],e[1],e[2]),a=3;a<e.length;){var s=e[a++],u=e[a++],c=e[a++];s<n[0]&&(n[0]=s),u<n[1]&&(n[1]=u),c<n[2]&&(n[2]=c),s>o[0]&&(o[0]=s),u>o[1]&&(o[1]=u),c>o[2]&&(o[2]=c)}return t.setMinMax(n,o),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="undefined"!==typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r;!function(e){e.Normal="normal",e.PostProcessing="post-processing"}(r||(r={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=1e-6},function(e,t){e.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},function(e,t){e.exports=function(e,t,n){return e[0]=t,e[1]=n,e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}},function(e,t){e.exports=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}},function(e,t){e.exports=function(e){var t=e[0],n=e[1];return t*t+n*n}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i);return e}},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},function(e,t,n){"use strict";var r=n(27),i=n(145),o=n(73),a="Expected a function",s=Math.max,u=Math.min;t.a=function(e,t,n){var c,l,f,h,d,p,g=0,v=!1,y=!1,m=!0;if("function"!=typeof e)throw new TypeError(a);function b(t){var n=c,r=l;return c=l=void 0,g=t,h=e.apply(r,n)}function w(e){var n=e-p;return void 0===p||n>=t||n<0||y&&e-g>=f}function x(){var e=Object(i.a)();if(w(e))return C(e);d=setTimeout(x,function(e){var n=t-(e-p);return y?u(n,f-(e-g)):n}(e))}function C(e){return d=void 0,m&&c?b(e):(c=l=void 0,h)}function k(){var e=Object(i.a)(),n=w(e);if(c=arguments,l=this,p=e,n){if(void 0===d)return function(e){return g=e,d=setTimeout(x,t),v?b(e):h}(p);if(y)return clearTimeout(d),d=setTimeout(x,t),b(p)}return void 0===d&&(d=setTimeout(x,t)),h}return t=Object(o.a)(t)||0,Object(r.a)(n)&&(v=!!n.leading,f=(y="maxWait"in n)?s(Object(o.a)(n.maxWait)||0,t):f,m="trailing"in n?!!n.trailing:m),k.cancel=function(){void 0!==d&&clearTimeout(d),g=0,c=p=l=d=void 0},k.flush=function(){return void 0===d?h:C(Object(i.a)())},k}},function(e,t,n){"use strict";var r=n(147),i=n(115),o=Object(i.a)(function(e,t,n){Object(r.a)(e,t,n)});t.a=o},function(e,t,n){"use strict";n(206),n(207),n(212)},function(e,t,n){"use strict";var r=n(140),i=(n(10),n(11),n(0)),o=(i.d.create(),n(103));n(201),i.d.create(),i.d.create(),i.d.create(),i.d.create(),i.d.create();n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return o.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(956);t.default=function(e,t){return void 0===t&&(t=!0),{lazyInject:r.makePropertyInjectDecorator(e,t),lazyInjectNamed:r.makePropertyInjectNamedDecorator(e,t),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(e,t),lazyMultiInject:r.makePropertyMultiInjectDecorator(e,t)}}},function(e,t,n){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){var t=new Error("(regl) "+e);throw console.error(t),t}function i(e,t){e||r(t)}function o(e){return e?": "+e:""}function a(e,t){switch(t){case"number":return"number"===typeof e;case"object":return"object"===typeof e;case"string":return"string"===typeof e;case"boolean":return"boolean"===typeof e;case"function":return"function"===typeof e;case"undefined":return"undefined"===typeof e;case"symbol":return"symbol"===typeof e}}function s(e,t,n){t.indexOf(e)<0&&r("invalid value"+o(n)+". must be one of: "+t)}var u=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(e,t){for(e+="";e.length<t;)e=" "+e;return e}function l(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(e,t){this.number=e,this.line=t,this.errors=[]}function h(e,t,n){this.file=e,this.line=t,this.message=n}function d(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function p(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function g(e,t){var n,r=e.split("\n"),i=1,o=0,a={unknown:new l,0:new l};a.unknown.name=a[0].name=t||d(),a.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var u=r[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var h=/(\d+)(\s+\d+)?/.exec(c[2]);h&&(i=0|h[1],h[2]&&((o=0|h[2])in a||(a[o]=new l)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);p&&(a[o].name=p[1]?(n=p[2],"undefined"!==typeof atob?atob(n):"base64:"+n):p[2])}a[o].lines.push(new f(i++,u))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function v(e){e._commandRef=d()}function y(e,t){var n=p();r(e+" in command "+(t||d())+("unknown"===n?"":" called from "+n))}function m(e,t,n,r){a(e,t)||y("invalid parameter type"+o(n)+". expected "+t+", got "+typeof e,r||d())}var b=33071,w=9728,x=9984,C=9985,k=9986,E=9987,O=5126,S=32819,A=32820,T=33635,M=34042,_={};function j(e,t){return e===A||e===S||e===T?2:e===M?4:_[e]*t}function P(e){return!(e&e-1)&&!!e}_[5120]=_[5121]=1,_[5122]=_[5123]=_[36193]=_[T]=_[S]=_[A]=2,_[5124]=_[5125]=_[O]=_[M]=4;var N=t(i,{optional:function(e){e()},raise:r,commandRaise:y,command:function(e,t,n){e||y(t,n||d())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||y("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join(),r||d())},constructor:function(e){Object.keys(e).forEach(function(e){u.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+u)})},type:function(e,t,n){a(e,t)||r("invalid parameter type"+o(n)+". expected "+t+", got "+typeof e)},commandType:m,isTypedArray:function(t,n){e(t)||r("invalid parameter type"+o(n)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||r("invalid parameter type, ("+e+")"+o(t)+". must be a nonnegative integer")},oneOf:s,shaderError:function(e,t,r,o,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),u=o===e.FRAGMENT_SHADER?"fragment":"vertex";m(r,"string",u+" shader source must be a string",a);var l=g(r,a),f=function(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new h(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new h("unknown",0,e))}}),t}(s);!function(e,t){t.forEach(function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}(l,f),Object.keys(l).forEach(function(e){var t=l[e];if(t.hasErrors){var r=[""],i=[""];o("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach(function(e){if(e.errors.length>0){o(c(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach(function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="="}t=Math.max(e.line.indexOf(s,t),0)}else t=0;o(c("| ",6)),o(c("^^^",t+3)+n,"font-weight:bold"),o(c("| ",6)),o(i+n,"font-weight:bold")}),o(c("| ",6)+n)}else o(c(e.number,4)+"|  "),o(e.line+n,"color:red")}),"undefined"===typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(e,t){r.push(e),i.push(t||"")}}),i.raise("Error compiling "+u+" shader, "+l[0].name)}},linkError:function(e,t,r,o,a){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),u=g(r,a),c=g(o,a),l='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!==typeof document?console.log("%c"+l+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+n+s),i.raise(l)}},callSite:p,saveCommandRef:v,saveDrawInfo:function(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach(function(t){e[r.id(t)]=!0})}v(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var s=e._attributeSet={};o(s,n.static),o(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?s(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):s(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(e,t,n){var r,o=t.width,a=t.height,s=t.channels;i(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),(e.wrapS!==b||e.wrapT!==b)&&i(P(o)&&P(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==o&&1!==a&&i(e.minFilter!==x&&e.minFilter!==k&&e.minFilter!==C&&e.minFilter!==E,"min filter requires mipmap"):(i(P(o)&&P(a),"texture must be a square power of 2 to support mipmapping"),i(t.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),t.type===O&&(n.extensions.indexOf("oes_texture_float_linear")<0&&i(e.minFilter===w&&e.magFilter===w,"filter not supported, must enable oes_texture_float_linear"),i(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(r=0;r<16;++r)if(u[r]){var c=o>>r,l=a>>r;i(t.mipmask&1<<r,"missing mipmap data");var f=u[r];if(i(f.width===c&&f.height===l,"invalid shape for mip images"),i(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(j(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;i(f.data.byteLength===h*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||i(0===(t.mipmask&1<<r),"extra mipmap data");t.compressed&&i(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var o=e.width,a=e.height,s=e.channels;i(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),i(o===a,"cube map must be square"),i(t.wrapS===b&&t.wrapT===b,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];i(c.width===o&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(i(!c.compressed,"can not generate mipmap for compressed textures"),i(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var h=l[f];if(h){var d=o>>f,p=a>>f;i(c.mipmask&1<<f,"missing mipmap data"),i(h.width===d&&h.height===p,"invalid shape for mip images"),i(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?i(h.data.byteLength===d*p*Math.max(j(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),R=0,D=0,I=5,L=6;function F(e,t){this.id=R++,this.type=e,this.data=t}function B(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(t.length>1&&n===r&&('"'===n||"'"===n))return['"'+B(t.substr(1,t.length-2))+'"'];var i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(i)return e(t.substr(0,i.index)).concat(e(i[1])).concat(e(t.substr(i.index+i[0].length)));var o=t.split(".");if(1===o.length)return['"'+B(t)+'"'];for(var a=[],s=0;s<o.length;++s)a=a.concat(e(o[s]));return a}(e).join("][")+"]"}var V={DynamicVariable:F,define:function(e,t){return new F(e,z(t+""))},isDynamic:function(e){return"function"===typeof e&&!e._reglType||e instanceof F},unbox:function e(t,n){return"function"===typeof t?new F(D,t):"number"===typeof t||"boolean"===typeof t?new F(I,t):Array.isArray(t)?new F(L,t.map(function(t,r){return e(t,n+"["+r+"]")})):t instanceof F?t:void N(!1,"invalid option type in uniform "+n)},accessor:z},U={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},G="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function H(e){return"string"===typeof e?e.split():(N(Array.isArray(e),"invalid extension array"),e)}function W(e){return"string"===typeof e?(N("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function q(e){var n,r,i,o,a,s=e||{},u={},c=[],l=[],f="undefined"===typeof window?1:window.devicePixelRatio,h=!1,d=function(e){e&&N.raise(e)},p=function(){};if("string"===typeof s?(N("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),N(n,"invalid query string for element")):"object"===typeof s?"string"===typeof(a=s).nodeName&&"function"===typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?n=s:function(e){return"function"===typeof e.drawArrays||"function"===typeof e.drawElements}(s)?i=(o=s).canvas:(N.constructor(s),"gl"in s?o=s.gl:"canvas"in s?i=W(s.canvas):"container"in s&&(r=W(s.container)),"attributes"in s&&(u=s.attributes,N.type(u,"object","invalid context attributes")),"extensions"in s&&(c=H(s.extensions)),"optionalExtensions"in s&&(l=H(s.optionalExtensions)),"onDone"in s&&(N.type(s.onDone,"function","invalid or missing onDone callback"),d=s.onDone),"profile"in s&&(h=!!s.profile),"pixelRatio"in s&&(f=+s.pixelRatio,N(f>0,"invalid pixel ratio"))):N.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:r=n),!o){if(!i){N("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var g=function(e,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,t(o.style,{width:n+"px",height:i+"px"})}return t(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver(function(){setTimeout(a)})).observe(e):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",a),e.removeChild(o)}}}(r||document.body,0,f);if(!g)return null;i=g.canvas,p=g.onDestroy}void 0===u.premultipliedAlpha&&(u.premultipliedAlpha=!0),o=function(e,t){function n(n){try{return e.getContext(n,t)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,u)}return o?{gl:o,canvas:i,container:r,extensions:c,optionalExtensions:l,pixelRatio:f,profile:h,onDone:d,onDestroy:p}:(p(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function X(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var $=5120,Y=5121,K=5122,J=5123,Z=5124,Q=5125,ee=5126;function te(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function ne(){var e=X(8,function(){return[]});function t(t){var n=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),r=e[te(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[te(t.byteLength)>>2].push(t)}return{alloc:t,free:n,allocType:function(e,n){var r=null;switch(e){case $:r=new Int8Array(t(n),0,n);break;case Y:r=new Uint8Array(t(n),0,n);break;case K:r=new Int16Array(t(2*n),0,n);break;case J:r=new Uint16Array(t(2*n),0,n);break;case Z:r=new Int32Array(t(4*n),0,n);break;case Q:r=new Uint32Array(t(4*n),0,n);break;case ee:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){n(e.buffer)}}}var re=ne();re.zero=ne();var ie=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var o=!!t.oes_texture_float;if(o){var a=e.createTexture();e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=e.createFramebuffer();if(e.bindFramebuffer(36160,s),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=re.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?o=!1:(e.deleteFramebuffer(s),e.deleteTexture(a),o=1===u[0]),re.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var f=e.createTexture(),h=re.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,f),e.texImage2D(34069,0,6408,3,3,0,6408,5121,h),re.freeType(h),e.bindTexture(34067,null),e.deleteTexture(f),l=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:o,npotTextureCube:l}};function oe(t){return!!t&&"object"===typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"===typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var ae=function(e){return Object.keys(e).map(function(t){return e[t]})},se={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||re.allocType(n,i);switch(t.length){case 0:break;case 1:!function(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}(e,t[0],a);break;case 2:!function(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],s=0;s<n;++s)r[i++]=a[s]}(e,t[0],t[1],a);break;case 3:ue(e,t[0],t[1],t[2],a,0);break;default:!function e(t,n,r,i,o){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var u=n[r];if(n.length-r===4){var c=n[r+1],l=n[r+2],f=n[r+3];for(s=0;s<u;++s)ue(t[s],c,l,f,i,o),o+=a}else for(s=0;s<u;++s)e(t[s],n,r+1,i,o),o+=a}(e,t,0,a,0)}return a}};function ue(e,t,n,r,i,o){for(var a=o,s=0;s<t;++s)for(var u=e[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}var ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},fe={dynamic:35048,stream:35040,static:35044},he=se.flatten,de=se.shape,pe=35044,ge=35040,ve=5121,ye=5126,me=[];function be(e){return 0|ce[Object.prototype.toString.call(e)]}function we(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function xe(e,t,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)e[s++]=t[i*u+o*c+a]}me[5120]=1,me[5122]=2,me[5124]=4,me[5121]=1,me[5123]=2,me[5125]=4,me[5126]=4;var Ce={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ke=0,Ee=1,Oe=4,Se=5120,Ae=5121,Te=5122,Me=5123,_e=5124,je=5125,Pe=34963,Ne=35040,Re=35044,De=new Float32Array(1),Ie=new Uint32Array(De.buffer),Le=5123;function Fe(e){for(var t=re.allocType(Le,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{De[0]=e[n];var r=Ie[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var s=-14-o;t[n]=i+(a+1024>>s)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function Be(t){return Array.isArray(t)||e(t)}var ze=function(e){return!(e&e-1)&&!!e},Ve=34467,Ue=3553,Ge=34067,He=34069,We=6408,qe=6406,Xe=6407,$e=6409,Ye=6410,Ke=32854,Je=32855,Ze=36194,Qe=32819,et=32820,tt=33635,nt=34042,rt=6402,it=34041,ot=35904,at=35906,st=36193,ut=33776,ct=33777,lt=33778,ft=33779,ht=35986,dt=35987,pt=34798,gt=35840,vt=35841,yt=35842,mt=35843,bt=36196,wt=5121,xt=5123,Ct=5125,kt=5126,Et=10242,Ot=10243,St=10497,At=33071,Tt=33648,Mt=10240,_t=10241,jt=9728,Pt=9729,Nt=9984,Rt=9985,Dt=9986,It=9987,Lt=33170,Ft=4352,Bt=4353,zt=4354,Vt=34046,Ut=3317,Gt=37440,Ht=37441,Wt=37443,qt=37444,Xt=33984,$t=[Nt,Dt,Rt,It],Yt=[0,$e,Ye,Xe,We],Kt={};function Jt(e){return"[object "+e+"]"}Kt[$e]=Kt[qe]=Kt[rt]=1,Kt[it]=Kt[Ye]=2,Kt[Xe]=Kt[ot]=3,Kt[We]=Kt[at]=4;var Zt=Jt("HTMLCanvasElement"),Qt=Jt("OffscreenCanvas"),en=Jt("CanvasRenderingContext2D"),tn=Jt("ImageBitmap"),nn=Jt("HTMLImageElement"),rn=Jt("HTMLVideoElement"),on=Object.keys(ce).concat([Zt,Qt,en,tn,nn,rn]),an=[];an[wt]=1,an[kt]=4,an[st]=2,an[xt]=2,an[Ct]=4;var sn=[];function un(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function cn(e){if(!Array.isArray(e))return!1;var t=e.length;return!(0===t||!Be(e[0]))}function ln(e){return Object.prototype.toString.call(e)}function fn(e){return ln(e)===Zt}function hn(e){return ln(e)===Qt}function dn(e){if(!e)return!1;var t=ln(e);return on.indexOf(t)>=0||un(e)||cn(e)||oe(e)}function pn(e){return 0|ce[Object.prototype.toString.call(e)]}function gn(e,t){return re.allocType(e.type===st?kt:e.type,t)}function vn(e,t){e.type===st?(e.data=Fe(t),re.freeType(t)):e.data=t}function yn(e,t,n,r,i,o){var a;if(a="undefined"!==typeof sn[e]?sn[e]:Kt[e]*an[t],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function mn(n,r,i,o,a,s,u){var c={"don't care":Ft,"dont care":Ft,nice:zt,fast:Bt},l={repeat:St,clamp:At,mirror:Tt},f={nearest:jt,linear:Pt},h=t({mipmap:It,"nearest mipmap nearest":Nt,"linear mipmap nearest":Rt,"nearest mipmap linear":Dt,"linear mipmap linear":It},f),d={none:0,browser:qt},p={uint8:wt,rgba4:Qe,rgb565:tt,"rgb5 a1":et},g={alpha:qe,luminance:$e,"luminance alpha":Ye,rgb:Xe,rgba:We,rgba4:Ke,"rgb5 a1":Je,rgb565:Ze},v={};r.ext_srgb&&(g.srgb=ot,g.srgba=at),r.oes_texture_float&&(p.float32=p.float=kt),r.oes_texture_half_float&&(p.float16=p["half float"]=st),r.webgl_depth_texture&&(t(g,{depth:rt,"depth stencil":it}),t(p,{uint16:xt,uint32:Ct,"depth stencil":nt})),r.webgl_compressed_texture_s3tc&&t(v,{"rgb s3tc dxt1":ut,"rgba s3tc dxt1":ct,"rgba s3tc dxt3":lt,"rgba s3tc dxt5":ft}),r.webgl_compressed_texture_atc&&t(v,{"rgb atc":ht,"rgba atc explicit alpha":dt,"rgba atc interpolated alpha":pt}),r.webgl_compressed_texture_pvrtc&&t(v,{"rgb pvrtc 4bppv1":gt,"rgb pvrtc 2bppv1":vt,"rgba pvrtc 4bppv1":yt,"rgba pvrtc 2bppv1":mt}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=bt);var y=Array.prototype.slice.call(n.getParameter(Ve));Object.keys(v).forEach(function(e){var t=v[e];y.indexOf(t)>=0&&(g[e]=t)});var m=Object.keys(g);i.textureFormats=m;var b=[];Object.keys(g).forEach(function(e){var t=g[e];b[t]=e});var w=[];Object.keys(p).forEach(function(e){var t=p[e];w[t]=e});var x=[];Object.keys(f).forEach(function(e){var t=f[e];x[t]=e});var C=[];Object.keys(h).forEach(function(e){var t=h[e];C[t]=e});var k=[];Object.keys(l).forEach(function(e){var t=l[e];k[t]=e});var E=m.reduce(function(e,t){var n=g[t];return n===$e||n===qe||n===$e||n===Ye||n===rt||n===it||r.ext_srgb&&(n===ot||n===at)?e[n]=n:n===Je||t.indexOf("rgba")>=0?e[n]=We:e[n]=Xe,e},{});function O(){this.internalformat=We,this.format=We,this.type=wt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=qt,this.width=0,this.height=0,this.channels=0}function S(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function A(e,t){if("object"===typeof t&&t){if("premultiplyAlpha"in t&&(N.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(N.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(N.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(N.parameter(t.colorSpace,d,"invalid colorSpace"),e.colorSpace=d[t.colorSpace]),"type"in t){var n=t.type;N(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),N(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),N(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),N.parameter(n,p,"invalid texture type"),e.type=p[n]}var o=e.width,a=e.height,s=e.channels,u=!1;"shape"in t?(N(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),o=t.shape[0],a=t.shape[1],3===t.shape.length&&(s=t.shape[2],N(s>0&&s<=4,"invalid number of channels"),u=!0),N(o>=0&&o<=i.maxTextureSize,"invalid width"),N(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in t&&(o=a=t.radius,N(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in t&&(o=t.width,N(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in t&&(a=t.height,N(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,N(s>0&&s<=4,"invalid number of channels"),u=!0)),e.width=0|o,e.height=0|a,e.channels=0|s;var c=!1;if("format"in t){var l=t.format;N(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),N.parameter(l,g,"invalid texture format");var f=e.internalformat=g[l];e.format=E[f],l in p&&("type"in t||(e.type=p[l])),l in v&&(e.compressed=!0),c=!0}!u&&c?e.channels=Kt[e.format]:u&&!c?e.channels!==Yt[e.format]&&(e.format=e.internalformat=Yt[e.channels]):c&&u&&N(e.channels===Kt[e.format],"number of channels inconsistent with specified format")}}function T(e){n.pixelStorei(Gt,e.flipY),n.pixelStorei(Ht,e.premultiplyAlpha),n.pixelStorei(Wt,e.colorSpace),n.pixelStorei(Ut,e.unpackAlignment)}function M(){O.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function _(t,n){var r=null;if(dn(n)?r=n:n&&(N.type(n,"object","invalid pixel data type"),A(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),dn(n.data)&&(r=n.data)),N(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){N(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,N(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=o&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==wt||(t.type=pn(r));else if(un(r))t.channels=t.channels||4,function(e,t){var n=t.length;switch(e.type){case wt:case xt:case Ct:case kt:var r=re.allocType(e.type,n);r.set(t),e.data=r;break;case st:e.data=Fe(t);break;default:N.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(oe(r)){var u=r.data;Array.isArray(u)||t.type!==wt||(t.type=pn(u));var c,l,f,h,d,p,g=r.shape,v=r.stride;3===g.length?(f=g[2],p=v[2]):(N(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,p=1),c=g[0],l=g[1],h=v[0],d=v[1],t.alignment=1,t.width=c,t.height=l,t.channels=f,t.format=t.internalformat=Yt[f],t.needsFree=!0,function(e,t,n,r,i,o){for(var a=e.width,s=e.height,u=e.channels,c=gn(e,a*s*u),l=0,f=0;f<s;++f)for(var h=0;h<a;++h)for(var d=0;d<u;++d)c[l++]=t[n*h+r*f+i*d+o];vn(e,c)}(t,u,h,d,p,r.offset)}else if(fn(r)||hn(r)||ln(r)===en)fn(r)||hn(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return ln(e)===tn}(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(function(e){return ln(e)===nn}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(e){return ln(e)===rn}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(cn(r)){var y=t.width||r[0].length,m=t.height||r.length,b=t.channels;b=Be(r[0][0])?b||r[0][0].length:b||1;for(var w=se.shape(r),x=1,C=0;C<w.length;++C)x*=w[C];var k=gn(t,x);se.flatten(r,w,"",k),vn(t,k),t.alignment=1,t.width=y,t.height=m,t.channels=b,t.format=t.internalformat=Yt[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===kt?N(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===st&&N(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function j(e,t,r){var i=e.element,a=e.data,s=e.internalformat,u=e.format,c=e.type,l=e.width,f=e.height;T(e),i?n.texImage2D(t,r,u,u,c,i):e.compressed?n.compressedTexImage2D(t,r,s,l,f,0,a):e.needsCopy?(o(),n.copyTexImage2D(t,r,u,e.xOffset,e.yOffset,l,f,0)):n.texImage2D(t,r,u,l,f,0,u,c,a||null)}function P(e,t,r,i,a){var s=e.element,u=e.data,c=e.internalformat,l=e.format,f=e.type,h=e.width,d=e.height;T(e),s?n.texSubImage2D(t,a,r,i,l,f,s):e.compressed?n.compressedTexSubImage2D(t,a,r,i,c,h,d,u):e.needsCopy?(o(),n.copyTexSubImage2D(t,a,r,i,e.xOffset,e.yOffset,h,d)):n.texSubImage2D(t,a,r,i,h,d,l,f,u)}var R=[];function D(){return R.pop()||new M}function I(e){e.needsFree&&re.freeType(e.data),M.call(e),R.push(e)}function L(){O.call(this),this.genMipmaps=!1,this.mipmapHint=Ft,this.mipmask=0,this.images=Array(16)}function F(e,t,n){var r=e.images[0]=D();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function B(e,t){var n=null;if(dn(t))S(n=e.images[0]=D(),e),_(n,t),e.mipmask=1;else if(A(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)S(n=e.images[i]=D(),e),n.width>>=i,n.height>>=i,_(n,r[i]),e.mipmask|=1<<i;else S(n=e.images[0]=D(),e),_(n,t),e.mipmask=1;S(e,e.images[0]),!e.compressed||e.internalformat!==ut&&e.internalformat!==ct&&e.internalformat!==lt&&e.internalformat!==ft||N(e.width%4===0&&e.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function z(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;j(n[r],t,r)}}var V=[];function U(){var e=V.pop()||new L;O.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function G(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&I(t[n]),t[n]=null;V.push(e)}function H(){this.minFilter=jt,this.magFilter=jt,this.wrapS=At,this.wrapT=At,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ft}function W(e,t){if("min"in t){var n=t.min;N.parameter(n,h),e.minFilter=h[n],$t.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;N.parameter(r,f),e.magFilter=f[r]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var s=t.wrap;"string"===typeof s?(N.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(N.parameter(s[0],l),N.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in t){var u=t.wrapS;N.parameter(u,l),o=l[u]}if("wrapT"in t){var d=t.wrapT;N.parameter(d,l),a=l[d]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var p=t.anisotropic;N("number"===typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var g=!1;switch(typeof t.mipmap){case"string":N.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,g=!0;break;case"boolean":g=e.genMipmaps=t.mipmap;break;case"object":N(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,g=!0;break;default:N.raise("invalid mipmap type")}!g||"min"in t||(e.minFilter=Nt)}}function q(e,t){n.texParameteri(t,_t,e.minFilter),n.texParameteri(t,Mt,e.magFilter),n.texParameteri(t,Et,e.wrapS),n.texParameteri(t,Ot,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,Vt,e.anisotropic),e.genMipmaps&&(n.hint(Lt,e.mipmapHint),n.generateMipmap(t))}var X=0,$={},Y=i.maxTextureUnits,K=Array(Y).map(function(){return null});function J(e){O.call(this),this.mipmask=0,this.internalformat=We,this.id=X++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,u.profile&&(this.stats={size:0})}function Z(e){n.activeTexture(Xt),n.bindTexture(e.target,e.texture)}function Q(){var e=K[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(Ue,null)}function ee(e){var t=e.texture;N(t,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(n.activeTexture(Xt+r),n.bindTexture(i,null),K[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete $[e.id],s.textureCount--}return t(J.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var t=0;t<Y;++t){var r=K[t];if(r){if(r.bindCount>0)continue;r.unit=-1}K[t]=this,e=t;break}e>=Y&&N.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),this.unit=e,n.activeTexture(Xt+e),n.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ee(this)}}),u.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys($).forEach(function(t){e+=$[t].stats.size}),e}),{create2D:function(e,t){var r=new J(Ue);function o(e,t){var n=r.texInfo;H.call(n);var a=U();return"number"===typeof e?F(a,0|e,"number"===typeof t?0|t:0|e):e?(N.type(e,"object","invalid arguments to regl.texture"),W(n,e),B(a,e)):F(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,S(r,a),N.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(r),z(a,Ue),q(n,Ue),Q(),G(a),u.profile&&(r.stats.size=yn(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=w[r.type],o.mag=x[n.magFilter],o.min=C[n.minFilter],o.wrapS=k[n.wrapS],o.wrapT=k[n.wrapT],o}return $[r.id]=r,s.textureCount++,o(e,t),o.subimage=function(e,t,n,i){N(!!e,"must specify image data");var a=0|t,s=0|n,u=0|i,c=D();return S(c,r),c.width=0,c.height=0,_(c,e),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,N(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),N(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),N(r.mipmask&1<<u,"missing mipmap data"),N(c.data||c.element||c.needsCopy,"missing image data"),Z(r),P(c,Ue,a,s,u),Q(),I(c),o},o.resize=function(e,t){var i=0|e,a=0|t||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Z(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;n.texImage2D(Ue,s,r.format,c,l,0,r.format,r.type,null)}return Q(),u.profile&&(r.stats.size=yn(r.internalformat,r.type,i,a,!1,!1)),o},o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o},createCube:function(e,t,r,o,a,c){var l=new J(Ge);$[l.id]=l,s.cubeCount++;var f=new Array(6);function h(e,t,n,r,o,a){var s,c=l.texInfo;for(H.call(c),s=0;s<6;++s)f[s]=U();if("number"!==typeof e&&e)if("object"===typeof e)if(t)B(f[0],e),B(f[1],t),B(f[2],n),B(f[3],r),B(f[4],o),B(f[5],a);else if(W(c,e),A(l,e),"faces"in e){var d=e.faces;for(N(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),s=0;s<6;++s)N("object"===typeof d[s]&&!!d[s],"invalid input for cube map face"),S(f[s],l),B(f[s],d[s])}else for(s=0;s<6;++s)B(f[s],e);else N.raise("invalid arguments to cube map");else{var p=0|e||1;for(s=0;s<6;++s)F(f[s],p,p)}for(S(l,f[0]),i.npotTextureCube||N(ze(l.width)&&ze(l.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,N.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,h.width=f[0].width,h.height=f[0].height,Z(l),s=0;s<6;++s)z(f[s],He+s);for(q(c,Ge),Q(),u.profile&&(l.stats.size=yn(l.internalformat,l.type,h.width,h.height,c.genMipmaps,!0)),h.format=b[l.internalformat],h.type=w[l.type],h.mag=x[c.magFilter],h.min=C[c.minFilter],h.wrapS=k[c.wrapS],h.wrapT=k[c.wrapT],s=0;s<6;++s)G(f[s]);return h}return h(e,t,r,o,a,c),h.subimage=function(e,t,n,r,i){N(!!t,"must specify image data"),N("number"===typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=D();return S(u,l),u.width=0,u.height=0,_(u,t),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,N(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),N(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),N(l.mipmask&1<<s,"missing mipmap data"),N(u.data||u.element||u.needsCopy,"missing image data"),Z(l),P(u,He+e,o,a,s),Q(),I(u),h},h.resize=function(e){var t=0|e;if(t!==l.width){h.width=l.width=t,h.height=l.height=t,Z(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)n.texImage2D(He+r,i,l.format,t>>i,t>>i,0,l.format,l.type,null);return Q(),u.profile&&(l.stats.size=yn(l.internalformat,l.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=l,u.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){for(var e=0;e<Y;++e)n.activeTexture(Xt+e),n.bindTexture(Ue,null),K[e]=null;ae($).forEach(ee),s.cubeCount=0,s.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<Y;++e){var t=K[e];t&&(t.bindCount=0,t.unit=-1,K[e]=null)}ae($).forEach(function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!==(e.mipmask&1<<t))if(e.target===Ue)n.texImage2D(Ue,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(He+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);q(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<Y;++e){var t=K[e];t&&(t.bindCount=0,t.unit=-1,K[e]=null),n.activeTexture(Xt+e),n.bindTexture(Ue,null),n.bindTexture(Ge,null)}}}}sn[Ke]=2,sn[Je]=2,sn[Ze]=2,sn[it]=4,sn[ut]=.5,sn[ct]=.5,sn[lt]=1,sn[ft]=1,sn[ht]=.5,sn[dt]=1,sn[pt]=1,sn[gt]=.5,sn[vt]=.25,sn[yt]=.5,sn[mt]=.25,sn[bt]=.5;var bn=36161,wn=32854,xn=[];function Cn(e,t,n){return xn[e]*t*n}xn[wn]=2,xn[32855]=2,xn[36194]=2,xn[33189]=2,xn[36168]=1,xn[34041]=4,xn[35907]=4,xn[34836]=16,xn[34842]=8,xn[34843]=6;var kn=function(e,t,n,r,i){var o={rgba4:wn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(o.srgba=35907),t.ext_color_buffer_half_float&&(o.rgba16f=34842,o.rgb16f=34843),t.webgl_color_buffer_float&&(o.rgba32f=34836);var a=[];Object.keys(o).forEach(function(e){var t=o[e];a[t]=e});var s=0,u={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=wn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(t){var n=t.renderbuffer;N(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(bn,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete u[t.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach(function(t){e+=u[t].stats.size}),e}),{create:function(t,s){var l=new c(e.createRenderbuffer());function f(t,r){var s=0,u=0,c=wn;if("object"===typeof t&&t){var h=t;if("shape"in h){var d=h.shape;N(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),s=0|d[0],u=0|d[1]}else"radius"in h&&(s=u=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(u=0|h.height);"format"in h&&(N.parameter(h.format,o,"invalid renderbuffer format"),c=o[h.format])}else"number"===typeof t?(s=0|t,u="number"===typeof r?0|r:s):t?N.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(N(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,e.bindRenderbuffer(bn,l.renderbuffer),e.renderbufferStorage(bn,c,s,u),N(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Cn(l.format,l.width,l.height)),f.format=a[l.format],f}return u[l.id]=l,r.renderbufferCount++,f(t,s),f.resize=function(t,r){var o=0|t,a=0|r||o;return o===l.width&&a===l.height?f:(N(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,e.bindRenderbuffer(bn,l.renderbuffer),e.renderbufferStorage(bn,l.format,o,a),N(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Cn(l.format,l.width,l.height)),f)},f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f},clear:function(){ae(u).forEach(l)},restore:function(){ae(u).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(bn,t.renderbuffer),e.renderbufferStorage(bn,t.format,t.width,t.height)}),e.bindRenderbuffer(bn,null)}}},En=36160,On=36161,Sn=3553,An=34069,Tn=36064,Mn=36096,_n=36128,jn=33306,Pn=36053,Nn=6402,Rn=[6407,6408],Dn=[];Dn[6408]=4,Dn[6407]=3;var In=[];In[5121]=1,In[5126]=4,In[36193]=2;var Ln=33189,Fn=36168,Bn=34041,zn=[32854,32855,36194,35907,34842,34843,34836],Vn={};Vn[Pn]="complete",Vn[36054]="incomplete attachment",Vn[36057]="incomplete dimensions",Vn[36055]="incomplete, missing attachment",Vn[36061]="unsupported";var Un=5126,Gn=34962;function Hn(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Un,this.offset=0,this.stride=0,this.divisor=0}var Wn=35632,qn=35633,Xn=35718,$n=35721,Yn=6408,Kn=5121,Jn=3333,Zn=5126;function Qn(t,n,r,i,o,a,s){function u(u){var c;null===n.next?(N(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=Kn):(N(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(N(c===Kn||c===Zn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Zn&&N(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):N(c===Kn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,f=0,h=i.framebufferWidth,d=i.framebufferHeight,p=null;e(u)?p=u:u&&(N.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,N(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),N(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||i.framebufferWidth-l),d=0|(u.height||i.framebufferHeight-f),p=u.data||null),p&&(c===Kn?N(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Zn&&N(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),N(h>0&&h+l<=i.framebufferWidth,"invalid width for read pixels"),N(d>0&&d+f<=i.framebufferHeight,"invalid height for read pixels"),r();var g=h*d*4;return p||(c===Kn?p=new Uint8Array(g):c===Zn&&(p=p||new Float32Array(g))),N.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),N(p.byteLength>=g,"data buffer for regl.read() too small"),t.pixelStorei(Jn,4),t.readPixels(l,f,h,d,Yn,c,p),p}return function(e){return e&&"framebuffer"in e?function(e){var t;return n.setFBO({framebuffer:e.framebuffer},function(){t=u(e)}),t}(e):u(e)}}function er(e){return Array.prototype.slice.call(e)}function tr(e){return er(e).join("")}var nr="xyzw".split(""),rr=5121,ir=1,or=2,ar=0,sr=1,ur=2,cr=3,lr=4,fr=5,hr=6,dr="dither",pr="blend.enable",gr="blend.color",vr="blend.equation",yr="blend.func",mr="depth.enable",br="depth.func",wr="depth.range",xr="depth.mask",Cr="colorMask",kr="cull.enable",Er="cull.face",Or="frontFace",Sr="lineWidth",Ar="polygonOffset.enable",Tr="polygonOffset.offset",Mr="sample.alpha",_r="sample.enable",jr="sample.coverage",Pr="stencil.enable",Nr="stencil.mask",Rr="stencil.func",Dr="stencil.opFront",Ir="stencil.opBack",Lr="scissor.enable",Fr="scissor.box",Br="viewport",zr="profile",Vr="framebuffer",Ur="vert",Gr="frag",Hr="elements",Wr="primitive",qr="count",Xr="offset",$r="instances",Yr="vao",Kr=Vr+"Width",Jr=Vr+"Height",Zr=Br+"Width",Qr=Br+"Height",ei="drawingBufferWidth",ti="drawingBufferHeight",ni=[yr,vr,Rr,Dr,Ir,jr,Br,Fr,Tr],ri=34962,ii=34963,oi=3553,ai=34067,si=2884,ui=3042,ci=3024,li=2960,fi=2929,hi=3089,di=32823,pi=32926,gi=32928,vi=5126,yi=35664,mi=35665,bi=35666,wi=5124,xi=35667,Ci=35668,ki=35669,Ei=35670,Oi=35671,Si=35672,Ai=35673,Ti=35674,Mi=35675,_i=35676,ji=35678,Pi=35680,Ni=4,Ri=1028,Di=1029,Ii=2304,Li=2305,Fi=32775,Bi=32776,zi=519,Vi=7680,Ui=0,Gi=1,Hi=32774,Wi=513,qi=36160,Xi=36064,$i={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ki={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ji={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Zi={frag:35632,vert:35633},Qi={cw:Ii,ccw:Li};function eo(t){return Array.isArray(t)||e(t)||oe(t)}function to(e){return e.sort(function(e,t){return e===Br?-1:t===Br?1:e<t?-1:1})}function no(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function ro(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function io(e){return new no(!1,!1,!1,e)}function oo(e,t){var n=e.type;if(n===ar){var r=e.data.length;return new no(!0,r>=1,r>=2,t)}if(n===lr){var i=e.data;return new no(i.thisDep,i.contextDep,i.propDep,t)}if(n===fr)return new no(!1,!1,!1,t);if(n===hr){for(var o=!1,a=!1,s=!1,u=0;u<e.data.length;++u){var c=e.data[u];if(c.type===sr)s=!0;else if(c.type===ur)a=!0;else if(c.type===cr)o=!0;else if(c.type===ar){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===lr&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new no(o,a,s,t)}return new no(n===cr,n===ur,n===sr,t)}var ao=new no(!1,!1,!1,function(){});function so(e,n,r,i,o,a,s,u,c,l,f,h,d,p,g){var v=l.Record,y={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(y.min=Fi,y.max=Bi);var m=r.angle_instanced_arrays,b=r.webgl_draw_buffers,w={dirty:!0,profile:g.profile},x={},C=[],k={},E={};function O(e){return e.replace(".","_")}function S(e,t,n){var r=O(e);C.push(e),x[r]=w[r]=!!n,k[r]=t}function A(e,t,n){var r=O(e);C.push(e),Array.isArray(n)?(w[r]=n.slice(),x[r]=n.slice()):w[r]=x[r]=n,E[r]=t}S(dr,ci),S(pr,ui),A(gr,"blendColor",[0,0,0,0]),A(vr,"blendEquationSeparate",[Hi,Hi]),A(yr,"blendFuncSeparate",[Gi,Ui,Gi,Ui]),S(mr,fi,!0),A(br,"depthFunc",Wi),A(wr,"depthRange",[0,1]),A(xr,"depthMask",!0),A(Cr,Cr,[!0,!0,!0,!0]),S(kr,si),A(Er,"cullFace",Di),A(Or,Or,Li),A(Sr,Sr,1),S(Ar,di),A(Tr,"polygonOffset",[0,0]),S(Mr,pi),S(_r,gi),A(jr,"sampleCoverage",[1,!1]),S(Pr,li),A(Nr,"stencilMask",-1),A(Rr,"stencilFunc",[zi,0,-1]),A(Dr,"stencilOpSeparate",[Ri,Vi,Vi,Vi]),A(Ir,"stencilOpSeparate",[Di,Vi,Vi,Vi]),S(Lr,hi),A(Fr,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),A(Br,Br,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var T={gl:e,context:d,strings:n,next:x,current:w,draw:h,elements:a,buffer:o,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:p,isBufferArgs:eo},M={primTypes:Ce,compareFuncs:Ki,blendFuncs:$i,blendEquations:y,stencilOps:Ji,glTypes:le,orientationType:Qi};N.optional(function(){T.isArrayLike=Be}),b&&(M.backBuffer=[Di],M.drawBuffer=X(i.maxDrawbuffers,function(e){return 0===e?[0]:X(e,function(e){return Xi+e})}));var _=0;function j(){var e=function(){var e=0,n=[],r=[];function i(){var n=[],r=[];return t(function(){n.push.apply(n,er(arguments))},{def:function(){var t="v"+e++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,er(arguments)),n.push(";")),t},toString:function(){return tr([r.length>0?"var "+r.join(",")+";":"",tr(n)])}})}function o(){var e=i(),n=i(),r=e.toString,o=n.toString;function a(t,r){n(t,r,"=",e.def(t,r),";")}return t(function(){e.apply(e,er(arguments))},{def:e.def,entry:e,exit:n,save:a,set:function(t,n,r){a(t,n),e(t,n,"=",r,";")},toString:function(){return r()+o()}})}var a=i(),s={};return{global:a,link:function(t){for(var i=0;i<r.length;++i)if(r[i]===t)return n[i];var o="g"+e++;return n.push(o),r.push(t),o},block:i,proc:function(e,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var a=0;a<n;++a)i();var u=o(),c=u.toString;return s[e]=t(u,{arg:i,toString:function(){return tr(["function(",r.join(),"){",c(),"}"])}})},scope:o,cond:function(){var e=tr(arguments),n=o(),r=o(),i=n.toString,a=r.toString;return t(n,{then:function(){return n.apply(n,er(arguments)),this},else:function(){return r.apply(r,er(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),tr(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(s).forEach(function(t){e.push('"',t,'":',s[t].toString(),",")}),e.push("}");var t=tr(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}}}(),r=e.link,i=e.global;e.id=_++,e.batchId="0";var o=r(T),a=e.shared={props:"a0"};Object.keys(T).forEach(function(e){a[e]=i.def(o,".",e)}),N.optional(function(){e.CHECK=r(N),e.commandStr=N.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Yi});var s=e.next={},u=e.current={};Object.keys(E).forEach(function(e){Array.isArray(w[e])&&(s[e]=i.def(a.next,".",e),u[e]=i.def(a.current,".",e))});var c=e.constants={};Object.keys(M).forEach(function(e){c[e]=i.def(JSON.stringify(M[e]))}),e.invoke=function(t,n){switch(n.type){case ar:var i=["this",a.context,a.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case sr:return t.def(a.props,n.data);case ur:return t.def(a.context,n.data);case cr:return t.def("this",n.data);case lr:return n.data.append(e,t),n.data.ref;case fr:return n.data.toString();case hr:return n.data.map(function(n){return e.invoke(t,n)})}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var t=n.id(e);if(t in f)return f[t];var i=l.scope[t];i||(i=l.scope[t]=new v);var o=f[t]=r(i);return o},e}function P(e,t,s,c,h){var d=e.static,p=e.dynamic;N.optional(function(){var e=[Vr,Ur,Gr,Hr,Wr,Xr,qr,$r,zr,Yr].concat(C);function t(t){Object.keys(t).forEach(function(t){N.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',h.commandStr)})}t(d),t(p)});var g=function(e,t){var n=e.static;if("string"===typeof n[Gr]&&"string"===typeof n[Ur]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"===typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)N("number"===typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}(e,t),b=function(e,t){var n=e.static,r=e.dynamic;if(Vr in n){var i=n[Vr];return i?(i=u.getFramebuffer(i),N.command(i,"invalid framebuffer object"),io(function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+Kr,n+".width"),t.set(o,"."+Jr,n+".height"),n})):io(function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+Kr,r+"."+ei),t.set(r,"."+Jr,r+"."+ti),"null"})}if(Vr in r){var o=r[Vr];return oo(o,function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");N.optional(function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")}),t.set(i,".next",a);var s=r.context;return t.set(s,"."+Kr,a+"?"+a+".width:"+s+"."+ei),t.set(s,"."+Jr,a+"?"+a+".height:"+s+"."+ti),a})}return null}(e),w=function(e,t,n){var r=e.static,i=e.dynamic;function o(e){if(e in r){var o=r[e];N.commandType(o,"object","invalid "+e,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,N.command(a>=0,"invalid "+e,n.commandStr)):u=!1,"height"in o?(s=0|o.height,N.command(s>=0,"invalid "+e,n.commandStr)):u=!1,new no(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,function(e,t){var n=e.shared.context,r=a;"width"in o||(r=t.def(n,".",Kr,"-",c));var i=s;return"height"in o||(i=t.def(n,".",Jr,"-",l)),[c,l,r,i]})}if(e in i){var f=i[e],h=oo(f,function(t,n){var r=t.invoke(n,f);N.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)});var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Kr,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Jr,"-",a,")");return N.optional(function(){t.assert(n,s+">=0&&"+u+">=0","invalid "+e)}),[o,a,s,u]});return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new no(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",Kr),t.def(n,".",Jr)]}):null}var a=o(Br);if(a){var s=a;a=new no(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+Zr,n[2]),t.set(r,"."+Qr,n[3]),n})}return{viewport:a,scissor_box:o(Fr)}}(e,b,h),x=function(e,t){var n=e.static,r=e.dynamic,i=function(){if(Hr in n){var e=n[Hr];eo(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),N.command(e,"invalid elements",t.commandStr));var i=io(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null});return i.value=e,i}if(Hr in r){var o=r[Hr];return oo(o,function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,o),s=t.def("null"),u=t.def(r,"(",a,")"),c=e.cond(u).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return N.optional(function(){e.assert(c.else,"!"+a+"||"+s,"invalid elements")}),t.entry(c),t.exit(e.cond(u).then(i,".destroyStream(",s,");")),e.ELEMENTS=s,s})}return null}();function o(e,o){if(e in n){var a=0|n[e];return N.command(!o||a>=0,"invalid "+e,t.commandStr),io(function(e,t){return o&&(e.OFFSET=a),a})}if(e in r){var s=r[e];return oo(s,function(t,n){var r=t.invoke(n,s);return o&&(t.OFFSET=r,N.optional(function(){t.assert(n,r+">=0","invalid "+e)})),r})}return o&&i?io(function(e,t){return e.OFFSET="0",0}):null}var s=o(Xr,!0);return{elements:i,primitive:function(){if(Wr in n){var e=n[Wr];return N.commandParameter(e,Ce,"invalid primitve",t.commandStr),io(function(t,n){return Ce[e]})}if(Wr in r){var o=r[Wr];return oo(o,function(e,t){var n=e.constants.primTypes,r=e.invoke(t,o);return N.optional(function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Ce))}),t.def(n,"[",r,"]")})}return i?ro(i)?i.value?io(function(e,t){return t.def(e.ELEMENTS,".primType")}):io(function(){return Ni}):new no(i.thisDep,i.contextDep,i.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Ni)}):null}(),count:function(){if(qr in n){var e=0|n[qr];return N.command("number"===typeof e&&e>=0,"invalid vertex count",t.commandStr),io(function(){return e})}if(qr in r){var o=r[qr];return oo(o,function(e,t){var n=e.invoke(t,o);return N.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n})}if(i){if(ro(i)){if(i)return s?new no(s.thisDep,s.contextDep,s.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return N.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):io(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var a=io(function(){return-1});return N.optional(function(){a.MISSING=!0}),a}var u=new no(i.thisDep||s.thisDep,i.contextDep||s.contextDep,i.propDep||s.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")});return N.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:o($r,!1),offset:s}}(e,h),k=function(e,t){var n=e.static,r=e.dynamic,o={};return C.forEach(function(e){var a=O(e);function s(t,i){if(e in n){var s=t(n[e]);o[a]=io(function(){return s})}else if(e in r){var u=r[e];o[a]=oo(u,function(e,t){return i(e,t,e.invoke(t,u))})}}switch(e){case kr:case pr:case dr:case Pr:case mr:case Lr:case Ar:case Mr:case _r:case xr:return s(function(n){return N.commandType(n,"boolean",e,t.commandStr),n},function(t,n,r){return N.optional(function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)}),r});case br:return s(function(n){return N.commandParameter(n,Ki,"invalid "+e,t.commandStr),Ki[n]},function(t,n,r){var i=t.constants.compareFuncs;return N.optional(function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Ki))}),n.def(i,"[",r,"]")});case wr:return s(function(e){return N.command(Be(e)&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,n){return N.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]});case yr:return s(function(e){N.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return N.commandParameter(n,$i,a+".srcRGB",t.commandStr),N.commandParameter(r,$i,a+".srcAlpha",t.commandStr),N.commandParameter(i,$i,a+".dstRGB",t.commandStr),N.commandParameter(o,$i,a+".dstAlpha",t.commandStr),N.command(-1===Yi.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[$i[n],$i[i],$i[r],$i[o]]},function(t,n,r){var i=t.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return N.optional(function(){t.assert(n,s+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys($i))}),s}N.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=o("src","RGB"),s=o("dst","RGB");N.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[u,n.def(i,"[",s,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]});case vr:return s(function(n){return"string"===typeof n?(N.commandParameter(n,y,"invalid "+e,t.commandStr),[y[n],y[n]]):"object"===typeof n?(N.commandParameter(n.rgb,y,e+".rgb",t.commandStr),N.commandParameter(n.alpha,y,e+".alpha",t.commandStr),[y[n.rgb],y[n.alpha]]):void N.commandRaise("invalid blend.equation",t.commandStr)},function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),s=t.cond("typeof ",r,'==="string"');return N.optional(function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(y))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")}),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]});case gr:return s(function(e){return N.command(Be(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),X(4,function(t){return+e[t]})},function(e,t,n){return N.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),X(4,function(e){return t.def("+",n,"[",e,"]")})});case Nr:return s(function(e){return N.commandType(e,"number",a,t.commandStr),0|e},function(e,t,n){return N.optional(function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")}),t.def(n,"|0")});case Rr:return s(function(n){N.commandType(n,"object",a,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return N.commandParameter(r,Ki,e+".cmp",t.commandStr),N.commandType(i,"number",e+".ref",t.commandStr),N.commandType(o,"number",e+".mask",t.commandStr),[Ki[r],i,o]},function(e,t,n){var r=e.constants.compareFuncs;return N.optional(function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Vi),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case Dr:case Ir:return s(function(n){N.commandType(n,"object",a,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return N.commandParameter(r,Ji,e+".fail",t.commandStr),N.commandParameter(i,Ji,e+".zfail",t.commandStr),N.commandParameter(o,Ji,e+".zpass",t.commandStr),[e===Ir?Di:Ri,Ji[r],Ji[i],Ji[o]]},function(t,n,r){var i=t.constants.stencilOps;function o(o){return N.optional(function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(Ji))}),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Vi)}return N.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[e===Ir?Di:Ri,o("fail"),o("zfail"),o("zpass")]});case Tr:return s(function(e){N.commandType(e,"object",a,t.commandStr);var n=0|e.factor,r=0|e.units;return N.commandType(n,"number",a+".factor",t.commandStr),N.commandType(r,"number",a+".units",t.commandStr),[n,r]},function(t,n,r){return N.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case Er:return s(function(e){var n=0;return"front"===e?n=Ri:"back"===e&&(n=Di),N.command(!!n,a,t.commandStr),n},function(e,t,n){return N.optional(function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),t.def(n,'==="front"?',Ri,":",Di)});case Sr:return s(function(e){return N.command("number"===typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e},function(e,t,n){return N.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")}),n});case Or:return s(function(e){return N.commandParameter(e,Qi,a,t.commandStr),Qi[e]},function(e,t,n){return N.optional(function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(n+'==="cw"?'+Ii+":"+Li)});case Cr:return s(function(e){return N.command(Be(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,n){return N.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),X(4,function(e){return"!!"+n+"["+e+"]"})});case jr:return s(function(e){N.command("object"===typeof e&&e,a,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return N.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]},function(e,t,n){return N.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]})}}),o}(e,h),E=function(e,t,r){var i=e.static,o=e.dynamic;function a(e){if(e in i){var t=n.id(i[e]);N.optional(function(){f.shader(Zi[e],t,N.guessCommand())});var r=io(function(){return t});return r.id=t,r}if(e in o){var a=o[e];return oo(a,function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return N.optional(function(){n(t.shared.shader,".shader(",Zi[e],",",i,",",t.command,");")}),i})}return null}var s,u=a(Gr),c=a(Ur),l=null;return ro(u)&&ro(c)?(l=f.program(c.id,u.id,null,r),s=io(function(e,t){return e.link(l)})):s=new no(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,function(e,t){var n,r,i=e.shared.shader;n=u?u.append(e,t):t.def(i,".",Gr),r=c?c.append(e,t):t.def(i,".",Ur);var o=i+".program("+r+","+n;return N.optional(function(){o+=","+e.command}),t.def(o+")")}),{frag:u,vert:c,progVar:s,program:l}}(e,0,g);function S(e){var t=w[e];t&&(k[e]=t)}S(Br),S(O(Fr));var A=Object.keys(k).length>0,T={framebuffer:b,draw:x,shader:E,state:k,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(T.profile=function(e){var t,n=e.static,r=e.dynamic;if(zr in n){var i=!!n[zr];(t=io(function(e,t){return i})).enable=i}else if(zr in r){var o=r[zr];t=oo(o,function(e,t){return e.invoke(t,o)})}return t}(e),T.uniforms=function(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach(function(e){var r,o=n[e];if("number"===typeof o||"boolean"===typeof o)r=io(function(){return o});else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=io(function(e){return e.link(o)}):"framebuffer"===a||"framebufferCube"===a?(N.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=io(function(e){return e.link(o.color[0])})):N.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else Be(o)?r=io(function(t){return t.global.def("[",X(o.length,function(n){return N.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+e,t.commandStr),o[n]}),"]")}):N.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r}),Object.keys(r).forEach(function(e){var t=r[e];i[e]=oo(t,function(e,n){return e.invoke(n,t)})}),i}(s,h),T.drawVAO=T.scopeVAO=function(e,t){var n=e.static,r=e.dynamic;if(Yr in n){var i=n[Yr];return null!==i&&null===l.getVAO(i)&&(i=l.createVAO(i)),io(function(e){return e.link(l.getVAO(i))})}if(Yr in r){var o=r[Yr];return oo(o,function(e,t){var n=e.invoke(t,o);return t.def(e.shared.vao+".getVAO("+n+")")})}return null}(e),!T.drawVAO&&E.program&&!g&&r.angle_instanced_arrays){var M=!0,_=E.program.attributes.map(function(e){var n=t.static[e];return M=M&&!!n,n});if(M&&_.length>0){var j=l.getVAO(l.createVAO(_));T.drawVAO=new no(null,null,null,function(e,t){return e.link(j)}),T.useVAO=!0}}return g?T.useVAO=!0:T.attributes=function(e,t){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach(function(e){var i=r[e],s=n.id(e),u=new v;if(eo(i))u.state=ir,u.buffer=o.getBuffer(o.create(i,ri,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=ir,u.buffer=c,u.type=0;else if(N.command("object"===typeof i&&i,"invalid data for attribute "+e,t.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=or,"number"===typeof l?u.x=l:(N.command(Be(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+e,t.commandStr),nr.forEach(function(e,t){t<l.length&&(u[e]=l[t])}))}else{c=eo(i.buffer)?o.getBuffer(o.create(i.buffer,ri,!1,!0)):o.getBuffer(i.buffer),N.command(!!c,'missing buffer for attribute "'+e+'"',t.commandStr);var f=0|i.offset;N.command(f>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var h=0|i.stride;N.command(h>=0&&h<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var d=0|i.size;N.command(!("size"in i)||d>0&&d<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!i.normalized,g=0;"type"in i&&(N.commandParameter(i.type,le,"invalid type for attribute "+e,t.commandStr),g=le[i.type]);var y=0|i.divisor;"divisor"in i&&(N.command(0===y||m,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),N.command(y>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),N.optional(function(){var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(t){N.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)})}),u.buffer=c,u.state=ir,u.size=d,u.normalized=p,u.type=g||c.dtype,u.offset=f,u.stride=h,u.divisor=y}}a[e]=io(function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach(function(e){r[e]=u[e]}),u.buffer&&(r.buffer=e.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r})}),Object.keys(i).forEach(function(e){var t=i[e];a[e]=oo(t,function(n,r){var i=n.invoke(r,t),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;N.optional(function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')});var c={isStream:r.def(!1)},l=new v;l.state=ir,Object.keys(l).forEach(function(e){c[e]=r.def(""+l[e])});var f=c.buffer,h=c.type;function d(e){r(c[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",ri,",",i,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",or,";","if(typeof "+i+'.constant === "number"){',c[nr[0]],"=",i,".constant;",nr.slice(1).map(function(e){return c[e]}).join("="),"=0;","}else{",nr.map(function(e,t){return c[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",ri,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c})}),a}(t,h),T.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=io(function(e,t){return"number"===typeof n||"boolean"===typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=oo(t,function(e,n){return e.invoke(n,t)})}),r}(c),T}function R(e,t,n){var r=e.shared,i=r.context,o=e.scope();Object.keys(n).forEach(function(r){t.save(i,"."+r);var a=n[r],s=a.append(e,t);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")}),t(o)}function D(e,t,n,r){var i,o=e.shared,a=o.gl,s=o.framebuffer;b&&(i=t.def(o.extensions,".webgl_draw_buffers"));var u,c=e.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(e,t):t.def(s,".next"),r||t("if(",u,"!==",s,".cur){"),t("if(",u,"){",a,".bindFramebuffer(",qi,",",u,".framebuffer);"),b&&t(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",qi,",null);"),b&&t(i,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",u,";"),r||t("}")}function I(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,s=r.current,u=r.next,c=e.cond(s,".dirty");C.forEach(function(t){var r,l,f=O(t);if(!(f in n.state))if(f in a){r=a[f],l=o[f];var h=X(w[f].length,function(e){return c.def(r,"[",e,"]")});c(e.cond(h.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(i,".",E[f],"(",h,");",h.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"))}else{r=c.def(u,".",f);var d=e.cond(r,"!==",s,".",f);c(d),f in k?d(e.cond(r).then(i,".enable(",k[f],");").else(i,".disable(",k[f],");"),s,".",f,"=",r,";"):d(i,".",E[f],"(",r,");",s,".",f,"=",r,";")}}),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function L(e,t,n,r){var i=e.shared,o=e.current,a=i.current,s=i.gl;to(Object.keys(n)).forEach(function(i){var u=n[i];if(!r||r(u)){var c=u.append(e,t);if(k[i]){var l=k[i];ro(u)?t(s,c?".enable(":".disable(",l,");"):t(e.cond(c).then(s,".enable(",l,");").else(s,".disable(",l,");")),t(a,".",i,"=",c,";")}else if(Be(c)){var f=o[i];t(s,".",E[i],"(",c,");",c.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(s,".",E[i],"(",c,");",a,".",i,"=",c,";")}})}function F(e,t){m&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function B(e,t,n,r,i){var o,a,s,u=e.shared,c=e.stats,l=u.current,f=u.timer,h=n.profile;function d(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(e){o=t.def(),e(o,"=",d(),";"),"string"===typeof i?e(c,".count+=",i,";"):e(c,".count++;"),p&&(r?(a=t.def(),e(a,"=",f,".getNumPendingQueries();")):e(f,".beginQuery(",c,");"))}function v(e){e(c,".cpuTime+=",d(),"-",o,";"),p&&(r?e(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",c,");"):e(f,".endQuery();"))}function y(e){var n=t.def(l,".profile");t(l,".profile=",e,";"),t.exit(l,".profile=",n,";")}if(h){if(ro(h))return void(h.enable?(g(t),v(t.exit),y("true")):y("false"));y(s=h.append(e,t))}else s=t.def(l,".profile");var m=e.block();g(m),t("if(",s,"){",m,"}");var b=e.block();v(b),t.exit("if(",s,"){",b,"}")}function z(e,t,n,r,i){var o=e.shared;r.forEach(function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(e,t)}else{if(!i(ao))return;var c=e.scopeAttrib(s);N.optional(function(){e.assert(t,c+".state","missing attribute "+s)}),a={},Object.keys(new v).forEach(function(e){a[e]=t.def(c,".",e)})}!function(n,r,i){var a=o.gl,s=t.def(n,".location"),u=t.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function d(){t("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",u,".type!==",o,"||",u,".size!==",n,"||",h.map(function(e){return u+"."+e+"!=="+i[e]}).join("||"),"){",a,".bindBuffer(",ri,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",h.map(function(e){return u+"."+e+"="+i[e]+";"}).join(""),"}"),m){var c=i.divisor;t("if(",u,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function p(){t("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",nr.map(function(e,t){return u+"."+e+"!=="+f[t]}).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",nr.map(function(e,t){return u+"."+e+"="+f[t]+";"}).join(""),"}")}c===ir?d():c===or?p():(t("if(",c,"===",ir,"){"),d(),t("}else{"),p(),t("}"))}(e.link(r),function(e){switch(e){case yi:case xi:case Oi:return 2;case mi:case Ci:case Si:return 3;case bi:case ki:case Ai:return 4;default:return 1}}(r.info.type),a)})}function U(e,t,r,i,o){for(var a,s=e.shared,u=s.gl,c=0;c<i.length;++c){var l,f=i[c],h=f.name,d=f.info.type,p=r.uniforms[h],g=e.link(f),v=g+".location";if(p){if(!o(p))continue;if(ro(p)){var y=p.value;if(N.command(null!==y&&"undefined"!==typeof y,'missing uniform "'+h+'"',e.commandStr),d===ji||d===Pi){N.command("function"===typeof y&&(d===ji&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||d===Pi&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,e.commandStr);var m=e.link(y._texture||y.color[0]._texture);t(u,".uniform1i(",v,",",m+".bind());"),t.exit(m,".unbind();")}else if(d===Ti||d===Mi||d===_i){N.optional(function(){N.command(Be(y),"invalid matrix for uniform "+h,e.commandStr),N.command(d===Ti&&4===y.length||d===Mi&&9===y.length||d===_i&&16===y.length,"invalid length for matrix uniform "+h,e.commandStr)});var b=e.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),w=2;d===Mi?w=3:d===_i&&(w=4),t(u,".uniformMatrix",w,"fv(",v,",false,",b,");")}else{switch(d){case vi:N.commandType(y,"number","uniform "+h,e.commandStr),a="1f";break;case yi:N.command(Be(y)&&2===y.length,"uniform "+h,e.commandStr),a="2f";break;case mi:N.command(Be(y)&&3===y.length,"uniform "+h,e.commandStr),a="3f";break;case bi:N.command(Be(y)&&4===y.length,"uniform "+h,e.commandStr),a="4f";break;case Ei:N.commandType(y,"boolean","uniform "+h,e.commandStr),a="1i";break;case wi:N.commandType(y,"number","uniform "+h,e.commandStr),a="1i";break;case Oi:case xi:N.command(Be(y)&&2===y.length,"uniform "+h,e.commandStr),a="2i";break;case Si:case Ci:N.command(Be(y)&&3===y.length,"uniform "+h,e.commandStr),a="3i";break;case Ai:case ki:N.command(Be(y)&&4===y.length,"uniform "+h,e.commandStr),a="4i"}t(u,".uniform",a,"(",v,",",Be(y)?Array.prototype.slice.call(y):y,");")}continue}l=p.append(e,t)}else{if(!o(ao))continue;l=t.def(s.uniforms,"[",n.id(h),"]")}d===ji?(N(!Array.isArray(l),"must specify a scalar prop for textures"),t("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):d===Pi&&(N(!Array.isArray(l),"must specify a scalar prop for cube maps"),t("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}")),N.optional(function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(e){N(!Array.isArray(l),"must not specify an array type for uniform"),n("typeof "+l+'==="'+e+'"',"invalid type, expected "+e)}function i(t,r){Array.isArray(l)?N(l.length===t,"must have length "+t):n(s.isArrayLike+"("+l+")&&"+l+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function o(t){N(!Array.isArray(l),"must not specify a value type"),n("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(t===oi?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(d){case wi:r("number");break;case xi:i(2);break;case Ci:i(3);break;case ki:i(4);break;case vi:r("number");break;case yi:i(2);break;case mi:i(3);break;case bi:i(4);break;case Ei:r("boolean");break;case Oi:i(2);break;case Si:i(3);break;case Ai:case Ti:i(4);break;case Mi:i(9);break;case _i:i(16);break;case ji:o(oi);break;case Pi:o(ai)}});var x=1;switch(d){case ji:case Pi:var C=t.def(l,"._texture");t(u,".uniform1i(",v,",",C,".bind());"),t.exit(C,".unbind();");continue;case wi:case Ei:a="1i";break;case xi:case Oi:a="2i",x=2;break;case Ci:case Si:a="3i",x=3;break;case ki:case Ai:a="4i",x=4;break;case vi:a="1f";break;case yi:a="2f",x=2;break;case mi:a="3f",x=3;break;case bi:a="4f",x=4;break;case Ti:a="Matrix2fv";break;case Mi:a="Matrix3fv";break;case _i:a="Matrix4fv"}if(t(u,".uniform",a,"(",v,","),"M"===a.charAt(0)){var k=Math.pow(d-Ti+2,2),E=e.global.def("new Float32Array(",k,")");Array.isArray(l)?t("false,(",X(k,function(e){return E+"["+e+"]="+l[e]}),",",E,")"):t("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",X(k,function(e){return E+"["+e+"]="+l+"["+e+"]"}),",",E,")")}else x>1?t(X(x,function(e){return Array.isArray(l)?l[e]:l+"["+e+"]"})):(N(!Array.isArray(l),"uniform value must not be an array"),t(l));t(");")}}function G(e,t,n,r){var i=e.shared,o=i.gl,a=i.draw,s=r.draw,u=function(){var i,u=s.elements,c=t;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),i=u.append(e,c)):i=c.def(a,".",Hr),i&&c("if("+i+")"+o+".bindBuffer("+ii+","+i+".buffer.buffer);"),i}();function c(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(a,".",i)}var l,f,h=c(Wr),d=c(Xr),p=function(){var i,o=s.count,u=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(e,u),N.optional(function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(u,i+">=0","missing vertex count")})):(i=u.def(a,".",qr),N.optional(function(){e.assert(u,i+">=0","missing vertex count")})),i}();if("number"===typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");m&&(l=c($r),f=e.instancing);var g=u+".type",v=s.elements&&ro(s.elements);function y(){function e(){n(f,".drawElementsInstancedANGLE(",[h,p,g,d+"<<(("+g+"-"+rr+")>>1)",l],");")}function t(){n(f,".drawArraysInstancedANGLE(",[h,d,p,l],");")}u?v?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}function b(){function e(){n(o+".drawElements("+[h,p,g,d+"<<(("+g+"-"+rr+")>>1)"]+");")}function t(){n(o+".drawArrays("+[h,d,p]+");")}u?v?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}m&&("number"!==typeof l||l>=0)?"string"===typeof l?(n("if(",l,">0){"),y(),n("}else if(",l,"<0){"),b(),n("}")):y():b()}function H(e,t,n,r,i){var o=j(),a=o.proc("body",i);return N.optional(function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)}),m&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function W(e,t,n,r){F(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),z(e,t,n,r.attributes,function(){return!0})),U(e,t,n,r.uniforms,function(){return!0}),G(e,t,t,n)}function q(e,t,n,r){function i(){return!0}e.batchId="a1",F(e,t),z(e,t,n,r.attributes,i),U(e,t,n,r.uniforms,i),G(e,t,t,n)}function $(e,t,n,r){F(e,t);var i=n.contextDep,o=t.def(),a=t.def();e.shared.props=a,e.batchId=o;var s=e.scope(),u=e.scope();function c(e){return e.contextDep&&i||e.propDep}function l(e){return!c(e)}if(t(s.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",a,"=","a0","[",o,"];",u,"}",s.exit),n.needsContext&&R(e,u,n.context),n.needsFramebuffer&&D(e,u,n.framebuffer),L(e,u,n.state,c),n.profile&&c(n.profile)&&B(e,u,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?u(e.shared.vao,".setVAO(",n.drawVAO.append(e,u),");"):s(e.shared.vao,".setVAO(",n.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),z(e,s,n,r.attributes,l),z(e,u,n,r.attributes,c)),U(e,s,n,r.uniforms,l),U(e,u,n,r.uniforms,c),G(e,s,u,n);else{var f=e.global.def("{}"),h=n.shader.progVar.append(e,u),d=u.def(h,".id"),p=u.def(f,"[",d,"]");u(e.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",f,"[",d,"]=",e.link(function(t){return H(q,e,n,t,2)}),"(",h,");}",p,".call(this,a0[",o,"],",o,");")}}function Y(e,t,n){var r=t.static[n];if(r&&function(e){if("object"===typeof e&&!Be(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(V.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=e.global.def("{}");o.forEach(function(t){var n=r[t];if(V.isDynamic(n)){"function"===typeof n&&(n=r[t]=V.unbox(n));var o=oo(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}}),t.dynamic[n]=new V.DynamicVariable(lr,{thisDep:a,contextDep:s,propDep:u,ref:c,append:function(e,t){o.forEach(function(n){var i=r[n];if(V.isDynamic(i)){var o=e.invoke(t,i);t(c,".",n,"=",o,";")}})}}),delete t.static[n]}}return{next:x,current:w,procs:function(){var e=j(),t=e.proc("poll"),n=e.proc("refresh"),o=e.block();t(o),n(o);var a,s=e.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),D(e,t),D(e,n,null,!0),m&&(a=e.link(m)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var h=n.def(s.attributes,"[",f,"]"),d=e.cond(h,".buffer");d.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",ri,",",h,".buffer.buffer);",u,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),m&&n(a,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(k).forEach(function(r){var i=k[r],a=o.def(c,".",r),s=e.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),t("if(",a,"!==",l,".",r,"){",s,"}")}),Object.keys(E).forEach(function(r){var i,a,s=E[r],f=w[r],h=e.block();if(h(u,".",s,"("),Be(f)){var d=f.length;i=e.global.def(c,".",r),a=e.global.def(l,".",r),h(X(d,function(e){return i+"["+e+"]"}),");",X(d,function(e){return a+"["+e+"]="+i+"["+e+"];"}).join("")),t("if(",X(d,function(e){return i+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",h,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),h(i,");",l,".",r,"=",i,";"),t("if(",i,"!==",a,"){",h,"}");n(h)}),e.compile()}(),compile:function(e,r,i,o,a){var s=j();s.stats=s.link(a),Object.keys(r.static).forEach(function(e){Y(s,r,e)}),ni.forEach(function(t){Y(s,e,t)});var u=P(e,r,i,o,s);return function(e,t){var n=e.proc("draw",1);F(e,n),R(e,n,t.context),D(e,n,t.framebuffer),I(e,n,t),L(e,n,t.state),B(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)W(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link(function(n){return H(W,e,t,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}(s,u),function(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;function a(n){var o=t.shader[n];o&&r.set(i.shader,"."+n,o.append(e,r))}R(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),to(Object.keys(t.state)).forEach(function(n){var o=t.state[n].append(e,r);Be(o)?o.forEach(function(t,i){r.set(e.next[n],"["+i+"]",t)}):r.set(i.next,"."+n,o)}),B(e,r,t,!0,!0),[Hr,Xr,qr,$r,Wr].forEach(function(n){var o=t.draw[n];o&&r.set(i.draw,"."+n,""+o.append(e,r))}),Object.keys(t.uniforms).forEach(function(o){var a=t.uniforms[o].append(e,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)}),Object.keys(t.attributes).forEach(function(n){var i=t.attributes[n].append(e,r),o=e.scopeAttrib(n);Object.keys(new v).forEach(function(e){r.set(o,"."+e,i[e])})}),t.scopeVAO&&r.set(i.vao,".targetVAO",t.scopeVAO.append(e,r)),a(Ur),a(Gr),Object.keys(t.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(s,u),function(e,t){var n=e.proc("batch",2);e.batchId="0",F(e,n);var r=!1,i=!0;Object.keys(t.context).forEach(function(e){r=r||t.context[e].propDep}),r||(R(e,n,t.context),i=!1);var o=t.framebuffer,a=!1;function s(e){return e.contextDep&&r||e.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||D(e,n,o)):D(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),I(e,n,t),L(e,n,t.state,function(e){return!s(e)}),t.profile&&s(t.profile)||B(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=a;var u=t.shader.progVar;if(u.contextDep&&r||u.propDep)$(e,n,t,null);else{var c=u.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)$(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var l=e.global.def("{}"),f=n.def(c,".id"),h=n.def(l,"[",f,"]");n(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",l,"[",f,"]=",e.link(function(n){return H($,e,t,n,2)}),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}(s,u),t(s.compile(),{destroy:function(){u.shader.program.destroy()}})}}}var uo=34918,co=34919,lo=35007,fo=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(e){n.push(e)}var i=[];function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function s(e){a.push(e)}var u=[];function c(e,t,n){var r=a.pop()||new o;r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,u.push(r)}var l=[],f=[];return{beginQuery:function(e){var r=n.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(lo,r),i.push(r),c(i.length-1,i.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(lo)},pushScopeStats:c,update:function(){var e,n,o=i.length;if(0!==o){f.length=Math.max(f.length,o+1),l.length=Math.max(l.length,o+1),l[0]=0,f[0]=0;var a=0;for(e=0,n=0;n<i.length;++n){var c=i[n];t.ext_disjoint_timer_query.getQueryObjectEXT(c,co)?(a+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,uo),r(c)):i[e++]=c,l[n+1]=a,f[n+1]=e}for(i.length=e,e=0,n=0;n<u.length;++n){var h=u[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=l[p]-l[d];var g=f[d],v=f[p];v===g?(h.stats.gpuTime+=h.sum/1e6,s(h)):(h.startQueryIndex=g,h.endQueryIndex=v,u[e++]=h)}u.length=e}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}},ho=16384,po=256,go=1024,vo=34962,yo="webglcontextlost",mo="webglcontextrestored",bo=1,wo=2,xo=3;function Co(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(n){var r=q(n);if(!r)return null;var i=r.gl,o=i.getContextAttributes(),a=i.isContextLost(),s=function(e,t){var n={};function r(t){N.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(o){}return!!r}for(var i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)})}}}(i,r);if(!s)return null;var u=function(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}(),c={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},l=s.extensions,f=fo(i,l),h=G(),d=i.drawingBufferWidth,p=i.drawingBufferHeight,g={tick:0,time:0,viewportWidth:d,viewportHeight:p,framebufferWidth:d,framebufferHeight:p,drawingBufferWidth:d,drawingBufferHeight:p,pixelRatio:r.pixelRatio},v=ie(i,l),y=function(t,n,r,i){var o=0,a={};function s(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=pe,this.byteLength=0,this.dimension=1,this.dtype=ve,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var u=[];function c(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function l(t,n,r,i,o,a){var s,u;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||ye,n.length>0)if(Array.isArray(n[0])){s=de(n);for(var l=1,f=1;f<s.length;++f)l*=s[f];t.dimension=l,u=he(n,s,t.dtype),c(t,u,r),a?t.persistentData=u:re.freeType(u)}else if("number"===typeof n[0]){t.dimension=o;var h=re.allocType(t.dtype,n.length);we(h,n),c(t,h,r),a?t.persistentData=h:re.freeType(h)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||be(n[0])||ye,u=he(n,[n.length,n[0].length],t.dtype),c(t,u,r),a?t.persistentData=u:re.freeType(u)):N.raise("invalid buffer data")}else if(e(n))t.dtype=i||be(n),t.dimension=o,c(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(oe(n)){s=n.shape;var d=n.stride,p=n.offset,g=0,v=0,y=0,m=0;1===s.length?(g=s[0],v=1,y=d[0],m=0):2===s.length?(g=s[0],v=s[1],y=d[0],m=d[1]):N.raise("invalid shape"),t.dtype=i||be(n.data)||ye,t.dimension=v;var b=re.allocType(t.dtype,g*v);xe(b,n.data,g,v,y,m,p),c(t,b,r),a?t.persistentData=b:re.freeType(b)}else n instanceof ArrayBuffer?(t.dtype=ve,t.dimension=o,c(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):N.raise("invalid buffer data")}function f(e){n.bufferCount--,i(e);var r=e.buffer;N(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete a[e.id]}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(i,o,u,c){n.bufferCount++;var h=new s(o);function d(n){var i=pe,o=null,a=0,s=0,u=1;return Array.isArray(n)||e(n)||oe(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(N.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(N(null===o||Array.isArray(o)||e(o)||oe(o),"invalid data for buffer"),o=n.data),"usage"in n&&(N.parameter(n.usage,fe,"invalid buffer usage"),i=fe[n.usage]),"type"in n&&(N.parameter(n.type,le,"invalid buffer type"),s=le[n.type]),"dimension"in n&&(N.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(N.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),o?l(h,o,i,s,u,c):(a&&t.bufferData(h.type,a,i),h.dtype=s||ve,h.usage=i,h.dimension=u,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*me[h.dtype]),d}function p(e,n){N(n+e.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),t.bufferSubData(h.type,n,e)}return a[h.id]=h,u||d(i),d._reglType="buffer",d._buffer=h,d.subdata=function(t,n){var r,i=0|(n||0);if(h.bind(),e(t)||t instanceof ArrayBuffer)p(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"===typeof t[0]){var o=re.allocType(h.dtype,t.length);we(o,t),p(o,i),re.freeType(o)}else if(Array.isArray(t[0])||e(t[0])){r=de(t);var a=he(t,r,h.dtype);p(a,i),re.freeType(a)}else N.raise("invalid buffer data")}else if(oe(t)){r=t.shape;var s=t.stride,u=0,c=0,l=0,f=0;1===r.length?(u=r[0],c=1,l=s[0],f=0):2===r.length?(u=r[0],c=r[1],l=s[0],f=s[1]):N.raise("invalid shape");var g=Array.isArray(t.data)?h.dtype:be(t.data),v=re.allocType(g,u*c);xe(v,t.data,u,c,l,f,t.offset),p(v,i),re.freeType(v)}else N.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){f(h)},d},createStream:function(e,t){var n=u.pop();return n||(n=new s(e)),n.bind(),l(n,t,ge,0,1,!1),n},destroyStream:function(e){u.push(e)},clear:function(){ae(a).forEach(f),u.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:function(){ae(a).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:l}}(i,c,r,function(e){return m.destroyBuffer(e)}),m=function(t,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Hn;var c=0,l={},f={Record:Hn,scope:{},state:s,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&ae(l).forEach(function(e){e.refresh()})}:function(){},createVAO:function(t){var r=new p;function s(t){N(Array.isArray(t),"arguments to vertex array constructor must be an array"),N(t.length<a,"too many attributes"),N(t.length>0,"must specify at least one attribute");var i={},u=r.attributes;u.length=t.length;for(var c=0;c<t.length;++c){var l,f=t[c],h=u[c]=new Hn,d=f.data||f;Array.isArray(d)||e(d)||oe(d)?(r.buffers[c]&&(l=r.buffers[c],e(d)&&l._buffer.byteLength>=d.byteLength?l.subdata(d):(l.destroy(),r.buffers[c]=null)),r.buffers[c]||(l=r.buffers[c]=o.create(f,Gn,!1,!0)),h.buffer=o.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,i[c]=1):o.getBuffer(f)?(h.buffer=o.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):o.getBuffer(f.buffer)?(h.buffer=o.getBuffer(f.buffer),h.size=0|(+f.size||h.buffer.dimension),h.normalized=!!f.normalized||!1,"type"in f?(N.parameter(f.type,le,"invalid buffer type"),h.type=le[f.type]):h.type=h.buffer.dtype,h.offset=0|(f.offset||0),h.stride=0|(f.stride||0),h.divisor=0|(f.divisor||0),h.state=1,N(h.size>=1&&h.size<=4,"size must be between 1 and 4"),N(h.offset>=0,"invalid offset"),N(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),N(h.divisor>=0,"divisor must be positive"),N(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(N(c>0,"first attribute must not be a constant"),h.x=+f.x||0,h.y=+f.y||0,h.z=+f.z||0,h.w=+f.w||0,h.state=2):N(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(t)},getVAO:function(e){return"function"===typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(e){if(e!==f.currentVAO){var t=h();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),f.currentVAO=e}}:function(e){if(e!==f.currentVAO){if(e)e.bindAttrs();else for(var n=d(),r=0;r<s.length;++r){var i=s[r];i.buffer?(t.enableVertexAttribArray(r),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}f.currentVAO=e}},clear:h()?function(){ae(l).forEach(function(e){e.destroy()})}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var e=h();this.vao=e?e.createVertexArrayOES():null,l[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var e=d(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(Gn,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)t.disableVertexAttribArray(o)},p.prototype.refresh=function(){var e=h();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var e=h();this===f.currentVAO&&(f.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}l[this.id]&&(delete l[this.id],i.vaoCount-=1)},f}(i,l,v,c,y),b=function(t,n,r,i){var o={},a=0,s={uint8:Ae,uint16:Me};function u(e){this.id=a++,o[this.id]=this,this.buffer=e,this.primType=Oe,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=je),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(i,o,a,s,u,c,l){var f;if(i.buffer.bind(),o){var h=l;l||e(o)&&(!oe(o)||e(o.data))||(h=n.oes_element_index_uint?je:Me),r._initBuffer(i.buffer,o,a,h,3)}else t.bufferData(Pe,c,a),i.buffer.dtype=f||Ae,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case Ae:case Se:f=Ae;break;case Me:case Te:f=Me;break;case je:case _e:f=je;break;default:N.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,N(f!==je||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=u;d<0&&(d=i.buffer.byteLength,f===Me?d>>=1:f===je&&(d>>=2)),i.vertCount=d;var p=s;if(s<0){p=Oe;var g=i.buffer.dimension;1===g&&(p=ke),2===g&&(p=Ee),3===g&&(p=Oe)}i.primType=p}function f(e){i.elementsCount--,N(null!==e.buffer,"must not double destroy elements"),delete o[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,n){var o=r.create(null,Pe,!0),a=new u(o._buffer);function c(t){if(t)if("number"===typeof t)o(t),a.primType=Oe,a.vertCount=0|t,a.type=Ae;else{var n=null,r=Re,i=-1,u=-1,f=0,h=0;Array.isArray(t)||e(t)||oe(t)?n=t:(N.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,N(Array.isArray(n)||e(n)||oe(n),"invalid data for element buffer")),"usage"in t&&(N.parameter(t.usage,fe,"invalid element buffer usage"),r=fe[t.usage]),"primitive"in t&&(N.parameter(t.primitive,Ce,"invalid element buffer primitive"),i=Ce[t.primitive]),"count"in t&&(N("number"===typeof t.count&&t.count>=0,"invalid vertex count for elements"),u=0|t.count),"type"in t&&(N.parameter(t.type,s,"invalid buffer type"),h=s[t.type]),"length"in t?f=0|t.length:(f=u,h===Me||h===Te?f*=2:h!==je&&h!==_e||(f*=4))),l(a,n,r,i,u,f,h)}else o(),a.primType=Oe,a.vertCount=0,a.type=Ae;return c}return i.elementsCount++,c(t),c._reglType="elements",c._elements=a,c.subdata=function(e,t){return o.subdata(e,t),c},c.destroy=function(){f(a)},c},createStream:function(e){var t=c.pop();return t||(t=new u(r.create(null,Pe,!0,!1)._buffer)),l(t,e,Ne,-1,-1,0,0),t},destroyStream:function(e){c.push(e)},getElements:function(e){return"function"===typeof e&&e._elements instanceof u?e._elements:null},clear:function(){ae(o).forEach(f)}}}(i,l,y,c),w=function(e,n,r,i){var o={},a={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(t,r,i){var s=t===Wn?o:a,u=s[r];if(!u){var c=n.str(r);u=e.createShader(t),e.shaderSource(u,c),e.compileShader(u),N.shaderError(e,u,c,t,i),s[r]=u}return u}var l={},f=[],h=0;function d(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(t,r,o){var a,l,f=c(Wn,t.fragId),h=c(qn,t.vertId),d=t.program=e.createProgram();if(e.attachShader(d,f),e.attachShader(d,h),o)for(a=0;a<o.length;++a){var p=o[a];e.bindAttribLocation(d,p[0],p[1])}e.linkProgram(d),N.linkError(e,d,n.str(t.fragId),n.str(t.vertId),r);var g=e.getProgramParameter(d,Xn);i.profile&&(t.stats.uniformsCount=g);var v=t.uniforms;for(a=0;a<g;++a)if(l=e.getActiveUniform(d,a))if(l.size>1)for(var y=0;y<l.size;++y){var m=l.name.replace("[0]","["+y+"]");u(v,new s(m,n.id(m),e.getUniformLocation(d,m),l))}else u(v,new s(l.name,n.id(l.name),e.getUniformLocation(d,l.name),l));var b=e.getProgramParameter(d,$n);i.profile&&(t.stats.attributesCount=b);var w=t.attributes;for(a=0;a<b;++a)(l=e.getActiveAttrib(d,a))&&u(w,new s(l.name,n.id(l.name),e.getAttribLocation(d,l.name),l))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);ae(o).forEach(t),o={},ae(a).forEach(t),a={},f.forEach(function(t){e.deleteProgram(t.program)}),f.length=0,l={},r.shaderCount=0},program:function(n,i,s,u){N.command(n>=0,"missing vertex shader",s),N.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var h=c[n];if(h&&(h.refCount++,!u))return h;var g=new d(i,n);return r.shaderCount++,p(g,s,u),h||(c[n]=g),f.push(g),t(g,{destroy:function(){if(g.refCount--,g.refCount<=0){e.deleteProgram(g.program);var t=f.indexOf(g);f.splice(t,1),r.shaderCount--}c[g.vertId].refCount<=0&&(e.deleteShader(a[g.vertId]),delete a[g.vertId],delete l[g.fragId][g.vertId]),Object.keys(l[g.fragId]).length||(e.deleteShader(o[g.fragId]),delete o[g.fragId],delete l[g.fragId])}})},restore:function(){o={},a={};for(var e=0;e<f.length;++e)p(f[e],null,f[e].attributes.map(function(e){return[e.location,e.name]}))},shader:c,frag:-1,vert:-1}}(i,u,c,r),x=mn(i,l,v,function(){E.procs.poll()},g,c,r),C=kn(i,l,v,c,r),k=function(e,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function d(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);N(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;N(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(En,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(En,t,On,n.renderbuffer._renderbuffer.renderbuffer))}function g(e){var t=Sn,n=null,r=null,i=e;"object"===typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),N.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,N(t===Sn)):"textureCube"===o?(n=i,N(t>=An&&t<An+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=On):N.raise("invalid regl object for attachment"),new f(t,n,r)}function v(e,t,n,r,a){if(n){var s=i.create2D({width:e,height:t,format:r,type:a});return s._texture.refCount=0,new f(Sn,s,null)}var u=o.create({width:e,height:t,format:r});return u._renderbuffer.refCount=0,new f(On,null,u)}function y(e){return e&&(e.texture||e.renderbuffer)}function m(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var b=0,w={};function x(){this.id=b++,w[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function C(e){e.colorAttachments.forEach(h),h(e.depthAttachment),h(e.stencilAttachment),h(e.depthStencilAttachment)}function k(t){var n=t.framebuffer;N(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete w[t.id]}function E(t){var n;e.bindFramebuffer(En,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)p(Tn+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(En,Tn+n,Sn,null,0);e.framebufferTexture2D(En,jn,Sn,null,0),e.framebufferTexture2D(En,Mn,Sn,null,0),e.framebufferTexture2D(En,_n,Sn,null,0),p(Mn,t.depthAttachment),p(_n,t.stencilAttachment),p(jn,t.depthStencilAttachment);var o=e.checkFramebufferStatus(En);e.isContextLost()||o===Pn||N.raise("framebuffer configuration not supported, status = "+Vn[o]),e.bindFramebuffer(En,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function O(e,i){var o=new x;function f(e,t){var i;N(s.next!==o,"can not update framebuffer which is currently in use");var a=0,h=0,p=!0,m=!0,b=null,w=!0,x="rgba",k="uint8",O=1,S=null,A=null,T=null,M=!1;if("number"===typeof e)a=0|e,h=0|t||a;else if(e){N.type(e,"object","invalid arguments for framebuffer");var _=e;if("shape"in _){var j=_.shape;N(Array.isArray(j)&&j.length>=2,"invalid shape for framebuffer"),a=j[0],h=j[1]}else"radius"in _&&(a=h=_.radius),"width"in _&&(a=_.width),"height"in _&&(h=_.height);("color"in _||"colors"in _)&&(b=_.color||_.colors,Array.isArray(b)&&N(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in _&&(O=0|_.colorCount,N(O>0,"invalid color buffer count")),"colorTexture"in _&&(w=!!_.colorTexture,x="rgba4"),"colorType"in _&&(k=_.colorType,w?(N(n.oes_texture_float||!("float"===k||"float32"===k),"you must enable OES_texture_float in order to use floating point framebuffer objects"),N(n.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===k||"float16"===k?(N(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==k&&"float32"!==k||(N(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),N.oneOf(k,l,"invalid color type")),"colorFormat"in _&&(x=_.colorFormat,u.indexOf(x)>=0?w=!0:c.indexOf(x)>=0?w=!1:w?N.oneOf(_.colorFormat,u,"invalid color format for texture"):N.oneOf(_.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in _||"depthStencilTexture"in _)&&(M=!(!_.depthTexture&&!_.depthStencilTexture),N(!M||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in _&&("boolean"===typeof _.depth?p=_.depth:(S=_.depth,m=!1)),"stencil"in _&&("boolean"===typeof _.stencil?m=_.stencil:(A=_.stencil,p=!1)),"depthStencil"in _&&("boolean"===typeof _.depthStencil?p=m=_.depthStencil:(T=_.depthStencil,p=!1,m=!1))}else a=h=1;var P=null,R=null,D=null,I=null;if(Array.isArray(b))P=b.map(g);else if(b)P=[g(b)];else for(P=new Array(O),i=0;i<O;++i)P[i]=v(a,h,w,x,k);N(n.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),N(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||P[0].width,h=h||P[0].height,S?R=g(S):p&&!m&&(R=v(a,h,M,"depth","uint32")),A?D=g(A):m&&!p&&(D=v(a,h,!1,"stencil","uint8")),T?I=g(T):!S&&!A&&m&&p&&(I=v(a,h,M,"depth stencil","depth stencil")),N(!!S+!!A+!!T<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(i=0;i<P.length;++i)if(d(P[i],a,h),N(!P[i]||P[i].texture&&Rn.indexOf(P[i].texture._texture.format)>=0||P[i].renderbuffer&&zn.indexOf(P[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),P[i]&&P[i].texture){var F=Dn[P[i].texture._texture.format]*In[P[i].texture._texture.type];null===L?L=F:N(L===F,"all color attachments much have the same number of bits per pixel.")}return d(R,a,h),N(!R||R.texture&&R.texture._texture.format===Nn||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Ln,"invalid depth attachment for framebuffer object"),d(D,a,h),N(!D||D.renderbuffer&&D.renderbuffer._renderbuffer.format===Fn,"invalid stencil attachment for framebuffer object"),d(I,a,h),N(!I||I.texture&&I.texture._texture.format===Bn||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Bn,"invalid depth-stencil attachment for framebuffer object"),C(o),o.width=a,o.height=h,o.colorAttachments=P,o.depthAttachment=R,o.stencilAttachment=D,o.depthStencilAttachment=I,f.color=P.map(y),f.depth=y(R),f.stencil=y(D),f.depthStencil=y(I),f.width=o.width,f.height=o.height,E(o),f}return a.framebufferCount++,f(e,i),t(f,{resize:function(e,t){N(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===o.width&&r===o.height)return f;for(var i=o.colorAttachments,a=0;a<i.length;++a)m(i[a],n,r);return m(o.depthAttachment,n,r),m(o.stencilAttachment,n,r),m(o.depthStencilAttachment,n,r),o.width=f.width=n,o.height=f.height=r,E(o),f},_reglType:"framebuffer",_framebuffer:o,destroy:function(){k(o),C(o)},use:function(e){s.setFBO({framebuffer:f},e)}})}return t(s,{getFramebuffer:function(e){if("function"===typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof x)return t}return null},create:O,createCube:function(e){var o=Array(6);function a(e){var r;N(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},h=0,d=null,p="rgba",g="uint8",v=1;if("number"===typeof e)h=0|e;else if(e){N.type(e,"object","invalid arguments for framebuffer");var y=e;if("shape"in y){var m=y.shape;N(Array.isArray(m)&&m.length>=2,"invalid shape for framebuffer"),N(m[0]===m[1],"cube framebuffer must be square"),h=m[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&N(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&N(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(v=0|y.colorCount,N(v>0,"invalid color buffer count")),"colorType"in y&&(N.oneOf(y.colorType,l,"invalid color type"),g=y.colorType),"colorFormat"in y&&(p=y.colorFormat,N.oneOf(y.colorFormat,u,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(c=[],r=0;r<d.length;++r)c[r]=d[r];else c=[d];else{c=Array(v);var b={radius:h,format:p,type:g};for(r=0;r<v;++r)c[r]=i.createCube(b)}for(f.color=Array(c.length),r=0;r<c.length;++r){var w=c[r];N("function"===typeof w&&"textureCube"===w._reglType,"invalid cube map"),h=h||w.width,N(w.width===h&&w.height===h,"invalid cube map shape"),f.color[r]={target:An,data:c[r]}}for(r=0;r<6;++r){for(var x=0;x<c.length;++x)f.color[x].target=An+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=O(f)}return t(a,{width:h,height:h,color:c})}return a(e),t(a,{faces:o,resize:function(e){var t,n=0|e;if(N(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){o.forEach(function(e){e.destroy()})}})},clear:function(){ae(w).forEach(k)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,ae(w).forEach(function(t){t.framebuffer=e.createFramebuffer(),E(t)})}})}(i,l,v,x,C,c),E=so(i,u,l,v,y,b,0,k,{},m,w,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,f,r),O=Qn(i,k,E.procs.poll,g,o,l,v),S=E.next,A=i.canvas,T=[],M=[],_=[],j=[r.onDestroy],P=null;function R(){if(0===T.length)return f&&f.update(),void(P=null);P=U.next(R),$();for(var e=T.length-1;e>=0;--e){var t=T[e];t&&t(g,null,0)}i.flush(),f&&f.update()}function D(){!P&&T.length>0&&(P=U.next(R))}function I(){P&&(U.cancel(R),P=null)}function L(e){e.preventDefault(),a=!0,I(),M.forEach(function(e){e()})}function F(e){i.getError(),a=!1,s.restore(),w.restore(),y.restore(),x.restore(),C.restore(),k.restore(),m.restore(),f&&f.restore(),E.procs.refresh(),D(),_.forEach(function(e){e()})}function B(e){function n(e,t){var n={},r={};return Object.keys(e).forEach(function(i){var o=e[i];if(V.isDynamic(o))r[i]=V.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(V.isDynamic(o[a]))return void(r[i]=V.unbox(o,i));n[i]=o}}),{dynamic:r,static:n}}N(!!e,"invalid args to regl({...})"),N.type(e,"object","invalid args to regl({...})");var r=n(e.context||{},!0),i=n(e.uniforms||{},!0),o=n(e.attributes||{},!1),s=n(function(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1),u={gpuTime:0,cpuTime:0,count:0},c=E.compile(s,o,i,r,u),l=c.draw,f=c.batch,h=c.scope,d=[];return t(function(e,t){var n;if(a&&N.raise("context lost"),"function"===typeof e)return h.call(this,null,e,0);if("function"===typeof t)if("number"===typeof e)for(n=0;n<e;++n)h.call(this,null,t,n);else{if(!Array.isArray(e))return h.call(this,e,t,0);for(n=0;n<e.length;++n)h.call(this,e[n],t,n)}else if("number"===typeof e){if(e>0)return f.call(this,function(e){for(;d.length<e;)d.push(null);return d}(0|e),0|e)}else{if(!Array.isArray(e))return l.call(this,e);if(e.length)return f.call(this,e,e.length)}},{stats:u,destroy:function(){c.destroy()}})}A&&(A.addEventListener(yo,L,!1),A.addEventListener(mo,F,!1));var z=k.setFBO=B({framebuffer:V.define.call(null,bo,"framebuffer")});function H(e,t){var n=0;E.procs.poll();var r=t.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=ho),"depth"in t&&(i.clearDepth(+t.depth),n|=po),"stencil"in t&&(i.clearStencil(0|t.stencil),n|=go),N(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function W(e){return N.type(e,"function","regl.frame() callback must be a function"),T.push(e),D(),{cancel:function(){var t=Co(T,e);N(t>=0,"cannot cancel a frame twice"),T[t]=function e(){var t=Co(T,e);T[t]=T[T.length-1],T.length-=1,T.length<=0&&I()}}}}function X(){var e=S.viewport,t=S.scissor_box;e[0]=e[1]=t[0]=t[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=e[2]=t[2]=i.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=e[3]=t[3]=i.drawingBufferHeight}function $(){g.tick+=1,g.time=K(),X(),E.procs.poll()}function Y(){x.refresh(),X(),E.procs.refresh(),f&&f.update()}function K(){return(G()-h)/1e3}Y();var J=t(B,{clear:function(e){if(N("object"===typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)z(t({framebuffer:e.framebuffer.faces[n]},e),H);else z(e,H);else H(null,e)},prop:V.define.bind(null,bo),context:V.define.bind(null,wo),this:V.define.bind(null,xo),draw:B({}),buffer:function(e){return y.create(e,vo,!1,!1)},elements:function(e){return b.create(e,!1)},texture:x.create2D,cube:x.createCube,renderbuffer:C.create,framebuffer:k.create,framebufferCube:k.createCube,vao:m.createVAO,attributes:o,frame:W,on:function(e,t){var n;switch(N.type(t,"function","listener callback must be a function"),e){case"frame":return W(t);case"lost":n=M;break;case"restore":n=_;break;case"destroy":n=j;break;default:N.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:v,hasExtension:function(e){return v.extensions.indexOf(e.toLowerCase())>=0},read:O,destroy:function(){T.length=0,I(),A&&(A.removeEventListener(yo,L),A.removeEventListener(mo,F)),w.clear(),k.clear(),C.clear(),x.clear(),b.clear(),y.clear(),m.clear(),f&&f.clear(),j.forEach(function(e){e()})},_gl:i,_refresh:Y,poll:function(){$(),f&&f.update()},now:K,stats:c});return r.onDone(null,J),J}}()},function(e,t,n){var r;!function(i,o,a){if(i){for(var s,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)u[111+h]="f"+h;for(h=0;h<=9;++h)u[h+96]=h.toString();m.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},m.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},m.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},m.prototype.reset=function(){return this._callbacks={},this._directMap={},this},m.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==o&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"===typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},m.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},m.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t]);s=null},m.init=function(){var e=m(o);for(var t in e)"_"!==t.charAt(0)&&(m[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},m.init(),i.Mousetrap=m,e.exports&&(e.exports=m),void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return u[e.which]?u[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t,n){return n||(n=function(){if(!s)for(var e in s={},u)e>95&&e<112||u.hasOwnProperty(e)&&(s[u[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],f[r]&&(r=f[r]),t&&"keypress"!=t&&l[r]&&(r=l[r],o.push("shift")),g(r)&&o.push(r);return{key:r,modifiers:o,action:t=v(r,o,t)}}function m(e){var t=this;if(e=e||o,!(t instanceof m))return new m(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},i=!1,a=!1,s=!1;function u(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function c(e,n,i,o,a,s){var u,c,l,f,h=[],d=i.type;if(!t._callbacks[e])return[];for("keyup"==d&&g(e)&&(n=[e]),u=0;u<t._callbacks[e].length;++u)if(c=t._callbacks[e][u],(o||!c.seq||r[c.seq]==c.level)&&d==c.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(l=n,f=c.modifiers,l.sort().join(",")===f.sort().join(",")))){var p=!o&&c.combo==a,v=o&&c.seq==o&&c.level==s;(p||v)&&t._callbacks[e].splice(u,1),h.push(c)}return h}function l(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function f(e){"number"!==typeof e.which&&(e.which=e.keyCode);var n=p(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function h(e,t,o,a){function c(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(u,1e3)}}function f(t){l(o,t,e),"keyup"!==a&&(i=p(t)),setTimeout(u,10)}r[e]=0;for(var h=0;h<t.length;++h){var d=h+1===t.length?f:c(a||y(t[h+1]).action);v(t[h],d,a,e,h)}}function v(e,n,r,i,o){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?h(e,s,n,r):(a=y(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],c(a.key,a.modifiers,{type:a.action},i,e,o),t._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,i=c(e,t,n),o={},f=0,h=!1;for(r=0;r<i.length;++r)i[r].seq&&(f=Math.max(f,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=f)continue;h=!0,o[i[r].seq]=1,l(i[r].callback,n,i[r].combo,i[r].seq)}else h||l(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&a;n.type!=s||g(e)||d||u(o),a=h&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)v(e[r],t,n)},d(e,"keypress",f),d(e,"keydown",f),d(e,"keyup",f)}}("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var i=r();i.withExtraArgument=r,t.a=i},,function(e,t,n){"use strict";(function(e){var r=n(5),i=n.n(r),o=n(166),a=n(139),s=n.n(a),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};var l=i.a.createContext||function(e,t){var n,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",l=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}(t.props.value),t}Object(o.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof t?t(r,i):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[a]=s.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(o.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return f.contextTypes=((i={})[a]=s.a.object,i),{Provider:l,Consumer:f}};t.a=l}).call(this,n(105))},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(43),i=n(96),o=n(5),a=n.n(o),s=n(65),u=(n(139),n(48)),c=n(128),l=n(74);a.a.Component;var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(s.b)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return a.a.createElement(r.b,{history:this.history,children:this.props.children})},t}(a.a.Component);var h=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},p=function(e){return e},g=a.a.forwardRef;"undefined"===typeof g&&(g=p);var v=g(function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Object(c.a)(e,["innerRef","navigate","onClick"]),s=o.target,l=Object(u.a)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==g&&t||n,a.a.createElement("a",l)});var y=g(function(e,t){var n=e.component,i=void 0===n?v:n,o=e.replace,f=e.to,y=e.innerRef,m=Object(c.a)(e,["component","replace","to","innerRef"]);return a.a.createElement(r.d.Consumer,null,function(e){e||Object(l.a)(!1);var n=e.history,r=d(h(f,e.location),e.location),c=r?n.createHref(r):"",v=Object(u.a)({},m,{href:c,navigate:function(){var t=h(f,e.location),r=Object(s.e)(e.location)===Object(s.e)(d(t));(o||r?n.replace:n.push)(t)}});return p!==g?v.ref=t||y:v.innerRef=y,a.a.createElement(i,v)})}),m=function(e){return e},b=a.a.forwardRef;"undefined"===typeof b&&(b=m);b(function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,f=e.activeStyle,p=e.className,g=e.exact,v=e.isActive,w=e.location,x=e.sensitive,C=e.strict,k=e.style,E=e.to,O=e.innerRef,S=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(r.d.Consumer,null,function(e){e||Object(l.a)(!1);var n=w||e.location,o=d(h(E,n),n),c=o.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),T=A?Object(r.e)(n.pathname,{path:A,exact:g,sensitive:x,strict:C}):null,M=!!(v?v(T,n):T),_="function"===typeof p?p(M):p,j="function"===typeof k?k(M):k;M&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(_,s),j=Object(u.a)({},j,f));var P=Object(u.a)({"aria-current":M&&i||null,className:_,style:j,to:o},S);return m!==b?P.ref=t||O:P.innerRef=O,a.a.createElement(y,P)})})},function(e,t,n){"use strict";var r=n(2),i=n(6),o=n(3),a=n(25),s=n(7),u=n(4),c=function(){function e(){Object(r.a)(this,e),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return Object(u.a)(e,[{key:"layout",value:function(e){return this.init(e),this.execute(!0)}},{key:"init",value:function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[]}},{key:"execute",value:function(e){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(e){e&&Object.assign(this,e)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}]),e}(),l=/-(\w)/g,f=(function(e){var t=Object.create(null)}(function(e){return e.replace(l,function(e,t){return t?t.toUpperCase():""})}),Array.isArray),h=function(e){return"number"===typeof e},d=new Map,p=function(e){return d.has(e)?d.get(e):null};function g(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,c,l,f,h,d=e._root,p={data:r},g=e._x0,v=e._y0,y=e._x1,m=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((c=t>=(o=(g+y)/2))?g=o:y=o,(l=n>=(a=(v+m)/2))?v=a:m=a,i=d,!(d=d[f=l<<1|c]))return i[f]=p,e;if(s=+e._x.call(null,d.data),u=+e._y.call(null,d.data),t===s&&n===u)return p.next=d,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(o=(g+y)/2))?g=o:y=o,(l=n>=(a=(v+m)/2))?v=a:m=a}while((f=l<<1|c)===(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=p,e}var v=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function y(e){return e[0]}function m(e){return e[1]}function b(e,t,n){var r=new w(null==t?y:t,null==n?m:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function w(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function x(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var C=b.prototype=w.prototype;C.copy=function(){var e,t,n=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=x(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=x(t));return n},C.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return g(this.cover(t,n),t,n,e)},C.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<o;++n)g(this,a[n],s[n],e[n]);return this},C.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,c=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},C.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},C.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},C.find=function(e,t,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new v(g,l,f,h,d)),null==n?n=1/0:(l=e-n,f=t-n,h=e+n,d=t+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<f))if(g.length){var y=(i+a)/2,m=(o+s)/2;p.push(new v(g[3],y,m,a,s),new v(g[2],i,m,y,s),new v(g[1],y,o,a,m),new v(g[0],i,o,y,m)),(c=(t>=m)<<1|e>=y)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var b=e-+this._x.call(null,g.data),w=t-+this._y.call(null,g.data),x=b*b+w*w;if(x<n){var C=Math.sqrt(n=x);l=e-C,f=t-C,h=e+C,d=t+C,r=g.data}}return r},C.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,c,l,f,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(l=a>=(u=(g+y)/2))?g=u:y=u,t=d,!(d=d[f=l<<1|c]))return this;if(!d.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,h=f)}for(;d.data!==e;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},C.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},C.root=function(){return this._root},C.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},C.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new v(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new v(n,c,l,o,a)),(n=u[2])&&s.push(new v(n,r,l,c,a)),(n=u[1])&&s.push(new v(n,c,i,o,l)),(n=u[0])&&s.push(new v(n,r,i,c,l))}return this},C.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new v(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,c=t.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new v(o,a,s,l,f)),(o=i[1])&&n.push(new v(o,l,s,u,f)),(o=i[2])&&n.push(new v(o,a,f,l,c)),(o=i[3])&&n.push(new v(o,l,f,u,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},C.x=function(e){return arguments.length?(this._x=e,this):this._x},C.y=function(e){return arguments.length?(this._y=e,this):this._y};var k={value:function(){}};function E(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new O(r)}function O(e){this._=e}function S(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function A(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=k,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}O.prototype=E.prototype={constructor:O,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=A(i[n],e.name,t);else if(null==t)for(n in i)i[n]=A(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=S(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new O(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var T,M,_=0,j=0,P=0,N=1e3,R=0,D=0,I=0,L="object"===typeof performance&&performance.now?performance:Date,F="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function B(){return D||(F(z),D=L.now()+I)}function z(){D=0}function V(){this._call=this._time=this._next=null}function U(e,t,n){var r=new V;return r.restart(e,t,n),r}function G(){D=(R=L.now())+I,_=j=0;try{!function(){B(),++_;for(var e,t=T;t;)(e=D-t._time)>=0&&t._call.call(null,e),t=t._next;--_}()}finally{_=0,function(){var e,t,n=T,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:T=t);M=e,W(r)}(),D=0}}function H(){var e=L.now(),t=e-R;t>N&&(I-=t,R=e)}function W(e){_||(j&&(j=clearTimeout(j)),e-D>24?(e<1/0&&(j=setTimeout(G,e-L.now()-I)),P&&(P=clearInterval(P))):(P||(R=L.now(),P=setInterval(H,N)),_=1,F(G)))}V.prototype=U.prototype={constructor:V,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?B():+n)+(null==t?0:+t),this._next||M===this||(M?M._next=this:T=this,M=this),this._call=e,this._time=n,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};Math.PI,Math.sqrt(5);n(88);var q=n(273),X=n.n(q),$=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this))).rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var e=this,t=this,n=t.nodes,r=t.nodeSize,i=t.rankdir,o=t.combos;if(n){var a,s=t.edges||[],u=new X.a.graphlib.Graph({multigraph:!0,compound:!0});a=r?f(r)?function(){return r}:function(){return[r,r]}:function(e){return e.size?f(e.size)?e.size:[e.size,e.size]:[40,40]};var c=Y(t.nodesepFunc,t.nodesep,50),l=Y(t.ranksepFunc,t.ranksep,50);"LR"!==i&&"RL"!==i||(c=Y(t.ranksepFunc,t.ranksep,50),l=Y(t.nodesepFunc,t.nodesep,50)),u.setDefaultEdgeLabel(function(){return{}}),u.setGraph(t);var h,d={};return n.forEach(function(t){var n=a(t),r=l(t),i=c(t),o=n[0]+2*i,s=n[1]+2*r;u.setNode(t.id,{width:o,height:s}),e.sortByCombo&&t.comboId&&(d[t.comboId]||(d[t.comboId]=!0,u.setNode(t.comboId,{})),u.setParent(t.id,t.comboId))}),this.sortByCombo&&o&&o.forEach(function(e){e.parentId&&(d[e.parentId]||(d[e.parentId]=!0,u.setNode(e.parentId,{})),u.setParent(e.id,e.parentId))}),s.forEach(function(e){u.setEdge(e.source,e.target,{weight:e.weight||1})}),X.a.layout(u),u.nodes().forEach(function(e){h=u.node(e);var t=n.findIndex(function(t){return t.id===e});n[t]&&(n[t].x=h.x,n[t].y=h.y)}),u.edges().forEach(function(e){h=u.edge(e);var n=s.findIndex(function(t){return t.source===e.v&&t.target===e.w});t.controlPoints&&"loop"!==s[n].type&&(s[n].controlPoints=h.points.slice(1,h.points.length-1))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:s}}}},{key:"getType",value:function(){return"dagre"}}]),t}(c);function Y(e,t,n){return e||(h(t)?function(){return t}:function(){return n})}n(13);var K=Object.prototype.toString;function J(e){return K.call(e).endsWith("Array]")}var Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!J(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]>a&&(a=e[s]);return a};var Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!J(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]<a&&(a=e[s]);return a};var ee=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!J(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!J(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=Q(e),i=Z(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?r:0:o,s=n.max,u=void 0===s?n.autoMinMax?i:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(i-r),l=0;l<e.length;l++)t[l]=(e[l]-r)*c+a;return t},te=" ".repeat(2),ne=" ".repeat(4);function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxRows,r=void 0===n?15:n,i=t.maxColumns,o=void 0===i?10:i,a=t.maxNumSize,s=void 0===a?8:a;return"".concat(e.constructor.name," {\n").concat(te,"[\n").concat(ne).concat(function(e,t,n,r){for(var i=e.rows,o=e.columns,a=Math.min(i,t),s=Math.min(o,n),u=[],c=0;c<a;c++){for(var l=[],f=0;f<s;f++)l.push(ie(e.get(c,f),r));u.push("".concat(l.join(" ")))}s!==o&&(u[u.length-1]+=" ... ".concat(o-n," more columns"));a!==i&&u.push("... ".concat(i-t," more rows"));return u.join("\n".concat(ne))}(e,r,o,s),"\n").concat(te,"]\n").concat(te,"rows: ").concat(e.rows,"\n").concat(te,"columns: ").concat(e.columns,"\n}")}function ie(e,t){var n=String(e);if(n.length<=t)return n.padEnd(t," ");var r=e.toPrecision(t-2);if(r.length<=t)return r;var i=e.toExponential(t-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,t-a.length)+a}function oe(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function ae(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function se(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function ue(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function ce(e,t){if("object"!==typeof t)throw new TypeError("unexpected type for row indices");if(t.some(function(t){return t<0||t>=e.rows}))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function le(e,t){if("object"!==typeof t)throw new TypeError("unexpected type for column indices");if(t.some(function(t){return t<0||t>=e.columns}))throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function fe(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(de("startRow",t),de("endRow",n),de("startColumn",r),de("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function he(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function de(e,t){if("number"!==typeof t)throw new TypeError("".concat(e," must be a number"))}function pe(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}var ge=function(){function e(){Object(r.a)(this,e)}return Object(u.a)(e,[{key:"apply",value:function(e){if("function"!==typeof e)throw new TypeError("callback must be a function");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.call(this,t,n);return this}},{key:"to1DArray",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"to2DArray",value:function(){for(var e=[],t=0;t<this.rows;t++){e.push([]);for(var n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}},{key:"isReducedEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(var o=t+1;o<this.rows;o++)0!==this.get(e,o)&&(r=!1);e++}return r}},{key:"echelonForm",value:function(){for(var e=this.clone(),t=0,n=0;t<e.rows&&n<e.columns;){for(var r=t,i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);for(var o=e.get(t,n),a=n;a<e.columns;a++)e.set(t,a,e.get(t,a)/o);for(var s=t+1;s<e.rows;s++){var u=e.get(s,n)/e.get(t,n);e.set(s,n,0);for(var c=n+1;c<e.columns;c++)e.set(s,c,e.get(s,c)-e.get(t,c)*u)}t++,n++}}return e}},{key:"reducedEchelonForm",value:function(){for(var e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;r>=0;)if(0===e.maxRow(r))r--;else{for(var i=0,o=!1;i<n&&!1===o;)1===e.get(r,i)?o=!0:i++;for(var a=0;a<r;a++)for(var s=e.get(a,i),u=i;u<t;u++){var c=e.get(a,u)-s*e.get(r,u);e.set(a,u,c)}r--}return e}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.rows,n=void 0===t?1:t,r=e.columns,i=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var o=new be(this.rows*n,this.columns*i),a=0;a<n;a++)for(var s=0;s<i;s++)o.setSubMatrix(this,this.rows*a,this.columns*s);return o}},{key:"fill",value:function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,e);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(e){oe(this,e);for(var t=[],n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"getRowVector",value:function(e){return be.rowVector(this.getRow(e))}},{key:"setRow",value:function(e,t){oe(this,e),t=se(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}},{key:"swapRows",value:function(e,t){oe(this,e),oe(this,t);for(var n=0;n<this.columns;n++){var r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}},{key:"getColumn",value:function(e){ae(this,e);for(var t=[],n=0;n<this.rows;n++)t.push(this.get(n,e));return t}},{key:"getColumnVector",value:function(e){return be.columnVector(this.getColumn(e))}},{key:"setColumn",value:function(e,t){ae(this,e),t=ue(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}},{key:"swapColumns",value:function(e,t){ae(this,e),ae(this,t);for(var n=0;n<this.rows;n++){var r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}},{key:"addRowVector",value:function(e){e=se(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}},{key:"subRowVector",value:function(e){e=se(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}},{key:"mulRowVector",value:function(e){e=se(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}},{key:"divRowVector",value:function(e){e=se(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}},{key:"addColumnVector",value:function(e){e=ue(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}},{key:"subColumnVector",value:function(e){e=ue(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}},{key:"mulColumnVector",value:function(e){e=ue(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}},{key:"divColumnVector",value:function(e){e=ue(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}},{key:"mulRow",value:function(e,t){oe(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}},{key:"mulColumn",value:function(e,t){ae(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxIndex",value:function(){pe(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minIndex",value:function(){pe(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"maxRow",value:function(e){if(oe(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxRowIndex",value:function(e){oe(this,e),pe(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}},{key:"minRow",value:function(e){if(oe(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minRowIndex",value:function(e){oe(this,e),pe(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}},{key:"maxColumn",value:function(e){if(ae(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}},{key:"maxColumnIndex",value:function(e){ae(this,e),pe(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}},{key:"minColumn",value:function(e){if(ae(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}},{key:"minColumnIndex",value:function(e){ae(this,e),pe(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}},{key:"diag",value:function(){for(var e=Math.min(this.rows,this.columns),t=[],n=0;n<e;n++)t.push(this.get(n,n));return t}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",t=0;if("max"===e)return this.max();if("frobenius"===e){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)t+=this.get(n,r)*this.get(n,r);return Math.sqrt(t)}throw new RangeError("unknown norm type: ".concat(e))}},{key:"cumulativeSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}},{key:"dot",value:function(t){e.isMatrix(t)&&(t=t.to1DArray());var n=this.to1DArray();if(n.length!==t.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<n.length;i++)r+=n[i]*t[i];return r}},{key:"mmul",value:function(e){e=be.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.columns,i=new be(t,r),o=new Float64Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=e.get(s,a);for(var u=0;u<t;u++){for(var c=0,l=0;l<n;l++)c+=this.get(u,l)*o[l];i.set(u,a,c)}}return i}},{key:"strassen2x2",value:function(e){e=be.checkMatrix(e);var t=new be(2,2),n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),o=e.get(0,1),a=this.get(1,0),s=e.get(1,0),u=this.get(1,1),c=e.get(1,1),l=(n+u)*(r+c),f=(a+u)*r,h=n*(o-c),d=u*(s-r),p=(n+i)*c,g=l+d-p+(i-u)*(s+c),v=h+p,y=f+d,m=l-f+h+(a-n)*(r+o);return t.set(0,0,g),t.set(0,1,v),t.set(1,0,y),t.set(1,1,m),t}},{key:"strassen3x3",value:function(e){e=be.checkMatrix(e);var t=new be(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),f=e.get(0,0),h=e.get(0,1),d=e.get(0,2),p=e.get(1,0),g=e.get(1,1),v=e.get(1,2),y=e.get(2,0),m=e.get(2,1),b=e.get(2,2),w=(n-o)*(-h+g),x=(-n+o+a)*(f-h+g),C=(o+a)*(-f+h),k=n*f,E=(-n+u+c)*(f-d+v),O=(-n+u)*(d-v),S=(u+c)*(-f+d),A=(-i+c+l)*(g+y-m),T=(i-l)*(g-m),M=i*y,_=(c+l)*(-y+m),j=(-i+a+s)*(v+y-b),P=(i-s)*(v-b),N=(a+s)*(-y+b),R=k+M+r*p,D=(n+r+i-o-a-c-l)*g+x+C+k+A+M+_,I=k+E+S+(n+r+i-a-s-u-c)*v+M+j+N,L=w+a*(-f+h+p-g-v-y+b)+x+k+M+j+P,F=w+x+C+k+s*m,B=M+j+P+N+o*d,z=k+E+O+c*(-f+d+p-g-v-y+m)+A+T+M,V=A+T+M+_+u*h,U=k+E+O+S+l*b;return t.set(0,0,R),t.set(0,1,D),t.set(0,2,I),t.set(1,0,L),t.set(1,1,F),t.set(1,2,B),t.set(2,0,z),t.set(2,1,V),t.set(2,2,U),t}},{key:"mmulStrassen",value:function(t){t=be.checkMatrix(t);var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;function s(t,n,r){var i=t.rows,o=t.columns;if(i===n&&o===r)return t;var a=e.zeros(n,r);return a=a.setSubMatrix(t,0,0)}i!==o&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(o," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(r,o),c=Math.max(i,a);return function t(n,r,i,o){if(i<=512||o<=512)return n.mmul(r);i%2===1&&o%2===1?(n=s(n,i+1,o+1),r=s(r,i+1,o+1)):i%2===1?(n=s(n,i+1,o),r=s(r,i+1,o)):o%2===1&&(n=s(n,i,o+1),r=s(r,i,o+1));var a=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,u-1),l=r.subMatrix(0,a-1,0,u-1),f=n.subMatrix(0,a-1,u,n.columns-1),h=r.subMatrix(0,a-1,u,r.columns-1),d=n.subMatrix(a,n.rows-1,0,u-1),p=r.subMatrix(a,r.rows-1,0,u-1),g=n.subMatrix(a,n.rows-1,u,n.columns-1),v=r.subMatrix(a,r.rows-1,u,r.columns-1),y=t(e.add(c,g),e.add(l,v),a,u),m=t(e.add(d,g),l,a,u),b=t(c,e.sub(h,v),a,u),w=t(g,e.sub(p,l),a,u),x=t(e.add(c,f),v,a,u),C=t(e.sub(d,c),e.add(l,h),a,u),k=t(e.sub(f,g),e.add(p,v),a,u),E=e.add(y,w);E.sub(x),E.add(k);var O=e.add(b,x),S=e.add(m,w),A=e.sub(y,m);A.add(b),A.add(C);var T=e.zeros(2*E.rows,2*E.columns);return(T=(T=(T=(T=T.setSubMatrix(E,0,0)).setSubMatrix(O,E.rows,0)).setSubMatrix(S,0,E.columns)).setSubMatrix(A,E.rows,E.columns)).subMatrix(0,i-1,0,o-1)}(n=s(n,u,c),t=s(t,u,c),u,c)}},{key:"scaleRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new be(this.rows,this.columns),a=0;a<this.rows;a++){var s=this.getRow(a);s.length>0&&ee(s,{min:n,max:i,output:s}),o.setRow(a,s)}return o}},{key:"scaleColumns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new be(this.rows,this.columns),a=0;a<this.columns;a++){var s=this.getColumn(a);s.length&&ee(s,{min:n,max:i,output:s}),o.setColumn(a,s)}return o}},{key:"flipRows",value:function(){for(var e=Math.ceil(this.columns/2),t=0;t<this.rows;t++)for(var n=0;n<e;n++){var r=this.get(t,n),i=this.get(t,this.columns-1-n);this.set(t,n,i),this.set(t,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var e=Math.ceil(this.rows/2),t=0;t<this.columns;t++)for(var n=0;n<e;n++){var r=this.get(n,t),i=this.get(this.rows-1-n,t);this.set(n,t,i),this.set(this.rows-1-n,t,r)}return this}},{key:"kroneckerProduct",value:function(e){e=be.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.rows,i=e.columns,o=new be(t*r,n*i),a=0;a<t;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o.set(r*a+u,i*s+c,this.get(a,s)*e.get(u,c));return o}},{key:"kroneckerSum",value:function(e){if(e=be.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var t=this.rows,n=e.rows,r=this.kroneckerProduct(be.eye(n,n)),i=be.eye(t,t).kroneckerProduct(e);return r.add(i)}},{key:"transpose",value:function(){for(var e=new be(this.columns,this.rows),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}},{key:"sortRows",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}},{key:"sortColumns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}},{key:"subMatrix",value:function(e,t,n,r){fe(this,e,t,n,r);for(var i=new be(t-e+1,r-n+1),o=e;o<=t;o++)for(var a=n;a<=r;a++)i.set(o-e,a-n,this.get(o,a));return i}},{key:"subMatrixRow",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new be(e.length,n-t+1),i=0;i<e.length;i++)for(var o=t;o<=n;o++){if(e[i]<0||e[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[i]));r.set(i,o-t,this.get(e[i],o))}return r}},{key:"subMatrixColumn",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new be(n-t+1,e.length),i=0;i<e.length;i++)for(var o=t;o<=n;o++){if(e[i]<0||e[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[i]));r.set(o-t,i,this.get(o,e[i]))}return r}},{key:"setSubMatrix",value:function(e,t,n){if((e=be.checkMatrix(e)).isEmpty())return this;fe(this,t,t+e.rows-1,n,n+e.columns-1);for(var r=0;r<e.rows;r++)for(var i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}},{key:"selection",value:function(e,t){for(var n=function(e,t,n){return{row:ce(e,t),column:le(e,n)}}(this,e,t),r=new be(e.length,t.length),i=0;i<n.row.length;i++)for(var o=n.row[i],a=0;a<n.column.length;a++){var s=n.column[a];r.set(i,a,this.get(o,s))}return r}},{key:"trace",value:function(){for(var e=Math.min(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}},{key:"clone",value:function(){for(var e=new be(this.rows,this.columns),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}},{key:"sum",value:function(e){switch(e){case"row":return function(e){for(var t=he(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}(this);case"column":return function(e){for(var t=he(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"product",value:function(e){switch(e){case"row":return function(e){for(var t=he(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}(this);case"column":return function(e){for(var t=he(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"mean",value:function(e){var t=this.sum(e);switch(e){case"row":for(var n=0;n<this.rows;n++)t[n]/=this.columns;return t;case"column":for(var r=0;r<this.columns;r++)t[r]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}},{key:"variance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t,r=n.unbiased,i=void 0===r||r,o=n.mean,a=void 0===o?this.mean(e):o;if("boolean"!==typeof i)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return function(e,t,n){for(var r=e.rows,i=e.columns,o=[],a=0;a<r;a++){for(var s=0,u=0,c=0,l=0;l<i;l++)s+=c=e.get(a,l)-n[a],u+=c*c;t?o.push((u-s*s/i)/(i-1)):o.push((u-s*s/i)/i)}return o}(this,i,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return function(e,t,n){for(var r=e.rows,i=e.columns,o=[],a=0;a<i;a++){for(var s=0,u=0,c=0,l=0;l<r;l++)s+=c=e.get(l,a)-n[a],u+=c*c;t?o.push((u-s*s/r)/(r-1)):o.push((u-s*s/r)/r)}return o}(this,i,a);case void 0:if("number"!==typeof a)throw new TypeError("mean must be a number");return function(e,t,n){for(var r=e.rows,i=e.columns,o=r*i,a=0,s=0,u=0,c=0;c<r;c++)for(var l=0;l<i;l++)a+=u=e.get(c,l)-n,s+=u*u;return t?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,i,a);default:throw new Error("invalid option: ".concat(e))}}},{key:"standardDeviation",value:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t.center,r=void 0===n?this.mean(e):n;switch(e){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}(this,r),this;case void 0:if("number"!==typeof r)throw new TypeError("center must be a number");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}(this,r),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t.scale;switch(e){case"row":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,i=0;i<e.columns;i++)r+=Math.pow(e.get(n,i),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}(this,n),this;case"column":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,i=0;i<e.rows;i++)r+=Math.pow(e.get(i,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}(this,n),this;case void 0:if(void 0===n)n=function(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var i=0;i<e.rows;i++)n+=Math.pow(e.get(i,r),2)/t;return Math.sqrt(n)}(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}(this,n),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"toString",value:function(e){return re(this,e)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new be(e,t),i=0;i<e;i++)for(var o=0;o<t;o++)r.set(i,o,n[i*t+o]);return r}},{key:"rowVector",value:function(e){for(var t=new be(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}},{key:"columnVector",value:function(e){for(var t=new be(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}},{key:"zeros",value:function(e,t){return new be(e,t)}},{key:"ones",value:function(e,t){return new be(e,t).fill(1)}},{key:"rand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");for(var r=n.random,i=void 0===r?Math.random:r,o=new be(e,t),a=0;a<e;a++)for(var s=0;s<t;s++)o.set(a,s,i());return o}},{key:"randInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");var r=n.min,i=void 0===r?0:r,o=n.max,a=void 0===o?1e3:o,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");for(var c=a-i,l=new be(e,t),f=0;f<e;f++)for(var h=0;h<t;h++){var d=i+Math.round(u()*c);l.set(f,h,d)}return l}},{key:"eye",value:function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);for(var r=Math.min(e,t),i=this.zeros(e,t),o=0;o<r;o++)i.set(o,o,n);return i}},{key:"diag",value:function(e,t,n){var r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);for(var i=Math.min(r,t,n),o=this.zeros(t,n),a=0;a<i;a++)o.set(a,a,e[a]);return o}},{key:"min",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new be(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,Math.min(e.get(o,a),t.get(o,a)));return i}},{key:"max",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,Math.max(e.get(o,a),t.get(o,a)));return i}},{key:"checkMatrix",value:function(t){return e.isMatrix(t)?t:new be(t)}},{key:"isMatrix",value:function(e){return null!=e&&"Matrix"===e.klass}}]),e}();function ve(e,t){return e-t}ge.prototype.klass="Matrix","undefined"!==typeof Symbol&&(ge.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return re(this)}),ge.random=ge.rand,ge.randomInt=ge.randInt,ge.diagonal=ge.diag,ge.prototype.diagonal=ge.prototype.diag,ge.identity=ge.eye,ge.prototype.negate=ge.prototype.neg,ge.prototype.tensorProduct=ge.prototype.kroneckerProduct;var ye,me,be=function(e){function t(e,n){var a;if(Object(r.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this)),t.isMatrix(e))return Object(i.a)(a,e.clone());if(Number.isInteger(e)&&e>=0){if(a.data=[],!(Number.isInteger(n)&&n>=0))throw new TypeError("nColumns must be a positive integer");for(var s=0;s<e;s++)a.data.push(new Float64Array(n))}else{if(!Array.isArray(e))throw new TypeError("First argument must be a positive number or an array");var u=e;if("number"!==typeof(n=(e=u.length)?u[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var c=0;c<e;c++){if(u[c].length!==n)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(u[c]))}}return a.rows=e,a.columns=n,a}return Object(s.a)(t,e),Object(u.a)(t,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return oe(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return void 0===t&&(t=e,e=this.rows),oe(this,e,!0),t=Float64Array.from(se(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){ae(this,e);for(var t=0;t<this.rows;t++){for(var n=new Float64Array(this.columns-1),r=0;r<e;r++)n[r]=this.data[t][r];for(var i=e+1;i<this.columns;i++)n[i-1]=this.data[t][i];this.data[t]=n}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){"undefined"===typeof t&&(t=e,e=this.columns),ae(this,e,!0),t=ue(this,t);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),i=0;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}]),t}(ge);me=be,(ye=ge).prototype.add=function(e){return"number"===typeof e?this.addS(e):this.addM(e)},ye.prototype.addS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},ye.prototype.addM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},ye.add=function(e,t){return new me(e).add(t)},ye.prototype.sub=function(e){return"number"===typeof e?this.subS(e):this.subM(e)},ye.prototype.subS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},ye.prototype.subM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},ye.sub=function(e,t){return new me(e).sub(t)},ye.prototype.subtract=ye.prototype.sub,ye.prototype.subtractS=ye.prototype.subS,ye.prototype.subtractM=ye.prototype.subM,ye.subtract=ye.sub,ye.prototype.mul=function(e){return"number"===typeof e?this.mulS(e):this.mulM(e)},ye.prototype.mulS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},ye.prototype.mulM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},ye.mul=function(e,t){return new me(e).mul(t)},ye.prototype.multiply=ye.prototype.mul,ye.prototype.multiplyS=ye.prototype.mulS,ye.prototype.multiplyM=ye.prototype.mulM,ye.multiply=ye.mul,ye.prototype.div=function(e){return"number"===typeof e?this.divS(e):this.divM(e)},ye.prototype.divS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},ye.prototype.divM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},ye.div=function(e,t){return new me(e).div(t)},ye.prototype.divide=ye.prototype.div,ye.prototype.divideS=ye.prototype.divS,ye.prototype.divideM=ye.prototype.divM,ye.divide=ye.div,ye.prototype.mod=function(e){return"number"===typeof e?this.modS(e):this.modM(e)},ye.prototype.modS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},ye.prototype.modM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},ye.mod=function(e,t){return new me(e).mod(t)},ye.prototype.modulus=ye.prototype.mod,ye.prototype.modulusS=ye.prototype.modS,ye.prototype.modulusM=ye.prototype.modM,ye.modulus=ye.mod,ye.prototype.and=function(e){return"number"===typeof e?this.andS(e):this.andM(e)},ye.prototype.andS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},ye.prototype.andM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},ye.and=function(e,t){return new me(e).and(t)},ye.prototype.or=function(e){return"number"===typeof e?this.orS(e):this.orM(e)},ye.prototype.orS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},ye.prototype.orM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},ye.or=function(e,t){return new me(e).or(t)},ye.prototype.xor=function(e){return"number"===typeof e?this.xorS(e):this.xorM(e)},ye.prototype.xorS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},ye.prototype.xorM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},ye.xor=function(e,t){return new me(e).xor(t)},ye.prototype.leftShift=function(e){return"number"===typeof e?this.leftShiftS(e):this.leftShiftM(e)},ye.prototype.leftShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},ye.prototype.leftShiftM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},ye.leftShift=function(e,t){return new me(e).leftShift(t)},ye.prototype.signPropagatingRightShift=function(e){return"number"===typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},ye.prototype.signPropagatingRightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},ye.prototype.signPropagatingRightShiftM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},ye.signPropagatingRightShift=function(e,t){return new me(e).signPropagatingRightShift(t)},ye.prototype.rightShift=function(e){return"number"===typeof e?this.rightShiftS(e):this.rightShiftM(e)},ye.prototype.rightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},ye.prototype.rightShiftM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},ye.rightShift=function(e,t){return new me(e).rightShift(t)},ye.prototype.zeroFillRightShift=ye.prototype.rightShift,ye.prototype.zeroFillRightShiftS=ye.prototype.rightShiftS,ye.prototype.zeroFillRightShiftM=ye.prototype.rightShiftM,ye.zeroFillRightShift=ye.rightShift,ye.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},ye.not=function(e){return new me(e).not()},ye.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},ye.abs=function(e){return new me(e).abs()},ye.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},ye.acos=function(e){return new me(e).acos()},ye.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},ye.acosh=function(e){return new me(e).acosh()},ye.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},ye.asin=function(e){return new me(e).asin()},ye.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},ye.asinh=function(e){return new me(e).asinh()},ye.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},ye.atan=function(e){return new me(e).atan()},ye.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},ye.atanh=function(e){return new me(e).atanh()},ye.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},ye.cbrt=function(e){return new me(e).cbrt()},ye.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},ye.ceil=function(e){return new me(e).ceil()},ye.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},ye.clz32=function(e){return new me(e).clz32()},ye.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},ye.cos=function(e){return new me(e).cos()},ye.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},ye.cosh=function(e){return new me(e).cosh()},ye.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},ye.exp=function(e){return new me(e).exp()},ye.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},ye.expm1=function(e){return new me(e).expm1()},ye.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},ye.floor=function(e){return new me(e).floor()},ye.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},ye.fround=function(e){return new me(e).fround()},ye.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},ye.log=function(e){return new me(e).log()},ye.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},ye.log1p=function(e){return new me(e).log1p()},ye.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},ye.log10=function(e){return new me(e).log10()},ye.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},ye.log2=function(e){return new me(e).log2()},ye.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},ye.round=function(e){return new me(e).round()},ye.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},ye.sign=function(e){return new me(e).sign()},ye.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},ye.sin=function(e){return new me(e).sin()},ye.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},ye.sinh=function(e){return new me(e).sinh()},ye.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},ye.sqrt=function(e){return new me(e).sqrt()},ye.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},ye.tan=function(e){return new me(e).tan()},ye.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},ye.tanh=function(e){return new me(e).tanh()},ye.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},ye.trunc=function(e){return new me(e).trunc()},ye.pow=function(e,t){return new me(e).pow(t)},ye.prototype.pow=function(e){return"number"===typeof e?this.powS(e):this.powM(e)},ye.prototype.powS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},ye.prototype.powM=function(e){if(e=me.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e.get(t,n)));return this};n(58);var we=n(15),xe=n.n(we),Ce=n(10),ke=n.n(Ce),Ee=n(11),Oe=n.n(Ee),Se=n(16),Ae=n.n(Se),Te=(n(42),n(1)),Me=n(0),_e=n(9);function je(e){return"number"===typeof e}function Pe(e){return void 0===e?0:e>360||e<-360?e%360:e}function Ne(e,t,n){return je(e)?Me.d.fromValues(e,t,n):3===e.length?Me.d.clone(e):Me.d.fromValues(e[0],e[1],e[2])}var Re,De,Ie,Le,Fe,Be,ze,Ve,Ue,Ge,He=function(){function e(t,n){ke()(this,e),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=Me.b.clone(n.matrix),this.right=Me.d.clone(n.right),this.up=Me.d.clone(n.up),this.forward=Me.d.clone(n.forward),this.position=Me.d.clone(n.position),this.focalPoint=Me.d.clone(n.focalPoint),this.distanceVector=Me.d.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Oe()(e,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(e){e.matrix=Me.b.copy(e.matrix,this.matrix),e.right=Me.d.copy(e.right,this.right),e.up=Me.d.copy(e.up,this.up),e.forward=Me.d.copy(e.forward,this.forward),e.position=Me.d.copy(e.position,this.position),e.focalPoint=Me.d.copy(e.focalPoint,this.focalPoint),e.distanceVector=Me.d.copy(e.distanceVector,this.distanceVector),e.azimuth=this.azimuth,e.elevation=this.elevation,e.roll=this.roll,e.relAzimuth=this.relAzimuth,e.relElevation=this.relElevation,e.relRoll=this.relRoll,e.dollyingStep=this.dollyingStep,e.distance=this.distance}}]),e}();!function(e){e.ORBITING="ORBITING",e.EXPLORING="EXPLORING",e.TRACKING="TRACKING"}(Ve||(Ve={})),function(e){e.DEFAULT="DEFAULT",e.ROTATIONAL="ROTATIONAL",e.TRANSLATIONAL="TRANSLATIONAL",e.CINEMATIC="CINEMATIC"}(Ue||(Ue={})),function(e){e.ORTHOGRAPHIC="ORTHOGRAPHIC",e.PERSPECTIVE="PERSPECTIVE"}(Ge||(Ge={}));var We,qe,Xe,$e,Ye,Ke,Je,Ze=Math.PI/180,Qe=180/Math.PI,et=(Re=Object(_e.injectable)(),De=Object(_e.inject)(Te.IDENTIFIER.InteractorService),Re((ze=Be=function(){function e(){ke()(this,e),this.matrix=Me.b.create(),this.right=Me.d.fromValues(1,0,0),this.up=Me.d.fromValues(0,1,0),this.forward=Me.d.fromValues(0,0,1),this.position=Me.d.fromValues(0,0,1),this.focalPoint=Me.d.fromValues(0,0,0),this.distanceVector=Me.d.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,xe()(this,"interactor",Fe,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Me.b.create(),this.view=void 0,this.following=void 0,this.type=Ve.EXPLORING,this.trackingMode=Ue.DEFAULT,this.projectionMode=Ge.PERSPECTIVE,this.frustum=new Te.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return Oe()(e,[{key:"clone",value:function(){var t=new e;return t.setType(this.type,void 0),t.interactor=this.interactor,t}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(e,t){return this.type=e,this.type===Ve.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ve.TRACKING&&void 0!==t&&this.setTrackingMode(t),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==Ve.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){this.rotateWorld=e,this._getAngles()}},{key:"getViewTransform",value:function(){return Me.b.invert(Me.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setViewOffset",value:function(e,t,n,r,i,o){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===Ge.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Ge.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(e,t,n,r){return this.projectionMode=Ge.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r,Me.b.perspective(this.perspective,this.fov*Ze,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(e,t,n,r,i,o){this.projectionMode=Ge.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,l=u-a,f=u+a,h=c+s,d=c-s;if(void 0!==this.view&&this.view.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f=(l+=p*this.view.offsetX)+p*this.view.width,d=(h-=g*this.view.offsetY)-g*this.view.height}return Me.b.ortho(this.perspective,l,f,h,d,i,o),this}},{key:"setPosition",value:function(e,t,n){return this._setPosition(e,t,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(e,t,n){var r=Me.d.fromValues(0,1,0);if(this.focalPoint=Ne(e,t,n),this.trackingMode===Ue.CINEMATIC){var i=Me.d.subtract(Me.d.create(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var o=Me.d.length(i),a=Math.asin(t/o)*Qe,s=90+Math.atan2(n,e)*Qe,u=Me.b.create();Me.b.rotateY(u,u,s*Ze),Me.b.rotateX(u,u,a*Ze),r=Me.d.transformMat4(Me.d.create(),[0,1,0],u)}return Me.b.invert(this.matrix,Me.b.lookAt(Me.b.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(e){if(!(this.distance===e||e<0)){this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=Me.d.create();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this}}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"changeAzimuth",value:function(e){return this.setAzimuth(this.azimuth+e),this}},{key:"changeElevation",value:function(e){return this.setElevation(this.elevation+e),this}},{key:"changeRoll",value:function(e){return this.setRoll(this.roll+e),this}},{key:"setAzimuth",value:function(e){return this.azimuth=Pe(e),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Pe(e),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(e){return this.roll=Pe(e),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(e,t,n){if(this.type===Ve.EXPLORING){e=Pe(e),t=Pe(t),n=Pe(n);var r=Me.c.setAxisAngle(Me.c.create(),[1,0,0],(this.rotateWorld?1:-1)*t*Ze),i=Me.c.setAxisAngle(Me.c.create(),[0,1,0],(this.rotateWorld?1:-1)*e*Ze),o=Me.c.setAxisAngle(Me.c.create(),[0,0,1],n*Ze),a=Me.c.multiply(Me.c.create(),i,r);a=Me.c.multiply(Me.c.create(),a,o);var s=Me.b.fromQuat(Me.b.create(),a);Me.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Me.b.multiply(this.matrix,this.matrix,s),Me.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+t)>90)return;this.relElevation=Pe(t),this.relAzimuth=Pe(e),this.relRoll=Pe(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(e,t){var n=Ne(e,t,0),r=Me.d.clone(this.position);return Me.d.add(r,r,Me.d.scale(Me.d.create(),this.right,n[0])),Me.d.add(r,r,Me.d.scale(Me.d.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(e){var t=this.forward,n=Me.d.clone(this.position),r=this.dollyingStep,i=this.distance+e*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*t[0],n[1]+=r*t[1],n[2]+=r*t[2],this._setPosition(n),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getDistance():this.type===Ve.TRACKING&&Me.d.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(e,t){var n=this.clone();n.setPosition(t.position),n.setFocalPoint(t.focalPoint),void 0!==t.roll&&n.setRoll(t.roll);var r=new He(e,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(e){var t=new He(e,this);return this.landmarks.push(t),this}},{key:"gotoLandmark",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find(function(t){return t.name===e});if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var i,o=r.getPosition(),a=r.getFocalPoint(),s=r.getRoll();window.requestAnimationFrame(function e(r){void 0===i&&(i=r);var u,c=r-i,l=(1-Math.cos(c/n*Math.PI))/2,f=Me.d.create(),h=Me.d.create();if(Me.d.lerp(f,t.focalPoint,a,l),Me.d.lerp(h,t.position,o,l),u=t.roll*(1-l)+s*l,t.setFocalPoint(f),t.setPosition(h),t.setRoll(u),t.computeMatrix(),!(Me.d.dist(f,a)+Me.d.dist(h,o)>.01))return t.setFocalPoint(f),t.setPosition(h),t.setRoll(u),t.computeMatrix(),void t.interactor.connect();c<n&&(t.landmarkAnimationID=window.requestAnimationFrame(e))})}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var e,t,n=Me.c.setAxisAngle(Me.c.create(),[0,0,1],this.roll*Ze);Me.b.identity(this.matrix),e=Me.c.setAxisAngle(Me.c.create(),[1,0,0],(this.rotateWorld&&this.type!==Ve.TRACKING||this.type===Ve.TRACKING?1:-1)*this.elevation*Ze),t=Me.c.setAxisAngle(Me.c.create(),[0,1,0],(this.rotateWorld&&this.type!==Ve.TRACKING||this.type===Ve.TRACKING?1:-1)*this.azimuth*Ze);var r=Me.c.multiply(Me.c.create(),t,e);r=Me.c.multiply(Me.c.create(),r,n);var i=Me.b.fromQuat(Me.b.create(),r);this.type===Ve.ORBITING||this.type===Ve.EXPLORING?(Me.b.translate(this.matrix,this.matrix,this.focalPoint),Me.b.multiply(this.matrix,this.matrix,i),Me.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ve.TRACKING&&(Me.b.translate(this.matrix,this.matrix,this.position),Me.b.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(e,t,n){this.position=Ne(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){Me.d.copy(this.right,Ne(Me.e.transformMat4(Me.e.create(),[1,0,0,0],this.matrix))),Me.d.copy(this.up,Ne(Me.e.transformMat4(Me.e.create(),[0,1,0,0],this.matrix))),Me.d.copy(this.forward,Ne(Me.e.transformMat4(Me.e.create(),[0,0,1,0],this.matrix))),Me.d.normalize(this.right,this.right),Me.d.normalize(this.up,this.up),Me.d.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=Me.d.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ve.TRACKING?(this.elevation=Math.asin(t/r)*Qe,this.azimuth=Math.atan2(-e,-n)*Qe):this.rotateWorld?(this.elevation=Math.asin(t/r)*Qe,this.azimuth=Math.atan2(-e,-n)*Qe):(this.elevation=-Math.asin(t/r)*Qe,this.azimuth=-Math.atan2(-e,-n)*Qe)}},{key:"_getPosition",value:function(){Me.d.copy(this.position,Ne(Me.e.transformMat4(Me.e.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Me.d.transformMat3(this.distanceVector,[0,0,-this.distance],Me.a.fromMat4(Me.a.create(),this.matrix)),Me.d.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Me.d.subtract(Me.d.create(),this.focalPoint,this.position),this.distance=Me.d.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),e}(),Be.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Le=ze,Fe=Ae()(Le.prototype,"interactor",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=Le))||Ie),tt=(We=Object(_e.injectable)(),qe=Object(_e.inject)(Te.IDENTIFIER.GeometryComponentManager),We((Je=Ke=function(){function e(){ke()(this,e),this.config=void 0,xe()(this,"geometry",Ye,this),this.entity=void 0,this.component=void 0}return Oe()(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.component=this.geometry.create(e),this.component.entity=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),Ke.BOX="box",Ke.SPHERE="sphere",Ke.PLANE="plane",Ke.MERGED="merged",$e=Je,Ye=Ae()($e.prototype,"geometry",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=$e))||Xe),nt=n(14),rt=n.n(nt),it=n(20),ot=n.n(it),at=n(8),st=n.n(at),ut=n(12);function ct(){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var lt={}.toString,ft=function(e,t){return lt.call(e)==="[object "+t+"]"},ht=n(69),dt=n.n(ht),pt=9007199254740991,gt={};gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Arguments]"]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object Boolean]"]=gt["[object DataView]"]=gt["[object Date]"]=gt["[object Error]"]=gt["[object Function]"]=gt["[object Map]"]=gt["[object Number]"]=gt["[object Object]"]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object WeakMap]"]=!1;var vt=Object.prototype.toString;var yt,mt,bt,wt,xt,Ct,kt,Et=function(e){return function(e){return!!e&&"object"===dt()(e)}(e)&&function(e){return"number"===typeof e&&e>-1&&e%1===0&&e<=pt}(e.length)&&!!gt[vt.call(e)]};function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var At,Tt,Mt,_t,jt,Pt,Nt,Rt,Dt,It,Lt,Ft,Bt,zt,Vt,Ut,Gt,Ht,Wt,qt,Xt,$t,Yt,Kt,Jt,Zt,Qt,en,tn,nn,rn,on,an,sn,un,cn=(yt=Object(_e.injectable)(),mt=Object(_e.inject)(Te.IDENTIFIER.RenderEngine),bt=Object(_e.inject)(Te.IDENTIFIER.ConfigService),yt((xt=function(){function e(){ke()(this,e),xe()(this,"engine",Ct,this),xe()(this,"configService",kt,this),this.entity=Object(Te.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return Oe()(e,[{key:"init",value:function(){var e=this.configService.get(),t=e.canvas,n=e.engineOptions;this.initPromise=this.engine.init(St({canvas:t||ct(),swapChainFormat:ut.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,t){var n,r=this;if("string"===typeof e){var i=je(t)||Et(t)||(n=t,Array.isArray?Array.isArray(n):ft(n,"Array"));if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(t){return t.name===e});if(o)return o.value=t,this;var a=this.compiledBundle.context.uniforms.find(function(t){return t.name===e});a&&(i?(a.data=t,a.isReferer=!1,a.storageClass===Te.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(e,t):this.model&&this.model.updateBuffer(e,t)):(a.isReferer=!0,a.data=t))}}else Object.keys(e).forEach(function(t){r.setBinding(t,e[t])});return this}},{key:"execute",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r=this,i=arguments;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){e.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),e.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(e){return e.isReferer}).forEach(function(e){var t=e.data,n=e.name;r.model.confirmInput(t.model,n)}),n=0;n<t;n++)this.model.run();return this.engine.endFrame(),e.abrupt("return",this);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getOutput",value:function(){var e=ot()(rt.a.mark(function e(){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.readData());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"compile",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:return t=St({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?Te.Target.WGSL:Te.Target.GLSL450:Te.Target.GLSL100,r=this.compiledBundle.shaders[n],t.defines.filter(function(e){return e.runtime}).forEach(function(e){var t="".concat(Te.DefineValuePlaceholder).concat(e.name);r=r.replace(t,"".concat(e.value))}),t.shader=r,t.uniforms.forEach(function(e){if(!e.data&&e.storageClass===Te.STORAGE_CLASS.StorageBuffer){var n=1;e.type===Te.AST_TOKEN_TYPES.FloatArray?n=1:e.type===Te.AST_TOKEN_TYPES.Vector4FloatArray&&(n=4),e.data=new Float32Array(t.output.length*n).fill(0)}}),this.compiledBundle.context=t,e.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=e.sent;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Ct=Ae()(xt.prototype,"engine",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Ae()(xt.prototype,"configService",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=xt))||wt),ln=(At=Object(_e.injectable)(),Tt=Object(_e.inject)(Te.IDENTIFIER.MaterialComponentManager),At((Nt=Pt=function(){function e(){ke()(this,e),this.config=void 0,xe()(this,"material",jt,this),this.entity=void 0,this.component=void 0}return Oe()(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e,t){this.entity=e,this.component=this.material.create(e),this.component.entity=e,this.component.type=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),Pt.BASIC="basic",_t=Nt,jt=Ae()(_t.prototype,"material",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=_t))||Mt),fn=(Rt=Object(_e.injectable)(),Dt=Object(_e.inject)(Te.IDENTIFIER.MeshComponentManager),It=Object(_e.inject)(Te.IDENTIFIER.CullableComponentManager),Lt=Object(_e.inject)(Te.IDENTIFIER.TransformComponentManager),Ft=Object(_e.inject)(Te.IDENTIFIER.Systems),Bt=Object(_e.named)(Te.IDENTIFIER.SceneGraphSystem),Rt((Xt=qt=function(){function e(){ke()(this,e),this.attributes={},this.config=void 0,xe()(this,"mesh",Ut,this),xe()(this,"cullable",Gt,this),xe()(this,"transform",Ht,this),xe()(this,"sceneGraphSystem",Wt,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Oe()(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.cullable.create(e),this.meshComponent=this.mesh.create(e),this.transformComponent=this.transform.create(e),this.onEntityCreated()}},{key:"setMaterial",value:function(e){return this.meshComponent.material=e,this}},{key:"setGeometry",value:function(e){return this.meshComponent.geometry=e,this}},{key:"setAttributes",value:function(e){var t=this;Object.keys(e).forEach(function(n){void 0!==e[n]&&e[n]!==t.attributes[n]&&(t.onAttributeChanged({name:n,data:e[n]}),t.attributes[n]=e[n])})}},{key:"setVisible",value:function(e){var t=this;return this.meshComponent.visible=e,this.meshComponent.children.forEach(function(n){var r=t.mesh.getComponentByEntity(n);r&&(r.visible=e)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(e){return this.sceneGraphSystem.attach(this.entity,e.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(t),n)}},{key:"convertAttributeName2UniformName",value:function(e){return e}}]),e}(),qt.POINT="point",qt.LINE="line",qt.GRID="grid",Vt=Xt,Ut=Ae()(Vt.prototype,"mesh",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=Ae()(Vt.prototype,"cullable",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Ae()(Vt.prototype,"transform",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=Ae()(Vt.prototype,"sceneGraphSystem",[Ft,Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=Vt))||zt),hn=n(408),dn=n.n(hn),pn=function(){function e(t,n){ke()(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Oe()(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),gn=($t={},st()($t,Te.gl.POINTS,"points"),st()($t,Te.gl.LINES,"lines"),st()($t,Te.gl.LINE_LOOP,"line loop"),st()($t,Te.gl.LINE_STRIP,"line strip"),st()($t,Te.gl.TRIANGLES,"triangles"),st()($t,Te.gl.TRIANGLE_FAN,"triangle fan"),st()($t,Te.gl.TRIANGLE_STRIP,"triangle strip"),$t),vn=(Yt={},st()(Yt,Te.gl.STATIC_DRAW,"static"),st()(Yt,Te.gl.DYNAMIC_DRAW,"dynamic"),st()(Yt,Te.gl.STREAM_DRAW,"stream"),Yt),yn=(Kt={},st()(Kt,Te.gl.BYTE,"int8"),st()(Kt,Te.gl.UNSIGNED_INT,"int16"),st()(Kt,Te.gl.INT,"int32"),st()(Kt,Te.gl.UNSIGNED_BYTE,"uint8"),st()(Kt,Te.gl.UNSIGNED_SHORT,"uint16"),st()(Kt,Te.gl.UNSIGNED_INT,"uint32"),st()(Kt,Te.gl.FLOAT,"float"),Kt),mn=(Jt={},st()(Jt,Te.gl.ALPHA,"alpha"),st()(Jt,Te.gl.LUMINANCE,"luminance"),st()(Jt,Te.gl.LUMINANCE_ALPHA,"luminance alpha"),st()(Jt,Te.gl.RGB,"rgb"),st()(Jt,Te.gl.RGBA,"rgba"),st()(Jt,Te.gl.RGBA4,"rgba4"),st()(Jt,Te.gl.RGB5_A1,"rgb5 a1"),st()(Jt,Te.gl.RGB565,"rgb565"),st()(Jt,Te.gl.DEPTH_COMPONENT,"depth"),st()(Jt,Te.gl.DEPTH_STENCIL,"depth stencil"),Jt),bn=(Zt={},st()(Zt,Te.gl.DONT_CARE,"dont care"),st()(Zt,Te.gl.NICEST,"nice"),st()(Zt,Te.gl.FASTEST,"fast"),Zt),wn=(Qt={},st()(Qt,Te.gl.NEAREST,"nearest"),st()(Qt,Te.gl.LINEAR,"linear"),st()(Qt,Te.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),st()(Qt,Te.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),st()(Qt,Te.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),st()(Qt,Te.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Qt),xn=(en={},st()(en,Te.gl.REPEAT,"repeat"),st()(en,Te.gl.CLAMP_TO_EDGE,"clamp"),st()(en,Te.gl.MIRRORED_REPEAT,"mirror"),en),Cn=(tn={},st()(tn,Te.gl.NONE,"none"),st()(tn,Te.gl.BROWSER_DEFAULT_WEBGL,"browser"),tn),kn=(nn={},st()(nn,Te.gl.NEVER,"never"),st()(nn,Te.gl.ALWAYS,"always"),st()(nn,Te.gl.LESS,"less"),st()(nn,Te.gl.LEQUAL,"lequal"),st()(nn,Te.gl.GREATER,"greater"),st()(nn,Te.gl.GEQUAL,"gequal"),st()(nn,Te.gl.EQUAL,"equal"),st()(nn,Te.gl.NOTEQUAL,"notequal"),nn),En=(rn={},st()(rn,Te.gl.FUNC_ADD,"add"),st()(rn,Te.gl.MIN_EXT,"min"),st()(rn,Te.gl.MAX_EXT,"max"),st()(rn,Te.gl.FUNC_SUBTRACT,"subtract"),st()(rn,Te.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),rn),On=(on={},st()(on,Te.gl.ZERO,"zero"),st()(on,Te.gl.ONE,"one"),st()(on,Te.gl.SRC_COLOR,"src color"),st()(on,Te.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),st()(on,Te.gl.SRC_ALPHA,"src alpha"),st()(on,Te.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),st()(on,Te.gl.DST_COLOR,"dst color"),st()(on,Te.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),st()(on,Te.gl.DST_ALPHA,"dst alpha"),st()(on,Te.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),st()(on,Te.gl.CONSTANT_COLOR,"constant color"),st()(on,Te.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),st()(on,Te.gl.CONSTANT_ALPHA,"constant alpha"),st()(on,Te.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),st()(on,Te.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),on),Sn=(an={},st()(an,Te.gl.NEVER,"never"),st()(an,Te.gl.ALWAYS,"always"),st()(an,Te.gl.LESS,"less"),st()(an,Te.gl.LEQUAL,"lequal"),st()(an,Te.gl.GREATER,"greater"),st()(an,Te.gl.GEQUAL,"gequal"),st()(an,Te.gl.EQUAL,"equal"),st()(an,Te.gl.NOTEQUAL,"notequal"),an),An=(sn={},st()(sn,Te.gl.ZERO,"zero"),st()(sn,Te.gl.KEEP,"keep"),st()(sn,Te.gl.REPLACE,"replace"),st()(sn,Te.gl.INVERT,"invert"),st()(sn,Te.gl.INCR,"increment"),st()(sn,Te.gl.DECR,"decrement"),st()(sn,Te.gl.INCR_WRAP,"increment wrap"),st()(sn,Te.gl.DECR_WRAP,"decrement wrap"),sn),Tn=(un={},st()(un,Te.gl.FRONT,"front"),st()(un,Te.gl.BACK,"back"),un),Mn=function(){function e(t,n){ke()(this,e),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=t.buffer({data:r,usage:vn[i||Te.gl.STATIC_DRAW],type:yn[o||Te.gl.UNSIGNED_BYTE]})}return Oe()(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.buffer.subdata(t,n)}}]),e}(),_n=n(35),jn=n.n(_n),Pn=9007199254740991,Nn={};Nn["[object Float32Array]"]=Nn["[object Float64Array]"]=Nn["[object Int8Array]"]=Nn["[object Int16Array]"]=Nn["[object Int32Array]"]=Nn["[object Uint8Array]"]=Nn["[object Uint8ClampedArray]"]=Nn["[object Uint16Array]"]=Nn["[object Uint32Array]"]=!0,Nn["[object Arguments]"]=Nn["[object Array]"]=Nn["[object ArrayBuffer]"]=Nn["[object Boolean]"]=Nn["[object DataView]"]=Nn["[object Date]"]=Nn["[object Error]"]=Nn["[object Function]"]=Nn["[object Map]"]=Nn["[object Number]"]=Nn["[object Object]"]=Nn["[object RegExp]"]=Nn["[object Set]"]=Nn["[object String]"]=Nn["[object WeakMap]"]=!1;var Rn=Object.prototype.toString;var Dn=function(e){return function(e){return!!e&&"object"===dt()(e)}(e)&&function(e){return"number"===typeof e&&e>-1&&e%1===0&&e<=Pn}(e.length)&&!!Nn[Rn.call(e)]};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Fn="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",Bn=0,zn=!1,Vn=function(){function e(t,n){var r=this;ke()(this,e),this.reGl=t,this.context=n,this.entity=Object(Te.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(e){var t=e.name,n=e.type,o=e.data,a=e.isReferer,s=e.storageClass;if(s===Te.STORAGE_CLASS.StorageBuffer){if(a)r.textureCache[t]={data:void 0},i["".concat(t,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[t]=r.calcDataTexture(t,n,o);var u=r.textureCache[t],c=u.textureWidth,l=u.isOutput;i["".concat(t,"Size")]=[c,c],l&&(r.outputTextureName=t,r.context.needPingpong&&(r.outputTextureName="".concat(t,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(t,n,o)))}i[t]=function(){return zn&&console.log("[".concat(r.entity,"]: ").concat(t," ").concat(r.textureCache[t].id)),r.textureCache[t].texture}}else if(s===Te.STORAGE_CLASS.Uniform){if(o&&(Array.isArray(o)||Dn(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[t]=function(){return e.data}}});var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:Fn,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return Oe()(e,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()}),zn&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o,a,s,u,c=this;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=c.reGl.read()}),!t){e.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(u=0;u<t.length;u+=4)1===i?s.push(t[u]):2===i?s.push(t[u],t[u+1]):s.push(t[u],t[u+1],t[u+2]);else s=t;return e.abrupt("return",new a(s.slice(0,r)));case 6:return e.abrupt("return",new Float32Array);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"confirmInput",value:function(e,t){var n;this.entity===e.entity?(this.dynamicPingpong=!0,n=this):n=e,this.textureCache[t].id=n.getOuputDataTexture().id,this.textureCache[t].texture=n.getOuputDataTexture().texture,zn&&console.log("[".concat(this.entity,"]: confirm input ").concat(t," from model ").concat(n.entity,", ").concat(n.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.context.uniforms.find(function(t){return t.name===e});if(n){var r=this.calcDataTexture(e,n.type,t),i=r.texture,o=r.data;this.textureCache[e].data=o,this.textureCache[e].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t,zn&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var t=e.data,n=e.textureWidth;return Ln(Ln({},e),{},{id:Bn++,texture:this.reGl.texture({width:n,height:n,data:t,type:"float"})})}},{key:"calcDataTexture",value:function(e,t,n){var r=1;t===Te.AST_TOKEN_TYPES.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),u=Math.ceil(Math.sqrt(s)),c=u*u;s<c&&i.push.apply(i,jn()(new Array(4*(c-s)).fill(0)));var l=this.reGl.texture({width:u,height:u,data:i,type:"float"});return{id:Bn++,data:i,originalDataLength:a,typedArrayConstructor:Dn(n)?n.constructor:void 0,textureWidth:u,texture:l,texelCount:s,elementsPerTexel:r,isOutput:e===this.context.output.name}}}]),e}(),Un=function(){function e(t,n){ke()(this,e),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=t.elements({data:r,usage:vn[i||Te.gl.STATIC_DRAW],type:yn[o||Te.gl.UNSIGNED_BYTE],count:a})}return Oe()(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),Gn=function(){function e(t,n){ke()(this,e),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:r,height:i});Array.isArray(a)&&(s.colors=a.map(function(e){return e.get()})),o&&"boolean"!==typeof o&&(s.color=o.get()),this.framebuffer=t.framebuffer(s)}return Oe()(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.framebuffer.resize(t,n)}}]),e}();function Hn(e){var t={};return Object.keys(e).forEach(function(n){!function e(t,n,r,i){if(null===n||"number"===typeof n||"boolean"===typeof n||Array.isArray(n)&&"number"===typeof n[0]||Dn(n)||""===n||void 0!==n.resize)return void(r["".concat(i&&i+".").concat(t)]=n);(function(e){var t=dt()(e);return null!=e&&("object"===t||"function"===t)})(n)&&Object.keys(n).forEach(function(o){e(o,n[o],r,"".concat(i&&i+".").concat(t))});Array.isArray(n)&&n.forEach(function(n,o){Object.keys(n).forEach(function(a){e(a,n[a],r,"".concat(i&&i+".").concat(t,"[").concat(o,"]"))})})}(n,e[n],t,"")}),t}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xn,$n,Yn=function(){function e(t,n){ke()(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,u=n.primitive,c=n.count,l=n.elements,f=n.depth,h=n.blend,d=n.stencil,p=n.cull,g=n.instances,v=n.scissor,y=n.viewport,m={};s&&(this.uniforms=Hn(s),Object.keys(s).forEach(function(e){m[e]=t.prop(e)}));var b={};Object.keys(a).forEach(function(e){b[e]=a[e].get()});var w=o&&this.generateDefines(o)||"",x={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(w,"\n").concat(i),uniforms:m,vert:"\n".concat(w,"\n").concat(r),primitive:gn[void 0===u?Te.gl.TRIANGLES:u]};g&&(x.instances=g),c&&(x.count=c),l&&(x.elements=l.get()),v&&(x.scissor=v),y&&(x.viewport=y),this.initDepthDrawParams({depth:f},x),this.initBlendDrawParams({blend:h},x),this.initStencilDrawParams({stencil:d},x),this.initCullDrawParams({cull:p},x),this.drawCommand=t(x)}return Oe()(e,[{key:"addUniforms",value:function(e){this.uniforms=qn(qn({},this.uniforms),Hn(e))}},{key:"draw",value:function(e){var t=qn(qn({},this.uniforms),Hn(e.uniforms||{})),n={};Object.keys(t).forEach(function(e){var r=dt()(t[e]);"boolean"===r||"number"===r||Array.isArray(t[e])||t[e].BYTES_PER_ELEMENT?n[e]=t[e]:"string"===r||(n[e]=t[e].get())}),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){var n=e.depth;n&&(t.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:kn[n.func||Te.gl.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var n=e.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;t.blend={enable:!!r,func:{srcRGB:On[i&&i.srcRGB||Te.gl.SRC_ALPHA],srcAlpha:On[i&&i.srcAlpha||Te.gl.SRC_ALPHA],dstRGB:On[i&&i.dstRGB||Te.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:On[i&&i.dstAlpha||Te.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:En[o&&o.rgb||Te.gl.FUNC_ADD],alpha:En[o&&o.alpha||Te.gl.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(e,t){var n=e.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:Te.gl.ALWAYS,ref:0,mask:-1}:a,u=n.opFront,c=void 0===u?{fail:Te.gl.KEEP,zfail:Te.gl.KEEP,zpass:Te.gl.KEEP}:u,l=n.opBack,f=void 0===l?{fail:Te.gl.KEEP,zfail:Te.gl.KEEP,zpass:Te.gl.KEEP}:l;t.stencil={enable:!!r,mask:o,func:qn(qn({},s),{},{cmp:Sn[s.cmp]}),opFront:{fail:An[c.fail],zfail:An[c.zfail],zpass:An[c.zpass]},opBack:{fail:An[f.fail],zfail:An[f.zfail],zpass:An[f.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var n=e.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?Te.gl.BACK:i;t.cull={enable:!!r,face:Tn[o]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map(function(t){return"#define ".concat(t," ").concat(Number(e[t]))}).join("\n")}}]),e}(),Kn=function(){function e(t,n){ke()(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?Te.gl.UNSIGNED_BYTE:i,a=n.width,s=n.height,u=n.flipY,c=void 0!==u&&u,l=n.format,f=void 0===l?Te.gl.RGBA:l,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,g=void 0===p?Te.gl.CLAMP_TO_EDGE:p,v=n.wrapT,y=void 0===v?Te.gl.CLAMP_TO_EDGE:v,m=n.aniso,b=void 0===m?0:m,w=n.alignment,x=void 0===w?1:w,C=n.premultiplyAlpha,k=void 0!==C&&C,E=n.mag,O=void 0===E?Te.gl.NEAREST:E,S=n.min,A=void 0===S?Te.gl.NEAREST:S,T=n.colorSpace,M=void 0===T?Te.gl.BROWSER_DEFAULT_WEBGL:T;this.width=a,this.height=s;var _={width:a,height:s,type:yn[o],format:mn[f],wrapS:xn[g],wrapT:xn[y],mag:wn[O],min:wn[A],alignment:x,flipY:c,colorSpace:Cn[M],premultiplyAlpha:k,aniso:b};r&&(_.data=r),"number"===typeof d?_.mipmap=bn[d]:"boolean"===typeof d&&(_.mipmap=d),this.texture=t.texture(_)}return Oe()(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.texture.resize(t,n),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),Jn=Object(_e.injectable)()(Xn=function(){function e(){var t=this;ke()(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=ot()(rt.a.mark(function e(n){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms){e.next=3;break}return e.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var e=ot()(rt.a.mark(function e(t){var r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms[t]||void 0===n.uniforms[t].load){e.next=5;break}return e.next=3,n.uniforms[t].load();case 3:r=e.sent,n.uniforms[t]=r;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",new Yn(t.gl,n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new pn(t.gl,e)},this.createBuffer=function(e){return new Mn(t.gl,e)},this.createElements=function(e){return new Un(t.gl,e)},this.createTexture2D=function(e){return new Kn(t.gl,e)},this.createFramebuffer=function(e){return new Gn(t.gl,e)},this.useFramebuffer=function(e,n){t.gl({framebuffer:e?e.get():null})(n)},this.createComputeModel=function(){var e=ot()(rt.a.mark(function e(n){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vn(t.gl,n));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.clear=function(e){var n=e.color,r=e.depth,i=e.stencil,o=e.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),t.gl.clear(s)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(Te.gl.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(Te.gl.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var n=e.x,r=e.y,i=e.width,o=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(n,r,i,o),t.gl._refresh())},this.readPixels=function(e){var n=e.framebuffer,r={x:e.x,y:e.y,width:e.width,height:e.height};return n&&(r.framebuffer=n.get()),t.gl.read(r)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return Oe()(e,[{key:"init",value:function(){var e=ot()(rt.a.mark(function e(t){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this.$canvas=t.canvas,e.next=5,new Promise(function(e,n){dn()({canvas:t.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(t,r){!t&&r||n(t),e(r)}})});case 5:this.gl=e.sent,this.inited=!0;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}())||Xn;function Zn(e,t,n,r){if("undefined"!==typeof window){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),r&&(o.id=r),o.onload=function(){t&&t()},o.onerror=function(t){n&&n("Unable to load script '".concat(e,"'"),t)},i.appendChild(o)}}function Qn(e,t){return new Promise(function(t,n){Zn(e,function(){t()},function(e,t){n(t)})})}var er=function(){return tr.apply(this,arguments)};function tr(){return(tr=ot()(rt.a.mark(function e(){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$n){e.next=2;break}return e.abrupt("return",$n);case 2:return e.next=4,Qn("https://preview.babylonjs.com/glslang/glslang.js");case 4:return $n=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),e.abrupt("return",$n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var nr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,i=r.buffer,o=r.offset,a=r.stride,s=r.normalized,u=r.size,c=r.divisor,l=r.arrayStride,f=r.attributes,h=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:c||0,arrayStride:l||0,attributes:f,stepMode:h||"vertex"},u&&(this.attribute.size=u)}return Oe()(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),rr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.buffer=void 0;var r=n,i=r.data,o=r.usage;r.type;this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,o||ut.BufferUsage.Vertex|ut.BufferUsage.CopyDst)}return Oe()(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.setSubData(this.buffer,n,t instanceof Array?new Float32Array(t):t)}},{key:"createBuffer",value:function(e,t){var n=e.byteLength%4,r={size:e.byteLength+n,usage:t},i=this.engine.device.createBuffer(r);return this.setSubData(i,0,e),i}},{key:"setSubData",value:function(e,t,n){(Te.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(e,t,n)}}]),e}();var ir,or,ar,sr,ur,cr,lr,fr=function(){function e(t,n){ke()(this,e),this.engine=t,this.context=n,this.entity=Object(Te.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return Oe()(e,[{key:"init",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o,a,s,u=this;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:t=e.sent,n=t.computeStage,r=this.context.uniforms.filter(function(e){return e.storageClass===Te.STORAGE_CLASS.StorageBuffer}),i=this.context.uniforms.filter(function(e){return e.storageClass===Te.STORAGE_CLASS.Uniform}),o=i.length?1:0,this.bindGroupEntries=[],o&&(a=0,s=[],i.forEach(function(e){if("number"===typeof e.data)u.uniformGPUBufferLayout.push({name:e.name,offset:a}),a+=4,s.push(e.data);else{var t,n=(null===(t=e.data)||void 0===t?void 0:t.length)||1;3===n&&(n=4,e.data.push(0));var r=a/4%4;if(r>0){var i=4-r;if(n>1&&n<=i)2===n&&(3===i&&(a+=4,s.push(0)),s.push.apply(s,jn()(e.data)),u.uniformGPUBufferLayout.push({name:e.name,offset:a}));else{for(var o=0;o<i;o++)a+=4,s.push(0);s.push.apply(s,jn()(e.data)),u.uniformGPUBufferLayout.push({name:e.name,offset:a})}}a+=4*n}}),this.uniformBuffer=new rr(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:ut.BufferUsage.Uniform|ut.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach(function(e){var t;null!==e.data&&(e.type!==Te.AST_TOKEN_TYPES.Vector4FloatArray&&e.type!==Te.AST_TOKEN_TYPES.FloatArray||(e.name===u.context.output.name?(t=new rr(u.engine,{data:isFinite(Number(e.data))?[e.data]:e.data,usage:ut.BufferUsage.Storage|ut.BufferUsage.CopyDst|ut.BufferUsage.CopySrc}),u.outputBuffer=t,u.context.output={name:e.name,length:isFinite(Number(e.data))?1:e.data.length,typedArrayConstructor:Float32Array,gpuBuffer:t.get()}):e.isReferer?e.data.model&&e.data.model.outputBuffer&&(t=e.data.model.outputBuffer):t=new rr(u.engine,{data:isFinite(Number(e.data))?[e.data]:e.data,usage:ut.BufferUsage.Storage|ut.BufferUsage.CopyDst|ut.BufferUsage.CopySrc}),u.vertexBuffers[e.name]=t,u.bindGroupEntries.push({binding:o,resource:{name:e.name,refer:t?void 0:e.data,buffer:t?t.get():void 0}}),o++))}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(t){return e.vertexBuffers[t].destroy()})}},{key:"readData",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o,a,s,u,c;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.context.output)){e.next=16;break}if(n=t.length,r=t.typedArrayConstructor,!(i=t.gpuBuffer)){e.next=16;break}return o=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(s=this.engine.device.createCommandEncoder()).copyBufferToBuffer(i,0,a,0,o),(Te.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([s.finish()]),e.next=12,a.mapAsync(ut.MapMode.Read);case 12:return u=a.getMappedRange(),c=new r(u.slice(0)),a.unmap(),e.abrupt("return",c);case 16:return e.abrupt("return",new Float32Array);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(e=this.engine.currentComputePass).dispatch.apply(e,jn()(this.context.dispatch)))}},{key:"updateBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[e];r&&r.subData({data:t,offset:n})}},{key:"updateUniform",value:function(e,t){var n=this.uniformGPUBufferLayout.find(function(t){return t.name===e});n&&this.uniformBuffer.subData({data:Number.isFinite(t)?new Float32Array([t]):new Float32Array(t),offset:n.offset})}},{key:"confirmInput",value:function(e,t){var n=this.vertexBuffers[t],r=e.outputBuffer;if(n&&r&&n!==r){var i=this.engine.device.createCommandEncoder(),o=e.context.output,a=o.length*o.typedArrayConstructor.BYTES_PER_ELEMENT;i.copyBufferToBuffer(r.get(),0,n.get(),0,a),(Te.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([i.finish()])}}},{key:"compileShaderToSpirV",value:function(e,t,n){return this.compileRawShaderToSpirV(n+e,t)}},{key:"compileRawShaderToSpirV",value:function(e,t){return this.engine.glslang.compileGLSL(e,t)}},{key:"compileComputePipelineStageDescriptor",value:function(){var e=ot()(rt.a.mark(function e(t){var n;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,"#version 450\n",this.engine.options.useWGSL){e.next=6;break}return e.next=5,this.compileShaderToSpirV(t,"compute","#version 450\n");case 5:n=e.sent;case 6:return e.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Te.isSafari}),entryPoint:"main"}});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),hr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,i=r.data,o=(r.usage,r.type,r.count);this.indexCount=o||0,this.buffer=new rr(t,{data:i instanceof Array?new Uint16Array(i):i,usage:ut.BufferUsage.Index|ut.BufferUsage.CopyDst})}return Oe()(e,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),dr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,i=(r.width,r.height,r.color),o=(r.colors,r.depth);r.stencil;i&&(this.colorTexture=i),o&&(this.depthTexture=o)}return Oe()(e,[{key:"get",value:function(){var e,t;return{color:null===(e=this.colorTexture)||void 0===e?void 0:e.get(),depth:null===(t=this.depthTexture)||void 0===t?void 0:t.get()}}},{key:"destroy",value:function(){var e,t;null===(e=this.colorTexture)||void 0===e||e.destroy(),null===(t=this.depthTexture)||void 0===t||t.destroy()}},{key:"resize",value:function(e){var t,n,r=e.width,i=e.height;r===this.width&&i===this.height||(null===(t=this.colorTexture)||void 0===t||t.resize({width:r,height:i}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:i}));this.width=r,this.height=i}}]),e}(),pr=(ir={},st()(ir,Te.gl.POINTS,ut.PrimitiveTopology.PointList),st()(ir,Te.gl.LINES,ut.PrimitiveTopology.LineList),st()(ir,Te.gl.LINE_LOOP,ut.PrimitiveTopology.LineList),st()(ir,Te.gl.LINE_STRIP,ut.PrimitiveTopology.LineStrip),st()(ir,Te.gl.TRIANGLES,ut.PrimitiveTopology.TriangleList),st()(ir,Te.gl.TRIANGLE_FAN,ut.PrimitiveTopology.TriangleList),st()(ir,Te.gl.TRIANGLE_STRIP,ut.PrimitiveTopology.TriangleStrip),ir),gr=(or={},st()(or,Te.gl.NEVER,ut.CompareFunction.Never),st()(or,Te.gl.ALWAYS,ut.CompareFunction.Always),st()(or,Te.gl.LESS,ut.CompareFunction.Less),st()(or,Te.gl.LEQUAL,ut.CompareFunction.LessEqual),st()(or,Te.gl.GREATER,ut.CompareFunction.Greater),st()(or,Te.gl.GEQUAL,ut.CompareFunction.GreaterEqual),st()(or,Te.gl.EQUAL,ut.CompareFunction.Equal),st()(or,Te.gl.NOTEQUAL,ut.CompareFunction.NotEqual),or),vr=(ar={},st()(ar,Te.gl.FUNC_ADD,ut.BlendOperation.Add),st()(ar,Te.gl.MIN_EXT,ut.BlendOperation.Min),st()(ar,Te.gl.MAX_EXT,ut.BlendOperation.Max),st()(ar,Te.gl.FUNC_SUBTRACT,ut.BlendOperation.Subtract),st()(ar,Te.gl.FUNC_REVERSE_SUBTRACT,ut.BlendOperation.ReverseSubtract),ar),yr=(sr={},st()(sr,Te.gl.ZERO,ut.BlendFactor.Zero),st()(sr,Te.gl.ONE,ut.BlendFactor.One),st()(sr,Te.gl.SRC_COLOR,ut.BlendFactor.SrcColor),st()(sr,Te.gl.ONE_MINUS_SRC_COLOR,ut.BlendFactor.OneMinusSrcColor),st()(sr,Te.gl.SRC_ALPHA,ut.BlendFactor.SrcAlpha),st()(sr,Te.gl.ONE_MINUS_SRC_ALPHA,ut.BlendFactor.OneMinusSrcAlpha),st()(sr,Te.gl.DST_COLOR,ut.BlendFactor.DstColor),st()(sr,Te.gl.ONE_MINUS_DST_COLOR,ut.BlendFactor.OneMinusDstColor),st()(sr,Te.gl.DST_ALPHA,ut.BlendFactor.DstAlpha),st()(sr,Te.gl.ONE_MINUS_DST_ALPHA,ut.BlendFactor.OneMinusDstAlpha),st()(sr,Te.gl.CONSTANT_COLOR,ut.BlendFactor.BlendColor),st()(sr,Te.gl.ONE_MINUS_CONSTANT_COLOR,ut.BlendFactor.OneMinusBlendColor),st()(sr,Te.gl.SRC_ALPHA_SATURATE,ut.BlendFactor.SrcAlphaSaturated),sr),mr=(ur={},st()(ur,Te.gl.ALPHA,"r8unorm"),st()(ur,Te.gl.RGBA,"rgba8unorm"),st()(ur,Te.gl.DEPTH_COMPONENT,"depth32float"),st()(ur,Te.gl.DEPTH_STENCIL,"depth24plus-stencil8"),ur),br=(cr={},st()(cr,Te.gl.NEAREST,"nearest"),st()(cr,Te.gl.LINEAR,"linear"),cr),wr=(lr={},st()(lr,Te.gl.REPEAT,"repeat"),st()(lr,Te.gl.CLAMP_TO_EDGE,"clamp-to-edge"),st()(lr,Te.gl.MIRRORED_REPEAT,"mirror-repeat"),lr);function xr(e){var t=e.cull;return t&&t.enable?t.face?t.face===Te.gl.FRONT?ut.CullMode.Front:ut.CullMode.Back:void 0:ut.CullMode.None}function Cr(e){var t=e.depth,n=(e.stencil,{compare:ut.CompareFunction.Always,depthFailOp:ut.StencilOperation.Keep,failOp:ut.StencilOperation.Keep,passOp:ut.StencilOperation.Keep});return{depthWriteEnabled:t&&t.enable,depthCompare:gr[(null===t||void 0===t?void 0:t.func)||Te.gl.ALWAYS],format:ut.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function kr(e,t){var n=e.blend;return[{format:t,alphaBlend:{srcFactor:yr[n&&n.func&&n.func.srcAlpha||Te.gl.ONE],dstFactor:yr[n&&n.func&&n.func.dstAlpha||Te.gl.ZERO],operation:vr[n&&n.equation&&n.equation.alpha||Te.gl.FUNC_ADD]},colorBlend:{srcFactor:yr[n&&n.func&&n.func.srcRGB||Te.gl.ONE],dstFactor:yr[n&&n.func&&n.func.dstRGB||Te.gl.ZERO],operation:vr[n&&n.equation&&n.equation.rgb||Te.gl.FUNC_ADD]},writeMask:ut.ColorWrite.All}]}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Sr,Ar,Tr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return Oe()(e,[{key:"init",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o,a,s,u,c,l,f,h,d,p,g,v,y=this;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.options,n=t.vs,r=t.fs,i=t.attributes,o=t.uniforms,a=t.primitive,t.count,s=t.elements,u=t.depth,c=t.blend,l=t.stencil,f=t.cull,t.instances,e.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=e.sent,d=h.vertexStage,p=h.fragmentStage,o&&this.buildUniformBindGroup(o),s&&(this.indexBuffer=s.get(),this.indexCount=s.indexCount),g={vertexBuffers:Object.keys(i).map(function(e,t){var n=i[e],r=n.get(),o=r.arrayStride,a=r.stepMode,s=r.attributes;return y.attributeCache[e]=n,{arrayStride:o,stepMode:a,attributes:s}})},v={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:pr[a||Te.gl.TRIANGLES],rasterizationState:Or(Or({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:xr({cull:f})}),depthStencilState:Cr({depth:u,stencil:l}),colorStates:kr({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:g},this.renderPipeline=this.engine.device.createRenderPipeline(v);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addUniforms",value:function(e){this.uniforms=Or(Or({},this.uniforms),Hn(e))}},{key:"draw",value:function(e){var t=this,n=this.engine.getCurrentRenderPass(),r=Or(Or({},this.uniforms),Hn(e.uniforms||{})),i=[];Object.keys(r).forEach(function(e){var n=dt()(r[e]);if("boolean"===n||"number"===n||Array.isArray(r[e])||r[e].BYTES_PER_ELEMENT){var o,a=null===(o=t.uniformGPUBufferLayout.find(function(t){return t.name===e}))||void 0===o?void 0:o.offset;null!==a&&t.uniformBuffer.subData({data:r[e],offset:a})}else{var s,u=null===(s=t.uniformGPUBufferLayout.find(function(t){return t.name===e}))||void 0===s?void 0:s.offset;if(null!==u){var c=r[e].get(),l=c.color||c,f=l.texture,h=l.sampler;h&&(i.push({binding:u,resource:h}),u++),i.push({binding:u,resource:f.createView()})}}}),this.uniformBuffer&&(i[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:i}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ut.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(e,r){n.setVertexBuffer(0+r,t.attributeCache[e].get().buffer,0)}),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var e=ot()(rt.a.mark(function e(t,n,r){var i,o,a;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i="#version 450\n",o=t,a=n,this.engine.options.useWGSL){e.next=10;break}return e.next=6,this.compileShaderToSpirV(t,"vertex",i);case 6:return o=e.sent,e.next=9,this.compileShaderToSpirV(n,"fragment",i);case 9:a=e.sent;case 10:return e.abrupt("return",this.createPipelineStageDescriptor(o,a));case 11:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"compileShaderToSpirV",value:function(e,t,n){return this.compileRawShaderToSpirV(n+e,t)}},{key:"compileRawShaderToSpirV",value:function(e,t){return this.engine.glslang.compileGLSL(e,t)}},{key:"createPipelineStageDescriptor",value:function(e,t){return{vertexStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Te.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:Te.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ut.FrontFace.CCW,cullMode:ut.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(e){var t=this,n=0,r=function(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++)t+=a[o].length;for(var s=new e(t),u=0,c=0,l=r;c<l.length;c++){var f=l[c];s.set(f,u),u+=f.length}return s}.apply(void 0,[Float32Array].concat(jn()(Object.keys(e).map(function(r){return e[r]?(t.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(e[r].length||1),e[r]):[]})))),i=[],o=!1;r.length&&(o=!0,i.push({binding:0,visibility:ut.ShaderStage.Fragment|ut.ShaderStage.Vertex,type:ut.BindingType.UniformBuffer})),Object.keys(e).filter(function(t){return null===e[t]}).forEach(function(e,n){t.uniformGPUBufferLayout.push({name:e,offset:2*n+(o?1:0)}),i.push({binding:2*n+(o?1:0),visibility:ut.ShaderStage.Fragment,type:ut.BindingType.Sampler},{binding:2*n+(o?1:0)+1,visibility:ut.ShaderStage.Fragment,type:ut.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:i}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),o&&(this.uniformBuffer=new rr(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ut.BufferUsage.Uniform|ut.BufferUsage.CopyDst}))}}]),e}(),Mr=function(){function e(t,n){ke()(this,e),this.engine=t,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Oe()(e,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(e){var t=e.width,n=e.height;t===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var e=this.options,t=(e.data,e.type),n=(void 0===t&&Te.gl.UNSIGNED_BYTE,e.width),r=e.height,i=(e.flipY,e.format),o=void 0===i?Te.gl.RGBA:i,a=(e.mipmap,e.wrapS),s=void 0===a?Te.gl.CLAMP_TO_EDGE:a,u=e.wrapT,c=void 0===u?Te.gl.CLAMP_TO_EDGE:u,l=e.aniso,f=void 0===l?0:l,h=(e.alignment,e.premultiplyAlpha,e.mag),d=void 0===h?Te.gl.NEAREST:h,p=e.min,g=void 0===p?Te.gl.NEAREST:p,v=e.colorSpace,y=(void 0===v&&Te.gl.BROWSER_DEFAULT_WEBGL,e.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ut.TextureDimension.E2d,format:mr[o],usage:y||ut.TextureUsage.Sampled|ut.TextureUsage.CopyDst}),(!y||y&ut.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:wr[s],addressModeV:wr[c],addressModeW:wr[s],magFilter:br[d],minFilter:br[g],maxAnisotropy:f}))}}]),e}(),_r=Object(_e.injectable)()(Sr=function(){function e(){var t=this;ke()(this,e),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(e){e.framebuffer;var n=e.color,r=e.depth,i=e.stencil;t.options.supportCompute&&t.startComputePass(),t.currentRenderTarget?(t.currentRenderPass&&t.endRenderTargetRenderPass(),t.startRenderTargetRenderPass(t.currentRenderTarget,n||null,!!r,!!i)):(t.mainColorAttachments[0].loadValue=n||ut.LoadOp.Load,t.mainDepthAttachment.depthLoadValue=r||ut.LoadOp.Load,t.mainDepthAttachment.stencilLoadValue=i?t.clearStencilValue:ut.LoadOp.Load,t.mainRenderPass&&t.endMainRenderPass(),t.startMainRenderPass())},this.createModel=function(){var e=ot()(rt.a.mark(function e(n){var r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Tr(t,n),e.next=3,r.init();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new nr(t,e)},this.createBuffer=function(e){return new rr(t,e)},this.createElements=function(e){return new hr(t,e)},this.createTexture2D=function(e){return new Mr(t,e)},this.createFramebuffer=function(e){return new dr(t,e)},this.useFramebuffer=function(e,n){t.currentRenderTarget&&t.unbindFramebuffer(t.currentRenderTarget),t.currentRenderTarget=e,t.currentRenderTargetViewDescriptor={dimension:ut.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ut.TextureAspect.All},t.currentRenderPass=null,n()},this.createComputeModel=function(){var e=ot()(rt.a.mark(function e(n){var r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new fr(t,n),e.next=3,r.init();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getCanvas=function(){return t.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(e){var n=e.x,r=e.y,i=e.width,o=e.height;if(t.currentRenderPass){if(t.transientViewport.x!==1/0){t.getCurrentRenderPass().setViewport(t.transientViewport.x,t.transientViewport.y,t.transientViewport.width,t.transientViewport.height,0,1)}else if(n!==t.cachedViewport.x||r!==t.cachedViewport.y||i!==t.cachedViewport.width||o!==t.cachedViewport.height){t.cachedViewport={x:n,y:r,width:i,height:o},t.getCurrentRenderPass().setViewport(n,r,i,o,0,1)}}else t.transientViewport={x:n,y:r,width:i,height:o}},this.readPixels=function(e){throw new Error("Method not implemented.")}}return Oe()(e,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var e=ot()(rt.a.mark(function e(t){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.canvas=t.canvas,this.options=t,this.useWGSL=!!t.useWGSL,this.mainPassSampleCount=t.antialiasing?this.defaultSampleCount:1,e.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setScissor",value:function(e){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(e){return e.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Te.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(e){return e})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(e){return e}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var e=ot()(rt.a.mark(function e(){var t,n;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er();case 2:return this.glslang=e.sent,e.next=5,null===(t=navigator)||void 0===t?void 0:null===(n=t.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=e.sent,e.next=8,this.adapter.requestDevice();case 8:this.device=e.sent;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Te.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ut.TextureUsage.OutputAttachment|ut.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ut.TextureDimension.E2d,format:ut.TextureFormat.BGRA8Unorm,usage:ut.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(e),this.mainColorAttachments=[{attachment:Te.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ut.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:Te.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ut.StoreOp.Store}];var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ut.TextureDimension.E2d,format:Te.isSafari?"depth32float-stencil8":ut.TextureFormat.Depth24PlusStencil8,usage:ut.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(t),this.mainDepthAttachment={attachment:Te.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ut.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ut.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Te.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Te.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(e,t,n){var r,i,o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null===(r=e.get().color)||void 0===r?void 0:r.texture;s&&(o=s.createView(this.currentRenderTargetViewDescriptor));var u,c=null===(i=e.get().depth)||void 0===i?void 0:i.texture;c&&(u=c.createView());var l=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:o,loadValue:null!==t?t:ut.LoadOp.Load,storeOp:ut.StoreOp.Store}],depthStencilAttachment:c&&u?{attachment:u,depthLoadValue:n?this.clearDepthValue:ut.LoadOp.Load,depthStoreOp:ut.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ut.LoadOp.Load,stencilStoreOp:ut.StoreOp.Store}:void 0});this.currentRenderPass=l,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(e){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),e}())||Sr,jr=n(111),Pr=n.n(jr),Nr=n(29),Rr=n.n(Nr),Dr=n(30),Ir=n.n(Dr),Lr=n(21),Fr=n.n(Lr);function Br(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var zr,Vr=Object(_e.injectable)()(Ar=function(e){Rr()(n,e);var t=Br(n);function n(){return ke()(this,n),t.apply(this,arguments)}return Oe()(n,[{key:"onEntityCreated",value:function(){var e=this.config,t=e.widthSegments,n=void 0===t?1:t,r=e.heightSegments,i=void 0===r?1:r,o=e.depthSegments,a=void 0===o?1:o,s=e.halfExtents,u=void 0===s?Me.d.fromValues(.5,.5,.5):s,c=n,l=i,f=a,h=Pr()(u,3),d=h[0],p=h[1],g=h[2],v=[Me.d.fromValues(-d,-p,g),Me.d.fromValues(d,-p,g),Me.d.fromValues(d,p,g),Me.d.fromValues(-d,p,g),Me.d.fromValues(d,-p,-g),Me.d.fromValues(-d,-p,-g),Me.d.fromValues(-d,p,-g),Me.d.fromValues(d,p,-g)],y=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],m=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],b=1,w=2,x=3,C=4,k=5,E=[],O=[],S=[],A=[],T=[],M=0,_=function(e,t,n){var r,i,o,a;for(o=0;o<=t;o++)for(a=0;a<=n;a++){var s=Me.d.create(),u=Me.d.create(),c=Me.d.create(),l=Me.d.create();Me.d.lerp(s,v[y[e][0]],v[y[e][1]],o/t),Me.d.lerp(u,v[y[e][0]],v[y[e][2]],a/n),Me.d.sub(c,u,v[y[e][0]]),Me.d.add(l,s,c),r=o/t,i=a/n,E.push(l[0],l[1],l[2]),O.push(m[e][0],m[e][1],m[e][2]),S.push(r,i),r=.875*(r/=3)+4/64,i=.875*(i/=3)+4/64,r+=e%3/3,i+=Math.floor(e/3)/3,A.push(r,i),o<t&&a<n&&(T.push(M+n+1,M+1,M),T.push(M+n+1,M+n+2,M+1)),M++}};_(0,c,l),_(b,c,l),_(w,c,f),_(x,c,f),_(C,f,l),_(k,f,l);var j=Object(Te.generateAABBFromVertices)(E),P=this.getComponent();P.indices=Uint32Array.from(T),P.aabb=j,P.vertexCount=M,P.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(O),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(S),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(tt))||Ar;function Ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var Gr,Hr=Object(_e.injectable)()(zr=function(e){Rr()(n,e);var t=Ur(n);function n(){return ke()(this,n),t.apply(this,arguments)}return Oe()(n,[{key:"onEntityCreated",value:function(){var e=this.config.geometries,t=void 0===e?[]:e,n=this.getComponent();n.aabb=new Te.AABB;var r=[],i=[],o=0;t.forEach(function(e){var t=e.aabb,a=e.indices,s=e.vertexCount,u=e.attributes;n.aabb.add(t),n.vertexCount+=s,a&&i.push.apply(i,jn()(a.map(function(e){return e+o}))),o+=s,u.forEach(function(e,t){r[t]?e.data&&(je(e.data)?r[t].push(e.data):Et(e.data)?r[t].data=function(e,t){if(!e&&!t)throw new Error("Please specify valid arguments for parameters a and b.");if(!t||0===t.length)return e;if(!e||0===e.length)return t;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}(r[t].data,e.data):r[t].data=r[t].data.concat(e.data)):(r[t]=e,r[t].dirty=!0)})}),n.attributes=r,n.indices=Uint32Array.from(i),n.dirty=!0}}]),n}(tt))||zr;function Wr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var qr,Xr=Object(_e.injectable)()(Gr=function(e){Rr()(n,e);var t=Wr(n);function n(){return ke()(this,n),t.apply(this,arguments)}return Oe()(n,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.halfExtents,n=void 0===t?[.5,.5]:t,r=e.widthSegments,i=void 0===r?5:r,o=e.lengthSegments,a=void 0===o?5:o,s=[],u=[],c=[],l=[],f=0,h=0;h<=i;h++)for(var d=0;d<=a;d++){var p=-n[0]+2*n[0]*h/i,g=-(-n[1]+2*n[1]*d/a),v=h/i,y=d/a;s.push(p,0,g),u.push(0,1,0),c.push(v,y),h<i&&d<a&&(l.push(f+a+1,f+1,f),l.push(f+a+1,f+a+2,f+1)),f++}var m=Object(Te.generateAABBFromVertices)(s),b=this.getComponent();b.indices=Uint32Array.from(l),b.aabb=m,b.vertexCount=f,b.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(u),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(c),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(tt))||Gr;function $r(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var Yr,Kr,Jr,Zr,Qr,ei,ti,ni=Object(_e.injectable)()(qr=function(e){Rr()(n,e);var t=$r(n);function n(){return ke()(this,n),t.apply(this,arguments)}return Oe()(n,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.radius,n=void 0===t?.5:t,r=e.latitudeBands,i=void 0===r?16:r,o=e.longitudeBands,a=void 0===o?16:o,s=[],u=[],c=[],l=[],f=0;f<=i;f++)for(var h=f*Math.PI/i,d=Math.sin(h),p=Math.cos(h),g=0;g<=a;g++){var v=2*g*Math.PI/a-Math.PI/2,y=Math.sin(v),m=Math.cos(v)*d,b=p,w=y*d,x=1-g/a,C=1-f/i;s.push(m*n,b*n,w*n),u.push(m,b,w),c.push(x,C)}for(var k=0;k<i;++k)for(var E=0;E<a;++E){var O=k*(a+1)+E,S=O+a+1;l.push(O+1,S,O),l.push(O+1,S+1,S)}var A=Object(Te.generateAABBFromVertices)(s),T=this.getComponent();T.indices=Uint32Array.from(l),T.aabb=A,T.vertexCount=s.length/3,T.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(u),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(c),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(tt))||qr,ri=n(28),ii=n.n(ri);function oi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var ai,si,ui,ci,li,fi,hi,di,pi,gi,vi,yi=(Yr=Object(_e.injectable)(),Kr=Object(_e.inject)(Te.IDENTIFIER.RenderEngine),Jr=Object(_e.inject)(Te.IDENTIFIER.ShaderModuleService),Yr((Qr=function(e){Rr()(n,e);var t=oi(n);function n(){var e;ke()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),xe()(e,"engine",ei,ii()(e)),xe()(e,"shaderModuleService",ti,ii()(e)),e}return Oe()(n,[{key:"onEntityCreated",value:function(){var e=this.getComponent(),t=this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\n  vec4 color;\n  mat4 projectionMatrix;\n  mat4 modelViewMatrix;\n} uniforms;\n\nlayout(location = 0) in vec3 position;\n// layout(location = 1) in vec3 barycentric;\n\nlayout(location = 0) out vec4 fragColor;\n// layout(location = 1) out vec3 v_Barycentric;\n\nvoid main() {\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\n  fragColor = uniforms.color;\n  // v_Barycentric = barycentric;\n}":'attribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec4 color;\n\nvarying vec4 fragColor;\n\n#pragma include "uv.vert.declaration"\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  fragColor = color;\n\n  #pragma include "uv.vert.main"\n}',n=this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\n//   float lineWidth;\n//   vec4 lineColor;\n// } wireframe;\n\nlayout(location = 0) in vec4 fragColor;\n// layout(location = 1) in vec3 v_Barycentric;\n\nlayout(location = 0) out vec4 outColor;\n\n// wireframe\n// float edgeFactor() {\n//   vec3 d = fwidth(v_Barycentric);\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\n//   return min(min(a3.x, a3.y), a3.z);\n// }\n\nvoid main() {\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\n  outColor = fragColor;\n}":'varying vec4 fragColor;\n\n#pragma include "uv.frag.declaration"\n#pragma include "map.frag.declaration"\n\nvoid main() {\n  vec4 diffuseColor = fragColor;\n\n  #pragma include "map.frag.main"\n\n  gl_FragColor = diffuseColor;\n}';this.shaderModuleService.registerModule("material-basic",{vs:t,fs:n});var r=this.shaderModuleService.getModule("material-basic"),i=r.vs,o=r.fs,a=r.uniforms;e.vertexShaderGLSL=i,e.fragmentShaderGLSL=o,e.setUniform(a),this.config.map&&(e.setDefines({USE_UV:1,USE_MAP:1}),e.setUniform({map:this.config.map,uvTransform:Me.a.create()}))}}]),n}(ln),ei=Ae()(Qr.prototype,"engine",[Kr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ti=Ae()(Qr.prototype,"shaderModuleService",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=Qr))||Zr);function mi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var bi=(ai=Object(_e.injectable)(),si=Object(_e.inject)(Te.IDENTIFIER.Systems),ui=Object(_e.named)(Te.IDENTIFIER.MaterialSystem),ci=Object(_e.inject)(Te.IDENTIFIER.Systems),li=Object(_e.named)(Te.IDENTIFIER.GeometrySystem),fi=Object(_e.inject)(Te.IDENTIFIER.ShaderModuleService),ai((di=function(e){Rr()(n,e);var t=mi(n);function n(){var e;ke()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),xe()(e,"materialSystem",pi,ii()(e)),xe()(e,"geometrySystem",gi,ii()(e)),xe()(e,"shaderModuleService",vi,ii()(e)),e}return Oe()(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===t?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===t&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\n\nvarying vec3 v_Position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main() {\n  v_Position = a_Position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\n}",fs:"// generate grid, borrow from clay.gl viewer\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\n#extension GL_OES_standard_derivatives : enable\n\nvarying vec3 v_Position;\n// varying vec3 v_Normal;\n\nuniform float u_GridSize : 5;\nuniform float u_GridSize2 : .5;\nuniform vec4 u_GridColor : [0, 0, 0, 1];\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\nuniform bool u_GridEnabled : true;\n\n// uniform vec3 u_LightDirection;\n// uniform vec3 u_LightColor;\n// uniform vec3 u_Camera;\n\nvoid main() {\n  // vec3 n = v_Normal;\n  // vec3 l = normalize(u_LightDirection);\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\n\n  gl_FragColor = vec4(1.);\n\n  if (u_GridEnabled) {\n    float wx = v_Position.x;\n    float wz = v_Position.z;\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\n\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\n\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n    // if (v0 > 0.1) {\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\n    // }\n    // else {\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\n    // }\n  }\n\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\n\n  // gl_FragColor.rgb *= diffuseColor;\n}"});var e=this.shaderModuleService.getModule("grid"),t=e.vs,n=e.fs,r=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:n});this.setMaterial(i);var o=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(o),i.setCull({enable:!1,face:Te.gl.BACK}).setDepth({enable:!0,func:Te.gl.LESS}),i.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),o.setIndex([0,3,2,2,1,0]),o.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(fn),pi=Ae()(di.prototype,"materialSystem",[si,ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=Ae()(di.prototype,"geometrySystem",[ci,li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=Ae()(di.prototype,"shaderModuleService",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi=di))||hi),wi=n(168),xi=n(118);function Ci(e,t,n,r,i){ki(t,r,-i),ki(t,r,i),e.push(n),e.push(n)}function ki(e,t,n){e.push([[t[0],t[1]],n])}var Ei,Oi,Si,Ai,Ti,Mi,_i,ji,Pi,Ni,Ri;function Di(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var Ii,Li,Fi,Bi,zi,Vi,Ui,Gi,Hi,Wi,qi,Xi=(Ei=Object(_e.injectable)(),Oi=Object(_e.inject)(Te.IDENTIFIER.Systems),Si=Object(_e.named)(Te.IDENTIFIER.MaterialSystem),Ai=Object(_e.inject)(Te.IDENTIFIER.Systems),Ti=Object(_e.named)(Te.IDENTIFIER.GeometrySystem),Mi=Object(_e.inject)(Te.IDENTIFIER.ShaderModuleService),Ei((ji=function(e){Rr()(n,e);var t=Di(n);function n(){var e;ke()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),xe()(e,"materialSystem",Pi,ii()(e)),xe()(e,"geometrySystem",Ni,ii()(e)),xe()(e,"shaderModuleService",Ri,ii()(e)),e.vertexCount=void 0,e}return Oe()(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();if(r&&r.material)switch(t){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var i=new Array(this.vertexCount).fill(void 0).map(function(){return n}).reduce(function(e,t){return[].concat(jn()(e),jn()(t))},[]);r.geometry.setAttribute("a_color",Float32Array.from(i),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var e=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\nattribute vec4 a_color;\nattribute float a_line_miter;\nattribute vec2 a_line_normal;\nattribute float a_counters;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float u_thickness : 0.02;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n  v_color = a_color;\n  v_counters = a_counters;\n\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\n\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\n\n  v_normal = vec2(normal * sign(a_line_miter));\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\n}\n",fs:"uniform float u_dash_array : 0.02;\nuniform float u_dash_offset : 0;\nuniform float u_dash_ratio : 0;\nuniform float u_thickness : 0.02;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\n\n    gl_FragColor = v_color;\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\n}"});var t=this.shaderModuleService.getModule("line"),n=t.vs,r=t.fs,i=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(e,t,n){var r=[0,0],i=[0,0],o=[0,0],a=[0,0],s=-1,u=!1,c=null,l=Object(wi.create)(),f=n||0,h=[],d=[],p=[],g=[0,0];t&&(e=e.slice()).push(e[0]);for(var v=e.length,y=1;y<v;y++){var m=f,b=e[y-1],w=e[y],x=y<e.length-1?e[y+1]:null;if(g.push(y/v,y/v),Object(xi.direction)(r,w,b),c||(c=[0,0],Object(xi.normal)(c,r)),u||(u=!0,Ci(d,h,b,c,1)),p.push([m+0,m+1,m+2]),x){Object(xi.direction)(i,x,w);var C=Object(xi.computeMiter)(o,a,r,i,1),k=Object(wi.dot)(o,c)<0?-1:1,E=C>3;if(!isFinite(C)){Object(xi.normal)(c,r),Ci(d,h,w,c,1),p.push(1===s?[m,m+2,m+3]:[m+2,m+1,m+3]),f+=2,s=k;continue}E?(C=3,g.push(y/v),ki(h,c,-k),d.push(w),ki(h,a,C*k),d.push(w),p.push(s!==-k?[m,m+2,m+3]:[m+2,m+1,m+3]),p.push([m+2,m+3,m+4]),Object(xi.normal)(l,i),Object(wi.copy)(c,l),ki(h,c,-k),d.push(w),f+=3):(Ci(d,h,w,a,C),p.push(1===s?[m,m+2,m+3]:[m+2,m+1,m+3]),k=-1,Object(wi.copy)(c,a),f+=2),s=k}else Object(xi.normal)(c,r),Ci(d,h,w,c,1),p.push(1===s?[m,m+2,m+3]:[m+2,m+1,m+3]),f+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:g}}(this.config.points,!1),s=a.normals,u=a.attrIndex,c=a.attrPos,l=a.attrCounters,f=c.length;this.vertexCount=f;var h=this.geometrySystem.createBufferGeometry({vertexCount:f});this.setMaterial(o),this.setGeometry(h),o.setCull({enable:!1,face:Te.gl.BACK}).setUniform(i),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];s.forEach(function(e){var t=e[0],n=e[1];d.push([t[0],t[1]]),p.push(n)}),h.setIndex(u.reduce(function(e,t){return[].concat(jn()(e),jn()(t))},[])),h.setAttribute("a_pos",Float32Array.from(c.reduce(function(e,t){return[].concat(jn()(e),jn()(t))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var g=new Array(f).fill(void 0).map(function(){return jn()(e.config.color)}).reduce(function(e,t){return[].concat(jn()(e),jn()(t))},[]);h.setAttribute("a_color",Float32Array.from(g),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce(function(e,t){return[].concat(jn()(e),jn()(t))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(l),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(fn),Pi=Ae()(ji.prototype,"materialSystem",[Oi,Si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=Ae()(ji.prototype,"geometrySystem",[Ai,Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ri=Ae()(ji.prototype,"shaderModuleService",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=ji))||_i);function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fr()(e);if(t){var i=Fr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ir()(this,n)}}var Ki,Ji,Zi,Qi,eo,to,no,ro,io,oo=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],ao=(Ii=Object(_e.injectable)(),Li=Object(_e.inject)(Te.IDENTIFIER.Systems),Fi=Object(_e.named)(Te.IDENTIFIER.MaterialSystem),Bi=Object(_e.inject)(Te.IDENTIFIER.Systems),zi=Object(_e.named)(Te.IDENTIFIER.GeometrySystem),Vi=Object(_e.inject)(Te.IDENTIFIER.ShaderModuleService),Ii((Gi=function(e){Rr()(n,e);var t=Yi(n);function n(){var e;ke()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),xe()(e,"materialSystem",Hi,ii()(e)),xe()(e,"geometrySystem",Wi,ii()(e)),xe()(e,"shaderModuleService",qi,ii()(e)),e}return Oe()(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===t?r.material.setUniform("u_stroke_width",n):"strokeColor"===t?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===t?r.material.setUniform("u_stroke_opacity",n):"opacity"===t?r.material.setUniform("u_opacity",n):"blur"===t&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\nattribute vec4 color;\nattribute float shape;\nattribute vec2 offset;\nattribute float size;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_stroke_width : 0.01;\nuniform float u_device_pixel_ratio;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include "picking"\n\nvoid main() {\n  v_color = color;\n  v_radius = size;\n\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(position, antialiasblur, shape);\n\n  gl_Position = projectionMatrix * modelViewMatrix\n    * vec4(position * size + offset, 0.0, 1.0);\n\n  setPickingColor(a_PickingColor);\n}',fs:"uniform float u_blur : 0.05;\nuniform float u_opacity : 0.7;\nuniform float u_stroke_width : 0.01;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include \"sdf2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  // if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  // } else if (shape == 1) {\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  // } else if (shape == 2) {\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\n  //   inner_df = sdBox(v_data.xy, vec2(r));\n  // } else if (shape == 3) {\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\n  // } else if (shape == 4) {\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\n  // } else if (shape == 5) {\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\n  //   inner_df = sdOctogon(v_data.xy, r);\n  // } else if (shape == 6) {\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\n  // } else if (shape == 7) {\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\n  // } else if (shape == 8) {\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  // }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}"});var e=this.shaderModuleService.getModule("grid"),t=e.vs,n=e.fs,r=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Te.gl.SRC_ALPHA,dstRGB:Te.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});i.setUniform(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({u_device_pixel_ratio:window.devicePixelRatio},r));var o=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:o.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(o.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(o.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(o.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(o.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(o.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(o.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(i),this.setGeometry(a)}},{key:"buildAttribute",value:function(e,t,n){var r,i,o,a,s;(r=t.instancedPickingColors).push.apply(r,jn()([(s=e.id||n)+1&255,s+1>>8&255,s+1>>8>>8&255])),t.instancedShapes.push(oo.indexOf(e.shape||"circle")),(i=t.instancedColors).push.apply(i,jn()(e.color||[1,0,0,1])),(o=t.instancedOffsets).push.apply(o,jn()(e.position||[0,0])),(a=t.instancedSizes).push.apply(a,jn()(e.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var e=this,t={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(n,r){e.buildAttribute(n,t,r)}):this.buildAttribute(this.config,t,0),t}}]),n}(fn),Hi=Ae()(Gi.prototype,"materialSystem",[Li,Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=Ae()(Gi.prototype,"geometrySystem",[Bi,zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=Ae()(Gi.prototype,"shaderModuleService",[Vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=Gi))||Ui);function so(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var co,lo,fo,ho,po,go,vo,yo,mo,bo=(Ki=Object(_e.injectable)(),Ji=Object(_e.inject)(Te.IDENTIFIER.RenderEngine),Zi=Object(_e.inject)(Te.IDENTIFIER.ShaderModuleService),Qi=Object(_e.inject)(Te.IDENTIFIER.ConfigService),Ki((to=function(){function e(){ke()(this,e),this.container=void 0,xe()(this,"engine",no,this),xe()(this,"shaderModule",ro,this),xe()(this,"configService",io,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return Oe()(e,[{key:"init",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:"#ifdef USE_UV\n  attribute vec2 uv;\n\t#ifdef UVS_VERTEX_ONLY\n    vec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif"}),this.shaderModule.registerModule("uv.vert.main",{vs:"#ifdef USE_UV\n  vUv = (uvTransform * vec3(uv, 1)).xy;\n#endif"}),this.shaderModule.registerModule("uv.frag.declaration",{fs:"#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))\n  varying vec2 vUv;\n#endif"}),this.shaderModule.registerModule("map.frag.declaration",{fs:"#ifdef USE_MAP\n  uniform sampler2D map;\n#endif"}),this.shaderModule.registerModule("map.frag.main",{fs:"#ifdef USE_MAP\n  vec4 texelColor = texture2D(map, vUv);\n  // texelColor = mapTexelToLinear(texelColor);\n  diffuseColor *= texelColor;\n#endif"}),t=this.container.getAll(Te.IDENTIFIER.Systems),!(n=this.configService.get()).canvas){e.next=30;break}return e.next=11,this.engine.init({canvas:n.canvas,swapChainFormat:ut.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:r=so(t),e.prev=12,r.s();case 14:if((i=r.n()).done){e.next=21;break}if(!(o=i.value).initialize){e.next=19;break}return e.next=19,o.initialize();case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:this.inited=!0;case 30:case"end":return e.stop()}},e,this,[[12,23,26,29]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i,o,a,s,u=arguments;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inited&&!this.rendering){e.next=2;break}return e.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(e){e()}),this.rendering=!0,this.engine.beginFrame(),t=this.container.getAll(Te.IDENTIFIER.Systems),n=u.length,r=new Array(n),i=0;i<n;i++)r[i]=u[i];o=so(t),e.prev=8,o.s();case 10:if((a=o.n()).done){e.next=17;break}if(!(s=a.value).execute){e.next=15;break}return e.next=15,s.execute(r);case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return e.stop()}},e,this,[[8,19,22,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(e){var t=this;return this.inited?this.engine.clear(e):this.pendings.unshift(function(){t.engine.clear(e),t.pendings.shift()}),this}},{key:"setSize",value:function(e){var t=e.width,n=e.height,r=this.engine.getCanvas();return this.size={width:t,height:n},r.width=t,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),e}(),no=Ae()(to.prototype,"engine",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=Ae()(to.prototype,"shaderModule",[Zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),io=Ae()(to.prototype,"configService",[Qi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo=to))||eo),wo=Object(_e.injectable)()(co=function(){function e(){ke()(this,e),this.entities=[]}return Oe()(e,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(e){return this.addEntity(e.getEntity()),this}},{key:"removeRenderable",value:function(e){return this.removeEntity(e.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(e){return-1===this.entities.indexOf(e)&&this.entities.push(e),this}},{key:"removeEntity",value:function(e){var t=this.entities.indexOf(e);return this.entities.splice(t,1),this}}]),e}())||co,xo=Object(_e.injectable)()(lo=function(){function e(){ke()(this,e),this.cache={}}return Oe()(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){this.cache[e]=t}}]),e}())||lo;function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Eo,Oo,So,Ao,To,Mo,_o,jo,Po,No,Ro,Do=(fo=Object(_e.injectable)(),ho=Object(_e.inject)(xo),po=Object(_e.inject)(Te.IDENTIFIER.RenderEngine),fo((vo=function(){function e(){ke()(this,e),xe()(this,"textureCache",yo,this),xe()(this,"engine",mo,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return Oe()(e,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var e=ot()(rt.a.mark(function e(){var t=this;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.url){e.next=4;break}return e.abrupt("return",new Promise(function(e,n){var r=t.textureCache.get(t.config.url);if(r)e(r);else{var i=new Image;i.crossOrigin="Anonymous",i.src=t.config.url,i.onload=function(){var n=t.engine.createTexture2D(ko(ko({},t.config),{},{data:i,width:i.width,height:i.height,flipY:!0}));t.textureCache.set(t.config.url,n),t.texture=n,t.loaded=!0,e(n)},i.onerror=function(){n()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),e.abrupt("return",this.texture);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),yo=Ae()(vo.prototype,"textureCache",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo=Ae()(vo.prototype,"engine",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),go=vo))||go),Io=(Eo=Object(_e.injectable)(),Oo=Object(_e.inject)(Te.IDENTIFIER.Systems),So=Object(_e.named)(Te.IDENTIFIER.RendererSystem),Eo((To=function(){function e(){ke()(this,e),xe()(this,"rendererSystem",Mo,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Oe()(e,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setViewport",value:function(e){return this.viewport=e,this}},{key:"setClearColor",value:function(e){return this.clearColor=e,this}},{key:"pick",value:function(e){return this.rendererSystem.pick(e,this)}}]),e}(),Mo=Ae()(To.prototype,"rendererSystem",[Oo,So],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ao=To))||Ao);function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach(function(t){st()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}_o=Object(_e.injectable)(),jo=Object(_e.inject)(Te.IDENTIFIER.ConfigService),_o((No=function(){function e(){ke()(this,e),xe()(this,"configService",Ro,this),this.container=void 0}return Oe()(e,[{key:"getEngine",value:function(){var e=ot()(rt.a.mark(function e(){var t,n,r,i;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.container.get(Te.IDENTIFIER.RenderEngine),n=this.configService.get(),r=n.canvas,i=n.engineOptions,e.next=4,t.init(Fo({canvas:r||ct(),swapChainFormat:ut.TextureFormat.BGRA8Unorm,antialiasing:!1},i));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTransformComponent",value:function(e){return this.container.get(Te.IDENTIFIER.TransformComponentManager).getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){return this.container.get(Te.IDENTIFIER.MeshComponentManager).getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(Te.createEntity)()}},{key:"createScene",value:function(){return this.container.get(wo)}},{key:"createCamera",value:function(){return this.container.get(et)}},{key:"createView",value:function(){return this.container.get(Io)}},{key:"createRenderable",value:function(e,t){var n=e?this.container.getNamed(Te.IDENTIFIER.Renderable,e):this.container.get(fn),r=Object(Te.createEntity)();return n.setConfig(t||{}),n.setEntity(r),n}},{key:"createGeometry",value:function(e,t){var n=this.container.getNamed(Te.IDENTIFIER.Geometry,e),r=Object(Te.createEntity)();return n.setConfig(t||{}),n.setEntity(r),n.getComponent()}},{key:"createMaterial",value:function(e,t){var n=this.container.getNamed(Te.IDENTIFIER.Material,e),r=Object(Te.createEntity)();return n.setConfig(t||{}),n.setEntity(r,e),n.getComponent()}},{key:"createTexture2D",value:function(e){var t=this.container.get(Do);return t.setConfig(e),t}},{key:"createBufferGeometry",value:function(e){return this.container.getNamed(Te.IDENTIFIER.Systems,Te.IDENTIFIER.GeometrySystem).createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){return this.container.getNamed(Te.IDENTIFIER.Systems,Te.IDENTIFIER.GeometrySystem).createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){return this.container.getNamed(Te.IDENTIFIER.Systems,Te.IDENTIFIER.MaterialSystem).createShaderMaterial(e)}},{key:"createKernel",value:function(e){var t=this.container.get(cn);return"string"===typeof e?t.setBundle(JSON.parse(e)):t.setBundle(e),t.init(),t}},{key:"createRenderer",value:function(){var e=this.container.get(bo);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){this.container.getAll(Te.IDENTIFIER.Systems).forEach(function(e){e.tearDown&&e.tearDown()}),this.container.get(Te.IDENTIFIER.RenderEngine).destroy(),this.container.get(Te.IDENTIFIER.InteractorService).destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(Te.createWorldContainer)(),r=navigator.gpu?_r:Jn;n.isBound(Te.IDENTIFIER.RenderEngine)||n.bind(Te.IDENTIFIER.RenderEngine).to(r).inSingletonScope(),n.bind(bo).toSelf(),n.bind(cn).toSelf(),n.bind(fn).toSelf(),n.bind(Io).toSelf(),n.bind(et).toSelf(),n.bind(wo).toSelf(),n.bind(e).toSelf(),n.bind(xo).toSelf(),n.bind(Do).toSelf(),n.bind(Te.IDENTIFIER.Geometry).to(Vr).whenTargetNamed(tt.BOX),n.bind(Te.IDENTIFIER.Geometry).to(ni).whenTargetNamed(tt.SPHERE),n.bind(Te.IDENTIFIER.Geometry).to(Xr).whenTargetNamed(tt.PLANE),n.bind(Te.IDENTIFIER.Geometry).to(Hr).whenTargetNamed(tt.MERGED),n.bind(Te.IDENTIFIER.Material).to(yi).whenTargetNamed(ln.BASIC),n.bind(Te.IDENTIFIER.Renderable).to(ao).whenTargetNamed(fn.POINT),n.bind(Te.IDENTIFIER.Renderable).to(Xi).whenTargetNamed(fn.LINE),n.bind(Te.IDENTIFIER.Renderable).to(bi).whenTargetNamed(fn.GRID);var i=n.get(e);return i.setContainer(n),i.setConfig(t),i}}]),e}(),Ro=Ae()(No.prototype,"configService",[jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=No)),new Proxy({},{get:function(e,t){return p(t)},set:function(e,t,n){return function(e,t){if(d.get(e)&&console.warn("The layout with the name ".concat(e," exists already, it will be overridden")),null!==(u=t)&&"object"===typeof u){var n=function(e){function n(e){var s;Object(r.a)(this,n),s=Object(i.a)(this,Object(o.a)(n).call(this));var u=Object(a.a)(s),c={},l=u.getDefaultCfg();return Object.assign(c,l,t,e),Object.keys(c).forEach(function(e){var t=c[e];u[e]=t}),s}return Object(s.a)(n,e),n}(c);d.set(e,n)}else d.set(e,t);var u}(t,n),!0}});n.d(t,"a",function(){return $})},function(e,t,n){"use strict";var r=n(40),i=r.i.create({type:"react componnet"});r.d.registerReactComponent=i.register,r.d.unregisterReactComponent=i.unregister,r.d.Hook.prototype.getReactComponent=function(e){var t=this.options.getReactComponent;if("function"===typeof t){var n=r.c.call(t,this.graph,e);if(null!=n)return n}var o=e.getComponent();if("string"===typeof o){var a=i.get(o);if(null==a)return i.onNotFound(o);o=a}return o};var o=n(2),a=n(4),s=n(6),u=n(3),c=n(7),l=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"getComponent",value:function(){return this.store.get("component")}},{key:"setComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?this.removeComponent(t):this.store.set("component",e,t),this}},{key:"removeComponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("component",e),this}},{key:"component",get:function(){return this.getComponent()},set:function(e){this.setComponent(e)}}]),t}(r.f);!function(e){function t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rect",i=[],o=t?r.e.getForeignObjectMarkup():{tagName:"g",selector:"content"};return e?i.push(o):i.push.apply(i,[{tagName:n,selector:"body"},o,{tagName:"text",selector:"label"}]),i}e.config({view:"react-shape-view",markup:t(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks:function(e){if(null==e.markup){var n=e.primer,i=!1!==e.useForeignObject;if(n&&"rect"!==n){e.markup=t(!1,i,n);var o={};"circle"===n?o={refCx:"50%",refCy:"50%",refR:"50%"}:"ellipse"===n&&(o={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),e.attrs=r.h.merge({},{body:Object.assign({refWidth:null,refHeight:null},o)},e.attrs||{})}else e.simple&&(e.markup=t(!0,i),e.attrs=r.h.merge({},{body:null,label:null},e.attrs||{}))}return e}}),r.f.registry.register("react-shape",e,!0)}(l||(l={}));var f,h=n(18),d=n(5),p=n.n(d),g=n(81),v=n.n(g),y=n(88),m=n(13);!function(e){var t,n=!1,r=function(e,t){var n=t.payload;switch(t.type){case"add":var r=e.findIndex(function(e){return e.id===n.id});return r>=0?(e[r]=n,Object(m.a)(e)):[].concat(Object(m.a)(e),[n]);case"remove":var i=e.findIndex(function(e){return e.id===n.id});if(i>=0){var o=Object(m.a)(e);return o.splice(i,1),o}}return e};e.connect=function(e,r){n&&t({type:"add",payload:{id:e,portal:r}})},e.disconnect=function(e){n&&t({type:"remove",payload:{id:e}})},e.isActive=function(){return n},e.getProvider=function(){return function(){n=!0;var e=Object(d.useReducer)(r,[]),i=Object(y.a)(e,2),o=i[0],a=i[1];return t=a,p.a.createElement(p.a.Fragment,{children:o.map(function(e){return e.portal})})}}}(f||(f={}));var b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).scheduledAnimationFrame=!1,n.throttleUpdateFunc=function(){n.scheduledAnimationFrame||(n.scheduledAnimationFrame=!0,window.requestAnimationFrame(function(){n.setState(function(e){return n.scheduledAnimationFrame=!1,{tick:e.tick+1}})}))},n.onChange=function(e){t.throttleChangeTypes.includes(e.key)?n.throttleUpdateFunc():n.setState({tick:n.state.tick+1})},n.state={tick:0},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.node.on("change:*",this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.node.off("change:*",this.onChange)}},{key:"clone",value:function(e){var t=this.props.node;return"string"===typeof e.type?p.a.cloneElement(e):p.a.cloneElement(e,{node:t})}},{key:"render",value:function(){var e=this.props,t=e.graph,n=e.node,i=e.component;if(p.a.isValidElement(i))return this.clone(i);if("function"===typeof i){var o=r.c.call(i,t,n);if(p.a.isValidElement(o))return this.clone(o)}return i}}]),t}(p.a.PureComponent);b.throttleChangeTypes=["position","size"];var w,x=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"init",value:function(){var e=this;Object(h.a)(Object(u.a)(t.prototype),"init",this).call(this),this.cell.on("removed",function(){f.disconnect(e.cell.id)})}},{key:"getComponentContainer",value:function(){return!1===this.cell.prop("useForeignObject")?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(e){var n=this,i=Object(h.a)(Object(u.a)(t.prototype),"confirmUpdate",this).call(this,e);return this.handleAction(i,t.action,function(){r.j?r.j.scheduleTask(function(){n.renderReactComponent()}):n.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var e=this.getComponentContainer(),t=this.cell,n=this.graph;if(e){var r=this.graph.hook.getReactComponent(t),i=p.a.createElement(b,{graph:n,node:t,component:r});f.isActive()?f.connect(this.cell.id,v.a.createPortal(i,e)):v.a.render(i,e)}}},{key:"unmountReactComponent",value:function(){var e=this.getComponentContainer();return e&&v.a.unmountComponentAtNode(e),e}},{key:"onMouseDown",value:function(e,n,r){var i=e.target;if("input"===i.tagName.toLowerCase()){var o=i.getAttribute("type");if(null==o||["text","password","number","email","search","tel","url"].includes(o))return}Object(h.a)(Object(u.a)(t.prototype),"onMouseDown",this).call(this,e,n,r)}},{key:"unmount",value:function(){return f.disconnect(this.cell.id),this.unmountReactComponent(),Object(h.a)(Object(u.a)(t.prototype),"unmount",this).call(this),this}}]),t}(r.g);(w=x||(x={})).action="react",w.config({bootstrap:[w.action],actions:{component:w.action}}),r.g.registry.register("react-shape-view",w,!0);n.d(t,"a",function(){return l})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(644),n(693),n(723),n(745).polyfill()},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(645).enable(),self.Promise=n(647)),"undefined"!==typeof window&&n(648),Object.assign=n(227),n(649),n(685)},function(e,t,n){"use strict";var r=n(279),i=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,r._Y=null,r._Z=null}function s(e,t){return t.some(function(t){return e instanceof t})}t.disable=a,t.enable=function(e){e=e||{},o&&a();o=!0;var t=0,n=0,u={};function c(t){(e.allRejections||s(u[t].error,e.whitelist||i))&&(u[t].displayId=n++,e.onUnhandled?(u[t].logged=!0,e.onUnhandled(u[t].displayId,u[t].error)):(u[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}(u[t].displayId,u[t].error)))}r._Y=function(t){var n;2===t._V&&u[t._1]&&(u[t._1].logged?(n=t._1,u[n].logged&&(e.onHandled?e.onHandled(u[n].displayId,u[n].error):u[n].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[n].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[n].displayId+".")))):clearTimeout(u[t._1].timeout),delete u[t._1])},r._Z=function(e,n){0===e._U&&(e._1=t++,u[e._1]={displayId:null,error:n,timeout:setTimeout(c.bind(null,e._1),s(n,i)?100:2e3),logged:!1})}}},function(e,t,n){"use strict";(function(t){function n(e){i.length||(r(),!0),i[i.length]=e}e.exports=n;var r,i=[],o=0,a=1024;function s(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>a){for(var t=0,n=i.length-o;t<n;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var u="undefined"!==typeof t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;function l(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}r="function"===typeof c?function(e){var t=1,n=new c(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(s):l(s),n.requestFlush=r,n.makeRequestCallFromTimer=l}).call(this,n(105))},function(e,t,n){"use strict";var r=n(279);e.exports=r;var i=l(!0),o=l(!1),a=l(null),s=l(void 0),u=l(0),c=l("");function l(e){var t=new r(r._0);return t._V=1,t._W=e,t}r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return s;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r(function(e,t){t(n)})}return l(e)};var f=function(e){return"function"===typeof Array.from?(f=Array.from,Array.from(e)):(f=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};r.all=function(e){var t=f(e);return new r(function(e,n){if(0===t.length)return e([]);var i=t.length;function o(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?o(a,s._W):(2===s._V&&n(s._W),void s.then(function(e){o(a,e)},n))}var u=s.then;if("function"===typeof u)return void new r(u.bind(s)).then(function(e){o(a,e)},n)}t[a]=s,0===--i&&e(t)}for(var a=0;a<t.length;a++)o(a,t[a])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){f(e).forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",function(){return l}),n.d(t,"Request",function(){return y}),n.d(t,"Response",function(){return w}),n.d(t,"DOMException",function(){return C}),n.d(t,"fetch",function(){return k});var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(i.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!==typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=s(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=u(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},i.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function b(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];w.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var C=r.DOMException;try{new C}catch(E){(C=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C}function k(e,t){return new Promise(function(n,o){var a=new y(e,t);if(a.signal&&a.signal.aborted)return o(new C("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:b(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout(function(){n(new w(t,e))},0)},s.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},s.onabort=function(){setTimeout(function(){o(new C("Aborted","AbortError"))},0)},s.open(a.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(i.blob?s.responseType="blob":i.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof l?a.headers.forEach(function(e,t){s.setRequestHeader(t,e)}):Object.getOwnPropertyNames(t.headers).forEach(function(e){s.setRequestHeader(e,u(t.headers[e]))}),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)})}k.polyfill=!0,r.fetch||(r.fetch=k,r.Headers=l,r.Request=y,r.Response=w)},function(e,t,n){var r=n(650);n(680),n(681),n(682),n(683),n(684),e.exports=r},function(e,t,n){n(651),n(246),n(659),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(675),n(676),n(677),n(678),n(679);var r=n(132);e.exports=r.Symbol},function(e,t,n){"use strict";var r=n(22),i=n(82),o=n(244),a=n(75),s=n(156),u=n(155),c=n(290),l=n(291),f=n(656),h=n(52),d=n(293),p=h("isConcatSpreadable"),g=d>=51||!i(function(){var e=[];return e[p]=!1,e.concat()[0]!==e}),v=f("concat"),y=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!g||!v},{concat:function(e){var t,n,r,i,o,a=s(this),f=l(a,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],y(o)){if(h+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,h++)n in o&&c(f,h,o[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(f,h++,o)}return f.length=h,f}})},function(e,t,n){var r=n(54),i=n(284),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(59),i=n(241),o=n(288),a=n(23);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(130),i=n(155),o=n(655),a=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(242),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(82),i=n(52),o=n(293),a=i("species");e.exports=function(e){return o>=51||!r(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,n){var r=n(59);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(247),i=n(294);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){"use strict";var r=n(22),i=n(54),o=n(59),a=n(24),s=n(97),u=n(245),c=n(292),l=n(82),f=n(67),h=n(244),d=n(75),p=n(23),g=n(156),v=n(130),y=n(171),m=n(152),b=n(174),w=n(295),x=n(241),C=n(662),k=n(288),E=n(236),O=n(76),S=n(280),A=n(106),T=n(131),M=n(240),_=n(172),j=n(154),P=n(173),N=n(52),R=n(296),D=n(47),I=n(133),L=n(153),F=n(663).forEach,B=_("hidden"),z=N("toPrimitive"),V=L.set,U=L.getterFor("Symbol"),G=Object.prototype,H=i.Symbol,W=o("JSON","stringify"),q=E.f,X=O.f,$=C.f,Y=S.f,K=M("symbols"),J=M("op-symbols"),Z=M("string-to-symbol-registry"),Q=M("symbol-to-string-registry"),ee=M("wks"),te=i.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=s&&l(function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=q(G,t);r&&delete G[t],X(e,t,n),r&&e!==G&&X(G,t,r)}:X,ie=function(e,t){var n=K[e]=b(H.prototype);return V(n,{type:"Symbol",tag:e,description:t}),s||(n.description=t),n},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},ae=function(e,t,n){e===G&&ae(J,t,n),p(e);var r=y(t,!0);return p(n),f(K,r)?(n.enumerable?(f(e,B)&&e[B][r]&&(e[B][r]=!1),n=b(n,{enumerable:m(0,!1)})):(f(e,B)||X(e,B,m(1,{})),e[B][r]=!0),re(e,r,n)):X(e,r,n)},se=function(e,t){p(e);var n=v(t),r=w(n).concat(fe(n));return F(r,function(t){s&&!ue.call(n,t)||ae(e,t,n[t])}),e},ue=function(e){var t=y(e,!0),n=Y.call(this,t);return!(this===G&&f(K,t)&&!f(J,t))&&(!(n||!f(this,t)||!f(K,t)||f(this,B)&&this[B][t])||n)},ce=function(e,t){var n=v(e),r=y(t,!0);if(n!==G||!f(K,r)||f(J,r)){var i=q(n,r);return!i||!f(K,r)||f(n,B)&&n[B][r]||(i.enumerable=!0),i}},le=function(e){var t=$(v(e)),n=[];return F(t,function(e){f(K,e)||f(j,e)||n.push(e)}),n},fe=function(e){var t=e===G,n=$(t?J:v(e)),r=[];return F(n,function(e){!f(K,e)||t&&!f(G,e)||r.push(K[e])}),r};(u||(T((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=P(e);return s&&ne&&re(G,t,{configurable:!0,set:function e(n){this===G&&e.call(J,n),f(this,B)&&f(this[B],t)&&(this[B][t]=!1),re(this,t,m(1,n))}}),ie(t,e)}).prototype,"toString",function(){return U(this).tag}),T(H,"withoutSetter",function(e){return ie(P(e),e)}),S.f=ue,O.f=ae,E.f=ce,x.f=C.f=le,k.f=fe,R.f=function(e){return ie(N(e),e)},s&&(X(H.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||T(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),F(w(ee),function(e){D(e)}),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=String(e);if(f(Z,t))return Z[t];var n=H(t);return Z[t]=n,Q[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(f(Q,e))return Q[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?b(e):se(b(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:l(function(){k.f(1)})},{getOwnPropertySymbols:function(e){return k.f(g(e))}}),W)&&r({target:"JSON",stat:!0,forced:!u||l(function(){var e=H();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))})},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(d(t)||void 0!==e)&&!oe(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,W.apply(null,i)}});H.prototype[z]||A(H.prototype,z,H.prototype.valueOf),I(H,"Symbol"),j[B]=!0},function(e,t,n){var r=n(97),i=n(76),o=n(23),a=n(295);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(59);e.exports=r("document","documentElement")},function(e,t,n){var r=n(130),i=n(241).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(53),i=n(281),o=n(156),a=n(155),s=n(291),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f;return function(d,p,g,v){for(var y,m,b=o(d),w=i(b),x=r(p,g,3),C=a(w.length),k=0,E=v||s,O=t?E(d,C):n?E(d,0):void 0;C>k;k++)if((h||k in w)&&(m=x(y=w[k],k,b),e))if(t)O[k]=m;else if(m)switch(e){case 3:return!0;case 5:return y;case 6:return k;case 2:u.call(O,y)}else if(l)return!1;return f?-1:c||l?l:O}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){n(47)("asyncIterator")},function(e,t,n){"use strict";var r=n(22),i=n(97),o=n(54),a=n(67),s=n(75),u=n(76).f,c=n(286),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};c(h,l);var d=h.prototype=l.prototype;d.constructor=h;var p=d.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(f,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},function(e,t,n){n(47)("hasInstance")},function(e,t,n){n(47)("isConcatSpreadable")},function(e,t,n){n(47)("iterator")},function(e,t,n){n(47)("match")},function(e,t,n){n(47)("matchAll")},function(e,t,n){n(47)("replace")},function(e,t,n){n(47)("search")},function(e,t,n){n(47)("species")},function(e,t,n){n(47)("split")},function(e,t,n){n(47)("toPrimitive")},function(e,t,n){n(47)("toStringTag")},function(e,t,n){n(47)("unscopables")},function(e,t,n){n(133)(Math,"Math",!0)},function(e,t,n){var r=n(54);n(133)(r.JSON,"JSON",!0)},function(e,t,n){n(47)("asyncDispose")},function(e,t,n){n(47)("dispose")},function(e,t,n){n(47)("observable")},function(e,t,n){n(47)("patternMatch")},function(e,t,n){n(47)("replaceAll")},function(e,t,n){var r=n(686);e.exports=r},function(e,t,n){n(248),n(691);var r=n(132);e.exports=r.Array.from},function(e,t,n){var r=n(242),i=n(238),o=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){"use strict";var r=n(297).IteratorPrototype,i=n(174),o=n(152),a=n(133),s=n(157),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,n){var r=n(82);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var r=n(75);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(22),i=n(692);r({target:"Array",stat:!0,forced:!n(302)(function(e){Array.from(e)})},{from:i})},function(e,t,n){"use strict";var r=n(53),i=n(156),o=n(300),a=n(301),s=n(155),u=n(290),c=n(250);e.exports=function(e){var t,n,l,f,h,d,p=i(e),g="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=void 0!==y,b=c(p),w=0;if(m&&(y=r(y,v>2?arguments[2]:void 0,2)),void 0==b||g==Array&&a(b))for(n=new g(t=s(p.length));t>w;w++)d=m?y(p[w],w):p[w],u(n,w,d);else for(h=(f=b.call(p)).next,n=new g;!(l=h.call(f)).done;w++)d=m?o(f,y,[l.value,w],!0):l.value,u(n,w,d);return n.length=w,n}},function(e,t,n){var r=n(694);n(703),n(704),n(705),n(706),n(707),n(708),n(709),n(710),n(711),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),e.exports=r},function(e,t,n){n(695),n(246),n(248),n(307);var r=n(132);e.exports=r.Map},function(e,t,n){"use strict";var r=n(303),i=n(306);e.exports=r("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,n){var r=n(82);e.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,n){var r=n(75),i=n(299);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t,n){var r=n(131);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(59),i=n(76),o=n(52),a=n(97),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(130),i=n(702),o=n(157),a=n(153),s=n(249),u=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r=n(52),i=n(174),o=n(76),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){n(22)({target:"Map",stat:!0},{from:n(308)})},function(e,t,n){n(22)({target:"Map",stat:!0},{of:n(309)})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(310);r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(89),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{every:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!u(n,function(e,n){if(!r(n,e,t))return u.stop()},void 0,!0,!0).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(53),c=n(98),l=n(89),f=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),h=s(i.set);return f(n,function(e,n){r(n,e,t)&&h.call(i,e,n)},void 0,!0,!0),i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(89),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{find:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,function(e,n){if(r(n,e,t))return u.stop(n)},void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(89),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,function(e,n){if(r(n,e,t))return u.stop(e)},void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(22),i=n(31),o=n(41);r({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;o(t);var r=o(n.has),a=o(n.get),s=o(n.set);return i(e,function(e){var i=t(e);r.call(n,i)?a.call(n,i).push(e):s.call(n,i,[e])}),n}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(89),s=n(712),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(e){return u(a(o(this)),function(t,n){if(s(n,e))return u.stop()},void 0,!0,!0).stopped}})},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(22),i=n(31),o=n(41);r({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;o(t);var r=o(n.set);return i(e,function(e){r.call(n,t(e),e)}),n}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(89),s=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(e){return s(a(o(this)),function(t,n){if(n===e)return s.stop(t)},void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(53),c=n(98),l=n(89),f=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),h=s(i.set);return f(n,function(e,n){h.call(i,r(n,e,t),n)},void 0,!0,!0),i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(53),c=n(98),l=n(89),f=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),h=s(i.set);return f(n,function(e,n){h.call(i,e,r(n,e,t))},void 0,!0,!0),i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41),s=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(e){for(var t=o(this),n=a(t.set),r=0;r<arguments.length;)s(arguments[r++],n,t,!0);return t}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41),s=n(89),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(e){var t=o(this),n=s(t),r=arguments.length<2,i=r?void 0:arguments[1];if(a(e),u(n,function(n,o){r?(r=!1,i=o):i=e(i,o,n,t)},void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(89),u=n(31);r({target:"Map",proto:!0,real:!0,forced:i},{some:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,function(e,n){if(r(n,e,t))return u.stop()},void 0,!0,!0).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41);r({target:"Map",proto:!0,real:!0,forced:i},{update:function(e,t){var n=o(this),r=arguments.length;a(t);var i=n.has(e);if(!i&&r<3)throw TypeError("Updating absent value");var s=i?n.get(e):a(r>2?arguments[2]:void 0)(e,n);return n.set(e,t(s,e,n)),n}})},function(e,t,n){"use strict";n(22)({target:"Map",proto:!0,real:!0,forced:n(24)},{upsert:n(311)})},function(e,t,n){"use strict";n(22)({target:"Map",proto:!0,real:!0,forced:n(24)},{updateOrInsert:n(311)})},function(e,t,n){var r=n(724);n(726),n(727),n(728),n(730),n(731),n(732),n(733),n(734),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(743),n(744),e.exports=r},function(e,t,n){n(725),n(246),n(248),n(307);var r=n(132);e.exports=r.Set},function(e,t,n){"use strict";var r=n(303),i=n(306);e.exports=r("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,n){n(22)({target:"Set",stat:!0},{from:n(308)})},function(e,t,n){n(22)({target:"Set",stat:!0},{of:n(309)})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(729);r({target:"Set",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(23),i=n(41);e.exports=function(){for(var e=r(this),t=i(e.add),n=0,o=arguments.length;n<o;n++)t.call(e,arguments[n]);return e}},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(310);r({target:"Set",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(119),u=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{every:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!u(n,function(e){if(!r(e,e,t))return u.stop()},void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(98),c=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{difference:function(e){var t=a(this),n=new(u(t,o("Set")))(t),r=s(n.delete);return c(e,function(e){r.call(n,e)}),n}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(53),c=n(98),l=n(119),f=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{filter:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Set"))),h=s(i.add);return f(n,function(e){r(e,e,t)&&h.call(i,e)},void 0,!1,!0),i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(119),u=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{find:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,function(e){if(r(e,e,t))return u.stop(e)},void 0,!1,!0).result}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(98),c=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{intersection:function(e){var t=a(this),n=new(u(t,o("Set"))),r=s(t.has),i=s(n.add);return c(e,function(e){r.call(t,e)&&i.call(n,e)}),n}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41),s=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:function(e){var t=o(this),n=a(t.has);return!s(e,function(e){if(!0===n.call(t,e))return s.stop()}).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(251),c=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:function(e){var t=u(this),n=a(e),r=n.has;return"function"!=typeof r&&(n=new(o("Set"))(e),r=s(n.has)),!c(t,function(e){if(!1===r.call(n,e))return c.stop()},void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41),s=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:function(e){var t=o(this),n=a(t.has);return!s(e,function(e){if(!1===n.call(t,e))return s.stop()}).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(119),s=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{join:function(e){var t=o(this),n=a(t),r=void 0===e?",":String(e),i=[];return s(n,i.push,i,!1,!0),i.join(r)}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(53),c=n(98),l=n(119),f=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{map:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Set"))),h=s(i.add);return f(n,function(e){h.call(i,r(e,e,t))},void 0,!1,!0),i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(41),s=n(119),u=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{reduce:function(e){var t=o(this),n=s(t),r=arguments.length<2,i=r?void 0:arguments[1];if(a(e),u(n,function(n){r?(r=!1,i=n):i=e(i,n,n,t)},void 0,!1,!0),r)throw TypeError("Reduce of empty set with no initial value");return i}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(23),a=n(53),s=n(119),u=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{some:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,function(e){if(r(e,e,t))return u.stop()},void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(98),c=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:function(e){var t=a(this),n=new(u(t,o("Set")))(t),r=s(n.delete),i=s(n.add);return c(e,function(e){r.call(n,e)||i.call(n,e)}),n}})},function(e,t,n){"use strict";var r=n(22),i=n(24),o=n(59),a=n(23),s=n(41),u=n(98),c=n(31);r({target:"Set",proto:!0,real:!0,forced:i},{union:function(e){var t=a(this),n=new(u(t,o("Set")))(t);return c(e,s(n.add),n),n}})},function(e,t,n){(function(t){for(var r=n(746),i="undefined"===typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],u=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!u){var l=0,f=0,h=[];s=function(e){if(0===h.length){var t=r(),n=Math.max(0,1e3/60-(t-l));l=n+t,setTimeout(function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return h.push({handle:++f,callback:e,cancelled:!1}),f},u=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}}).call(this,n(105))},function(e,t,n){(function(t){(function(){var n,r,i,o,a,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(278))},function(e,t,n){"use strict";var r=n(227),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=m.prototype=new y;b.constructor=m,r(b,v.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var O=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+S(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),A(a,t,n,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(s=e[c],c);u+=A(s,t,n,l,a)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,n,l=r+S(s,c++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var _={current:null};function j(){var e=_.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=v,t.PureComponent=m,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)x.call(t,l)&&!C.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(5),i=n(227),o=n(749);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},g={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){y[e]=new v(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){y[e]=new v(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){y[e]=new v(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){y[e]=new v(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){y[e]=new v(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(g,e)||!d.call(p,e)&&(h.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,b);y[t]=new v(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,b);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,b);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=60103,k=60106,E=60107,O=60108,S=60114,A=60109,T=60110,M=60112,_=60113,j=60120,P=60115,N=60116,R=60121,D=60128,I=60129,L=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;C=B("react.element"),k=B("react.portal"),E=B("react.fragment"),O=B("react.strict_mode"),S=B("react.profiler"),A=B("react.provider"),T=B("react.context"),M=B("react.forward_ref"),_=B("react.suspense"),j=B("react.suspense_list"),P=B("react.memo"),N=B("react.lazy"),R=B("react.block"),B("react.scope"),D=B("react.opaque.id"),I=B("react.debug_trace_mode"),L=B("react.offscreen"),F=B("react.legacy_hidden")}var z,V="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function G(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function q(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case S:return"Profiler";case O:return"StrictMode";case _:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return X(e.type);case R:return X(e._render);case N:t=e._payload,e=e._init;try{return X(e(t))}catch(n){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ce(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ge,ve=(ge=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ge(e,t)})}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(me).forEach(function(e){be.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var Ce=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(Ce[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ae=null,Te=null;function Me(e){if(e=Jr(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=Qr(t),Se(e.stateNode,e.type,t))}}function _e(e){Ae?Te?Te.push(e):Te=[e]:Ae=e}function je(){if(Ae){var e=Ae,t=Te;if(Te=Ae=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Pe(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var De=Pe,Ie=!1,Le=!1;function Fe(){null===Ae&&null===Te||(Re(),je())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=Qr(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var ze=!1;if(f)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ge){ze=!1}var Ue=!1,Ge=null,He=!1,We=null,qe={onError:function(e){Ue=!0,Ge=e}};function Xe(e,t,n,r,i,o,a,s,u){Ue=!1,Ge=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if($e(e)!==e)throw Error(a(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Qe,et,tt,nt,rt=!1,it=[],ot=null,at=null,st=null,ut=new Map,ct=new Map,lt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function dt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function pt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,i,o),null!==t&&(null!==(t=Jr(t))&&et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=Kr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void nt(e.lanePriority,function(){o.unstable_runWithPriority(e.priority,function(){tt(n)})})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Jr(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function mt(){for(rt=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=Jr(e.blockedOn))&&Qe(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==ot&&vt(ot)&&(ot=null),null!==at&&vt(at)&&(at=null),null!==st&&vt(st)&&(st=null),ut.forEach(yt),ct.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,mt)))}function wt(e){function t(t){return bt(t,e)}if(0<it.length){bt(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==st&&bt(st,e),ut.forEach(t),ct.forEach(t),n=0;n<lt.length;n++)(r=lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<lt.length&&null===(n=lt[0]).blockedOn;)gt(n),null===n.blockedOn&&lt.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},kt={},Et={};function Ot(e){if(kt[e])return kt[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return kt[e]=n[t];return e}f&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var St=Ot("animationend"),At=Ot("animationiteration"),Tt=Ot("animationstart"),Mt=Ot("transitionend"),_t=new Map,jt=new Map,Pt=["abort","abort",St,"animationEnd",At,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),jt.set(r,t),_t.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Rt=8;function Dt(e){if(0!==(1&e))return Rt=15,1;if(0!==(2&e))return Rt=14,2;if(0!==(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!==(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!==(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!==(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!==(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!==(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function It(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Rt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Dt(u),i=Rt):0!==(s&=o)&&(r=Dt(s),i=Rt)}else 0!==(o=n&~a)?(r=Dt(o),i=Rt):0!==s&&(r=Dt(s),i=Rt);if(0===r)return 0;if(r=n&((0>(r=31-Ut(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Dt(t),i<=Rt)return t;Rt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ut(t)),r|=e[n],t&=~i;return r}function Lt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Ft(10,t):e;case 10:return 0===(e=Bt(192&~t))?Ft(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ut(t)]=n}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Ht|0)|0},Gt=Math.log,Ht=Math.LN2;var Wt=o.unstable_UserBlockingPriority,qt=o.unstable_runWithPriority,Xt=!0;function $t(e,t,n,r){Ie||Re();var i=Kt,o=Ie;Ie=!0;try{Ne(i,e,t,n,r)}finally{(Ie=o)||Fe()}}function Yt(e,t,n,r){qt(Wt,Kt.bind(null,e,t,n,r))}function Kt(e,t,n,r){var i;if(Xt)if((i=0===(4&t))&&0<it.length&&-1<ft.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var o=Jt(e,t,n,r);if(null===o)i&&dt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=ht(o,e,t,n,r),void it.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=pt(ot,e,t,n,r,i),!0;case"dragenter":return at=pt(at,e,t,n,r,i),!0;case"mouseover":return st=pt(st,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,pt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ct.set(o,pt(ct.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;dt(e,r)}Mr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Oe(r);if(null!==(i=Kr(i))){var o=$e(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ye(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mr(e,t,r,i,n),null}var Zt=null,Qt=null,en=null;function tn(){if(en)return en;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,un,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=an(ln),hn=i({},ln,{view:0,detail:0}),dn=an(hn),pn=i({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),gn=an(pn),vn=an(i({},pn,{dataTransfer:0})),yn=an(i({},hn,{relatedTarget:0})),mn=an(i({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=an(i({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=an(i({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function On(){return En}var Sn=an(i({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=an(i({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(i({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Mn=an(i({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=an(i({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),jn=[9,13,27,32],Pn=f&&"CompositionEvent"in window,Nn=null;f&&"documentMode"in document&&(Nn=document.documentMode);var Rn=f&&"TextEvent"in window&&!Nn,Dn=f&&(!Pn||Nn&&8<Nn&&11>=Nn),In=String.fromCharCode(32),Ln=!1;function Fn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=jr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function qn(e){kr(e,0)}function Xn(e){if(J(Zr(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(f){var Kn;if(f){var Jn="oninput"in document;if(!Jn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Jn="function"===typeof Zn.oninput}Kn=Jn}else Kn=!1;Yn=Kn&&(!document.documentMode||9<document.documentMode)}function Qn(){Hn&&(Hn.detachEvent("onpropertychange",er),Wn=Hn=null)}function er(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];if(Gn(t,Wn,e,Oe(e)),e=qn,Ie)e(t);else{Ie=!0;try{Pe(e,t)}finally{Ie=!1,Fe()}}}}function tr(e,t,n){"focusin"===e?(Qn(),Wn=n,(Hn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Qn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function rr(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ar=Object.prototype.hasOwnProperty;function sr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ar.call(t,n[r])||!or(e[n[r]],t[n[r]]))return!1;return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function lr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var hr=f&&"documentMode"in document&&11>=document.documentMode,dr=null,pr=null,gr=null,vr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==dr||dr!==Z(r)||("selectionStart"in(r=dr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=jr(pr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Pt,2);for(var mr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),br=0;br<mr.length;br++)jt.set(mr[br],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xr=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Xe.apply(this,arguments),Ue){if(!Ue)throw Error(a(198));var l=Ge;Ue=!1,Ge=null,He||(He=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,c),o=u}}}if(He)throw e=We,He=!1,We=null,e}function Er(e,t){var n=ei(t),r=e+"__bubble";n.has(r)||(Tr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Sr(e){e[Or]||(e[Or]=!0,s.forEach(function(t){xr.has(t)||Ar(t,!1,e,null),Ar(t,!0,e,null)}))}function Ar(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&xr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ei(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Tr(o,e,i,t),a.add(s))}function Tr(e,t,n,r){var i=jt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Yt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Kr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{De(e,t,n)}finally{Le=!1,Fe()}}(function(){var r=o,i=Oe(n),a=[];e:{var s=_t.get(e);if(void 0!==s){var u=fn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case St:case At:case Tt:u=mn;break;case Mt:u=Mn;break;case"scroll":u=dn;break;case"wheel":u=_n;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==h&&(null!=(g=Be(p,h))&&l.push(_r(p,g,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Kr(c)&&!c[$r])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Kr(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,g="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:Zr(u),d=null==c?s:Zr(c),(s=new l(g,p+"leave",u,n,i)).target=f,s.relatedTarget=d,g=null,Kr(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,g=l),f=g,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Pr(d))p++;for(d=0,g=h;g;g=Pr(g))d++;for(;0<p-d;)l=Pr(l),p--;for(;0<d-p;)h=Pr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Pr(l),h=Pr(h)}l=null}else l=null;null!==u&&Nr(a,s,u,l,!1),null!==c&&null!==f&&Nr(a,f,c,l,!0)}if("select"===(u=(s=r?Zr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=$n;else if(Un(s))if(Yn)v=ir;else{v=nr;var y=tr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=rr);switch(v&&(v=v(e,r))?Gn(a,v,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?Zr(r):window,e){case"focusin":(Un(y)||"true"===y.contentEditable)&&(dr=y,pr=r,gr=null);break;case"focusout":gr=pr=dr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(a,n,i);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":yr(a,n,i)}var m;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(m=tn()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,zn=!0)),0<(y=jr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:y}),m?b.data=m:null!==(m=Bn(n))&&(b.data=m))),(m=Rn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Ln=!0,In);case"textInput":return(e=t.data)===In&&Ln?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=tn(),en=Qt=Zt=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}kr(a,t)})}function _r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Be(e,n))&&r.unshift(_r(e,o,i)),null!=(o=Be(e,t))&&r.push(_r(e,o,i))),e=e.return}return r}function Pr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Nr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Be(n,o))&&a.unshift(_r(n,u,s)):i||null!=(u=Be(n,o))&&a.push(_r(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Rr(){}var Dr=null,Ir=null;function Lr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Fr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Br="function"===typeof setTimeout?setTimeout:void 0,zr="function"===typeof clearTimeout?clearTimeout:void 0;function Vr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Gr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Hr=0;var Wr=Math.random().toString(36).slice(2),qr="__reactFiber$"+Wr,Xr="__reactProps$"+Wr,$r="__reactContainer$"+Wr,Yr="__reactEvents$"+Wr;function Kr(e){var t=e[qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Gr(e);null!==e;){if(n=e[qr])return n;e=Gr(e)}return t}n=(e=n).parentNode}return null}function Jr(e){return!(e=e[qr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Qr(e){return e[Xr]||null}function ei(e){var t=e[Yr];return void 0===t&&(t=e[Yr]=new Set),t}var ti=[],ni=-1;function ri(e){return{current:e}}function ii(e){0>ni||(e.current=ti[ni],ti[ni]=null,ni--)}function oi(e,t){ti[++ni]=e.current,e.current=t}var ai={},si=ri(ai),ui=ri(!1),ci=ai;function li(e,t){var n=e.type.contextTypes;if(!n)return ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function hi(){ii(ui),ii(si)}function di(e,t,n){if(si.current!==ai)throw Error(a(168));oi(si,t),oi(ui,n)}function pi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,X(t)||"Unknown",o));return i({},n,r)}function gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ai,ci=si.current,oi(si,e),oi(ui,ui.current),!0}function vi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=pi(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,ii(ui),ii(si),oi(si,e)):ii(ui),oi(ui,n)}var yi=null,mi=null,bi=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,xi=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,ki=o.unstable_requestPaint,Ei=o.unstable_now,Oi=o.unstable_getCurrentPriorityLevel,Si=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,Ti=o.unstable_NormalPriority,Mi=o.unstable_LowPriority,_i=o.unstable_IdlePriority,ji={},Pi=void 0!==ki?ki:function(){},Ni=null,Ri=null,Di=!1,Ii=Ei(),Li=1e4>Ii?Ei:function(){return Ei()-Ii};function Fi(){switch(Oi()){case Si:return 99;case Ai:return 98;case Ti:return 97;case Mi:return 96;case _i:return 95;default:throw Error(a(332))}}function Bi(e){switch(e){case 99:return Si;case 98:return Ai;case 97:return Ti;case 96:return Mi;case 95:return _i;default:throw Error(a(332))}}function zi(e,t){return e=Bi(e),bi(e,t)}function Vi(e,t,n){return e=Bi(e),wi(e,t,n)}function Ui(){if(null!==Ri){var e=Ri;Ri=null,xi(e)}Gi()}function Gi(){if(!Di&&null!==Ni){Di=!0;var e=0;try{var t=Ni;zi(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(e+1)),wi(Si,Ui),n}finally{Di=!1}}}var Hi=x.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qi=ri(null),Xi=null,$i=null,Yi=null;function Ki(){Yi=$i=Xi=null}function Ji(e){var t=qi.current;ii(qi),e.type._context._currentValue=t}function Zi(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Qi(e,t){Xi=e,Yi=$i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function eo(e,t){if(Yi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Yi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$i){if(null===Xi)throw Error(a(308));$i=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else $i=$i.next=t;return e._currentValue}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ao(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function so(e,t,n,r){var o=e.updateQueue;to=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==a){for(h=o.baseState,s=0,f=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(u=t,d=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=g.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:to=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===f&&(c=h),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=f,Ns|=s,e.lanes=s,e.memoizedState=h}}function uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var co=(new r.Component).refs;function lo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=io(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),oo(e,o),au(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=io(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),oo(e,o),au(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=iu(),r=ou(e),i=io(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),oo(e,i),au(e,r,n)}};function ho(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,o))}function po(e,t,n){var r=!1,i=ai,o=t.contextType;return"object"===typeof o&&null!==o?o=eo(o):(i=fi(t)?ci:si.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?li(e,i):ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function vo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=co,no(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=eo(o):(o=fi(t)?ci:si.current,i.context=li(e,o)),so(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(lo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fo.enqueueReplaceState(i,i.state,null),so(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var yo=Array.isArray;function mo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===co&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function bo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=mo(e,t,n),r.return=e,r):((r=Iu(n.type,n.key,n.props,null,e.mode,r)).ref=mo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=mo(e,null,t),n.return=e,n;case k:return(t=zu(t,e.mode,n)).return=e,t}if(yo(t)||U(t))return(t=Lu(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case k:return n.key===i?l(e,t,n,r):null}if(yo(n)||U(n))return null!==i?null:f(e,t,n,r,null);bo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(yo(r)||U(r))return f(t,e=e.get(n)||null,r,i,null);bo(t,r)}return null}function g(i,a,s,u){for(var c=null,l=null,f=a,g=a=0,v=null;null!==f&&g<s.length;g++){f.index>g?(v=f,f=null):v=f.sibling;var y=d(i,f,s[g],u);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,g),null===l?c=y:l.sibling=y,l=y,f=v}if(g===s.length)return n(i,f),c;if(null===f){for(;g<s.length;g++)null!==(f=h(i,s[g],u))&&(a=o(f,a,g),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);g<s.length;g++)null!==(v=p(f,i,g,s[g],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach(function(e){return t(i,e)}),c}function v(i,s,u,c){var l=U(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,g=s,v=s=0,y=null,m=u.next();null!==g&&!m.done;v++,m=u.next()){g.index>v?(y=g,g=null):y=g.sibling;var b=d(i,g,m.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=o(b,s,v),null===f?l=b:f.sibling=b,f=b,g=y}if(m.done)return n(i,g),l;if(null===g){for(;!m.done;v++,m=u.next())null!==(m=h(i,m.value,c))&&(s=o(m,s,v),null===f?l=m:f.sibling=m,f=m);return l}for(g=r(i,g);!m.done;v++,m=u.next())null!==(m=p(g,i,v,m.value,c))&&(e&&null!==m.alternate&&g.delete(null===m.key?v:m.key),s=o(m,s,v),null===f?l=m:f.sibling=m,f=m);return e&&g.forEach(function(e){return t(i,e)}),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case C:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===E){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=mo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===E?((r=Lu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Iu(o.type,o.key,o.props,null,e.mode,u)).ref=mo(e,r,o),u.return=e,e=u)}return s(e);case k:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=zu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Bu(o,e.mode,u)).return=e,e=r),s(e);if(yo(o))return g(e,r,o,u);if(U(o))return v(e,r,o,u);if(l&&bo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(e.type)||"Component"))}return n(e,r)}}var xo=wo(!0),Co=wo(!1),ko={},Eo=ri(ko),Oo=ri(ko),So=ri(ko);function Ao(e){if(e===ko)throw Error(a(174));return e}function To(e,t){switch(oi(So,t),oi(Oo,e),oi(Eo,ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ii(Eo),oi(Eo,t)}function Mo(){ii(Eo),ii(Oo),ii(So)}function _o(e){Ao(So.current);var t=Ao(Eo.current),n=de(t,e.type);t!==n&&(oi(Oo,e),oi(Eo,n))}function jo(e){Oo.current===e&&(ii(Eo),ii(Oo))}var Po=ri(0);function No(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ro=null,Do=null,Io=!1;function Lo(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Fo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Bo(e){if(Io){var t=Do;if(t){var n=t;if(!Fo(e,t)){if(!(t=Ur(n.nextSibling))||!Fo(e,t))return e.flags=-1025&e.flags|2,Io=!1,void(Ro=e);Lo(Ro,n)}Ro=e,Do=Ur(t.firstChild)}else e.flags=-1025&e.flags|2,Io=!1,Ro=e}}function zo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ro=e}function Vo(e){if(e!==Ro)return!1;if(!Io)return zo(e),Io=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Fr(t,e.memoizedProps))for(t=Do;t;)Lo(e,t),t=Ur(t.nextSibling);if(zo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Do=Ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Do=null}}else Do=Ro?Ur(e.stateNode.nextSibling):null;return!0}function Uo(){Do=Ro=null,Io=!1}var Go=[];function Ho(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var Wo=x.ReactCurrentDispatcher,qo=x.ReactCurrentBatchConfig,Xo=0,$o=null,Yo=null,Ko=null,Jo=!1,Zo=!1;function Qo(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,i,o){if(Xo=o,$o=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wo.current=null===e||null===e.memoizedState?Sa:Aa,e=n(r,i),Zo){o=0;do{if(Zo=!1,!(25>o))throw Error(a(301));o+=1,Ko=Yo=null,t.updateQueue=null,Wo.current=Ta,e=n(r,i)}while(Zo)}if(Wo.current=Oa,t=null!==Yo&&null!==Yo.next,Xo=0,Ko=Yo=$o=null,Jo=!1,t)throw Error(a(300));return e}function na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ko?$o.memoizedState=Ko=e:Ko=Ko.next=e,Ko}function ra(){if(null===Yo){var e=$o.alternate;e=null!==e?e.memoizedState:null}else e=Yo.next;var t=null===Ko?$o.memoizedState:Ko.next;if(null!==t)Ko=t,Yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Yo=e).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===Ko?$o.memoizedState=Ko=e:Ko=Ko.next=e}return Ko}function ia(e,t){return"function"===typeof t?t(e):t}function oa(e){var t=ra(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Xo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,$o.lanes|=l,Ns|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,or(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function aa(e){var t=ra(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);or(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function sa(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xo&e)===e)&&(t._workInProgressVersionPrimary=r,Go.push(t))),e)return n(t._source);throw Go.push(t),Error(a(350))}function ua(e,t,n,r){var i=Os;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Wo.current,c=u.useState(function(){return sa(i,t,n)}),l=c[1],f=c[0];c=Ko;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,g=h.source;h=h.subscribe;var v=$o;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect(function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!or(s,e)){e=n(t._source),or(f,e)||(l(e),e=ou(v),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Ut(a),c=1<<u;r[u]|=e,a&=~c}}},[n,t,r]),u.useEffect(function(){return r(t._source,function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ou(v);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n(function(){throw o})}})},[t,r]),or(p,n)&&or(g,t)&&or(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ia,lastRenderedState:f}).dispatch=l=Ea.bind(null,$o,e),c.queue=e,c.baseQueue=null,f=sa(i,t,n),c.memoizedState=c.baseState=f),f}function ca(e,t,n){return ua(ra(),e,t,n)}function la(e){var t=na();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e}).dispatch=Ea.bind(null,$o,e),[t.memoizedState,e]}function fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$o.updateQueue)?(t={lastEffect:null},$o.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ha(e){return e={current:e},na().memoizedState=e}function da(){return ra().memoizedState}function pa(e,t,n,r){var i=na();$o.flags|=e,i.memoizedState=fa(1|t,n,void 0,void 0===r?null:r)}function ga(e,t,n,r){var i=ra();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var a=Yo.memoizedState;if(o=a.destroy,null!==r&&ea(r,a.deps))return void fa(t,n,o,r)}$o.flags|=e,i.memoizedState=fa(1|t,n,o,r)}function va(e,t){return pa(516,4,e,t)}function ya(e,t){return ga(516,4,e,t)}function ma(e,t){return ga(4,2,e,t)}function ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,2,ba.bind(null,t,e),n)}function xa(){}function Ca(e,t){var n=ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ea(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ea(e,t,n){var r=iu(),i=ou(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===$o||null!==a&&a===$o)Zo=Jo=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,or(u,s))return}catch(c){}au(e,i,r)}}var Oa={readContext:eo,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useDeferredValue:Qo,useTransition:Qo,useMutableSource:Qo,useOpaqueIdentifier:Qo,unstable_isNewReconciler:!1},Sa={readContext:eo,useCallback:function(e,t){return na().memoizedState=[e,void 0===t?null:t],e},useContext:eo,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,pa(4,2,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4,2,e,t)},useMemo:function(e,t){var n=na();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=na();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ea.bind(null,$o,e),[r.memoizedState,e]},useRef:ha,useState:la,useDebugValue:xa,useDeferredValue:function(e){var t=la(e),n=t[0],r=t[1];return va(function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}},[e]),n},useTransition:function(){var e=la(!1),t=e[0];return ha(e=function(e,t){var n=Fi();zi(98>n?98:n,function(){e(!0)}),zi(97<n?97:n,function(){var n=qo.transition;qo.transition=1;try{e(!1),t()}finally{qo.transition=n}})}.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=na();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ua(r,e,t,n)},useOpaqueIdentifier:function(){if(Io){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}(function(){throw e||(e=!0,n("r:"+(Hr++).toString(36))),Error(a(355))}),n=la(t)[1];return 0===(2&$o.mode)&&($o.flags|=516,fa(5,function(){n("r:"+(Hr++).toString(36))},void 0,null)),t}return la(t="r:"+(Hr++).toString(36)),t},unstable_isNewReconciler:!1},Aa={readContext:eo,useCallback:Ca,useContext:eo,useEffect:ya,useImperativeHandle:wa,useLayoutEffect:ma,useMemo:ka,useReducer:oa,useRef:da,useState:function(){return oa(ia)},useDebugValue:xa,useDeferredValue:function(e){var t=oa(ia),n=t[0],r=t[1];return ya(function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}},[e]),n},useTransition:function(){var e=oa(ia)[0];return[da().current,e]},useMutableSource:ca,useOpaqueIdentifier:function(){return oa(ia)[0]},unstable_isNewReconciler:!1},Ta={readContext:eo,useCallback:Ca,useContext:eo,useEffect:ya,useImperativeHandle:wa,useLayoutEffect:ma,useMemo:ka,useReducer:aa,useRef:da,useState:function(){return aa(ia)},useDebugValue:xa,useDeferredValue:function(e){var t=aa(ia),n=t[0],r=t[1];return ya(function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}},[e]),n},useTransition:function(){var e=aa(ia)[0];return[da().current,e]},useMutableSource:ca,useOpaqueIdentifier:function(){return aa(ia)[0]},unstable_isNewReconciler:!1},Ma=x.ReactCurrentOwner,_a=!1;function ja(e,t,n,r){t.child=null===e?Co(t,null,n,r):xo(t,e.child,n,r)}function Pa(e,t,n,r,i){n=n.render;var o=t.ref;return Qi(t,i),r=ta(e,t,n,r,o,i),null===e||_a?(t.flags|=1,ja(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Qa(e,t,i))}function Na(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Ru(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ra(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)?Qa(e,t,o):(t.flags|=1,(e=Du(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ra(e,t,n,r,i,o){if(null!==e&&sr(e.memoizedProps,r)&&e.ref===t.ref){if(_a=!1,0===(o&i))return t.lanes=e.lanes,Qa(e,t,o);0!==(16384&e.flags)&&(_a=!0)}return La(e,t,n,r,o)}function Da(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},du(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},du(t,e),null;t.memoizedState={baseLanes:0},du(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,du(t,r);return ja(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function La(e,t,n,r,i){var o=fi(n)?ci:si.current;return o=li(t,o),Qi(t,i),n=ta(e,t,n,r,o,i),null===e||_a?(t.flags|=1,ja(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Qa(e,t,i))}function Fa(e,t,n,r,i){if(fi(n)){var o=!0;gi(t)}else o=!1;if(Qi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),po(t,n,r),vo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=eo(c):c=li(t,c=fi(n)?ci:si.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&go(t,a,r,c),to=!1;var h=t.memoizedState;a.state=h,so(t,r,a,i),u=t.memoizedState,s!==r||h!==u||ui.current||to?("function"===typeof l&&(lo(t,n,l,r),u=t.memoizedState),(s=to||ho(t,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ro(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Wi(t.type,s),a.props=c,f=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=eo(u):u=li(t,u=fi(n)?ci:si.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||h!==u)&&go(t,a,r,u),to=!1,h=t.memoizedState,a.state=h,so(t,r,a,i);var p=t.memoizedState;s!==f||h!==p||ui.current||to?("function"===typeof d&&(lo(t,n,d,r),p=t.memoizedState),(c=to||ho(t,n,c,r,h,p,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ba(e,t,n,r,o,i)}function Ba(e,t,n,r,i,o){Ia(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&vi(t,n,!1),Qa(e,t,o);r=t.stateNode,Ma.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):ja(e,t,s,o),t.memoizedState=r.state,i&&vi(t,n,!0),t.child}function za(e){var t=e.stateNode;t.pendingContext?di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&di(0,t.context,!1),To(e,t.containerInfo)}var Va,Ua,Ga,Ha,Wa={dehydrated:null,retryLane:0};function qa(e,t,n){var r,i=t.pendingProps,o=Po.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),oi(Po,1&o),null===e?(void 0!==i.fallback&&Bo(t),e=i.children,o=i.fallback,a?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,e):"number"===typeof i.unstable_expectedLoadTime?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,t.lanes=33554432,e):((n=Fu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Ya(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Wa,i):(n=$a(e,t,i.children,n),t.memoizedState=null,n))}function Xa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Fu(t,i,0,null),n=Lu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function $a(e,t,n,r){var i=e.child;return e=i.sibling,n=Du(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Ya(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Du(a,s),null!==e?r=Du(e,r):(r=Lu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ka(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Zi(e.return,t)}function Ja(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ja(e,t,r.children,n),0!==(2&(r=Po.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n);else if(19===e.tag)Ka(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oi(Po,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===No(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ja(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===No(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ja(t,!0,n,null,o,t.lastEffect);break;case"together":Ja(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ns|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function es(e,t){if(!Io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ts(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(t.type)&&hi(),null;case 3:return Mo(),ii(ui),ii(si),Ho(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Vo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ua(t),null;case 5:jo(t);var o=Ao(So.current);if(n=t.type,null!==e&&null!=t.stateNode)Ga(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Ao(Eo.current),Vo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[qr]=t,r[Xr]=s,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(e=0;e<wr.length;e++)Er(wr[e],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":ee(r,s),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Er("invalid",r);break;case"textarea":ue(r,s),Er("invalid",r)}for(var c in ke(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Er("scroll",r));switch(n){case"input":K(r),re(r,s,!0);break;case"textarea":K(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Rr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===fe.html&&(e=he(n)),e===fe.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[qr]=t,e[Xr]=r,Va(e,t,!1,!1),t.stateNode=e,c=Ee(n,r),n){case"dialog":Er("cancel",e),Er("close",e),o=r;break;case"iframe":case"object":case"embed":Er("load",e),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)Er(wr[o],e);o=r;break;case"source":Er("error",e),o=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),o=r;break;case"details":Er("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Er("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Er("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Er("invalid",e);break;default:o=r}ke(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?xe(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ve(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Er("scroll",e):null!=f&&w(e,s,f,c))}switch(n){case"input":K(e),re(e,r,!1);break;case"textarea":K(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Rr)}Lr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ha(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Ao(So.current),Ao(Eo.current),Vo(t)?(r=t.stateNode,n=t.memoizedProps,r[qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[qr]=t,t.stateNode=r)}return null;case 13:return ii(Po),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Vo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Po.current)?0===_s&&(_s=3):(0!==_s&&3!==_s||(_s=4),null===Os||0===(134217727&Ns)&&0===(134217727&Rs)||cu(Os,As))),(r||n)&&(t.flags|=4),null);case 4:return Mo(),Ua(t),null===e&&Sr(t.stateNode.containerInfo),null;case 10:return Ji(t),null;case 17:return fi(t.type)&&hi(),null;case 19:if(ii(Po),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)es(r,!1);else{if(0!==_s||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=No(e))){for(t.flags|=64,es(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oi(Po,1&Po.current|2),t.child}e=e.sibling}null!==r.tail&&Li()>Fs&&(t.flags|=64,s=!0,es(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=No(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),es(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Io)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Li()-r.renderingStartTime>Fs&&1073741824!==n&&(t.flags|=64,s=!0,es(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Li(),n.sibling=null,t=Po.current,oi(Po,s?1&t|2:1&t),n):null;case 23:case 24:return pu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ns(e){switch(e.tag){case 1:fi(e.type)&&hi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Mo(),ii(ui),ii(si),Ho(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return jo(e),null;case 13:return ii(Po),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ii(Po),null;case 4:return Mo(),null;case 10:return Ji(e),null;case 23:case 24:return pu(),null;default:return null}}function rs(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function is(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ua=function(){},Ga=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ao(Eo.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Rr)}for(f in ke(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var c=o[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Er("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===D?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Ha=function(e,t,n,r){n!==r&&(t.flags|=4)};var os="function"===typeof WeakMap?WeakMap:Map;function as(e,t,n){(n=io(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,Gs=r),is(0,t)},n}function ss(e,t,n){(n=io(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return is(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this),is(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var us="function"===typeof WeakSet?WeakSet:Set;function cs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){_u(e,n)}else t.current=null}function ls(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Vr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Au(n,e),Su(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Wi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&uo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}uo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Lr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function hs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ds(e,t){if(mi&&"function"===typeof mi.onCommitFiberUnmount)try{mi.onCommitFiberUnmount(yi,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Au(t,n);else{r=t;try{i()}catch(o){_u(r,o)}}n=n.next}while(n!==e)}break;case 1:if(cs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){_u(t,o)}break;case 5:cs(t);break;case 4:ys(e,t)}}function ps(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function vs(e){e:{for(var t=e.return;null!==t;){if(gs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==n.onclick||(n.onclick=Rr));else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ys(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ds(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ds(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ms(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ve(n,u):"children"===s?ye(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Ls=Li(),hs(t.child,!0)),void bs(t);case 19:return void bs(t);case 17:return;case 23:case 24:return void hs(t,null!==t.memoizedState)}throw Error(a(163))}function bs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new us),t.forEach(function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Fi()?1:2:(0===eu&&(eu=Ps),0===(t=Bt(62914560&~eu))&&(t=4194304))),n=iu(),null!==(e=su(e,t))&&(Vt(e,t,n),uu(e,n))}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ws(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var xs=Math.ceil,Cs=x.ReactCurrentDispatcher,ks=x.ReactCurrentOwner,Es=0,Os=null,Ss=null,As=0,Ts=0,Ms=ri(0),_s=0,js=null,Ps=0,Ns=0,Rs=0,Ds=0,Is=null,Ls=0,Fs=1/0;function Bs(){Fs=Li()+500}var zs,Vs=null,Us=!1,Gs=null,Hs=null,Ws=!1,qs=null,Xs=90,$s=[],Ys=[],Ks=null,Js=0,Zs=null,Qs=-1,eu=0,tu=0,nu=null,ru=!1;function iu(){return 0!==(48&Es)?Li():-1!==Qs?Qs:Qs=Li()}function ou(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Fi()?1:2;if(0===eu&&(eu=Ps),0!==Hi.transition){0!==tu&&(tu=null!==Is?Is.pendingLanes:0),e=eu;var t=4186112&~tu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Fi(),0!==(4&Es)&&98===e?e=Ft(12,eu):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),eu),e}function au(e,t,n){if(50<Js)throw Js=0,Zs=null,Error(a(185));if(null===(e=su(e,t)))return null;Vt(e,t,n),e===Os&&(Rs|=t,4===_s&&cu(e,As));var r=Fi();1===t?0!==(8&Es)&&0===(48&Es)?lu(e):(uu(e,n),0===Es&&(Bs(),Ui())):(0===(4&Es)||98!==r&&99!==r||(null===Ks?Ks=new Set([e]):Ks.add(e)),uu(e,n)),Is=e}function su(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function uu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ut(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Dt(c);var f=Rt;o[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=It(e,e===Os?As:0),t=Rt,0===r)null!==n&&(n!==ji&&xi(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&xi(n)}15===t?(n=lu.bind(null,e),null===Ni?(Ni=[n],Ri=wi(Si,Gi)):Ni.push(n),n=ji):14===t?n=Vi(99,lu.bind(null,e)):n=Vi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),function e(t){Qs=-1;tu=eu=0;if(0!==(48&Es))throw Error(a(327));var n=t.callbackNode;if(Ou()&&t.callbackNode!==n)return null;var r=It(t,t===Os?As:0);if(0===r)return null;var i=r;var o=Es;Es|=16;var s=yu();Os===t&&As===i||(Bs(),gu(t,i));for(;;)try{wu();break}catch(u){vu(t,u)}Ki();Cs.current=s;Es=o;null!==Ss?i=0:(Os=null,As=0,i=_s);if(0!==(Ps&Rs))gu(t,0);else if(0!==i){if(2===i&&(Es|=64,t.hydrate&&(t.hydrate=!1,Vr(t.containerInfo)),0!==(r=Lt(t))&&(i=mu(t,r))),1===i)throw n=js,gu(t,0),cu(t,r),uu(t,Li()),n;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,i){case 0:case 1:throw Error(a(345));case 2:ku(t);break;case 3:if(cu(t,r),(62914560&r)===r&&10<(i=Ls+500-Li())){if(0!==It(t,0))break;if(((o=t.suspendedLanes)&r)!==r){iu(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Br(ku.bind(null,t),i);break}ku(t);break;case 4:if(cu(t,r),(4186112&r)===r)break;for(i=t.eventTimes,o=-1;0<r;){var c=31-Ut(r);s=1<<c,(c=i[c])>o&&(o=c),r&=~s}if(r=o,10<(r=(120>(r=Li()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xs(r/1960))-r)){t.timeoutHandle=Br(ku.bind(null,t),r);break}ku(t);break;case 5:ku(t);break;default:throw Error(a(329))}}uu(t,Li());return t.callbackNode===n?e.bind(null,t):null}.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function cu(e,t){for(t&=~Ds,t&=~Rs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(48&Es))throw Error(a(327));if(Ou(),e===Os&&0!==(e.expiredLanes&As)){var t=As,n=mu(e,t);0!==(Ps&Rs)&&(n=mu(e,t=It(e,t)))}else n=mu(e,t=It(e,0));if(0!==e.tag&&2===n&&(Es|=64,e.hydrate&&(e.hydrate=!1,Vr(e.containerInfo)),0!==(t=Lt(e))&&(n=mu(e,t))),1===n)throw n=js,gu(e,0),cu(e,t),uu(e,Li()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e),uu(e,Li()),null}function fu(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Bs(),Ui())}}function hu(e,t){var n=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=n)&&(Bs(),Ui())}}function du(e,t){oi(Ms,Ts),Ts|=t,Ps|=t}function pu(){Ts=Ms.current,ii(Ms)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,zr(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&hi();break;case 3:Mo(),ii(ui),ii(si),Ho();break;case 5:jo(r);break;case 4:Mo();break;case 13:case 19:ii(Po);break;case 10:Ji(r);break;case 23:case 24:pu()}n=n.return}Os=e,Ss=Du(e.current,null),As=Ts=Ps=t,_s=0,js=null,Ds=Rs=Ns=0}function vu(e,t){for(;;){var n=Ss;try{if(Ki(),Wo.current=Oa,Jo){for(var r=$o.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Jo=!1}if(Xo=0,Ko=Yo=$o=null,Zo=!1,ks.current=null,null===n||null===n.return){_s=1,js=t,Ss=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=As,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Po.current),h=a;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var g=h.memoizedProps;d=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!f)}}if(d){var v=h.updateQueue;if(null===v){var y=new Set;y.add(c),h.updateQueue=y}else v.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=io(-1,1);m.tag=2,oo(s,m)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new os,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=ju.bind(null,o,c,s);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==_s&&(_s=2),u=rs(u,s),h=a;do{switch(h.tag){case 3:o=u,h.flags|=4096,t&=-t,h.lanes|=t,ao(h,as(0,o,t));break e;case 1:o=u;var x=h.type,C=h.stateNode;if(0===(64&h.flags)&&("function"===typeof x.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Hs||!Hs.has(C)))){h.flags|=4096,t&=-t,h.lanes|=t,ao(h,ss(h,o,t));break e}}h=h.return}while(null!==h)}Cu(n)}catch(k){t=k,Ss===n&&null!==n&&(Ss=n=n.return);continue}break}}function yu(){var e=Cs.current;return Cs.current=Oa,null===e?Oa:e}function mu(e,t){var n=Es;Es|=16;var r=yu();for(Os===e&&As===t||gu(e,t);;)try{bu();break}catch(i){vu(e,i)}if(Ki(),Es=n,Cs.current=r,null!==Ss)throw Error(a(261));return Os=null,As=0,_s}function bu(){for(;null!==Ss;)xu(Ss)}function wu(){for(;null!==Ss&&!Ci();)xu(Ss)}function xu(e){var t=zs(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,null===t?Cu(e):Ss=t,ks.current=null}function Cu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ts(n,t,Ts)))return void(Ss=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ts)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ns(t)))return n.flags&=2047,void(Ss=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ss=t);Ss=t=e}while(null!==t);0===_s&&(_s=5)}function ku(e){var t=Fi();return zi(99,function(e,t){do{Ou()}while(null!==qs);if(0!==(48&Es))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-Ut(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==Ks&&0===(24&r)&&Ks.has(e)&&Ks.delete(e),e===Os&&(Ss=Os=null,As=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Es,Es|=32,ks.current=null,Dr=Xt,fr(s=lr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(S){u=null;break e}var f=0,h=-1,d=-1,p=0,g=0,v=s,y=null;t:for(;;){for(var m;v!==u||0!==o&&3!==v.nodeType||(h=f+o),v!==c||0!==l&&3!==v.nodeType||(d=f+l),3===v.nodeType&&(f+=v.nodeValue.length),null!==(m=v.firstChild);)y=v,v=m;for(;;){if(v===s)break t;if(y===u&&++p===o&&(h=f),y===c&&++g===l&&(d=f),null!==(m=v.nextSibling))break;y=(v=y).parentNode}v=m}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Ir={focusedElem:s,selectionRange:u},Xt=!1,nu=null,ru=!1,Vs=r;do{try{Eu()}catch(S){if(null===Vs)throw Error(a(330));_u(Vs,S),Vs=Vs.nextEffect}}while(null!==Vs);nu=null,Vs=r;do{try{for(s=e;null!==Vs;){var b=Vs.flags;if(16&b&&ye(Vs.stateNode,""),128&b){var w=Vs.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:vs(Vs),Vs.flags&=-3;break;case 6:vs(Vs),Vs.flags&=-3,ms(Vs.alternate,Vs);break;case 1024:Vs.flags&=-1025;break;case 1028:Vs.flags&=-1025,ms(Vs.alternate,Vs);break;case 4:ms(Vs.alternate,Vs);break;case 8:ys(s,u=Vs);var C=u.alternate;ps(u),null!==C&&ps(C)}Vs=Vs.nextEffect}}catch(S){if(null===Vs)throw Error(a(330));_u(Vs,S),Vs=Vs.nextEffect}}while(null!==Vs);if(x=Ir,w=lr(),b=x.focusedElem,s=x.selectionRange,w!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==s&&fr(b)&&(w=s.start,void 0===(x=s.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),u=b.textContent.length,C=Math.min(s.start,u),s=void 0===s.end?C:Math.min(s.end,u),!x.extend&&C>s&&(u=s,s=C,C=u),u=cr(b,C),o=cr(b,s),u&&o&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((w=w.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),C>s?(x.addRange(w),x.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Dr,Ir=Dr=null,e.current=n,Vs=r;do{try{for(b=e;null!==Vs;){var k=Vs.flags;if(36&k&&fs(b,Vs.alternate,Vs),128&k){w=void 0;var E=Vs.ref;if(null!==E){var O=Vs.stateNode;switch(Vs.tag){case 5:w=O;break;default:w=O}"function"===typeof E?E(w):E.current=w}}Vs=Vs.nextEffect}}catch(S){if(null===Vs)throw Error(a(330));_u(Vs,S),Vs=Vs.nextEffect}}while(null!==Vs);Vs=null,Pi(),Es=i}else e.current=n;if(Ws)Ws=!1,qs=e,Xs=t;else for(Vs=r;null!==Vs;)t=Vs.nextEffect,Vs.nextEffect=null,8&Vs.flags&&((k=Vs).sibling=null,k.stateNode=null),Vs=t;if(0===(r=e.pendingLanes)&&(Hs=null),1===r?e===Zs?Js++:(Js=0,Zs=e):Js=0,n=n.stateNode,mi&&"function"===typeof mi.onCommitFiberRoot)try{mi.onCommitFiberRoot(yi,n,void 0,64===(64&n.current.flags))}catch(S){}if(uu(e,Li()),Us)throw Us=!1,e=Gs,Gs=null,e;return 0!==(8&Es)?null:(Ui(),null)}.bind(null,e,t)),null}function Eu(){for(;null!==Vs;){var e=Vs.alternate;ru||null===nu||(0!==(8&Vs.flags)?Ze(Vs,nu)&&(ru=!0):13===Vs.tag&&ws(e,Vs)&&Ze(Vs,nu)&&(ru=!0));var t=Vs.flags;0!==(256&t)&&ls(e,Vs),0===(512&t)||Ws||(Ws=!0,Vi(97,function(){return Ou(),null})),Vs=Vs.nextEffect}}function Ou(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,zi(e,Tu)}return!1}function Su(e,t){$s.push(t,e),Ws||(Ws=!0,Vi(97,function(){return Ou(),null}))}function Au(e,t){Ys.push(t,e),Ws||(Ws=!0,Vi(97,function(){return Ou(),null}))}function Tu(){if(null===qs)return!1;var e=qs;if(qs=null,0!==(48&Es))throw Error(a(331));var t=Es;Es|=32;var n=Ys;Ys=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));_u(o,c)}}for(n=$s,$s=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));_u(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Es=t,Ui(),!0}function Mu(e,t,n){oo(e,t=as(0,t=rs(n,t),1)),t=iu(),null!==(e=su(e,1))&&(Vt(e,1,t),uu(e,t))}function _u(e,t){if(3===e.tag)Mu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Mu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){var i=ss(n,e=rs(t,e),1);if(oo(n,i),i=iu(),null!==(n=su(n,1)))Vt(n,1,i),uu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=iu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(As&n)===n&&(4===_s||3===_s&&(62914560&As)===As&&500>Li()-Ls?gu(e,0):Ds|=n),uu(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new Pu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Lu(n.children,i,o,t);case I:s=8,i|=16;break;case O:s=8,i|=1;break;case S:return(e=Nu(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=o,e;case _:return(e=Nu(13,n,t,i)).type=_,e.elementType=_,e.lanes=o,e;case j:return(e=Nu(19,n,t,i)).elementType=j,e.lanes=o,e;case L:return Fu(n,i,o,t);case F:return(e=Nu(24,n,t,i)).elementType=F,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case M:s=11;break e;case P:s=14;break e;case N:s=16,r=null;break e;case R:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Nu(23,e,r,t)).elementType=L,e.lanes=n,e}function Bu(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r){var i=t.current,o=iu(),s=ou(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=pi(n,c,u);break e}}n=u}else n=ai;return null===t.context?t.context=n:t.pendingContext=n,(t=io(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),oo(i,t),au(i,s,o),s}function Gu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}function qu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Vu(e,t,null!=n&&!0===n.hydrate),t=Nu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,no(t),e[$r]=n.current,Sr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Gu(a);s.call(e)}}Uu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new qu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Gu(a);u.call(e)}}hu(function(){Uu(t,a,e,i)})}return Gu(a)}function Yu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}zs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ui.current)_a=!0;else{if(0===(n&r)){switch(_a=!1,t.tag){case 3:za(t),Uo();break;case 5:_o(t);break;case 1:fi(t.type)&&gi(t);break;case 4:To(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;oi(qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?qa(e,t,n):(oi(Po,1&Po.current),null!==(t=Qa(e,t,n))?t.sibling:null);oi(Po,1&Po.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return Za(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),oi(Po,Po.current),r)break;return null;case 23:case 24:return t.lanes=0,Da(e,t,n)}return Qa(e,t,n)}_a=0!==(16384&e.flags)}else _a=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=li(t,si.current),Qi(t,n),i=ta(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(r)){var o=!0;gi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,no(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&lo(t,r,s,e),i.updater=fo,t.stateNode=i,i._reactInternals=t,vo(t,r,e,n),t=Ba(null,t,r,!0,o,n)}else t.tag=0,ja(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===P)return 14}return 2}(i),e=Wi(i,e),o){case 0:t=La(null,t,i,e,n);break e;case 1:t=Fa(null,t,i,e,n);break e;case 11:t=Pa(null,t,i,e,n);break e;case 14:t=Na(null,t,i,Wi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,La(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:if(za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ro(e,t),so(t,r,null,n),(r=t.memoizedState.element)===i)Uo(),t=Qa(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Do=Ur(t.stateNode.containerInfo.firstChild),Ro=t,o=Io=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Go.push(o);for(n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else ja(e,t,r,n),Uo();t=t.child}return t;case 5:return _o(t),null===e&&Bo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Fr(r,i)?s=null:null!==o&&Fr(r,o)&&(t.flags|=16),Ia(e,t),ja(e,t,s,n),t.child;case 6:return null===e&&Bo(t),null;case 13:return qa(e,t,n);case 4:return To(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ja(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(oi(qi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=or(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!ui.current){t=Qa(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=io(-1,n&-n)).tag=2,oo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),Zi(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}ja(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Qi(t,n),r=r(i=eo(i,o.unstable_observedBits)),t.flags|=1,ja(e,t,r,n),t.child;case 14:return o=Wi(i=t.type,t.pendingProps),Na(e,t,i,o=Wi(i.type,o),r,n);case 15:return Ra(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fi(r)?(e=!0,gi(t)):e=!1,Qi(t,n),po(t,r,i),vo(t,r,i,n),Ba(null,t,r,!0,e,n);case 19:return Za(e,t,n);case 23:case 24:return Da(e,t,n)}throw Error(a(156,t.tag))},qu.prototype.render=function(e){Uu(e,this._internalRoot,null,null)},qu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Uu(null,e,null,function(){t[$r]=null})},Qe=function(e){13===e.tag&&(au(e,4,iu()),Wu(e,4))},et=function(e){13===e.tag&&(au(e,67108864,iu()),Wu(e,67108864))},tt=function(e){if(13===e.tag){var t=iu(),n=ou(e);au(e,n,t),Wu(e,n)}},nt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qr(r);if(!i)throw Error(a(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Pe=fu,Ne=function(e,t,n,r,i){var o=Es;Es|=4;try{return zi(98,e.bind(null,t,n,r,i))}finally{0===(Es=o)&&(Bs(),Ui())}},Re=function(){0===(49&Es)&&(function(){if(null!==Ks){var e=Ks;Ks=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,uu(e,Li())})}Ui()}(),Ou())},De=function(e,t){var n=Es;Es|=2;try{return e(t)}finally{0===(Es=n)&&(Bs(),Ui())}};var Ku={Events:[Jr,Zr,Qr,_e,je,Ou,{current:!1}]},Ju={findFiberByHostInstance:Kr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Zu={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{yi=Qu.inject(Zu),mi=Qu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ku,t.createPortal=Yu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Es;if(0!==(48&n))return e(t);Es|=1;try{if(e)return zi(99,e.bind(null,t))}finally{Es=n,Ui()}},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(a(200));return $u(null,e,t,!0,n)},t.render=function(e,t,n){if(!Xu(t))throw Error(a(200));return $u(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(a(40));return!!e._reactRootContainer&&(hu(function(){$u(null,null,e,!1,function(){e._reactRootContainer=null,e[$r]=null})}),!0)},t.unstable_batchedUpdates=fu,t.unstable_createPortal=function(e,t){return Yu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $u(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(750)},function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(h,0))},i=function(e,t){f=setTimeout(e,t)},o=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,C=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();w=e+b;try{y(!0,e)?C.postMessage(null):(v=!1,y=null)}catch(n){throw C.postMessage(null),n}}else v=!1},r=function(e){y=e,v||(v=!0,C.postMessage(null))},i=function(e,n){m=d(function(){e(t.unstable_now())},n)},o=function(){p(m),m=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],M=1,_=null,j=3,P=!1,N=!1,R=!1;function D(e){for(var t=E(T);null!==t;){if(null===t.callback)O(T);else{if(!(t.startTime<=e))break;O(T),t.sortIndex=t.expirationTime,k(A,t)}t=E(T)}}function I(e){if(R=!1,D(e),!N)if(null!==E(A))N=!0,r(L);else{var t=E(T);null!==t&&i(I,t.startTime-e)}}function L(e,n){N=!1,R&&(R=!1,o()),P=!0;var r=j;try{for(D(n),_=E(A);null!==_&&(!(_.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=_.callback;if("function"===typeof a){_.callback=null,j=_.priorityLevel;var s=a(_.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?_.callback=s:_===E(A)&&O(A),D(n)}else O(A);_=E(A)}if(null!==_)var u=!0;else{var c=E(T);null!==c&&i(I,c.startTime-n),u=!1}return u}finally{_=null,j=r,P=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||P||(N=!0,r(L))},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return E(A)},t.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:M++,callback:n,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,k(T,e),null===E(A)&&e===E(T)&&(R?o():R=!0,i(I,a-s))):(e.sortIndex=u,k(A,e),N||P||(N=!0,r(L))),e},t.unstable_wrapCallback=function(e){var t=j;return function(){var n=j;j=t;try{return e.apply(this,arguments)}finally{j=n}}}},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":k(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":k(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var g=r.normalize(p,h,e,t);g&&(e=g[0],t=g[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var v="undefined"==typeof e?"undefined":k(e),y="undefined"==typeof t?"undefined":k(t),m="undefined"!==v||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),b="undefined"!==y||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!m&&b)n(new o(p,t));else if(!b&&m)n(new a(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===v&&null!==e&&null!==t)if(d.filter(function(t){return t.lhs===e}).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new s(p,w,new a(void 0,e[w]))):l(e[w],t[w],n,r,p,w,d);for(;w<t.length;)n(new s(p,w,new o(void 0,t[w++])))}else{var x=Object.keys(e),C=Object.keys(t);x.forEach(function(i,o){var a=C.indexOf(i);a>=0?(l(e[i],t[i],n,r,p,i,d),C=u(C,a)):l(e[i],void 0,n,r,p,i,d)}),C.forEach(function(e){l(void 0,t[e],n,r,p,e,d)})}d.length=d.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,function(e){e&&r.push(e)},n),r.length?r:void 0}function h(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=u(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function d(e){return"color: "+S[e].color+"; font-weight: bold"}function p(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach(function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}(e);n.log.apply(n,["%c "+S[t].text,d(t)].concat(E(r)))}):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function g(e,t,n,r){switch("undefined"==typeof e?"undefined":k(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,E(n)):e[r];case"function":return e(t);default:return e}}function v(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,o=void 0===i?function(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}(t):i,a=t.collapsed,s=t.colors,u=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach(function(i,f){var h=i.started,d=i.startedTime,v=i.action,y=i.prevState,m=i.error,b=i.took,w=i.nextState,C=e[f+1];C&&(w=C.prevState,b=C.started-h);var k=r(v),E="function"==typeof a?a(function(){return w},v,i):a,O=x(d),S=s.title?"color: "+s.title(k)+";":"",A=["color: gray; font-weight: lighter;"];A.push(S),t.timestamp&&A.push("color: gray; font-weight: lighter;"),t.duration&&A.push("color: gray; font-weight: lighter;");var T=o(k,O,b);try{E?s.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(A)):n.groupCollapsed(T):s.title&&l?n.group.apply(n,["%c "+T].concat(A)):n.group(T)}catch(e){n.log(T)}var M=g(u,k,[y],"prevState"),_=g(u,k,[k],"action"),j=g(u,k,[m,y],"error"),P=g(u,k,[w],"nextState");if(M)if(s.prevState){var N="color: "+s.prevState(y)+"; font-weight: bold";n[M]("%c prev state",N,y)}else n[M]("prev state",y);if(_)if(s.action){var R="color: "+s.action(k)+"; font-weight: bold";n[_]("%c action    ",R,k)}else n[_]("action    ",k);if(m&&j)if(s.error){var D="color: "+s.error(m,y)+"; font-weight: bold;";n[j]("%c error     ",D,m)}else n[j]("error     ",m);if(P)if(s.nextState){var I="color: "+s.nextState(w)+"; font-weight: bold";n[P]("%c next state",I,w)}else n[P]("next state",w);c&&p(y,w,n,E);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},A,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof o&&!o(n,c))return e(c);var l={};u.push(l),l.started=C.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(a)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=C.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof s?s(n,c):t.diff;if(v(u,Object.assign({},t,{diff:h})),u.length=0,l.error)throw l.error;return f}}}}var m,b,w=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},x=function(e){return w(e.getHours(),2)+":"+w(e.getMinutes(),2)+":"+w(e.getSeconds(),2)+"."+w(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},O=[];m="object"===("undefined"==typeof e?"undefined":k(e))&&e?e:"undefined"!=typeof window?window:{},(b=m.DeepDiff)&&O.push(function(){"undefined"!=typeof b&&m.DeepDiff===f&&(m.DeepDiff=b,b=void 0)}),n(i,r),n(o,r),n(a,r),n(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&l(e,t,function(r){n&&!n(e,t,r)||h(e,t,r)})},enumerable:!0},applyChange:{value:h,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=u(t,n)}return t}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof b},enumerable:!0},noConflict:{value:function(){return O&&(O.forEach(function(e){e()}),O=null),f},enumerable:!0}});var S={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},A={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?y()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=A,t.createLogger=y,t.logger=T,t.default=T,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(105))},function(e,t,n){var r=n(753);e.exports={Graph:r.Graph,json:n(855),alg:n(856),version:r.version}},function(e,t,n){e.exports={Graph:n(252),version:n(854)}},function(e,t,n){var r=n(313),i=4;e.exports=function(e){return r(e,i)}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(177),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(177);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(177);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(177);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(176);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(176),i=n(253),o=n(254),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(158),i=n(768),o=n(78),a=n(315),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},function(e,t,n){var r=n(135),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(769),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(84)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(772),i=n(176),o=n(253);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(773),i=n(774),o=n(775),a=n(776),s=n(777);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(178);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(178),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(178),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(178),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},function(e,t,n){var r=n(179);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(179);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(179);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(179);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(159),i=n(107);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(121),i=n(90),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(121),i=n(256),o=n(90),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(318)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(159),i=n(122);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(78),i=n(184),o=n(791),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(159),i=n(259);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(159),i=n(323);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(325),i=n(323),o=n(122);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(120)(n(84),"DataView");e.exports=r},function(e,t,n){var r=n(120)(n(84),"Promise");e.exports=r},function(e,t,n){var r=n(120)(n(84),"WeakMap");e.exports=r},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(261),i=n(800),o=n(801),a=n(802),s=n(328),u="[object Boolean]",c="[object Date]",l="[object Map]",f="[object Number]",h="[object RegExp]",d="[object Set]",p="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",C="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",S="[object Uint32Array]";e.exports=function(e,t,n){var A=e.constructor;switch(t){case v:return r(e);case u:case c:return new A(+e);case y:return i(e,n);case m:case b:case w:case x:case C:case k:case E:case O:case S:return s(e,n);case l:return new A;case f:case p:return new A(e);case h:return o(e);case d:return new A;case g:return a(e)}}},function(e,t,n){var r=n(261);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(135),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(804),i=n(183),o=n(257),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(137),i=n(90),o="[object Map]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t,n){var r=n(806),i=n(183),o=n(257),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(137),i=n(90),o="[object Set]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}},function(e,t,n){var r=n(99);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){var r=n(186);e.exports=function(e,t){var n=[];return r(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}},function(e,t,n){var r=n(811),i=n(819),o=n(340);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(175),i=n(335),o=1,a=2;e.exports=function(e,t,n,s){var u=n.length,c=u,l=!s;if(null==e)return!c;for(e=Object(e);u--;){var f=n[u];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<c;){var h=(f=n[u])[0],d=e[h],p=f[1];if(l&&f[2]){if(void 0===d&&!(h in e))return!1}else{var g=new r;if(s)var v=s(d,p,h,e,t,g);if(!(void 0===v?i(p,d,o|a,s,g):v))return!1}}return!0}},function(e,t,n){var r=n(175),i=n(336),o=n(816),a=n(818),s=n(137),u=n(45),c=n(136),l=n(161),f=1,h="[object Arguments]",d="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,y,m){var b=u(e),w=u(t),x=b?d:s(e),C=w?d:s(t),k=(x=x==h?p:x)==p,E=(C=C==h?p:C)==p,O=x==C;if(O&&c(e)){if(!c(t))return!1;b=!0,k=!1}if(O&&!k)return m||(m=new r),b||l(e)?i(e,t,n,v,y,m):o(e,t,x,n,v,y,m);if(!(n&f)){var S=k&&g.call(e,"__wrapped__"),A=E&&g.call(t,"__wrapped__");if(S||A){var T=S?e.value():e,M=A?t.value():t;return m||(m=new r),y(T,M,n,v,m)}}return!!O&&(m||(m=new r),a(e,t,n,v,y,m))}},function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(135),i=n(327),o=n(134),a=n(336),s=n(817),u=n(265),c=1,l=2,f="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Map]",g="[object Number]",v="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",C=r?r.prototype:void 0,k=C?C.valueOf:void 0;e.exports=function(e,t,n,r,C,E,O){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case f:case h:case g:return o(+e,+t);case d:return e.name==t.name&&e.message==t.message;case v:case m:return e==t+"";case p:var S=s;case y:var A=r&c;if(S||(S=u),e.size!=t.size&&!A)return!1;var T=O.get(e);if(T)return T==t;r|=l,O.set(e,t);var M=a(S(e),S(t),r,C,E,O);return O.delete(e),M;case b:if(k)return k.call(e)==k.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t,n){var r=n(324),i=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,u){var c=n&i,l=r(e),f=l.length;if(f!=r(t).length&&!c)return!1;for(var h=f;h--;){var d=l[h];if(!(c?d in t:o.call(t,d)))return!1}var p=u.get(e),g=u.get(t);if(p&&g)return p==t&&g==e;var v=!0;u.set(e,t),u.set(t,e);for(var y=c;++h<f;){var m=e[d=l[h]],b=t[d];if(a)var w=c?a(b,m,d,t,e,u):a(m,b,d,e,t,u);if(!(void 0===w?m===b||s(m,b,n,a,u):w)){v=!1;break}y||(y="constructor"==d)}if(v&&!y){var x=e.constructor,C=t.constructor;x!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof C&&C instanceof C)&&(v=!1)}return u.delete(e),u.delete(t),v}},function(e,t,n){var r=n(339),i=n(107);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(335),i=n(821),o=n(342),a=n(266),s=n(339),u=n(340),c=n(162),l=1,f=2;e.exports=function(e,t){return a(e)&&s(t)?u(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,l|f)}}},function(e,t,n){var r=n(187);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(823),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t,n){var r=n(824),i=500;e.exports=function(e){var t=r(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(254),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},function(e,t,n){var r=n(135),i=n(189),o=n(45),a=n(138),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(344),i=n(828),o=n(266),a=n(162);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t,n){var r=n(187);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){var r=n(258),i=n(137),o=n(160),a=n(45),s=n(99),u=n(136),c=n(184),l=n(161),f="[object Map]",h="[object Set]",d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if(t==f||t==h)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t){e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},function(e,t){e.exports=function(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}},function(e,t,n){var r=n(258),i=n(137),o=n(99),a=n(834),s=n(835),u="[object Map]",c="[object Set]";e.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?s(e):e.length;var t=i(e);return t==u||t==c?e.size:r(e).length}},function(e,t,n){var r=n(121),i=n(45),o=n(90),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},function(e,t,n){var r=n(836),i=n(837),o=n(838);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(344)("length");e.exports=r},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,n){var r=n(255),i=n(330),o=n(263),a=n(100),s=n(185),u=n(45),c=n(136),l=n(158),f=n(78),h=n(161);e.exports=function(e,t,n){var d=u(e),p=d||c(e)||h(e);if(t=a(t,4),null==n){var g=e&&e.constructor;n=p?d?new g:[]:f(e)&&l(g)?i(s(e)):{}}return(p?r:o)(e,function(e,r,i){return t(n,e,r,i)}),n}},function(e,t,n){var r=n(267),i=n(190),o=n(845),a=n(353),s=i(function(e){return o(r(e,1,a,!0))});e.exports=s},function(e,t,n){var r=n(135),i=n(160),o=n(45),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(262),i=n(316),o=n(123),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){var n=800,r=16,i=Date.now;e.exports=function(e){var t=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(337),i=n(846),o=n(850),a=n(338),s=n(851),u=n(265),c=200;e.exports=function(e,t,n){var l=-1,f=i,h=e.length,d=!0,p=[],g=p;if(n)d=!1,f=o;else if(h>=c){var v=t?null:s(e);if(v)return u(v);d=!1,f=a,g=new r}else g=t?[]:p;e:for(;++l<h;){var y=e[l],m=t?t(y):y;if(y=n||0!==y?y:0,d&&m===m){for(var b=g.length;b--;)if(g[b]===m)continue e;t&&g.push(m),p.push(y)}else f(g,m,n)||(g!==p&&g.push(m),p.push(y))}return p}},function(e,t,n){var r=n(847);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(352),i=n(848),o=n(849);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e){return e!==e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(326),i=n(852),o=n(265),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(189);e.exports=function(e,t){return r(t,function(t){return e[t]})}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(77),i=n(252);function o(e){return r.map(e.nodes(),function(t){var n=e.node(t),i=e.parent(t),o={v:t};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}function a(e){return r.map(e.edges(),function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i})}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o(e),edges:a(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),r.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},function(e,t,n){e.exports={components:n(857),dijkstra:n(355),dijkstraAll:n(858),findCycles:n(859),floydWarshall:n(860),isAcyclic:n(861),postorder:n(862),preorder:n(863),prim:n(864),tarjan:n(357),topsort:n(358)}},function(e,t,n){var r=n(77);e.exports=function(e){var t,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,t.push(i),r.each(e.successors(i),o),r.each(e.predecessors(i),o))}return r.each(e.nodes(),function(e){t=[],o(e),t.length&&i.push(t)}),i}},function(e,t,n){var r=n(355),i=n(77);e.exports=function(e,t,n){return i.transform(e.nodes(),function(i,o){i[o]=r(e,o,t,n)},{})}},function(e,t,n){var r=n(77),i=n(357);e.exports=function(e){return r.filter(i(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},function(e,t,n){var r=n(77);e.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},function(e,t,n){var r=n(358);e.exports=function(e){try{r(e)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(e,t,n){var r=n(359);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(359);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(77),i=n(252),o=n(356);e.exports=function(e,t){var n,a=new i,s={},u=new o;function c(e){var r=e.v===n?e.w:e.v,i=u.priority(r);if(void 0!==i){var o=t(e);o<i&&(s[r]=n,u.decrease(r,o))}}if(0===e.nodeCount())return a;r.each(e.nodes(),function(e){u.add(e,Number.POSITIVE_INFINITY),a.setNode(e)}),u.decrease(e.nodes()[0],0);var l=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(n).forEach(c)}return a}},function(e,t,n){"use strict";var r=n(38),i=n(903),o=n(906),a=n(907),s=n(61).normalizeRanks,u=n(909),c=n(61).removeEmptyRanks,l=n(910),f=n(911),h=n(912),d=n(913),p=n(922),g=n(61),v=n(83).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?g.time:g.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return function(e){var t=new v({multigraph:!0,compound:!0}),n=S(e.graph());return t.setGraph(r.merge({},m,O(n,y),r.pick(n,b))),r.forEach(e.nodes(),function(n){var i=S(e.node(n));t.setNode(n,r.defaults(O(i,w),x)),t.setParent(n,e.parent(n))}),r.forEach(e.edges(),function(n){var i=S(e.edge(n));t.setEdge(n,r.merge({},k,O(i,C),r.pick(i,E)))}),t}(e)});n("  runLayout",function(){!function(e,t){t("    makeSpaceForEdgeLabels",function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(e)}),t("    removeSelfEdges",function(){!function(e){r.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}(e)}),t("    acyclic",function(){i.run(e)}),t("    nestingGraph.run",function(){l.run(e)}),t("    rank",function(){a(g.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){!function(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};g.addDummyNode(e,"edge-proxy",o,"_ep")}})}(e)}),t("    removeEmptyRanks",function(){c(e)}),t("    nestingGraph.cleanup",function(){l.cleanup(e)}),t("    normalizeRanks",function(){s(e)}),t("    assignRankMinMax",function(){!function(e){var t=0;r.forEach(e.nodes(),function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=r.max(t,i.maxRank))}),e.graph().maxRank=t}(e)}),t("    removeEdgeLabelProxies",function(){!function(e){r.forEach(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}(e)}),t("    normalize.run",function(){o.run(e)}),t("    parentDummyChains",function(){u(e)}),t("    addBorderSegments",function(){f(e)}),t("    order",function(){d(e)}),t("    insertSelfEdges",function(){!function(e){var t=g.buildLayerMatrix(e);r.forEach(t,function(t){var n=0;r.forEach(t,function(t,i){var o=e.node(t);o.order=i+n,r.forEach(o.selfEdges,function(t){g.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:i+ ++n,e:t.e,label:t.label},"_se")}),delete o.selfEdges})})}(e)}),t("    adjustCoordinateSystem",function(){h.adjust(e)}),t("    position",function(){p(e)}),t("    positionSelfEdges",function(){!function(e){r.forEach(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(e)}),t("    removeBorderNodes",function(){!function(e){r.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(r.last(n.borderLeft)),s=e.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}(e)}),t("    normalize.undo",function(){o.undo(e)}),t("    fixupEdgeLabelCoords",function(){!function(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(e)}),t("    undoCoordinateSystem",function(){h.undo(e)}),t("    translateGraph",function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=e.graph(),s=a.marginx||0,u=a.marginy||0;function c(e){var r=e.x,a=e.y,s=e.width,u=e.height;t=Math.min(t,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}r.forEach(e.nodes(),function(t){c(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.has(n,"x")&&c(n)}),t-=s,i-=u,r.forEach(e.nodes(),function(n){var r=e.node(n);r.x-=t,r.y-=i}),r.forEach(e.edges(),function(n){var o=e.edge(n);r.forEach(o.points,function(e){e.x-=t,e.y-=i}),r.has(o,"x")&&(o.x-=t),r.has(o,"y")&&(o.y-=i)}),a.width=n-t+s,a.height=o-i+u}(e)}),t("    assignNodeIntersects",function(){!function(e){r.forEach(e.edges(),function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(a,r))})}(e)}),t("    reversePoints",function(){!function(e){r.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}(e)}),t("    acyclic.undo",function(){i.undo(e)})}(t,n)}),n("  updateInputGraph",function(){!function(e,t){r.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(e.edges(),function(n){var i=e.edge(n),o=t.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],x={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function O(e,t){return r.mapValues(r.pick(e,t),Number)}function S(e){var t={};return r.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}},function(e,t,n){var r=n(313),i=1,o=4;e.exports=function(e){return r(e,i|o)}},function(e,t,n){var r=n(190),i=n(134),o=n(191),a=n(122),s=Object.prototype,u=s.hasOwnProperty,c=r(function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(r=1);++n<r;)for(var l=t[n],f=a(l),h=-1,d=f.length;++h<d;){var p=f[h],g=e[p];(void 0===g||i(g,s[p])&&!u.call(e,p))&&(e[p]=l[p])}return e});e.exports=c},function(e,t,n){var r=n(869)(n(870));e.exports=r},function(e,t,n){var r=n(100),i=n(99),o=n(107);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var u=r(n,3);t=o(t),n=function(e){return u(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[u?t[c]:c]:void 0}}},function(e,t,n){var r=n(352),i=n(100),o=n(871),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(e,i(t,3),u)}},function(e,t,n){var r=n(360);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},function(e,t,n){var r=n(78),i=n(138),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){var r=n(264),i=n(333),o=n(122);e.exports=function(e,t){return null==e?e:r(e,i(t),o)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(181),i=n(263),o=n(100);e.exports=function(e,t){var n={};return t=o(t,3),i(e,function(e,i,o){r(n,i,t(e,i,o))}),n}},function(e,t,n){var r=n(268),i=n(877),o=n(123);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(879),i=n(883)(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){var r=n(175),i=n(362),o=n(264),a=n(880),s=n(78),u=n(122),c=n(363);e.exports=function e(t,n,l,f,h){t!==n&&o(n,function(o,u){if(h||(h=new r),s(o))a(t,n,u,l,e,f,h);else{var d=f?f(c(t,u),o,u+"",t,n,h):void 0;void 0===d&&(d=o),i(t,u,d)}},u)}},function(e,t,n){var r=n(362),i=n(319),o=n(328),a=n(320),s=n(329),u=n(160),c=n(45),l=n(353),f=n(136),h=n(158),d=n(78),p=n(881),g=n(161),v=n(363),y=n(882);e.exports=function(e,t,n,m,b,w,x){var C=v(e,n),k=v(t,n),E=x.get(k);if(E)r(e,n,E);else{var O=w?w(C,k,n+"",e,t,x):void 0,S=void 0===O;if(S){var A=c(k),T=!A&&f(k),M=!A&&!T&&g(k);O=k,A||T||M?c(C)?O=C:l(C)?O=a(C):T?(S=!1,O=i(k,!0)):M?(S=!1,O=o(k,!0)):O=[]:p(k)||u(k)?(O=C,u(C)?O=y(C):d(C)&&!h(C)||(O=s(k))):S=!1}S&&(x.set(k,O),b(O,k,m,w,x),x.delete(k)),r(e,n,O)}}},function(e,t,n){var r=n(121),i=n(185),o=n(90),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);e.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(e,t,n){var r=n(159),i=n(122);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(190),i=n(191);e.exports=function(e){return r(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}},function(e,t,n){var r=n(268),i=n(364),o=n(123);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t,n){var r=n(268),i=n(100),o=n(364);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},function(e,t,n){var r=n(84);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(888),i=n(891)(function(e,t){return null==e?{}:r(e,t)});e.exports=i},function(e,t,n){var r=n(889),i=n(342);e.exports=function(e,t){return r(e,t,function(t,n){return i(e,n)})}},function(e,t,n){var r=n(187),i=n(890),o=n(188);e.exports=function(e,t,n){for(var a=-1,s=t.length,u={};++a<s;){var c=t[a],l=r(e,c);n(l,c)&&i(u,o(c,e),l)}return u}},function(e,t,n){var r=n(180),i=n(188),o=n(182),a=n(78),s=n(162);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,l=(t=i(t,e)).length,f=l-1,h=e;null!=h&&++c<l;){var d=s(t[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(c!=f){var g=h[d];void 0===(p=u?u(g,d,h):void 0)&&(p=a(g)?g:o(t[c+1])?[]:{})}r(h,d,p),h=h[d]}return e}},function(e,t,n){var r=n(361),i=n(350),o=n(351);e.exports=function(e){return o(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(893)();e.exports=r},function(e,t,n){var r=n(894),i=n(191),o=n(360);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,i,o){for(var a=-1,s=r(n((t-e)/(i||1)),0),u=Array(s);s--;)u[o?s:++a]=e,e+=i;return u}},function(e,t,n){var r=n(267),i=n(896),o=n(190),a=n(191),s=o(function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])});e.exports=s},function(e,t,n){var r=n(189),i=n(187),o=n(100),a=n(348),s=n(897),u=n(183),c=n(898),l=n(123),f=n(45);e.exports=function(e,t,n){t=t.length?r(t,function(e){return f(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[l];var h=-1;t=r(t,u(o));var d=a(e,function(e,n,i){return{criteria:r(t,function(t){return t(e)}),index:++h,value:e}});return s(d,function(e,t){return c(e,t,n)})}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(899);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,u=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(138);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,a=r(e),s=void 0!==t,u=null===t,c=t===t,l=r(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}},function(e,t,n){var r=n(341),i=0;e.exports=function(e){var t=++i;return r(e)+t}},function(e,t,n){var r=n(180),i=n(902);e.exports=function(e,t){return i(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}},function(e,t,n){"use strict";var r=n(38),i=n(904);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?i(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},i={};return r.forEach(e.nodes(),function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(e.outEdges(a),function(e){r.has(n,e.w)?t.push(e):o(e.w)}),delete n[a])}),t}(e);r.forEach(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))})},undo:function(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},function(e,t,n){var r=n(38),i=n(83).Graph,o=n(905);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new i,a=0,s=0;r.forEach(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),r.forEach(e.edges(),function(e){var r=n.edge(e.v,e.w)||0,i=t(e),o=r+i;n.setEdge(e.v,e.w,o),s=Math.max(s,n.node(e.v).out+=i),a=Math.max(a,n.node(e.w).in+=i)});var c=r.range(s+a+3).map(function(){return new o}),l=a+1;return r.forEach(n.nodes(),function(e){u(c,l,n.node(e))}),{graph:n,buckets:c,zeroIdx:l}}(e,t||a),c=function(e,t,n){var r,i=[],o=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)s(e,t,n,r);for(;r=o.dequeue();)s(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){i=i.concat(s(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(t){return e.outEdges(t.v,t.w)}),!0)};var a=r.constant(1);function s(e,t,n,i,o){var a=o?[]:void 0;return r.forEach(e.inEdges(i.v),function(r){var i=e.edge(r),s=e.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,u(t,n,s)}),r.forEach(e.outEdges(i.v),function(r){var i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,u(t,n,a)}),e.removeNode(i.v),a}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(38),i=n(61);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),function(t){!function(e,t){var n,r,o,a=t.v,s=e.node(a).rank,u=t.w,c=e.node(u).rank,l=t.name,f=e.edge(t),h=f.labelRank;if(c===s+1)return;for(e.removeEdge(t),o=0,++s;s<c;++o,++s)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:s},n=i.addDummyNode(e,"edge",r,"_d"),s===h&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(a,n,{weight:f.weight},l),0===o&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,u,{weight:f.weight},l)}(e,t)})},undo:function(e){r.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)})}}},function(e,t,n){"use strict";var r=n(192).longestPath,i=n(365),o=n(908);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":s(e);break;case"tight-tree":!function(e){r(e),i(e)}(e);break;case"longest-path":a(e);break;default:s(e)}};var a=r;function s(e){o(e)}},function(e,t,n){"use strict";var r=n(38),i=n(365),o=n(192).slack,a=n(192).longestPath,s=n(83).alg.preorder,u=n(83).alg.postorder,c=n(61).simplify;function l(e){e=c(e),a(e);var t,n=i(e);for(d(n),f(n,e);t=p(n);)v(n,e,t,g(n,e,t))}function f(e,t){var n=u(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=h(e,t,n)}(e,t,n)})}function h(e,t,n){var i=e.node(n).parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,r.forEach(t.nodeEdges(n),function(r){var a,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var f=c===o,h=t.edge(r).weight;if(s+=f?h:-h,a=n,u=l,e.hasEdge(a,u)){var d=e.edge(n,l).cutvalue;s+=f?-d:d}}}),s}function d(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,n,i,o,a){var s=i;var u=t.node(o);n[o]=!0;r.forEach(t.neighbors(o),function(a){r.has(n,a)||(i=e(t,n,i,a,o))});u.low=s;u.lim=i++;a?u.parent=a:delete u.parent;return i}(e,{},1,t)}function p(e){return r.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,t,n){var i=n.v,a=n.w;t.hasEdge(i,a)||(i=n.w,a=n.v);var s=e.node(i),u=e.node(a),c=s,l=!1;s.lim>u.lim&&(c=u,l=!0);var f=r.filter(t.edges(),function(t){return l===y(e,e.node(t.v),c)&&l!==y(e,e.node(t.w),c)});return r.minBy(f,function(e){return o(t,e)})}function v(e,t,n,i){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(i.v,i.w,{}),d(e),f(e,t),function(e,t){var n=r.find(e.nodes(),function(e){return!t.node(e).parent}),i=s(e,n);i=i.slice(1),r.forEach(i,function(n){var r=e.node(n).parent,i=t.edge(n,r),o=!1;i||(i=t.edge(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)})}(e,t)}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=l,l.initLowLimValues=d,l.initCutValues=f,l.calcCutValue=h,l.leaveEdge=p,l.enterEdge=g,l.exchangeEdges=v},function(e,t,n){var r=n(38);e.exports=function(e){var t=function(e){var t={},n=0;return r.forEach(e.children(),function i(o){var a=n;r.forEach(e.children(o),i),t[o]={low:a,lim:n++}}),t}(e);r.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=function(e,t,n,r){var i,o,a=[],s=[],u=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>u||c>t[i].lim));o=i,i=r;for(;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,t,i.v,i.w),a=o.path,s=o.lca,u=0,c=a[u],l=!0;n!==i.w;){if(r=e.node(n),l){for(;(c=a[u])!==s&&e.node(c).maxRank<r.rank;)u++;c===s&&(l=!1)}if(!l){for(;u<a.length-1&&e.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}e.setParent(n,c),n=e.successors(n)[0]}})}},function(e,t,n){var r=n(38),i=n(61);e.exports={run:function(e){var t=i.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),function(n){!function n(i,o){var a=e.children(i);a&&a.length&&r.forEach(a,function(e){n(e,o+1)}),t[i]=o}(n,1)}),t}(e),o=r.max(r.values(n))-1,a=2*o+1;e.graph().nestingRoot=t,r.forEach(e.edges(),function(t){e.edge(t).minlen*=a});var s=function(e){return r.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}(e)+1;r.forEach(e.children(),function(u){!function e(t,n,o,a,s,u,c){var l=t.children(c);if(!l.length)return void(c!==n&&t.setEdge(n,c,{weight:0,minlen:o}));var f=i.addBorderNode(t,"_bt");var h=i.addBorderNode(t,"_bb");var d=t.node(c);t.setParent(f,c);d.borderTop=f;t.setParent(h,c);d.borderBottom=h;r.forEach(l,function(r){e(t,n,o,a,s,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?a:2*a,g=l!==d?1:s-u[c]+1;t.setEdge(f,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,h,{weight:p,minlen:g,nestingEdge:!0})});t.parent(c)||t.setEdge(n,f,{weight:0,minlen:s+u[c]})}(e,t,a,s,o,n,u)}),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}}},function(e,t,n){var r=n(38),i=n(61);function o(e,t,n,r,o,a){var s={width:0,height:0,rank:a,borderType:t},u=o[t][a-1],c=i.addDummyNode(e,"border",s,n);o[t][a]=c,e.setParent(c,r),u&&e.setEdge(u,c,{weight:1})}e.exports=function(e){r.forEach(e.children(),function t(n){var i=e.children(n);var a=e.node(n);i.length&&r.forEach(i,t);if(r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)o(e,"borderLeft","_bl",n,a,s),o(e,"borderRight","_br",n,a,s)}})}},function(e,t,n){"use strict";var r=n(38);function i(e){r.forEach(e.nodes(),function(t){o(e.node(t))}),r.forEach(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||i(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),function(t){a(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.forEach(n.points,a),r.has(n,"y")&&a(n)})}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),function(t){s(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.forEach(n.points,s),r.has(n,"x")&&s(n)})}(e),i(e))}}},function(e,t,n){"use strict";var r=n(38),i=n(914),o=n(915),a=n(916),s=n(920),u=n(921),c=n(83).Graph,l=n(61);function f(e,t,n){return r.map(t,function(t){return s(e,t,n)})}function h(e,t){var n=new c;r.forEach(e,function(e){var i=e.graph().root,o=a(e,i,n,t);r.forEach(o.vs,function(t,n){e.node(t).order=n}),u(e,n,o.vs)})}function d(e,t){r.forEach(t,function(t){r.forEach(t,function(t,n){e.node(t).order=n})})}e.exports=function(e){var t=l.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),a=f(e,r.range(t-1,-1,-1),"outEdges"),s=i(e);d(e,s);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){h(p%2?n:a,p%4>=2),s=l.buildLayerMatrix(e);var v=o(e,s);v<c&&(g=0,u=r.cloneDeep(s),c=v)}d(e,u)}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e){var t={},n=r.filter(e.nodes(),function(t){return!e.children(t).length}),i=r.max(r.map(n,function(t){return e.node(t).rank})),o=r.map(r.range(i+1),function(){return[]});var a=r.sortBy(n,function(t){return e.node(t).rank});return r.forEach(a,function n(i){if(!r.has(t,i)){t[i]=!0;var a=e.node(i);o[a.rank].push(i),r.forEach(e.successors(i),n)}}),o}},function(e,t,n){"use strict";var r=n(38);function i(e,t,n){for(var i=r.zipObject(n,r.map(n,function(e,t){return t})),o=r.flatten(r.map(t,function(t){return r.sortBy(r.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=r.map(new Array(s),function(){return 0}),c=0;return r.forEach(o.forEach(function(e){var t=e.pos+a;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;c+=e.weight*n})),c}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(38),i=n(917),o=n(918),a=n(919);e.exports=function e(t,n,s,u){var c=t.children(n);var l=t.node(n);var f=l?l.borderLeft:void 0;var h=l?l.borderRight:void 0;var d={};f&&(c=r.filter(c,function(e){return e!==f&&e!==h}));var p=i(t,c);r.forEach(p,function(n){if(t.children(n.v).length){var i=e(t,n.v,s,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,a=i,r.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a});var g=o(p,s);!function(e,t){r.forEach(e,function(e){e.vs=r.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}(g,d);var v=a(g,u);if(f&&(v.vs=r.flatten([f,v.vs,h],!0),t.predecessors(f).length)){var y=t.node(t.predecessors(f)[0]),m=t.node(t.predecessors(h)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+m.order)/(v.weight+2),v.weight+=2}return v}},function(e,t,n){var r=n(38);e.exports=function(e,t){return r.map(t,function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}})}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e,t){var n={};return r.forEach(e,function(e,t){var i=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),r.forEach(t.edges(),function(e){var t=n[e.v],i=n[e.w];r.isUndefined(t)||r.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))}),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function i(t){return function(n){n.in.push(t),0===--n.indegree&&e.push(n)}}for(;e.length;){var o=e.pop();t.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(t,function(e){return!e.merged}),function(e){return r.pick(e,["vs","i","barycenter","weight"])})}(r.filter(n,function(e){return!e.indegree}))}},function(e,t,n){var r=n(38),i=n(61);function o(e,t,n){for(var i;t.length&&(i=r.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}e.exports=function(e,t){var n=i.partition(e,function(e){return r.has(e,"barycenter")}),a=n.lhs,s=r.sortBy(n.rhs,function(e){return-e.i}),u=[],c=0,l=0,f=0;a.sort((h=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:h?t.i-e.i:e.i-t.i})),f=o(u,s,f),r.forEach(a,function(e){f+=e.vs.length,u.push(e.vs),c+=e.barycenter*e.weight,l+=e.weight,f=o(u,s,f)});var h;var d={vs:r.flatten(u,!0)};l&&(d.barycenter=c/l,d.weight=l);return d}},function(e,t,n){var r=n(38),i=n(83).Graph;e.exports=function(e,t,n){var o=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return e.node(t)});return r.forEach(e.nodes(),function(i){var s=e.node(i),u=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(i),a.setParent(i,u||o),r.forEach(e[n](i),function(t){var n=t.v===i?t.w:t.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:e.edge(t).weight+s})}),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),a}},function(e,t,n){var r=n(38);e.exports=function(e,t,n){var i,o={};r.forEach(n,function(n){for(var r,a,s=e.parent(n);s;){if((r=e.parent(s))?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void t.setEdge(a,s);s=r}})}},function(e,t,n){"use strict";var r=n(38),i=n(61),o=n(923).positionX;e.exports=function(e){(function(e){var t=i.buildLayerMatrix(e),n=e.graph().ranksep,o=0;r.forEach(t,function(t){var i=r.max(r.map(t,function(t){return e.node(t).height}));r.forEach(t,function(t){e.node(t).y=o+i/2}),o+=i+n})})(e=i.asNonCompoundGraph(e)),r.forEach(o(e),function(t,n){e.node(n).x=t})}},function(e,t,n){"use strict";var r=n(38),i=n(83).Graph,o=n(61);function a(e,t){var n={};return r.reduce(t,function(t,i){var o=0,a=0,s=t.length,c=r.last(i);return r.forEach(i,function(t,l){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),h=f?e.node(f).order:s;(f||t===c)&&(r.forEach(i.slice(a,l+1),function(t){r.forEach(e.predecessors(t),function(r){var i=e.node(r),a=i.order;!(a<o||h<a)||i.dummy&&e.node(t).dummy||u(n,r,t)})}),a=l+1,o=h)}),i}),n}function s(e,t){var n={};function i(t,i,o,a,s){var c;r.forEach(r.range(i,o),function(i){c=t[i],e.node(c).dummy&&r.forEach(e.predecessors(c),function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>s)&&u(n,t,c)})})}return r.reduce(t,function(t,n){var o,a=-1,s=0;return r.forEach(n,function(r,u){if("border"===e.node(r).dummy){var c=e.predecessors(r);c.length&&(o=e.node(c[0]).order,i(n,s,u,a,o),s=u,a=o)}i(n,s,n.length,o,t.length)}),n}),n}function u(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function c(e,t,n){if(t>n){var i=t;t=n,n=i}return r.has(e[t],n)}function l(e,t,n,i){var o={},a={},s={};return r.forEach(t,function(e){r.forEach(e,function(e,t){o[e]=e,a[e]=e,s[e]=t})}),r.forEach(t,function(e){var t=-1;r.forEach(e,function(e){var u=i(e);if(u.length)for(var l=((u=r.sortBy(u,function(e){return s[e]})).length-1)/2,f=Math.floor(l),h=Math.ceil(l);f<=h;++f){var d=u[f];a[e]===e&&t<s[d]&&!c(n,e,d)&&(a[d]=e,a[e]=o[e]=o[d],t=s[d])}})}),{root:o,align:a}}function f(e,t,n,o,a){var s={},u=function(e,t,n,o){var a=new i,s=e.graph(),u=function(e,t,n){return function(i,o,a){var s,u=i.node(o),c=i.node(a),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(l+=n?s:-s),s=0,l+=(u.dummy?t:e)/2,l+=(c.dummy?t:e)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(l+=n?s:-s),s=0,l}}(s.nodesep,s.edgesep,o);return r.forEach(t,function(t){var i;r.forEach(t,function(t){var r=n[t];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(u(e,t,i),s||0))}i=t})}),a}(e,t,n,a),c=a?"borderLeft":"borderRight";function l(e,t){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return l(function(e){s[e]=u.inEdges(e).reduce(function(e,t){return Math.max(e,s[t.v]+u.edge(t))},0)},u.predecessors.bind(u)),l(function(t){var n=u.outEdges(t).reduce(function(e,t){return Math.min(e,s[t.w]-u.edge(t))},Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[t]=Math.max(s[t],n))},u.successors.bind(u)),r.forEach(o,function(e){s[e]=s[n[e]]}),s}function h(e,t){return r.minBy(r.values(t),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(t,function(t,r){var o=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+o,n),i=Math.min(t-o,i)}),n-i})}function d(e,t){var n=r.values(t),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,u=n+a,c=e[u];if(c!==t){var l=r.values(c);(s="l"===a?i-r.min(l):o-r.max(l))&&(e[u]=r.mapValues(c,function(e){return e+s}))}})})}function p(e,t){return r.mapValues(e.ul,function(n,i){if(t)return e[t.toLowerCase()][i];var o=r.sortBy(r.map(e,i));return(o[1]+o[2])/2})}e.exports={positionX:function(e){var t,n=o.buildLayerMatrix(e),i=r.merge(a(e,n),s(e,n)),u={};r.forEach(["u","d"],function(o){t="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(t=r.map(t,function(e){return r.values(e).reverse()}));var a=("u"===o?e.predecessors:e.successors).bind(e),s=l(e,t,i,a),c=f(e,t,s.root,s.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(e){return-e})),u[o+n]=c})});var c=h(e,u);return d(u,c),p(u,e.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:f,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(e,t,n){var r=n(38),i=n(61),o=n(83).Graph;e.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),r.forEach(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),r.forEach(t,function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},function(e,t){e.exports="0.8.5"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var a=n(930),s=n(68),u=n(101),c=n(49),l=n(370),f=n(931),h=n(938),d=n(940),p=n(124),g=n(163),v=n(943),y=n(944),m=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!==typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=u.BindingScopeEnum.Transient;else if(t.defaultScope!==u.BindingScopeEnum.Singleton&&t.defaultScope!==u.BindingScopeEnum.Transient&&t.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!==typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!==typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,s=o([t,n],r).map(function(e){return f.getBindingDictionary(e)}),u=f.getBindingDictionary(a);return s.forEach(function(e){var t;t=u,e.traverse(function(e,n){n.forEach(function(e){t.add(e.serviceIdentifier,e.clone())})})}),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){var t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],a=t(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){var n,r=(n=t.id,function(e){return e.moduleId===n});e._bindingDictionary.removeByCondition(r)})},e.prototype.bind=function(e){var t=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(e,t);return this._bindingDictionary.add(e,n),new d.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+g.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=f.createMockRequest(this,e,t,n);r=i.some(function(e){return e.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(e,t){return t(e)},n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,u.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,u.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach(function(e){t.applyMiddleware(e)}),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,o){var a=null,u={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(a=this._middleware(u))||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=f.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),h.resolve(n)}},e}();t.Container=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(101),i=n(124),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n(932),i=n(68),o=n(101),a=n(49),s=n(371),u=n(163),c=n(933),l=n(85),f=n(934),h=n(935),d=n(937),p=n(373);function g(e){return e._bindingDictionary}function v(e,t,n,o,a){var s=y(n.container,a.serviceIdentifier),c=[];return s.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof a.serviceIdentifier&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=y(n.container,a.serviceIdentifier)),c=t?s:s.filter(function(e){var t=new d.Request(e.serviceIdentifier,n,o,e,a);return e.constraint(t)}),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var a=u.getServiceIdentifierAsString(e),s=i.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;var a=u.getServiceIdentifierAsString(e),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=u.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s)}}(a.serviceIdentifier,c,a,n.container),c}function y(e,t){var n=[],r=g(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=y(e.parent,t)),n}t.getBindingDictionary=g,t.plan=function(e,t,n,r,g,y,m,b){void 0===b&&(b=!1);var w=new c.Context(t),x=function(e,t,n,r,i,o){var s=e?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new l.Metadata(s,n),c=new p.Target(t,r,n,u);if(void 0!==i){var f=new l.Metadata(i,o);c.metadata.push(f)}return c}(n,r,g,"",y,m);try{return function e(t,n,r,a,s,u){var c,l;if(null===s){c=v(t,n,a,null,u),l=new d.Request(r,a,null,c,u);var p=new f.Plan(a,l);a.addPlan(p)}else c=v(t,n,a,s,u),l=s.addChildRequest(u.serviceIdentifier,c,u);c.forEach(function(n){var r=null;if(u.isArray())r=l.addChildRequest(n.serviceIdentifier,n,u);else{if(n.cache)return;r=l}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var s=h.getDependencies(t,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(t,n.implementationType);if(s.length<c){var f=i.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(f)}}s.forEach(function(n){e(t,!1,n.serviceIdentifier,a,r,n)})}})}(e,b,g,w,null,x),w}catch(C){throw s.isStackOverflowExeption(C)&&w.plan&&u.circularDependencyToException(w.plan.rootRequest),C}},t.createMockRequest=function(e,t,n,r){var i=new p.Target(o.TargetTypeEnum.Variable,"",t,new l.Metadata(n,r)),a=new c.Context(e);return new d.Request(t,a,null,[],i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0;t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(124),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;var r=function(){return function(e,t){this.parentContext=e,this.rootRequest=t}}();t.Plan=r},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n(372),o=n(68),a=n(101),s=n(49),u=n(163);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n(373);function l(e,t,n,i){var s=e.getConstructorMetadata(n),u=s.compilerGeneratedMetadata;if(void 0===u){var l=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(l)}var d=s.userGeneratedMetadata,p=Object.keys(d),g=0===n.length&&p.length>0,v=p.length>n.length,y=function(e,t,n,r,i){for(var o=[],a=0;a<i;a++){var s=a,u=f(s,e,t,n,r);null!==u&&o.push(u)}return o}(i,t,u,d,g||v?p.length:n.length),m=function e(t,n){var i=t.getPropertiesMetadata(n);var o=[];var s=Object.keys(i);for(var u=0,l=s;u<l.length;u++){var f=l[u],d=i[f],p=h(i[f]),g=p.targetName||f,v=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,g,v);y.metadata=d,o.push(y)}var m=Object.getPrototypeOf(n.prototype).constructor;if(m!==Object){var b=e(t,m);o=r(r([],o),b)}return o}(e,n);return r(r([],y),m)}function f(e,t,n,r,s){var u=s[e.toString()]||[],l=h(u),f=!0!==l.unmanaged,d=r[e],p=l.inject||l.multiInject;if((d=p||d)instanceof i.LazyServiceIdentifer&&(d=d.unwrap()),f){var g=d===Object,v=d===Function;if(!t&&(g||v||void 0===d)){var y=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(y)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,l.targetName,d);return m.metadata=u,m}return null}function h(e){var t={};return e.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return l(e,u.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=l(t,u.getFunctionName(r),r,!0),o=i.map(function(e){return e.metadata.filter(function(e){return e.key===s.UNMANAGED_TAG})}),a=[].concat.apply([],o).length,c=i.length-a;return c>0?c:e(t,r)}return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(124),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(68),i=n(101),o=n(371),a=n(163),s=n(939),u=function(e,t,n){try{return n()}catch(i){throw o.isStackOverflowExeption(i)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):i}},c=function e(t){return function(n){n.parentContext.setCurrentRequest(n);var o=n.bindings,c=n.childRequests,l=n.target&&n.target.isArray(),f=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(l&&f)return c.map(function(n){return e(t)(n)});var h=null;if(!n.target.isOptional()||0!==o.length){var d=o[0],p=d.scope===i.BindingScopeEnum.Singleton,g=d.scope===i.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(g&&null!==t&&t.has(d.id))return t.get(d.id);if(d.type===i.BindingTypeEnum.ConstantValue)h=d.cache,d.activated=!0;else if(d.type===i.BindingTypeEnum.Function)h=d.cache,d.activated=!0;else if(d.type===i.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===i.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=u("toDynamicValue",d.serviceIdentifier,function(){return d.dynamicValue(n.parentContext)});else if(d.type===i.BindingTypeEnum.Factory&&null!==d.factory)h=u("toFactory",d.serviceIdentifier,function(){return d.factory(n.parentContext)});else if(d.type===i.BindingTypeEnum.Provider&&null!==d.provider)h=u("toProvider",d.serviceIdentifier,function(){return d.provider(n.parentContext)});else{if(d.type!==i.BindingTypeEnum.Instance||null===d.implementationType){var v=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+v)}h=s.resolveInstance(d.implementationType,c,e(t))}return"function"===typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),g&&null!==t&&!t.has(d.id)&&t.set(d.id,h),h}}};t.resolve=function(e){return c(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n(68),o=n(101),a=n(49);t.resolveInstance=function(e,t,n){var s,u,c=null;if(t.length>0){var l=t.filter(function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument}).map(n);u=l,c=function(e,t,n){var r=t.filter(function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty}),i=r.map(n);return r.forEach(function(t,n){var r;r=t.target.name.value();var o=i[n];e[r]=o}),e}(c=new((s=e).bind.apply(s,r([void 0],u))),t,n)}else c=new e;return function(e,t){if(Reflect.hasMetadata(a.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,e);try{t[n.value]()}catch(r){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,r.message))}}}(e,c),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n(68),i=n(101),o=n(941),a=n(374),s=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!==typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},e}();t.BindingToSyntax=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(942),i=n(269),o=n(270),a=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(101),i=n(374),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var r=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n(68),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(n,r){var i=n.filter(function(t){return!e(t)});i.length>0?t._map.set(r,i):t._map.delete(r)})},e.prototype.hasKey=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(e,n){e.forEach(function(e){return t.add(n,e.clone())})}),t},e.prototype.traverse=function(e){this._map.forEach(function(t,n){e(n,t)})},e}();t.Lookup=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(124),i=function(){return function(e){this.id=r.id(),this.registry=e}}();t.ContainerModule=i;var o=function(){return function(e){this.id=r.id(),this.registry=e}}();t.AsyncContainerModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n(68),i=n(49);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(85),i=n(108);t.tagged=function(e,t){return function(n,o,a){var s=new r.Metadata(e,t);"number"===typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n(49),i=n(85),o=n(108);t.named=function(e){return function(t,n,a){var s=new i.Metadata(r.NAMED_TAG,e);"number"===typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n(49),i=n(85),o=n(108);t.optional=function(){return function(e,t,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"===typeof n?o.tagParameter(e,t,n,a):o.tagProperty(e,t,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n(49),i=n(85),o=n(108);t.unmanaged=function(){return function(e,t,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n(49),i=n(85),o=n(108);t.multiInject=function(e){return function(t,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"===typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n(49),i=n(85),o=n(108);t.targetName=function(e){return function(t,n,a){var s=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,a,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n(68),i=n(49),o=n(85);t.postConstruct=function(){return function(e,t,n){var a=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,e.constructor)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0;t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return e.bind(n).toService(t)})}}}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function i(e,t,n,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return i&&!Reflect.hasMetadata(r,this,t)&&Reflect.defineMetadata(r,n(),this,t),Reflect.hasMetadata(r,this,t)?Reflect.getMetadata(r,this,t):n()},set:function(e){Reflect.defineMetadata(r,e,this,t)}})}t.makePropertyInjectDecorator=function(e,t){return function(n){return function(r,o){i(r,o,function(){return e.get(n)},t)}}},t.makePropertyInjectNamedDecorator=function(e,t){return function(n,r){return function(o,a){i(o,a,function(){return e.getNamed(n,r)},t)}}},t.makePropertyInjectTaggedDecorator=function(e,t){return function(n,r,o){return function(a,s){i(a,s,function(){return e.getTagged(n,r,o)},t)}}},t.makePropertyMultiInjectDecorator=function(e,t){return function(n){return function(r,o){i(r,o,function(){return e.getAll(n)},t)}}}},function(e,t,n){var r=n(369);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},function(e,t){e.exports=function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e}},function(e,t,n){e.exports=function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r*Math.max(1,Math.abs(i),Math.abs(a))};var r=n(391)},function(e,t){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]}},function(e,t,n){e.exports=n(271)},function(e,t,n){e.exports=n(395)},function(e,t,n){e.exports=n(396)},function(e,t){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}},function(e,t){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},function(e,t){e.exports=function(e,t,n){var r=Math.cos(n),i=Math.sin(n),o=t[0],a=t[1];return e[0]=o*r-a*i,e[1]=o*i+a*r,e}},function(e,t){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},function(e,t){e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},function(e,t,n){e.exports=n(397)},function(e,t,n){e.exports=n(398)},function(e,t,n){e.exports=n(399)},function(e,t,n){e.exports=n(400)},function(e,t){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},function(e,t){e.exports=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}},function(e,t){e.exports=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}},function(e,t){e.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}},function(e,t,n){e.exports=function(e,t,n,i,o,a){var s,u;t||(t=2);n||(n=0);u=i?Math.min(i*t+n,e.length):e.length;for(s=n;s<u;s+=t)r[0]=e[s],r[1]=e[s+1],o(r,r,a),e[s]=r[0],e[s+1]=r[1];return e};var r=n(392)()},function(e,t){e.exports=function(e,t,n){var r=t[0]*t[0]+t[1]*t[1];if(r>n*n){var i=Math.sqrt(r);e[0]=t[0]/i*n,e[1]=t[1]/i*n}else e[0]=t[0],e[1]=t[1];return e}},function(e,t,n){var r,i,o;i=[n(39)],void 0===(o="function"===typeof(r=function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var a=r.length;a;)e.event.fixHooks[r[--a]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],u,!1);else this.onmousewheel=u;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],u,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function u(r){var i=r||window.event,a=o.call(arguments,1),u=0,f=0,h=0,d=0,p=0,g=0;if((r=e.event.fix(i)).type="mousewheel","detail"in i&&(h=-1*i.detail),"wheelDelta"in i&&(h=i.wheelDelta),"wheelDeltaY"in i&&(h=i.wheelDeltaY),"wheelDeltaX"in i&&(f=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(f=-1*h,h=0),u=0===h?f:h,"deltaY"in i&&(h=-1*i.deltaY,u=h),"deltaX"in i&&(f=i.deltaX,0===h&&(u=-1*f)),0!==h||0!==f){if(1===i.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,h*=v,f*=v}else if(2===i.deltaMode){var y=e.data(this,"mousewheel-page-height");u*=y,h*=y,f*=y}if(d=Math.max(Math.abs(h),Math.abs(f)),(!n||d<n)&&(n=d,l(i,d)&&(n/=40)),l(i,d)&&(u/=40,f/=40,h/=40),u=Math[u>=1?"floor":"ceil"](u/n),f=Math[f>=1?"floor":"ceil"](f/n),h=Math[h>=1?"floor":"ceil"](h/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();p=r.clientX-m.left,g=r.clientY-m.top}return r.deltaX=f,r.deltaY=h,r.deltaFactor=n,r.offsetX=p,r.offsetY=g,r.deltaMode=0,a.unshift(r,u,f,h),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function c(){n=null}function l(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";var r=n(993);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case a:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case y:case v:case c:return e;default:return t}}case o:return t}}}function k(e){return C(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||C(e)===f},t.isConcurrentMode=k,t.isContextConsumer=function(e){return C(e)===l},t.isContextProvider=function(e){return C(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return C(e)===d},t.isFragment=function(e){return C(e)===a},t.isLazy=function(e){return C(e)===y},t.isMemo=function(e){return C(e)===v},t.isPortal=function(e){return C(e)===o},t.isProfiler=function(e){return C(e)===u},t.isStrictMode=function(e){return C(e)===s},t.isSuspense=function(e){return C(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===s||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===w||e.$$typeof===x||e.$$typeof===m)},t.typeOf=C},,function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}}]]);
//# sourceMappingURL=5.891eb9d7.chunk.js.map